{
  "SchemaVersion": 2,
  "CreatedAt": "2024-04-05T05:03:52.365134465+02:00",
  "ArtifactName": "docker.io/vaultwarden/server@sha256:6f6ec220ed300e1a11475a91d270985915083512f9fb60c1c25783faaa66eef5",
  "ArtifactType": "container_image",
  "Metadata": {
    "OS": {
      "Family": "alpine",
      "Name": "3.19.1"
    },
    "ImageID": "sha256:3a35757512686098465e2bfc65fa9f98cb57ad46880b6159e90088bd0f897442",
    "DiffIDs": [
      "sha256:d4fc045c9e3a848011de66f34b81f052d4f2c15a17bb196d637e526349601820",
      "sha256:5b5cf273cf838b057b9ae4763e47d30b1737eba2058b16dbb18f083604916d53",
      "sha256:539c8e2cdddc04f67c8cd482923a98aa16b69dd83e6e4113fe31498414abae2a",
      "sha256:de49a76412cae98befb22c04c83f6f926dd1e01f9114cbdf9a60825cfd7b2b7e",
      "sha256:c9a5dd8fad27a0fb5a331277cf36839a6ed8c45a81d3f101cf89496a241d4aab",
      "sha256:42dea03db35eb7f813bb793ee9ff88c18beacc80f24207cdfa5c948f5868bd8f"
    ],
    "RepoDigests": [
      "vaultwarden/server@sha256:6f6ec220ed300e1a11475a91d270985915083512f9fb60c1c25783faaa66eef5"
    ],
    "ImageConfig": {
      "architecture": "amd64",
      "created": "2024-03-02T18:51:06.230365776Z",
      "history": [
        {
          "created": "2024-01-27T00:30:48.624602109Z",
          "created_by": "/bin/sh -c #(nop) ADD file:37a76ec18f9887751cd8473744917d08b7431fc4085097bb6a09d81b41775473 in / "
        },
        {
          "created": "2024-01-27T00:30:48.743965523Z",
          "created_by": "/bin/sh -c #(nop)  CMD [\"/bin/sh\"]",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "ENV ROCKET_PROFILE=release ROCKET_ADDRESS=0.0.0.0 ROCKET_PORT=80 SSL_CERT_DIR=/etc/ssl/certs",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "RUN /bin/sh -c mkdir /data \u0026\u0026     apk --no-cache add         ca-certificates         curl         openssl         tzdata # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "VOLUME [/data]",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "EXPOSE map[80/tcp:{}]",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "EXPOSE map[3012/tcp:{}]",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:34.126402375Z",
          "created_by": "WORKDIR /",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T13:18:40.844834166Z",
          "created_by": "COPY docker/healthcheck.sh /healthcheck.sh # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2024-03-02T13:18:40.953640528Z",
          "created_by": "COPY docker/start.sh /start.sh # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2024-03-02T13:18:41.99963171Z",
          "created_by": "COPY /web-vault ./web-vault # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2024-03-02T18:51:06.230365776Z",
          "created_by": "COPY /app/target/final/vaultwarden . # buildkit",
          "comment": "buildkit.dockerfile.v0"
        },
        {
          "created": "2024-03-02T18:51:06.230365776Z",
          "created_by": "HEALTHCHECK \u0026{[\"CMD\" \"/healthcheck.sh\"] \"1m0s\" \"10s\" \"0s\" \"0s\" '\\x00'}",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        },
        {
          "created": "2024-03-02T18:51:06.230365776Z",
          "created_by": "CMD [\"/start.sh\"]",
          "comment": "buildkit.dockerfile.v0",
          "empty_layer": true
        }
      ],
      "os": "linux",
      "rootfs": {
        "type": "layers",
        "diff_ids": [
          "sha256:d4fc045c9e3a848011de66f34b81f052d4f2c15a17bb196d637e526349601820",
          "sha256:5b5cf273cf838b057b9ae4763e47d30b1737eba2058b16dbb18f083604916d53",
          "sha256:539c8e2cdddc04f67c8cd482923a98aa16b69dd83e6e4113fe31498414abae2a",
          "sha256:de49a76412cae98befb22c04c83f6f926dd1e01f9114cbdf9a60825cfd7b2b7e",
          "sha256:c9a5dd8fad27a0fb5a331277cf36839a6ed8c45a81d3f101cf89496a241d4aab",
          "sha256:42dea03db35eb7f813bb793ee9ff88c18beacc80f24207cdfa5c948f5868bd8f"
        ]
      },
      "config": {
        "Cmd": [
          "/start.sh"
        ],
        "Healthcheck": {
          "Test": [
            "CMD",
            "/healthcheck.sh"
          ],
          "Interval": 60000000000,
          "Timeout": 10000000000
        },
        "Env": [
          "PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",
          "ROCKET_PROFILE=release",
          "ROCKET_ADDRESS=0.0.0.0",
          "ROCKET_PORT=80",
          "SSL_CERT_DIR=/etc/ssl/certs"
        ],
        "Labels": {
          "org.opencontainers.image.created": "2024-03-02T18:41:49+00:00",
          "org.opencontainers.image.description": "Unofficial Bitwarden compatible server written in Rust - 1.30.5",
          "org.opencontainers.image.documentation": "https://github.com/dani-garcia/vaultwarden/wiki",
          "org.opencontainers.image.licenses": "AGPL-3.0-only",
          "org.opencontainers.image.revision": "d0c22b9fc90ae52aedbbccdafe9915bd0bdb0d84",
          "org.opencontainers.image.source": "https://github.com/dani-garcia/vaultwarden",
          "org.opencontainers.image.url": "https://github.com/dani-garcia/vaultwarden",
          "org.opencontainers.image.version": "1.30.5"
        },
        "Volumes": {
          "/data": {}
        },
        "WorkingDir": "/",
        "ExposedPorts": {
          "3012/tcp": {},
          "80/tcp": {}
        },
        "ArgsEscaped": true
      }
    }
  },
  "Results": [
    {
      "Target": "docker.io/vaultwarden/server@sha256:6f6ec220ed300e1a11475a91d270985915083512f9fb60c1c25783faaa66eef5 (alpine 3.19.1)",
      "Class": "os-pkgs",
      "Type": "alpine",
      "Vulnerabilities": [
        {
          "VulnerabilityID": "CVE-2024-25629",
          "PkgID": "c-ares@1.24.0-r1",
          "PkgName": "c-ares",
          "PkgIdentifier": {
            "PURL": "pkg:apk/alpine/c-ares@1.24.0-r1?arch=x86_64\u0026distro=3.19.1"
          },
          "InstalledVersion": "1.24.0-r1",
          "FixedVersion": "1.27.0-r0",
          "Status": "fixed",
          "Layer": {
            "Digest": "sha256:d3022b214ff383c654ec22cc853d14d276c026a0b3ece053cca781fde786f1fe",
            "DiffID": "sha256:5b5cf273cf838b057b9ae4763e47d30b1737eba2058b16dbb18f083604916d53"
          },
          "PrimaryURL": "https://avd.aquasec.com/nvd/cve-2024-25629",
          "DataSource": {
            "ID": "alpine",
            "Name": "Alpine Secdb",
            "URL": "https://secdb.alpinelinux.org/"
          },
          "Title": "c-ares: Out of bounds read in ares__read_line()",
          "Description": "c-ares is a C library for asynchronous DNS requests. `ares__read_line()` is used to parse local configuration files such as `/etc/resolv.conf`, `/etc/nsswitch.conf`, the `HOSTALIASES` file, and if using a c-ares version prior to 1.27.0, the `/etc/hosts` file. If any of these configuration files has an embedded `NULL` character as the first character in a new line, it can lead to attempting to read memory prior to the start of the given buffer which may result in a crash. This issue is fixed in c-ares 1.27.0. No known workarounds exist.",
          "Severity": "MEDIUM",
          "CweIDs": [
            "CWE-127"
          ],
          "VendorSeverity": {
            "amazon": 2,
            "photon": 2,
            "redhat": 1,
            "ubuntu": 2
          },
          "CVSS": {
            "redhat": {
              "V3Vector": "CVSS:3.1/AV:L/AC:L/PR:H/UI:N/S:U/C:N/I:N/A:H",
              "V3Score": 4.4
            }
          },
          "References": [
            "https://access.redhat.com/security/cve/CVE-2024-25629",
            "https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-25629",
            "https://github.com/c-ares/c-ares/commit/a804c04ddc8245fc8adf0e92368709639125e183",
            "https://github.com/c-ares/c-ares/security/advisories/GHSA-mg26-v6qh-x48q",
            "https://nvd.nist.gov/vuln/detail/CVE-2024-25629",
            "https://ubuntu.com/security/notices/USN-6676-1",
            "https://www.cve.org/CVERecord?id=CVE-2024-25629"
          ],
          "PublishedDate": "2024-02-23T15:15:09.237Z",
          "LastModifiedDate": "2024-02-23T16:14:43.447Z"
        }
      ]
    },
    {
      "Target": "/web-vault/app/main.a8f027a034b348c3f19d.js",
      "Class": "secret",
      "Secrets": [
        {
          "RuleID": "stripe-publishable-token",
          "Category": "Stripe",
          "Severity": "LOW",
          "Title": "Stripe Publishable Key",
          "StartLine": 1,
          "EndLine": 1,
          "Code": {
            "Lines": [
              {
                "Number": 1,
                "Content": "(()=\u003e{var e,t,i,n,s,o={28753:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003en});class n{constructor(){this.policies=[]}addPolicies(e){this.policies.push(...e)}getPolicies(){return this.policies}}},63078:(e,t,i)=\u003e{\"use strict\";i.d(t,{KF:()=\u003ep.K,WO:()=\u003es,lT:()=\u003ew,Rq:()=\u003eh,My:()=\u003eb,Qg:()=\u003eA,XD:()=\u003eS});var n=i(24852);class s{}s.ɵfac=function(e){return new(e||s)},s.ɵmod=n.oAB({type:s}),s.ɵinj=n.cJS({});var o=i(3289),r=i(59281),a=i(42844),l=i(88652),c=i(58043);class u extends c.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.organizationId=this.getResponseProperty(\"OrganizationId\"),this.name=this.getResponseProperty(\"Name\"),this.accessAll=this.getResponseProperty(\"AccessAll\"),this.externalId=this.getResponseProperty(\"ExternalId\")}}class d extends u{constructor(e){super(e),this.collections=[];const t=this.getResponseProperty(\"Collections\");null!=t\u0026\u0026(this.collections=t.map((e=\u003enew l.Y(e))))}}var p=i(50342);class h{constructor(){this.collections=[],this.members=[]}static fromResponse(e){const t=Object.assign(new h,e);return e instanceof d\u0026\u0026null!=e.collections\u0026\u0026(t.collections=e.collections.map((e=\u003enew p.K(e)))),t}}class g{constructor(){this.collections=[],this.users=[]}}class f{constructor(e){this.ids=null==e?[]:e}}var m=i(55602),y=i(23915),v=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class w{constructor(e,t){this.apiService=e,this.configService=t}groupViewFromResponse(e){return v(this,void 0,void 0,(function*(){const t=h.fromResponse(e);return(yield this.configService.getFeatureFlag(r.T.FlexibleCollections,!1))\u0026\u0026(t.accessAll=!1),t}))}get(e,t){return v(this,void 0,void 0,(function*(){const i=yield this.apiService.send(\"GET\",\"/organizations/\"+e+\"/groups/\"+t+\"/details\",null,!0,!0);return this.groupViewFromResponse(new d(i))}))}getAll(e){var t,i;return v(this,void 0,void 0,(function*(){const n=yield this.apiService.send(\"GET\",\"/organizations/\"+e+\"/groups\",null,!0,!0),s=new a.L(n,d);return null!==(i=Promise.all(null===(t=s.data)||void 0===t?void 0:t.map((e=\u003ethis.groupViewFromResponse(e)))))\u0026\u0026void 0!==i?i:[]}))}}w.ɵfac=function(e){return new(e||w)(n.LFG(m.s),n.LFG(y.i))},w.ɵprov=n.Yz7({token:w,factory:w.ɵfac,providedIn:\"root\"});class b extends w{constructor(e,t){super(e,t),this.apiService=e,this.configService=t}delete(e,t){return v(this,void 0,void 0,(function*(){yield this.apiService.send(\"DELETE\",\"/organizations/\"+e+\"/groups/\"+t,null,!0,!1)}))}deleteMany(e,t){return v(this,void 0,void 0,(function*(){yield this.apiService.send(\"DELETE\",\"/organizations/\"+e+\"/groups\",new f(t),!0,!0)}))}save(e){return v(this,void 0,void 0,(function*(){const t=new g;return t.name=e.name,t.accessAll=e.accessAll,t.users=e.members,t.collections=e.collections.map((e=\u003enew o.d(e.id,e.readOnly,e.hidePasswords,e.manage))),null==e.id?yield this.postGroup(e.organizationId,t):yield this.putGroup(e.organizationId,e.id,t)}))}postGroup(e,t){return v(this,void 0,void 0,(function*(){const i=yield this.apiService.send(\"POST\",\"/organizations/\"+e+\"/groups\",t,!0,!0);return this.groupViewFromResponse(new u(i))}))}putGroup(e,t,i){return v(this,void 0,void 0,(function*(){const n=yield this.apiService.send(\"PUT\",\"/organizations/\"+e+\"/groups/\"+t,i,!0,!0);return this.groupViewFromResponse(new u(n))}))}}b.ɵfac=function(e){return new(e||b)(n.LFG(m.s),n.LFG(y.i))},b.ɵprov=n.Yz7({token:b,factory:b.ɵfac,providedIn:s});class U{constructor(){this.collections=[],this.groups=[]}}class _{constructor(){this.emails=[],this.collections=[]}}class A{constructor(){this.collections=[],this.groups=[]}}var Z=i(47244),x=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class S{constructor(e,t){this.configService=e,this.organizationUserService=t}get(e,t){return x(this,void 0,void 0,(function*(){const i=yield this.organizationUserService.getOrganizationUser(e,t,{includeGroups:!0});if(null==i)return;const[n]=yield this.decryptMany(e,[i]);return n}))}save(e){return x(this,void 0,void 0,(function*(){const t=new U;t.accessAll=e.accessAll,t.permissions=e.permissions,t.type=e.type,t.collections=e.collections,t.groups=e.groups,t.accessSecretsManager=e.accessSecretsManager,yield this.organizationUserService.putOrganizationUser(e.organizationId,e.id,t)}))}invite(e,t){return x(this,void 0,void 0,(function*(){const i=new _;i.emails=e,i.accessAll=t.accessAll,i.permissions=t.permissions,i.type=t.type,i.collections=t.collections,i.groups=t.groups,i.accessSecretsManager=t.accessSecretsManager,yield this.organizationUserService.postOrganizationUserInvite(t.organizationId,i)}))}decryptMany(e,t){return x(this,void 0,void 0,(function*(){const i=t.map((t=\u003ex(this,void 0,void 0,(function*(){const i=new A;return i.id=t.id,i.organizationId=e,i.userId=t.userId,i.type=t.type,i.status=t.status,i.externalId=t.externalId,i.accessAll=!(yield this.configService.getFeatureFlag(r.T.FlexibleCollections,!1))\u0026\u0026t.accessAll,i.permissions=t.permissions,i.resetPasswordEnrolled=t.resetPasswordEnrolled,i.collections=t.collections.map((e=\u003e({id:e.id,hidePasswords:e.hidePasswords,readOnly:e.readOnly,manage:e.manage}))),i.groups=t.groups,i.accessSecretsManager=t.accessSecretsManager,i.hasMasterPassword=t.hasMasterPassword,i}))));return yield Promise.all(i)}))}}S.ɵfac=function(e){return new(e||S)(n.LFG(y.i),n.LFG(Z.t))},S.ɵprov=n.Yz7({token:S,factory:S.ɵfac,providedIn:s})},50342:(e,t,i)=\u003e{\"use strict\";i.d(t,{K:()=\u003es});class n{}class s extends n{constructor(e){super(),e\u0026\u0026(this.id=e.id,this.readOnly=e.readOnly,this.hidePasswords=e.hidePasswords,this.manage=e.manage)}}},93273:(e,t,i)=\u003e{\"use strict\";i.d(t,{_:()=\u003eo});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m]})},99022:(e,t,i)=\u003e{\"use strict\";i.d(t,{K:()=\u003em});var n=i(24852),s=i(19419),o=i(98645),r=i(24637),a=i(11512),l=i(36179),c=i(82933);function u(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",1,2),n._uU(2,\"\\n  \"),n.TgZ(3,\"bit-form-field\"),n._uU(4,\"\\n    \"),n.TgZ(5,\"bit-label\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n    \"),n._UZ(9,\"input\",3),n._uU(10,\"\\n  \"),n.qZA(),n._uU(11,\"\\n\"),n.qZA()),2\u0026e){const e=n.oxw();n.Q6J(\"formGroup\",e.formGroup),n.xp6(6),n.Oqu(n.lcZ(7,2,\"organizationName\"))}}function d(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"bit-form-field\",7),n._uU(1,\"\\n      \"),n.TgZ(2,\"bit-label\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n._UZ(6,\"input\",10),n._uU(7,\"\\n    \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,1,\"clientOwnerEmail\")))}function p(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",6),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-form-field\",7),n._uU(3,\"\\n      \"),n.TgZ(4,\"bit-label\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n      \"),n._UZ(8,\"input\",3),n._uU(9,\"\\n    \"),n.qZA(),n._uU(10,\"\\n    \"),n.TgZ(11,\"bit-form-field\",7),n._uU(12,\"\\n      \"),n.TgZ(13,\"bit-label\"),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n      \"),n._UZ(17,\"input\",8),n._uU(18,\"\\n    \"),n.qZA(),n._uU(19,\"\\n    \"),n.YNc(20,d,8,3,\"bit-form-field\",9),n._uU(21,\"\\n  \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,3,\"organizationName\")),n.xp6(9),n.Oqu(n.lcZ(15,5,\"email\")),n.xp6(6),n.Q6J(\"ngIf\",e.isProvider)}}function h(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",14),n._uU(1,\"\\n      \"),n.TgZ(2,\"bit-form-field\",7),n._uU(3,\"\\n        \"),n.TgZ(4,\"bit-label\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n        \"),n._UZ(8,\"input\",15),n._uU(9,\"\\n      \"),n.qZA(),n._uU(10,\"\\n    \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(5),n.Oqu(n.lcZ(6,1,\"businessName\")))}function g(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.TgZ(2,\"input\",11),n.NdJ(\"change\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedBusinessOwned.emit())})),n.qZA(),n._uU(3,\"\\n    \"),n.TgZ(4,\"bit-label\",12),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n    \"),n.YNc(8,h,11,3,\"div\",13),n._uU(9,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,2,\"accountOwnedBusiness\")),n.xp6(3),n.Q6J(\"ngIf\",e.formGroup.controls.businessOwned.value)}}function f(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",1,2),n._uU(2,\"\\n  \"),n.TgZ(3,\"h2\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n  \"),n.YNc(7,p,22,7,\"div\",4),n._uU(8,\"\\n  \"),n.YNc(9,g,10,4,\"div\",5),n._uU(10,\"\\n\"),n.qZA()),2\u0026e){const e=n.oxw();n.Q6J(\"formGroup\",e.formGroup),n.xp6(4),n.Oqu(n.lcZ(5,4,\"generalInformation\")),n.xp6(3),n.Q6J(\"ngIf\",e.createOrganization),n.xp6(2),n.Q6J(\"ngIf\",!e.isProvider\u0026\u0026!e.acceptingSponsorship)}}class m{constructor(){this.nameOnly=!1,this.createOrganization=!0,this.isProvider=!1,this.acceptingSponsorship=!1,this.changedBusinessOwned=new n.vpe}}m.ɵfac=function(e){return new(e||m)},m.ɵcmp=n.Xpm({type:m,selectors:[[\"app-org-info\"]],inputs:{nameOnly:\"nameOnly\",createOrganization:\"createOrganization\",isProvider:\"isProvider\",acceptingSponsorship:\"acceptingSponsorship\",formGroup:\"formGroup\"},outputs:{changedBusinessOwned:\"changedBusinessOwned\"},decls:4,vars:2,consts:[[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[\"form\",\"\"],[\"bitInput\",\"\",\"type\",\"text\",\"formControlName\",\"name\"],[\"class\",\"tw-flex tw-w-full tw-space-x-4\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"tw-flex\",\"tw-w-full\",\"tw-space-x-4\"],[1,\"tw-w-1/2\"],[\"bitInput\",\"\",\"type\",\"email\",\"formControlName\",\"billingEmail\"],[\"class\",\"tw-w-1/2\",4,\"ngIf\"],[\"bitInput\",\"\",\"type\",\"email\",\"formControlName\",\"clientOwnerEmail\"],[\"type\",\"checkbox\",\"name\",\"businessOwned\",\"formControlName\",\"businessOwned\",3,\"change\"],[\"for\",\"businessOwned\",1,\"tw-mb-3\"],[\"class\",\"tw-mt-4\",4,\"ngIf\"],[1,\"tw-mt-4\"],[\"bitInput\",\"\",\"type\",\"text\",\"formControlName\",\"businessName\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,u,12,4,\"form\",0),n._uU(1,\"\\n\"),n.YNc(2,f,11,6,\"form\",0),n._uU(3,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.nameOnly),n.xp6(2),n.Q6J(\"ngIf\",!t.nameOnly))},dependencies:[s.O5,o._Y,o.Fj,o.Wl,o.JJ,o.JL,o.sg,o.u,r.d,a.G,l.u,c.C],encapsulation:2})},98157:(e,t,i)=\u003e{\"use strict\";i.d(t,{v:()=\u003ey});var n=i(58691),s=i(54427),o=i(82558),r=i(88160),a=i(27646),l=i(70427),c=i(55637),u=i(24852),d=i(76528),p=i(85540),h=i(47244),g=i(97360),f=i(78627),m=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class y{constructor(e,t,i,n,s,o){this.cryptoService=e,this.encryptService=t,this.organizationService=i,this.organizationUserService=n,this.organizationApiService=s,this.i18nService=o}buildRecoveryKey(e,t){return m(this,void 0,void 0,(function*(){const i=yield this.organizationApiService.getKeys(e);if(null==i)throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));const n=a.c.fromB64ToArray(i.publicKey);if(null!=t||(t=yield this.cryptoService.getUserKey()),null==t)throw new Error(\"No user key found\");return(yield this.cryptoService.rsaEncrypt(t.key,n)).encryptedString}))}resetMasterPassword(e,t,i,n){return m(this,void 0,void 0,(function*(){const o=yield this.organizationUserService.getOrganizationUserResetPasswordDetails(n,i);if(null==o)throw new Error(this.i18nService.t(\"resetPasswordDetailsError\"));const a=yield this.cryptoService.getOrgKey(n);if(null==a)throw new Error(\"No org key found\");const u=yield this.encryptService.decryptToBytes(new l._(o.encryptedPrivateKey),a),d=yield this.cryptoService.rsaDecrypt(o.resetPasswordKey,u),p=new c.N(d),h=yield this.cryptoService.makeMasterKey(e,t.trim().toLowerCase(),o.kdf,new r.E(o.kdfIterations,o.kdfMemory,o.kdfParallelism)),g=yield this.cryptoService.hashMasterKey(e,h),f=yield this.cryptoService.encryptUserKeyWithMasterKey(h,p),m=new s.s;m.key=f[1].encryptedString,m.newMasterPasswordHash=g,yield this.organizationUserService.putOrganizationUserResetPassword(n,i,m)}))}getRotatedKeys(e){return m(this,void 0,void 0,(function*(){if(null==e)throw new Error(\"New user key is required for rotation.\");const t=yield this.organizationService.getAll();if(!t)return;const i=[];for(const n of t){if(!n.resetPasswordEnrolled)continue;const t=yield this.buildRecoveryKey(n.id,e),s=new o.u;s.organizationId=n.id,s.resetPasswordKey=t,s.masterPasswordHash=\"ignored\",i.push(s)}return i}))}postLegacyRotation(e,t){return m(this,void 0,void 0,(function*(){if(null!=t)for(const i of t)yield this.organizationUserService.putOrganizationUserResetPasswordEnrollment(i.organizationId,e,i)}))}}y.ɵfac=function(e){return new(e||y)(u.LFG(d.$),u.LFG(p.U),u.LFG(n.Mn),u.LFG(h.t),u.LFG(g.M),u.LFG(f.D))},y.ɵprov=u.Yz7({token:y,factory:y.ɵfac,providedIn:\"root\"})},96963:(e,t,i)=\u003e{\"use strict\";i.d(t,{v2:()=\u003eh,WS:()=\u003eO,bT:()=\u003eP,tc:()=\u003eM,K:()=\u003ebe,I2:()=\u003eo,UG:()=\u003eL,jR:()=\u003eJ,mD:()=\u003ez,qT:()=\u003eQ,n6:()=\u003eG});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m,n.f]});var r=i(98645);class a{}class l{display(e){return!0}}class c{constructor(){this.enabled=new r.p4(!1),this.data=null}ngOnInit(){this.enabled.setValue(this.policyResponse.enabled),null!=this.policyResponse.data\u0026\u0026this.loadData()}loadData(){var e;this.data.patchValue(null!==(e=this.policyResponse.data)\u0026\u0026void 0!==e?e:{})}buildRequestData(){return null!=this.data?this.data.value:null}buildRequest(e){const t=new a;return t.enabled=this.enabled.value,t.type=this.policy.type,t.data=this.buildRequestData(),Promise.resolve(t)}}c.ɵfac=function(e){return new(e||c)},c.ɵdir=s.lG2({type:c,inputs:{policyResponse:\"policyResponse\",policy:\"policy\"}});var u=i(20099),d=i(53707),p=i(82933);class h extends l{constructor(){super(...arguments),this.name=\"disableSend\",this.description=\"disableSendPolicyDesc\",this.type=u.Mi.DisableSend,this.component=g}}class g extends c{}g.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(g)))(t||g)}}(),g.ɵcmp=s.Xpm({type:g,selectors:[[\"policy-disable-send\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"disableSendExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var f=i(58691),m=i(27646),y=i(78627),v=i(19419),w=i(7172),b=i(24637),U=i(11512),_=i(75734),A=i(36179),Z=i(28975),x=i(30469),S=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function T(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",14),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,1,\"keyConnectorPolicyRestriction\"),\"\\n\"))}function C(e,t){if(1\u0026e\u0026\u0026s._UZ(0,\"bit-option\",15),2\u0026e){const e=t.$implicit;s.Q6J(\"value\",e.value)(\"label\",e.name)}}class O extends l{constructor(){super(...arguments),this.name=\"masterPassPolicyTitle\",this.description=\"masterPassPolicyDesc\",this.type=u.Mi.MasterPassword,this.component=k}}class k extends c{constructor(e,t,i){super(),this.formBuilder=e,this.organizationService=i,this.MinPasswordLength=m.c.minimumPasswordLength,this.data=this.formBuilder.group({minComplexity:[null],minLength:[this.MinPasswordLength,[r.kI.min(m.c.minimumPasswordLength)]],requireUpper:[!1],requireLower:[!1],requireNumbers:[!1],requireSpecial:[!1],enforceOnLogin:[!1]}),this.showKeyConnectorInfo=!1,this.passwordScores=[{name:\"-- \"+t.t(\"select\")+\" --\",value:null},{name:t.t(\"weak\")+\" (0)\",value:0},{name:t.t(\"weak\")+\" (1)\",value:1},{name:t.t(\"weak\")+\" (2)\",value:2},{name:t.t(\"good\")+\" (3)\",value:3},{name:t.t(\"strong\")+\" (4)\",value:4}]}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=\u003esuper.ngOnInit}});return S(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}function q(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"option\",32),s._uU(1),s.qZA()),2\u0026e){const e=t.$implicit;s.Q6J(\"ngValue\",e.value),s.xp6(1),s.Oqu(e.name)}}k.ɵfac=function(e){return new(e||k)(s.Y36(r.qu),s.Y36(y.D),s.Y36(f.Mn))},k.ɵcmp=s.Xpm({type:k,selectors:[[\"policy-master-password\"]],features:[s.qOj],decls:79,vars:17,consts:[[\"type\",\"info\",4,\"ngIf\"],[3,\"formGroup\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"id\",\"enabled\",3,\"formControl\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"enforceOnLogin\",\"id\",\"enforceOnLogin\"],[1,\"tw-flex\",\"tw-space-x-4\"],[1,\"tw-flex-auto\"],[\"formControlName\",\"minComplexity\",\"id\",\"minComplexity\"],[3,\"value\",\"label\",4,\"ngFor\",\"ngForOf\"],[\"bitInput\",\"\",\"type\",\"number\",\"formControlName\",\"minLength\",\"id\",\"minLength\",3,\"min\"],[1,\"!tw-mb-2\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireUpper\",\"id\",\"requireUpper\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireLower\",\"id\",\"requireLower\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireNumbers\",\"id\",\"requireNumbers\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireSpecial\",\"id\",\"requireSpecial\"],[\"type\",\"info\"],[3,\"value\",\"label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.YNc(0,T,3,3,\"app-callout\",0),s._uU(1,\"\\n\\n\"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n  \"),s.TgZ(4,\"bit-form-control\"),s._uU(5,\"\\n    \"),s._UZ(6,\"input\",2),s._uU(7,\"\\n    \"),s.TgZ(8,\"bit-label\"),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n  \"),s.qZA(),s._uU(12,\"\\n\\n  \"),s.TgZ(13,\"bit-form-control\"),s._uU(14,\"\\n    \"),s._UZ(15,\"input\",3),s._uU(16,\"\\n    \"),s.TgZ(17,\"bit-label\"),s._uU(18),s.ALo(19,\"i18n\"),s.qZA(),s._uU(20,\"\\n  \"),s.qZA(),s._uU(21,\"\\n\\n  \"),s.TgZ(22,\"div\",4),s._uU(23,\"\\n    \"),s.TgZ(24,\"bit-form-field\",5),s._uU(25,\"\\n      \"),s.TgZ(26,\"bit-label\"),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n      \"),s.TgZ(30,\"bit-select\",6),s._uU(31,\"\\n        \"),s.YNc(32,C,1,2,\"bit-option\",7),s._uU(33,\"\\n      \"),s.qZA(),s._uU(34,\"\\n    \"),s.qZA(),s._uU(35,\"\\n    \"),s.TgZ(36,\"bit-form-field\",5),s._uU(37,\"\\n      \"),s.TgZ(38,\"bit-label\"),s._uU(39),s.ALo(40,\"i18n\"),s.qZA(),s._uU(41,\"\\n      \"),s._UZ(42,\"input\",8),s._uU(43,\"\\n    \"),s.qZA(),s._uU(44,\"\\n  \"),s.qZA(),s._uU(45,\"\\n\\n  \"),s.TgZ(46,\"bit-form-control\",9),s._uU(47,\"\\n    \"),s._UZ(48,\"input\",10),s._uU(49,\"\\n    \"),s.TgZ(50,\"bit-label\"),s._uU(51,\"A-Z\"),s.qZA(),s._uU(52,\"\\n  \"),s.qZA(),s._uU(53,\"\\n  \"),s.TgZ(54,\"bit-form-control\",9),s._uU(55,\"\\n    \"),s._UZ(56,\"input\",11),s._uU(57,\"\\n    \"),s.TgZ(58,\"bit-label\"),s._uU(59,\"a-z\"),s.qZA(),s._uU(60,\"\\n  \"),s.qZA(),s._uU(61,\"\\n  \"),s.TgZ(62,\"bit-form-control\",9),s._uU(63,\"\\n    \"),s._UZ(64,\"input\",12),s._uU(65,\"\\n    \"),s.TgZ(66,\"bit-label\"),s._uU(67,\"0-9\"),s.qZA(),s._uU(68,\"\\n  \"),s.qZA(),s._uU(69,\"\\n  \"),s.TgZ(70,\"bit-form-control\"),s._uU(71,\"\\n    \"),s._UZ(72,\"input\",13),s._uU(73,\"\\n    \"),s.TgZ(74,\"bit-label\"),s._uU(75,\"!@#$%^\u0026*\"),s.qZA(),s._uU(76,\"\\n  \"),s.qZA(),s._uU(77,\"\\n\"),s.qZA(),s._uU(78,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"ngIf\",t.showKeyConnectorInfo),s.xp6(2),s.Q6J(\"formGroup\",t.data),s.xp6(4),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(10,9,\"turnOn\")),s.xp6(9),s.Oqu(s.lcZ(19,11,\"enforceOnLoginDesc\")),s.xp6(9),s.Oqu(s.lcZ(28,13,\"minComplexityScore\")),s.xp6(5),s.Q6J(\"ngForOf\",t.passwordScores),s.xp6(7),s.Oqu(s.lcZ(40,15,\"minLength\")),s.xp6(3),s.Q6J(\"min\",t.MinPasswordLength))},dependencies:[v.sg,v.O5,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.qQ,r.oH,r.sg,r.u,d.O,w.b,b.d,U.G,_.A,A.u,Z.H,x.x,p.C],encapsulation:2});class P extends l{constructor(){super(...arguments),this.name=\"passwordGenerator\",this.description=\"passwordGeneratorPolicyDesc\",this.type=u.Mi.PasswordGenerator,this.component=I}}class I extends c{constructor(e,t){super(),this.formBuilder=e,this.data=this.formBuilder.group({defaultType:[null],minLength:[null],useUpper:[null],useLower:[null],useNumbers:[null],useSpecial:[null],minNumbers:[null],minSpecial:[null],minNumberWords:[null],capitalize:[null],includeNumber:[null]}),this.defaultTypes=[{name:t.t(\"userPreference\"),value:null},{name:t.t(\"password\"),value:\"password\"},{name:t.t(\"passphrase\"),value:\"passphrase\"}]}}I.ɵfac=function(e){return new(e||I)(s.Y36(r.QS),s.Y36(y.D))},I.ɵcmp=s.Xpm({type:I,selectors:[[\"policy-password-generator\"]],features:[s.qOj],decls:133,vars:33,consts:[[3,\"formGroup\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"],[1,\"row\"],[1,\"col-6\",\"form-group\",\"mb-0\"],[\"for\",\"defaultType\"],[\"id\",\"defaultType\",\"name\",\"defaultType\",\"formControlName\",\"defaultType\",1,\"form-control\"],[3,\"ngValue\",4,\"ngFor\",\"ngForOf\"],[1,\"mt-4\"],[1,\"col-6\",\"form-group\"],[\"for\",\"minLength\"],[\"id\",\"minLength\",\"type\",\"number\",\"name\",\"minLength\",\"min\",\"5\",\"max\",\"128\",\"formControlName\",\"minLength\",1,\"form-control\"],[\"for\",\"minNumbers\"],[\"id\",\"minNumbers\",\"type\",\"number\",\"name\",\"minNumbers\",\"min\",\"0\",\"max\",\"9\",\"formControlName\",\"minNumbers\",1,\"form-control\"],[\"for\",\"minSpecial\"],[\"id\",\"minSpecial\",\"type\",\"number\",\"name\",\"minSpecial\",\"min\",\"0\",\"max\",\"9\",\"formControlName\",\"minSpecial\",1,\"form-control\"],[\"type\",\"checkbox\",\"id\",\"useUpper\",\"formControlName\",\"useUpper\",\"name\",\"useUpper\",1,\"form-check-input\"],[\"for\",\"useUpper\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useLower\",\"name\",\"useLower\",\"formControlName\",\"useLower\",1,\"form-check-input\"],[\"for\",\"useLower\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useNumbers\",\"name\",\"useNumbers\",\"formControlName\",\"useNumbers\",1,\"form-check-input\"],[\"for\",\"useNumbers\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useSpecial\",\"name\",\"useSpecial\",\"formControlName\",\"useSpecial\",1,\"form-check-input\"],[\"for\",\"useSpecial\",1,\"form-check-label\"],[\"for\",\"minNumberWords\"],[\"id\",\"minNumberWords\",\"type\",\"number\",\"name\",\"minNumberWords\",\"min\",\"3\",\"max\",\"20\",\"formControlName\",\"minNumberWords\",1,\"form-control\"],[\"type\",\"checkbox\",\"id\",\"capitalize\",\"name\",\"capitalize\",\"formControlName\",\"capitalize\",1,\"form-check-input\"],[\"for\",\"capitalize\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"includeNumber\",\"name\",\"includeNumber\",\"formControlName\",\"includeNumber\",1,\"form-check-input\"],[\"for\",\"includeNumber\",1,\"form-check-label\"],[3,\"ngValue\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n    \"),s.TgZ(4,\"div\",2),s._uU(5,\"\\n      \"),s._UZ(6,\"input\",3),s._uU(7,\"\\n      \"),s.TgZ(8,\"label\",4),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n    \"),s.qZA(),s._uU(12,\"\\n  \"),s.qZA(),s._uU(13,\"\\n\\n  \"),s.TgZ(14,\"div\",5),s._uU(15,\"\\n    \"),s.TgZ(16,\"div\",6),s._uU(17,\"\\n      \"),s.TgZ(18,\"label\",7),s._uU(19),s.ALo(20,\"i18n\"),s.qZA(),s._uU(21,\"\\n      \"),s.TgZ(22,\"select\",8),s._uU(23,\"\\n        \"),s.YNc(24,q,2,2,\"option\",9),s._uU(25,\"\\n      \"),s.qZA(),s._uU(26,\"\\n    \"),s.qZA(),s._uU(27,\"\\n  \"),s.qZA(),s._uU(28,\"\\n  \"),s.TgZ(29,\"h3\",10),s._uU(30),s.ALo(31,\"i18n\"),s.qZA(),s._uU(32,\"\\n  \"),s.TgZ(33,\"div\",5),s._uU(34,\"\\n    \"),s.TgZ(35,\"div\",11),s._uU(36,\"\\n      \"),s.TgZ(37,\"label\",12),s._uU(38),s.ALo(39,\"i18n\"),s.qZA(),s._uU(40,\"\\n      \"),s._UZ(41,\"input\",13),s._uU(42,\"\\n    \"),s.qZA(),s._uU(43,\"\\n  \"),s.qZA(),s._uU(44,\"\\n  \"),s.TgZ(45,\"div\",5),s._uU(46,\"\\n    \"),s.TgZ(47,\"div\",11),s._uU(48,\"\\n      \"),s.TgZ(49,\"label\",14),s._uU(50),s.ALo(51,\"i18n\"),s.qZA(),s._uU(52,\"\\n      \"),s._UZ(53,\"input\",15),s._uU(54,\"\\n    \"),s.qZA(),s._uU(55,\"\\n    \"),s.TgZ(56,\"div\",11),s._uU(57,\"\\n      \"),s.TgZ(58,\"label\",16),s._uU(59),s.ALo(60,\"i18n\"),s.qZA(),s._uU(61,\"\\n      \"),s._UZ(62,\"input\",17),s._uU(63,\"\\n    \"),s.qZA(),s._uU(64,\"\\n  \"),s.qZA(),s._uU(65,\"\\n  \"),s.TgZ(66,\"div\",2),s._uU(67,\"\\n    \"),s._UZ(68,\"input\",18),s._uU(69,\"\\n    \"),s.TgZ(70,\"label\",19),s._uU(71,\"A-Z\"),s.qZA(),s._uU(72,\"\\n  \"),s.qZA(),s._uU(73,\"\\n  \"),s.TgZ(74,\"div\",2),s._uU(75,\"\\n    \"),s._UZ(76,\"input\",20),s._uU(77,\"\\n    \"),s.TgZ(78,\"label\",21),s._uU(79,\"a-z\"),s.qZA(),s._uU(80,\"\\n  \"),s.qZA(),s._uU(81,\"\\n  \"),s.TgZ(82,\"div\",2),s._uU(83,\"\\n    \"),s._UZ(84,\"input\",22),s._uU(85,\"\\n    \"),s.TgZ(86,\"label\",23),s._uU(87,\"0-9\"),s.qZA(),s._uU(88,\"\\n  \"),s.qZA(),s._uU(89,\"\\n  \"),s.TgZ(90,\"div\",2),s._uU(91,\"\\n    \"),s._UZ(92,\"input\",24),s._uU(93,\"\\n    \"),s.TgZ(94,\"label\",25),s._uU(95,\"!@#$%^\u0026*\"),s.qZA(),s._uU(96,\"\\n  \"),s.qZA(),s._uU(97,\"\\n  \"),s.TgZ(98,\"h3\",10),s._uU(99),s.ALo(100,\"i18n\"),s.qZA(),s._uU(101,\"\\n  \"),s.TgZ(102,\"div\",5),s._uU(103,\"\\n    \"),s.TgZ(104,\"div\",11),s._uU(105,\"\\n      \"),s.TgZ(106,\"label\",26),s._uU(107),s.ALo(108,\"i18n\"),s.qZA(),s._uU(109,\"\\n      \"),s._UZ(110,\"input\",27),s._uU(111,\"\\n    \"),s.qZA(),s._uU(112,\"\\n  \"),s.qZA(),s._uU(113,\"\\n  \"),s.TgZ(114,\"div\",2),s._uU(115,\"\\n    \"),s._UZ(116,\"input\",28),s._uU(117,\"\\n    \"),s.TgZ(118,\"label\",29),s._uU(119),s.ALo(120,\"i18n\"),s.qZA(),s._uU(121,\"\\n  \"),s.qZA(),s._uU(122,\"\\n  \"),s.TgZ(123,\"div\",2),s._uU(124,\"\\n    \"),s._UZ(125,\"input\",30),s._uU(126,\"\\n    \"),s.TgZ(127,\"label\",31),s._uU(128),s.ALo(129,\"i18n\"),s.qZA(),s._uU(130,\"\\n  \"),s.qZA(),s._uU(131,\"\\n\"),s.qZA(),s._uU(132,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"formGroup\",t.data),s.xp6(6),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(10,13,\"turnOn\")),s.xp6(10),s.Oqu(s.lcZ(20,15,\"defaultType\")),s.xp6(5),s.Q6J(\"ngForOf\",t.defaultTypes),s.xp6(6),s.Oqu(s.lcZ(31,17,\"password\")),s.xp6(8),s.Oqu(s.lcZ(39,19,\"minLength\")),s.xp6(12),s.Oqu(s.lcZ(51,21,\"minNumbers\")),s.xp6(9),s.Oqu(s.lcZ(60,23,\"minSpecial\")),s.xp6(40),s.Oqu(s.lcZ(100,25,\"passphrase\")),s.xp6(8),s.Oqu(s.lcZ(108,27,\"minimumNumberOfWords\")),s.xp6(12),s.Oqu(s.lcZ(120,29,\"capitalize\")),s.xp6(9),s.Oqu(s.lcZ(129,31,\"includeNumber\")))},dependencies:[v.sg,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r.JJ,r.JL,r.qQ,r.Fd,r.oH,r.sg,r.u,p.C],encapsulation:2});class M extends l{constructor(){super(...arguments),this.name=\"personalOwnership\",this.description=\"personalOwnershipPolicyDesc\",this.type=u.Mi.PersonalOwnership,this.component=N}}class N extends c{}N.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(N)))(t||N)}}(),N.ɵcmp=s.Xpm({type:N,selectors:[[\"policy-personal-ownership\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"personalOwnershipExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});class L extends l{constructor(){super(...arguments),this.name=\"requireSso\",this.description=\"requireSsoPolicyDesc\",this.type=u.Mi.RequireSso,this.component=D}display(e){return e.useSso}}class D extends c{constructor(e){super(),this.i18nService=e}buildRequest(e){var t;const i=null!==(t=e.get(u.Mi.SingleOrg))\u0026\u0026void 0!==t\u0026\u0026t;if(this.enabled.value\u0026\u0026!i)throw new Error(this.i18nService.t(\"requireSsoPolicyReqError\"));return super.buildRequest(e)}}D.ɵfac=function(e){return new(e||D)(s.Y36(y.D))},D.ɵcmp=s.Xpm({type:D,selectors:[[\"policy-require-sso\"]],features:[s.qOj],decls:21,vars:13,consts:[[\"type\",\"tip\",3,\"title\"],[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s.ALo(1,\"i18n\"),s._uU(2),s.ALo(3,\"i18n\"),s.qZA(),s._uU(4,\"\\n\"),s.TgZ(5,\"app-callout\",1),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n\\n\"),s.TgZ(9,\"div\",2),s._uU(10,\"\\n  \"),s.TgZ(11,\"div\",3),s._uU(12,\"\\n    \"),s._UZ(13,\"input\",4),s._uU(14,\"\\n    \"),s.TgZ(15,\"label\",5),s._uU(16),s.ALo(17,\"i18n\"),s.qZA(),s._uU(18,\"\\n  \"),s.qZA(),s._uU(19,\"\\n\"),s.qZA(),s._uU(20,\"\\n\")),2\u0026e\u0026\u0026(s.s9C(\"title\",s.lcZ(1,5,\"prerequisite\")),s.xp6(2),s.hij(\"\\n  \",s.lcZ(3,7,\"requireSsoPolicyReq\"),\"\\n\"),s.xp6(4),s.hij(\"\\n  \",s.lcZ(7,9,\"requireSsoExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(17,11,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var E=i(24083),F=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function R(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"bit-callout\",7),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,1,\"keyConnectorPolicyRestriction\"),\"\\n\"))}class J extends l{constructor(){super(...arguments),this.name=\"accountRecoveryPolicy\",this.description=\"accountRecoveryPolicyDesc\",this.type=u.Mi.ResetPassword,this.component=Y}display(e){return e.useResetPassword}}class Y extends c{constructor(e,t){super(),this.formBuilder=e,this.organizationService=t,this.data=this.formBuilder.group({autoEnrollEnabled:!1}),this.showKeyConnectorInfo=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=\u003esuper.ngOnInit}});return F(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}Y.ɵfac=function(e){return new(e||Y)(s.Y36(r.qu),s.Y36(f.Mn))},Y.ɵcmp=s.Xpm({type:Y,selectors:[[\"policy-reset-password\"]],features:[s.qOj],decls:32,vars:18,consts:[[\"type\",\"info\",4,\"ngIf\"],[\"type\",\"success\",\"icon\",\"bwi-lightbulb\",3,\"title\"],[\"type\",\"warning\"],[1,\"!tw-mb-1\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"id\",\"enabled\",3,\"formControl\"],[3,\"formGroup\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"autoEnrollEnabled\",\"id\",\"autoEnrollEnabled\"],[\"type\",\"info\"]],template:function(e,t){1\u0026e\u0026\u0026(s.YNc(0,R,3,3,\"bit-callout\",0),s._uU(1,\"\\n\\n\"),s.TgZ(2,\"bit-callout\",1),s.ALo(3,\"i18n\"),s._uU(4),s.ALo(5,\"i18n\"),s.qZA(),s._uU(6,\"\\n\\n\"),s.TgZ(7,\"bit-callout\",2),s._uU(8),s.ALo(9,\"i18n\"),s.qZA(),s._uU(10,\"\\n\\n\"),s.TgZ(11,\"bit-form-control\",3),s._uU(12,\"\\n  \"),s._UZ(13,\"input\",4),s._uU(14,\"\\n  \"),s.TgZ(15,\"bit-label\"),s._uU(16),s.ALo(17,\"i18n\"),s.qZA(),s._uU(18,\"\\n\"),s.qZA(),s._uU(19,\"\\n\\n\"),s.ynx(20,5),s._uU(21,\"\\n  \"),s.TgZ(22,\"bit-form-control\",3),s._uU(23,\"\\n    \"),s._UZ(24,\"input\",6),s._uU(25,\"\\n    \"),s.TgZ(26,\"bit-label\"),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n  \"),s.qZA(),s._uU(30,\"\\n\"),s.BQk(),s._uU(31,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"ngIf\",t.showKeyConnectorInfo),s.xp6(2),s.Q6J(\"title\",s.lcZ(3,8,\"prerequisite\")),s.xp6(2),s.hij(\"\\n  \",s.lcZ(5,10,\"accountRecoverySingleOrgRequirementDesc\"),\"\\n\"),s.xp6(4),s.hij(\"\\n  \",s.lcZ(9,12,\"accountRecoveryPolicyWarning\"),\"\\n\"),s.xp6(5),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(17,14,\"turnOn\")),s.xp6(4),s.Q6J(\"formGroup\",t.data),s.xp6(7),s.Oqu(s.lcZ(28,16,\"resetPasswordPolicyAutoEnrollCheckbox\")))},dependencies:[v.O5,r.Wl,r.JJ,r.JL,r.oH,r.sg,r.u,E.O,w.b,_.A,A.u,p.C],encapsulation:2});class z extends l{constructor(){super(...arguments),this.name=\"sendOptions\",this.description=\"sendOptionsPolicyDesc\",this.type=u.Mi.SendOptions,this.component=K}}class K extends c{constructor(e){super(),this.formBuilder=e,this.data=this.formBuilder.group({disableHideEmail:!1})}}K.ɵfac=function(e){return new(e||K)(s.Y36(r.QS))},K.ɵcmp=s.Xpm({type:K,selectors:[[\"policy-send-options\"]],features:[s.qOj],decls:32,vars:14,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"],[3,\"formGroup\"],[1,\"mt-4\"],[\"type\",\"checkbox\",\"id\",\"disableHideEmail\",\"name\",\"DisableHideEmail\",\"formControlName\",\"disableHideEmail\",1,\"form-check-input\"],[\"for\",\"disableHideEmail\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\\n\"),s.TgZ(16,\"div\",5),s._uU(17,\"\\n  \"),s.TgZ(18,\"h3\",6),s._uU(19),s.ALo(20,\"i18n\"),s.qZA(),s._uU(21,\"\\n  \"),s.TgZ(22,\"div\",2),s._uU(23,\"\\n    \"),s._UZ(24,\"input\",7),s._uU(25,\"\\n    \"),s.TgZ(26,\"label\",8),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n  \"),s.qZA(),s._uU(30,\"\\n\"),s.qZA(),s._uU(31,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,6,\"sendOptionsExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,8,\"turnOn\")),s.xp6(5),s.Q6J(\"formGroup\",t.data),s.xp6(3),s.Oqu(s.lcZ(20,10,\"options\")),s.xp6(8),s.Oqu(s.lcZ(28,12,\"disableHideEmail\")))},dependencies:[r.Wl,r.JJ,r.JL,r.oH,r.sg,r.u,d.O,p.C],encapsulation:2});class Q extends l{constructor(){super(...arguments),this.name=\"singleOrg\",this.description=\"singleOrgDesc\",this.type=u.Mi.SingleOrg,this.component=B}}class B extends c{constructor(e){super(),this.i18nService=e}buildRequest(e){var t,i;if(!this.enabled.value){if(null!==(t=e.get(u.Mi.RequireSso))\u0026\u0026void 0!==t\u0026\u0026t)throw new Error(this.i18nService.t(\"disableRequiredError\",this.i18nService.t(\"requireSso\")));if(null!==(i=e.get(u.Mi.MaximumVaultTimeout))\u0026\u0026void 0!==i\u0026\u0026i)throw new Error(this.i18nService.t(\"disableRequiredError\",this.i18nService.t(\"maximumVaultTimeoutLabel\")))}return super.buildRequest(e)}}B.ɵfac=function(e){return new(e||B)(s.Y36(y.D))},B.ɵcmp=s.Xpm({type:B,selectors:[[\"policy-single-org\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"singleOrgPolicyWarning\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});class G extends l{constructor(){super(...arguments),this.name=\"twoStepLoginPolicyTitle\",this.description=\"twoStepLoginPolicyDesc\",this.type=u.Mi.TwoFactorAuthentication,this.component=V}}class V extends c{}V.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(V)))(t||V)}}(),V.ɵcmp=s.Xpm({type:V,selectors:[[\"policy-two-factor-authentication\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"twoStepLoginPolicyWarning\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var j=i(19887),H=i(77494),$=i(41489),W=i(50137),X=i(99721),ee=i(66459),te=i(33245),ie=i(24610),ne=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const se=[\"policyForm\"];function oe(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",8),s._uU(1,\"\\n          \"),s._UZ(2,\"i\",16),s.ALo(3,\"i18n\"),s._uU(4,\"\\n          \"),s.TgZ(5,\"span\",17),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n        \"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(2),s.s9C(\"title\",s.lcZ(3,2,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(7,4,\"loading\")))}function re(e,t){}class ae{constructor(e,t,i,n,o,r){this.policyApiService=e,this.i18nService=t,this.platformUtilsService=i,this.componentFactoryResolver=n,this.cdr=o,this.logService=r,this.policiesEnabledMap=new Map,this.onSavedPolicy=new s.vpe,this.policyType=u.Mi,this.loading=!0,this.enabled=!1}ngAfterViewInit(){return ne(this,void 0,void 0,(function*(){yield this.load(),this.loading=!1;const e=this.componentFactoryResolver.resolveComponentFactory(this.policy.component);this.policyComponent=this.policyFormRef.createComponent(e).instance,this.policyComponent.policy=this.policy,this.policyComponent.policyResponse=this.policyResponse,this.cdr.detectChanges()}))}load(){return ne(this,void 0,void 0,(function*(){try{this.policyResponse=yield this.policyApiService.getPolicy(this.organizationId,this.policy.type)}catch(e){if(404!==e.statusCode)throw e;this.policyResponse=new $.j({Enabled:!1})}}))}submit(){return ne(this,void 0,void 0,(function*(){let e;try{e=yield this.policyComponent.buildRequest(this.policiesEnabledMap)}catch(t){return void this.platformUtilsService.showToast(\"error\",null,t.message)}try{this.formPromise=this.policyApiService.putPolicy(this.organizationId,this.policy.type,e),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"editedPolicyId\",this.i18nService.t(this.policy.name))),this.onSavedPolicy.emit()}catch(t){this.logService.error(t)}}))}}ae.ɵfac=function(e){return new(e||ae)(s.Y36(W.P),s.Y36(y.D),s.Y36(X.P),s.Y36(s._Vd),s.Y36(s.sBO),s.Y36(ee.$))},ae.ɵcmp=s.Xpm({type:ae,selectors:[[\"app-policy-edit\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026s.Gf(se,7,s.s_b),2\u0026e){let e;s.iGM(e=s.CRH())\u0026\u0026(t.policyFormRef=e.first)}},inputs:{policy:\"policy\",organizationId:\"organizationId\",policiesEnabledMap:\"policiesEnabledMap\"},outputs:{onSavedPolicy:\"onSavedPolicy\"},decls:57,vars:25,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"policiesEditTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\"],[\"ngNativeValidate\",\"\",1,\"modal-content\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-header\"],[\"id\",\"policiesEditTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"class\",\"modal-body\",4,\"ngIf\"],[3,\"hidden\"],[\"policyForm\",\"\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"]],template:function(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n    \"),s.TgZ(4,\"form\",2,3),s.NdJ(\"ngSubmit\",(function(){return t.submit()})),s._uU(6,\"\\n      \"),s.TgZ(7,\"div\",4),s._uU(8,\"\\n        \"),s.TgZ(9,\"h1\",5),s._uU(10),s.ALo(11,\"i18n\"),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n        \"),s.TgZ(14,\"button\",6),s.ALo(15,\"i18n\"),s._uU(16,\"\\n          \"),s.TgZ(17,\"span\",7),s._uU(18,\"×\"),s.qZA(),s._uU(19,\"\\n        \"),s.qZA(),s._uU(20,\"\\n      \"),s.qZA(),s._uU(21,\"\\n\\n      \"),s.TgZ(22,\"div\",8),s._uU(23,\"\\n        \"),s.YNc(24,oe,9,6,\"div\",9),s._uU(25,\"\\n        \"),s.TgZ(26,\"div\",10),s._uU(27,\"\\n          \"),s.TgZ(28,\"p\"),s._uU(29),s.ALo(30,\"i18n\"),s.qZA(),s._uU(31,\"\\n          \"),s.YNc(32,re,0,0,\"ng-template\",null,11,s.W1O),s._uU(34,\"\\n        \"),s.qZA(),s._uU(35,\"\\n      \"),s.qZA(),s._uU(36,\"\\n      \"),s.TgZ(37,\"div\",12),s._uU(38,\"\\n        \"),s.TgZ(39,\"button\",13),s._uU(40,\"\\n          \"),s._UZ(41,\"i\",14),s.ALo(42,\"i18n\"),s._uU(43,\"\\n          \"),s.TgZ(44,\"span\"),s._uU(45),s.ALo(46,\"i18n\"),s.qZA(),s._uU(47,\"\\n        \"),s.qZA(),s._uU(48,\"\\n        \"),s.TgZ(49,\"button\",15),s._uU(50),s.ALo(51,\"i18n\"),s.qZA(),s._uU(52,\"\\n      \"),s.qZA(),s._uU(53,\"\\n    \"),s.qZA(),s._uU(54,\"\\n  \"),s.qZA(),s._uU(55,\"\\n\"),s.qZA(),s._uU(56,\"\\n\")),2\u0026e){const e=s.MAs(5);s.xp6(4),s.Q6J(\"appApiAction\",t.formPromise),s.xp6(6),s.AsE(\"\\n          \",s.lcZ(11,11,\"editPolicy\"),\" - \",s.lcZ(12,13,t.policy.name),\"\\n        \"),s.xp6(4),s.s9C(\"appA11yTitle\",s.lcZ(15,15,\"close\")),s.xp6(10),s.Q6J(\"ngIf\",t.loading),s.xp6(2),s.Q6J(\"hidden\",t.loading),s.xp6(3),s.Oqu(s.lcZ(30,17,t.policy.description)),s.xp6(10),s.Q6J(\"disabled\",e.loading),s.xp6(2),s.s9C(\"title\",s.lcZ(42,19,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(46,21,\"save\")),s.xp6(5),s.hij(\"\\n          \",s.lcZ(51,23,\"cancel\"),\"\\n        \")}},dependencies:[v.O5,r.JL,r.F,te.B,ie.b,p.C],encapsulation:2});var le=i(75557),ce=i(28753),ue=i(2051),de=i(66385),pe=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const he=[\"editTemplate\"];function ge(e,t){1\u0026e\u0026\u0026(s.ynx(0),s._uU(1,\"\\n  \"),s._UZ(2,\"i\",4),s.ALo(3,\"i18n\"),s._uU(4,\"\\n  \"),s.TgZ(5,\"span\",5),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n\"),s.BQk()),2\u0026e\u0026\u0026(s.xp6(2),s.s9C(\"title\",s.lcZ(3,2,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(7,4,\"loading\")))}function fe(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"span\",11),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.Oqu(s.lcZ(2,1,\"on\")))}function me(e,t){if(1\u0026e){const e=s.EpF();s.TgZ(0,\"td\"),s._uU(1,\"\\n        \"),s.TgZ(2,\"a\",8),s.NdJ(\"click\",(function(){s.CHM(e);const t=s.oxw().$implicit,i=s.oxw(2);return s.KtG(i.edit(t))})),s._uU(3),s.ALo(4,\"i18n\"),s.qZA(),s._uU(5,\"\\n        \"),s.YNc(6,fe,3,3,\"span\",9),s._uU(7,\"\\n        \"),s.TgZ(8,\"small\",10),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n      \"),s.qZA()}if(2\u0026e){const e=s.oxw().$implicit,t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,3,e.name)),s.xp6(3),s.Q6J(\"ngIf\",t.policiesEnabledMap.get(e.type)),s.xp6(3),s.Oqu(s.lcZ(10,5,e.description))}}function ye(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"tr\"),s._uU(1,\"\\n      \"),s.YNc(2,me,12,7,\"td\",1),s._uU(3,\"\\n    \"),s.qZA()),2\u0026e){const e=t.$implicit,i=s.oxw(2);s.xp6(2),s.Q6J(\"ngIf\",e.display(i.organization))}}function ve(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"table\",6),s._uU(1,\"\\n  \"),s.TgZ(2,\"tbody\"),s._uU(3,\"\\n    \"),s.YNc(4,ye,4,1,\"tr\",7),s._uU(5,\"\\n  \"),s.qZA(),s._uU(6,\"\\n\"),s.qZA()),2\u0026e){const e=s.oxw();s.xp6(4),s.Q6J(\"ngForOf\",e.policies)}}function we(e,t){}class be{constructor(e,t,i,n,s,o){this.route=e,this.modalService=t,this.organizationService=i,this.policyApiService=n,this.policyListService=s,this.router=o,this.loading=!0,this.policiesEnabledMap=new Map}ngOnInit(){return pe(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=\u003epe(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,this.organization=yield this.organizationService.get(this.organizationId),this.policies=this.policyListService.getPolicies(),yield this.load(),this.route.queryParams.pipe((0,j.P)()).subscribe((e=\u003epe(this,void 0,void 0,(function*(){if(null!=e.policyId){const t=e.policyId;for(const e of this.orgPolicies)if(e.id===t){for(let t=0;t\u003cthis.policies.length;t++)if(this.policies[t].type===e.type){this.edit(this.policies[t]);break}break}}}))))}))))}))}load(){return pe(this,void 0,void 0,(function*(){const e=yield this.policyApiService.getPolicies(this.organizationId);this.orgPolicies=null!=e.data\u0026\u0026e.data.length\u003e0?e.data:[],this.orgPolicies.forEach((e=\u003e{this.policiesEnabledMap.set(e.type,e.enabled)})),this.loading=!1}))}edit(e){return pe(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(ae,this.editModalRef,(i=\u003e{i.policy=e,i.organizationId=this.organizationId,i.policiesEnabledMap=this.policiesEnabledMap,i.onSavedPolicy.subscribe((()=\u003e{t.close(),this.load()}))}))}))}}be.ɵfac=function(e){return new(e||be)(s.Y36(le.gz),s.Y36(H.Z),s.Y36(f.Mn),s.Y36(W.P),s.Y36(ce.x),s.Y36(le.F0))},be.ɵcmp=s.Xpm({type:be,selectors:[[\"app-org-policies\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026s.Gf(he,7,s.s_b),2\u0026e){let e;s.iGM(e=s.CRH())\u0026\u0026(t.editModalRef=e.first)}},decls:14,vars:5,consts:[[1,\"page-header\",\"d-flex\"],[4,\"ngIf\"],[\"class\",\"table table-hover table-list\",4,\"ngIf\"],[\"editTemplate\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"table\",\"table-hover\",\"table-list\"],[4,\"ngFor\",\"ngForOf\"],[\"href\",\"#\",\"appStopClick\",\"\",3,\"click\"],[\"bitBadge\",\"\",\"variant\",\"success\",4,\"ngIf\"],[1,\"text-muted\",\"d-block\"],[\"bitBadge\",\"\",\"variant\",\"success\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"h1\"),s._uU(3),s.ALo(4,\"i18n\"),s.qZA(),s._uU(5,\"\\n\"),s.qZA(),s._uU(6,\"\\n\"),s.YNc(7,ge,9,6,\"ng-container\",1),s._uU(8,\"\\n\"),s.YNc(9,ve,7,1,\"table\",2),s._uU(10,\"\\n\"),s.YNc(11,we,0,0,\"ng-template\",null,3,s.W1O),s._uU(13,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(3),s.Oqu(s.lcZ(4,3,\"policies\")),s.xp6(4),s.Q6J(\"ngIf\",t.loading),s.xp6(2),s.Q6J(\"ngIf\",!t.loading))},dependencies:[v.sg,v.O5,ue.O,de.l,p.C],encapsulation:2})},13159:(e,t,i)=\u003e{\"use strict\";i.d(t,{_P:()=\u003en,j1:()=\u003eE});var n,s=i(65017),o=i(98645),r=i(54019),a=i(33031),l=i(68362),c=i(58691),u=i(27646),d=i(89474),p=i(4519),h=i(98694),g=i(24852),f=i(78627),m=i(99721),y=i(42304),v=i(92236),w=i(97360),b=i(19419),U=i(53707),_=i(46246),A=i(36338),Z=i(81974),x=i(29465),S=i(18362),T=i(82933),C=i(94516),O=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function k(e,t){1\u0026e\u0026\u0026(g.ynx(0),g._uU(1),g.ALo(2,\"i18n\"),g.BQk()),2\u0026e\u0026\u0026(g.xp6(1),g.hij(\"\\n          \",g.lcZ(2,1,\"orgCreatedSponsorshipInvalid\"),\"\\n        \"))}function q(e,t){if(1\u0026e\u0026\u0026(g.TgZ(0,\"li\"),g._uU(1),g.ALo(2,\"i18n\"),g.qZA()),2\u0026e){const e=t.$implicit;g.xp6(1),g.AsE(\"\\n                \",e.count,\" \",g.lcZ(2,2,e.localizationKey),\"\\n              \")}}function P(e,t){if(1\u0026e\u0026\u0026(g.ynx(0),g._uU(1),g.ALo(2,\"i18n\"),g.TgZ(3,\"ul\"),g._uU(4,\"\\n              \"),g.YNc(5,q,3,4,\"li\",13),g._uU(6,\"\\n            \"),g.qZA(),g._uU(7),g.ALo(8,\"i18n\"),g.BQk()),2\u0026e){const e=g.oxw(2);g.xp6(1),g.hij(\"\\n            \",g.xi3(2,3,\"deletingOrganizationContentWarning\",null==e.organization?null:e.organization.name),\"\\n            \"),g.xp6(4),g.Q6J(\"ngForOf\",e.organizationContentSummary.itemCountByType),g.xp6(2),g.hij(\"\\n            \",g.lcZ(8,6,\"deletingOrganizationActiveUserAccountsWarning\"),\"\\n          \")}}function I(e,t){if(1\u0026e\u0026\u0026(g._uU(0,\"\\n          \"),g.YNc(1,P,9,8,\"ng-container\",12),g._uU(2,\"\\n        \")),2\u0026e){const e=g.oxw();g.xp6(1),g.Q6J(\"ngIf\",e.organizationContentSummary.totalItemCount\u003e0)}}class M{getKey(e){return 1==e?this.singular:this.plural}constructor(e,t){this.singular=e,this.plural=t}}class N{get localizationKey(){return this.localizationKeyOptions.getKey(this.count)}constructor(e,t){this.count=e,this.localizationKeyOptions=t}}class L{constructor(){this.totalItemCount=0,this.itemCountByType=[]}}!function(e){e.Deleted=\"deleted\",e.Canceled=\"canceled\"}(n||(n={}));class D{constructor(e,t,i,s,a,l,c,u,d){this.params=e,this.dialogRef=t,this.i18nService=i,this.platformUtilsService=s,this.userVerificationService=a,this.cipherService=l,this.organizationService=c,this.organizationApiService=u,this.formBuilder=d,this.destroy$=new r.x,this.deleteOrganizationRequestType=\"RegularDelete\",this.organizationContentSummary=new L,this.formGroup=this.formBuilder.group({secret:new o.NI(null,[o.kI.required])}),this.submit=()=\u003eO(this,void 0,void 0,(function*(){yield this.userVerificationService.buildRequest(this.formGroup.value.secret).then((e=\u003ethis.organizationApiService.delete(this.organization.id,e))),this.platformUtilsService.showToast(\"success\",this.i18nService.t(\"organizationDeleted\"),this.i18nService.t(\"organizationDeletedDesc\")),this.dialogRef.close(n.Deleted)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){return O(this,void 0,void 0,(function*(){this.deleteOrganizationRequestType=this.params.requestType,(0,a.a)([this.organizationService.get$(this.params.organizationId),this.cipherService.getAllFromApiForOrganization(this.params.organizationId)]).pipe((0,l.R)(this.destroy$)).subscribe((([e,t])=\u003e{this.organization=e,this.organizationContentSummary=this.buildOrganizationContentSummary(t),this.loaded=!0}))}))}buildOrganizationContentSummary(e){const t=new L,i=e.filter((e=\u003enull==e.deletedDate));if(i.length\u003c1)return t;t.totalItemCount=i.length;for(const n of u.c.iterateEnum(d.Ou)){const e=this.getOrganizationItemCountByType(i,n);e\u003e0\u0026\u0026t.itemCountByType.push(new N(e,this.getOrganizationItemLocalizationKeysByType(d.Ou[n])))}return t}getOrganizationItemCountByType(e,t){return e.filter((e=\u003ee.type==t)).length}getOrganizationItemLocalizationKeysByType(e){return new M(`type${e}`,`type${e}Plural`)}}function E(e,t){return e.open(D,t)}D.ɵfac=function(e){return new(e||D)(g.Y36(s.Kt),g.Y36(s.zj),g.Y36(f.D),g.Y36(m.P),g.Y36(y.i),g.Y36(v.u),g.Y36(c.Mn),g.Y36(w.M),g.Y36(o.qu))},D.ɵcmp=g.Xpm({type:D,selectors:[[\"app-delete-organization\"]],standalone:!0,features:[g.jDz],decls:39,vars:19,consts:[[3,\"formGroup\",\"bitSubmit\"],[3,\"loading\"],[\"bitDialogTitle\",\"\"],[\"bitDialogContent\",\"\"],[\"type\",\"warning\"],[\"id\",\"organizationDeleteDescription\"],[4,\"ngIf\",\"ngIfElse\"],[\"regularDelete\",\"\"],[\"formControlName\",\"secret\"],[\"bitDialogFooter\",\"\"],[\"type\",\"submit\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"danger\",3,\"disabled\"],[\"type\",\"button\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"secondary\",\"bitDialogClose\",\"\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"]],template:function(e,t){if(1\u0026e\u0026\u0026(g.TgZ(0,\"form\",0),g._uU(1,\"\\n  \"),g.TgZ(2,\"bit-dialog\",1),g._uU(3,\"\\n    \"),g.TgZ(4,\"span\",2),g._uU(5),g.ALo(6,\"i18n\"),g.qZA(),g._uU(7,\"\\n    \"),g.TgZ(8,\"div\",3),g._uU(9,\"\\n      \"),g.TgZ(10,\"app-callout\",4),g._uU(11),g.ALo(12,\"i18n\"),g.qZA(),g._uU(13,\"\\n      \"),g.TgZ(14,\"p\",5),g._uU(15,\"\\n        \"),g.YNc(16,k,3,3,\"ng-container\",6),g._uU(17,\"\\n        \"),g.YNc(18,I,3,1,\"ng-template\",null,7,g.W1O),g._uU(20,\"\\n      \"),g.qZA(),g._uU(21,\"\\n      \"),g.TgZ(22,\"app-user-verification\",8),g._uU(23,\" \"),g.qZA(),g._uU(24,\"\\n    \"),g.qZA(),g._uU(25,\"\\n    \"),g.TgZ(26,\"div\",9),g._uU(27,\"\\n      \"),g.TgZ(28,\"button\",10),g._uU(29),g.ALo(30,\"i18n\"),g.qZA(),g._uU(31,\"\\n      \"),g.TgZ(32,\"button\",11),g._uU(33),g.ALo(34,\"i18n\"),g.qZA(),g._uU(35,\"\\n    \"),g.qZA(),g._uU(36,\"\\n  \"),g.qZA(),g._uU(37,\"\\n\"),g.qZA(),g._uU(38,\"\\n\")),2\u0026e){const e=g.MAs(19);g.Q6J(\"formGroup\",t.formGroup)(\"bitSubmit\",t.submit),g.xp6(2),g.Q6J(\"loading\",!t.loaded),g.xp6(3),g.Oqu(g.lcZ(6,10,\"deleteOrganization\")),g.xp6(6),g.Oqu(g.xi3(12,12,\"deletingOrganizationIsPermanentWarning\",null==t.organization?null:t.organization.name)),g.xp6(5),g.Q6J(\"ngIf\",\"InvalidFamiliesForEnterprise\"===t.deleteOrganizationRequestType)(\"ngIfElse\",e),g.xp6(12),g.Q6J(\"disabled\",!t.loaded),g.xp6(1),g.hij(\"\\n        \",g.lcZ(30,15,\"deleteOrganization\"),\"\\n      \"),g.xp6(4),g.hij(\"\\n        \",g.lcZ(34,17,\"cancel\"),\"\\n      \")}},dependencies:[h.m,b.sg,b.O5,o._Y,o.JJ,o.JL,o.sg,o.u,U.O,_.b,A.u,Z.r,x.a,S.f,T.C,p.Zn,C.W],encapsulation:2})},90054:(e,t,i)=\u003e{\"use strict\";i.d(t,{f:()=\u003eue,R:()=\u003ece});var n=i(24852),s=i(98645),o=i(54019),r=i(68362);function a(e,t,i){let n=0,s=e.length||0,o=-1,r=0;for(;n\u003cs;)if(o=Math.floor((n+s)/2),r=i(e[o],t),r\u003c0)n=o+1;else{if(!(r\u003e0))return o;s=o}return n}class l{constructor(e,t){this.controlFactory=e,this.compareFn=t,this.allItems=[],this.selectedItems=[],this.deselectedItems=[],this.formArray=new s.Oe([])}selectItems(e,t){for(const i of e)this.selectItem(i,t)}deselectItems(e){for(const t of e)this.deselectItem(t)}deselectAll(){this.formArray.clear(),this.selectedItems=[],this.deselectedItems=[...this.allItems]}selectItem(e,t){const i=this.deselectedItems.findIndex((t=\u003et.id===e));if(-1===i)return;const n=this.deselectedItems[i];this.deselectedItems=[...this.deselectedItems.slice(0,i),...this.deselectedItems.slice(i+1)];const s=a(this.selectedItems,n,this.compareFn);this.selectedItems=[...this.selectedItems.slice(0,s),n,...this.selectedItems.slice(s)];const o=this.controlFactory(n);o.patchValue(Object.assign({id:e},t)),this.formArray.insert(s,o)}deselectItem(e){const t=this.selectedItems.findIndex((t=\u003et.id===e));if(-1===t)return;const i=this.selectedItems[t];this.selectedItems=[...this.selectedItems.slice(0,t),...this.selectedItems.slice(t+1)],this.formArray.removeAt(t);const n=a(this.deselectedItems,i,this.compareFn);this.deselectedItems=[...this.deselectedItems.slice(0,n),i,...this.deselectedItems.slice(n)]}populateItems(e,t=[]){this.formArray.clear(),this.allItems=[...e].sort(this.compareFn),this.selectedItems=[],this.deselectedItems=[...this.allItems];for(const i of t)this.selectItem(i.id,i)}forEachControlItem(e){for(let t=0;t\u003cthis.formArray.length;t++)e(this.formArray.at(t),this.selectedItems[t])}}var c=i(34632),u=i(78627),d=i(19419),p=i(33245),h=i(14970),g=i(66385),f=i(24637),m=i(11512),y=i(8776),v=i(12546),w=i(23182),b=i(49399);function U(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n._UZ(1,\"i\",4),n._uU(2,\"\\n  \")),2\u0026e){const e=n.oxw();n.xp6(1),n.Q6J(\"title\",e.loadingText)}}function _(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"i\",8),2\u0026e){const e=n.oxw().item;n.Gre(\"tw-mr-1 bwi bwi-fw \",e.icon,\"\")}}function A(e,t){if(1\u0026e){const e=n.EpF();n._uU(0,\"\\n    \"),n.TgZ(1,\"button\",5),n.NdJ(\"click\",(function(){const t=n.CHM(e),i=t.item,s=t.clear;return n.KtG(s(i))})),n._uU(2,\"\\n      \"),n.YNc(3,_,1,3,\"i\",6),n._uU(4),n._UZ(5,\"i\",7),n._uU(6,\"\\n    \"),n.qZA(),n._uU(7,\"\\n  \")}if(2\u0026e){const e=t.item,i=n.oxw();n.xp6(1),n.Q6J(\"disabled\",i.disabled),n.xp6(2),n.Q6J(\"ngIf\",null!=e.icon),n.xp6(1),n.hij(\"\\n      \",e.labelName,\"\\n      \")}}function Z(e,t){1\u0026e\u0026\u0026n._UZ(0,\"i\",14)}function x(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"i\",8),2\u0026e){const e=n.oxw().item;n.Gre(\"bwi bwi-fw \",e.icon,\"\")}}function S(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n.TgZ(1,\"div\",9),n._uU(2,\"\\n      \"),n.TgZ(3,\"div\",10),n._uU(4,\"\\n        \"),n.YNc(5,Z,1,0,\"i\",11),n._uU(6,\"\\n      \"),n.qZA(),n._uU(7,\"\\n      \"),n.TgZ(8,\"div\",12),n._uU(9,\"\\n        \"),n.YNc(10,x,1,3,\"i\",6),n._uU(11,\"\\n      \"),n.qZA(),n._uU(12,\"\\n      \"),n.TgZ(13,\"div\",13),n._uU(14),n.qZA(),n._uU(15,\"\\n    \"),n.qZA(),n._uU(16,\"\\n  \")),2\u0026e){const e=t.item,i=n.oxw();n.xp6(5),n.Q6J(\"ngIf\",i.isSelected(e)),n.xp6(5),n.Q6J(\"ngIf\",null!=e.icon),n.xp6(4),n.hij(\"\\n        \",e.listName,\"\\n      \")}}let T=0;class C{constructor(e,t){this.i18nService=e,this.ngControl=t,this.removeSelectedItems=!1,this.loading=!1,this.disabled=!1,this.searchInputId=\"search-input-\"+T++,this.onItemsConfirmed=new n.vpe,this.keyDown=e=\u003e!(!this.select.isOpen\u0026\u0026\"Enter\"===e.key\u0026\u0026!(0,y.Vb)(e))\u0026\u0026(!(this.select.isOpen\u0026\u0026\"Escape\"===e.key\u0026\u0026!(0,y.Vb)(e))||(this.selectedItems=[],this.select.close(),e.stopPropagation(),!1)),this.id=\"bit-multi-select-\"+T++,null!=t\u0026\u0026(t.valueAccessor=this)}ngOnInit(){var e;this.placeholder=null!==(e=this.placeholder)\u0026\u0026void 0!==e?e:this.i18nService.t(\"multiSelectPlaceholder\"),this.loadingText=this.i18nService.t(\"multiSelectLoading\")}isSelected(e){var t;return null!=(null===(t=this.selectedItems)||void 0===t?void 0:t.find((t=\u003et.id===e.id)))}onDropdownClosed(){if(null!=this.selectedItems\u0026\u00260!=this.selectedItems.length\u0026\u0026(this.onItemsConfirmed.emit(this.selectedItems),this.removeSelectedItems)){let e=this.baseItems;this.selectedItems.forEach((t=\u003e{e=e.filter((e=\u003et.id!==e.id))})),this.selectedItems=null,this.baseItems=e}}writeValue(e){this.selectedItems=e}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouched=e}setDisabledState(e){this.disabled=e}onChange(e){this.notifyOnChange\u0026\u0026this.notifyOnChange(e)}onBlur(){this.notifyOnTouched\u0026\u0026this.notifyOnTouched()}get ariaDescribedBy(){return this._ariaDescribedBy}set ariaDescribedBy(e){var t;this._ariaDescribedBy=e,null===(t=this.select)||void 0===t||t.searchInput.nativeElement.setAttribute(\"aria-describedby\",e)}get labelForId(){return this.searchInputId}get required(){var e,t,i,n;return null!==(n=null!==(e=this._required)\u0026\u0026void 0!==e?e:null===(i=null===(t=this.ngControl)||void 0===t?void 0:t.control)||void 0===i?void 0:i.hasValidator(s.kI.required))\u0026\u0026void 0!==n\u0026\u0026n}set required(e){this._required=null!=e\u0026\u0026!1!==e}get hasError(){var e,t;return\"INVALID\"===(null===(e=this.ngControl)||void 0===e?void 0:e.status)\u0026\u0026(null===(t=this.ngControl)||void 0===t?void 0:t.touched)}get error(){var e,t;const i=Object.keys(null===(e=this.ngControl)||void 0===e?void 0:e.errors)[0];return[i,null===(t=this.ngControl)||void 0===t?void 0:t.errors[i]]}}C.ɵfac=function(e){return new(e||C)(n.Y36(u.D),n.Y36(s.a5,10))},C.ɵcmp=n.Xpm({type:C,selectors:[[\"bit-multi-select\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(v.w9,5),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.select=e.first)}},hostVars:3,hostBindings:function(e,t){2\u0026e\u0026\u0026(n.Ikx(\"id\",t.id),n.uIk(\"aria-describedby\",t.ariaDescribedBy)(\"required\",t.required))},inputs:{baseItems:\"baseItems\",removeSelectedItems:\"removeSelectedItems\",placeholder:\"placeholder\",loading:\"loading\",disabled:\"disabled\",selectedItems:\"selectedItems\",id:\"id\",required:\"required\"},outputs:{onItemsConfirmed:\"onItemsConfirmed\"},features:[n._Bn([{provide:w.v,useExisting:C}])],decls:11,vars:17,consts:[[\"bindLabel\",\"listName\",\"groupBy\",\"parentGrouping\",\"appendTo\",\"body\",3,\"items\",\"ngModel\",\"placeholder\",\"loading\",\"loadingText\",\"notFoundText\",\"clearAllText\",\"multiple\",\"closeOnSelect\",\"disabled\",\"clearSearchOnAdd\",\"labelForId\",\"keyDownFn\",\"ngModelChange\",\"blur\",\"close\"],[\"ng-loadingspinner-tmp\",\"\"],[\"ng-label-tmp\",\"\"],[\"ng-option-tmp\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"tw-mr-1\",3,\"title\"],[\"type\",\"button\",\"bitBadge\",\"\",\"variant\",\"primary\",1,\"tw-mr-1\",\"disabled:tw-border-0\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",3,\"class\",4,\"ngIf\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-close\",\"bwi-sm\",\"tw-ml-1\"],[\"aria-hidden\",\"true\"],[1,\"tw-flex\"],[1,\"tw-w-7\",\"tw-flex-none\"],[\"class\",\"bwi bwi-fw bwi-check\",\"aria-hidden\",\"true\",4,\"ngIf\"],[1,\"tw-mr-2\",\"tw-flex-initial\"],[1,\"tw-flex-1\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-check\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"ng-select\",0),n.NdJ(\"ngModelChange\",(function(e){return t.selectedItems=e}))(\"ngModelChange\",(function(e){return t.onChange(e)}))(\"blur\",(function(){return t.onBlur()}))(\"close\",(function(){return t.onDropdownClosed()})),n.ALo(1,\"i18n\"),n.ALo(2,\"i18n\"),n._uU(3,\"\\n  \"),n.YNc(4,U,3,1,\"ng-template\",1),n._uU(5,\"\\n  \"),n.YNc(6,A,8,3,\"ng-template\",2),n._uU(7,\"\\n  \"),n.YNc(8,S,17,3,\"ng-template\",3),n._uU(9,\"\\n\"),n.qZA(),n._uU(10,\"\\n\")),2\u0026e\u0026\u0026(n.s9C(\"notFoundText\",n.lcZ(1,13,\"multiSelectNotFound\")),n.s9C(\"clearAllText\",n.lcZ(2,15,\"multiSelectClearAll\")),n.Q6J(\"items\",t.baseItems)(\"ngModel\",t.selectedItems)(\"placeholder\",t.placeholder)(\"loading\",t.loading)(\"loadingText\",t.loadingText)(\"multiple\",!0)(\"closeOnSelect\",!1)(\"disabled\",t.disabled)(\"clearSearchOnAdd\",!0)(\"labelForId\",t.labelForId)(\"keyDownFn\",t.keyDown))},dependencies:[d.O5,s.JJ,s.On,v.w9,v.ir,v.mR,v.dk,g.l,b.C],encapsulation:2});var O=i(36179),k=i(44358),q=i(21656),P=i(54735),I=i(50941),M=i(26361),N=i(82933),L=i(20099);class D{constructor(e){this.i18nService=e}transform(e,t){if(null==e)return null!=t?t:this.i18nService.t(\"unknown\");switch(e){case L.je.Owner:return this.i18nService.t(\"owner\");case L.je.Admin:return this.i18nService.t(\"admin\");case L.je.User:return this.i18nService.t(\"user\");case L.je.Manager:return this.i18nService.t(\"manager\");case L.je.Custom:return this.i18nService.t(\"custom\")}}}D.ɵfac=function(e){return new(e||D)(n.Y36(u.D,16))},D.ɵpipe=n.Yjl({name:\"userType\",type:D,pure:!0});var E=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function F(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"option\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=t.$implicit;n.Q6J(\"value\",e.perm),n.xp6(1),n.hij(\"\\n        \",n.lcZ(2,2,e.labelId),\"\\n      \")}}const R=function(){return{standalone:!0}};function J(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"bit-form-field\",13),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-label\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n    \"),n._uU(6,\"\\n    \"),n.TgZ(7,\"select\",14),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.initialPermission=t)}))(\"blur\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.handleBlur())})),n._uU(8,\"\\n      \"),n.YNc(9,F,3,4,\"option\",15),n._uU(10,\"\\n    \"),n.qZA(),n._uU(11,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,5,\"permission\")),n.xp6(4),n.Q6J(\"disabled\",e.disabled)(\"ngModel\",e.initialPermission)(\"ngModelOptions\",n.DdM(7,R)),n.xp6(2),n.Q6J(\"ngForOf\",e.permissionList)}}function Y(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"bit-hint\"),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.Oqu(e.selectorHelpText)}}function z(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",17),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",18),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n          \",n.lcZ(4,1,\"permission\"),\"\\n        \"))}function K(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",19),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"role\")))}function Q(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",20),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"group\")))}function B(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\",34),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n                \",n.lcZ(2,1,\"invited\"),\"\\n              \"))}function G(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",35),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(\"\\n              \",e.email,\"\\n            \")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",29),n._uU(1,\"\\n          \"),n._UZ(2,\"bit-avatar\",30),n._uU(3,\"\\n          \"),n.TgZ(4,\"div\",31),n._uU(5,\"\\n            \"),n.TgZ(6,\"div\"),n._uU(7),n.YNc(8,B,3,3,\"span\",32),n._uU(9,\"\\n            \"),n.qZA(),n._uU(10,\"\\n            \"),n.YNc(11,G,2,1,\"div\",33),n._uU(12,\"\\n          \"),n.qZA(),n._uU(13,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(2),n.s9C(\"text\",e.labelName),n.xp6(5),n.hij(\"\\n              \",e.labelName,\"\\n              \"),n.xp6(1),n.Q6J(\"ngIf\",0==e.status),n.xp6(3),n.Q6J(\"ngIf\",0!=e.status)}}function j(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",29),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",36),n._uU(3,\"\\n          \"),n.TgZ(4,\"span\"),n._uU(5),n.qZA(),n._uU(6,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(2),n.Q6J(\"ngClass\",e.icon||t.itemIcon(e)),n.xp6(3),n.Oqu(e.labelName)}}function H(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"option\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=t.$implicit;n.Q6J(\"value\",e.perm),n.xp6(1),n.hij(\"\\n                \",n.lcZ(2,2,e.labelId),\"\\n              \")}}function $(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n          \"),n.TgZ(2,\"label\",39),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.TgZ(6,\"div\",40),n._uU(7,\"\\n            \"),n.TgZ(8,\"select\",41),n.NdJ(\"blur\",(function(){n.CHM(e);const t=n.oxw(4);return n.KtG(t.handleBlur())})),n._uU(9,\"\\n              \"),n.YNc(10,H,3,4,\"option\",15),n._uU(11,\"\\n            \"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"label\",42),n._uU(14,\"\\n              \"),n._UZ(15,\"i\",43),n._uU(16,\"\\n            \"),n.qZA(),n._uU(17,\"\\n          \"),n.qZA(),n._uU(18,\"\\n        \"),n.BQk()}if(2\u0026e){const e=n.oxw(2),t=e.index,i=e.$implicit,s=n.oxw(2);n.xp6(2),n.Q6J(\"for\",\"permission\"+t),n.xp6(1),n.AsE(\"\",i.labelName,\" \",n.lcZ(4,6,\"permission\"),\"\"),n.xp6(5),n.Q6J(\"id\",\"permission\"+t),n.xp6(2),n.Q6J(\"ngForOf\",s.permissionList),n.xp6(3),n.Q6J(\"for\",\"permission\"+t)}}function W(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",46),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n._UZ(4,\"i\",47),n._uU(5,\"\\n          \"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J(\"appA11yTitle\",n.lcZ(1,2,t.accessAllLabelId(e))),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"canEdit\"),\"\\n            \")}}function X(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",48),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J(\"title\",n.lcZ(1,2,t.permissionLabelId(e.readonlyPermission))),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,t.permissionLabelId(e.readonlyPermission)),\"\\n          \")}}function ee(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n          \"),n.YNc(1,W,6,6,\"div\",44),n._uU(2,\"\\n\\n          \"),n.YNc(3,X,4,6,\"div\",45),n._uU(4,\"\\n        \")),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.Q6J(\"ngIf\",e.accessAllItems),n.xp6(2),n.Q6J(\"ngIf\",e.readonly)}}function te(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1,\"\\n        \"),n.YNc(2,$,19,8,\"ng-container\",37),n._uU(3,\"\\n\\n        \"),n.YNc(4,ee,5,2,\"ng-template\",null,38,n.W1O),n._uU(6,\"\\n      \"),n.qZA()),2\u0026e){const e=n.MAs(5),t=n.oxw().$implicit,i=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",i.canEditItemPermission(t))(\"ngIfElse\",e)}}function ie(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1),n.ALo(2,\"userType\"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n        \",n.xi3(2,1,e.role,\"-\"),\"\\n      \")}}function ne(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw().$implicit;let t;n.xp6(1),n.hij(\"\\n        \",null!==(t=e.viaGroupName)\u0026\u0026void 0!==t?t:\"-\",\"\\n      \")}}function se(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",49),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return i.selectionList.deselectItem(t.id),n.KtG(i.handleBlur())})),n.ALo(1,\"i18n\"),n.qZA()}if(2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.hYB(\"appA11yTitle\",\"\",n.lcZ(1,3,\"remove\"),\" \",e.labelName,\"\"),n.Q6J(\"disabled\",t.disabled)}}const oe=function(e){return{\"tw-text-muted\":e}};function re(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"tr\",22),n._uU(1,\"\\n      \"),n.TgZ(2,\"td\",23),n._uU(3,\"\\n        \"),n.YNc(4,V,14,4,\"div\",24),n._uU(5,\"\\n\\n        \"),n.YNc(6,j,7,2,\"div\",25),n._uU(7,\"\\n      \"),n.qZA(),n._uU(8,\"\\n\\n      \"),n.YNc(9,te,7,2,\"td\",26),n._uU(10,\"\\n\\n      \"),n.YNc(11,ie,3,4,\"td\",26),n._uU(12,\"\\n\\n      \"),n.YNc(13,ne,2,1,\"td\",26),n._uU(14,\"\\n\\n      \"),n.TgZ(15,\"td\",27),n._uU(16,\"\\n        \"),n.YNc(17,se,2,5,\"button\",28),n._uU(18,\"\\n      \"),n.qZA(),n._uU(19,\"\\n    \"),n.qZA()),2\u0026e){const e=t.$implicit,i=t.index,s=n.oxw(2);n.Q6J(\"formGroupName\",i)(\"ngClass\",n.VKq(8,oe,e.readonly)),n.xp6(2),n.Q6J(\"ngSwitch\",e.type),n.xp6(2),n.Q6J(\"ngSwitchCase\",s.itemType.Member),n.xp6(5),n.Q6J(\"ngIf\",\"hidden\"!=s.permissionMode),n.xp6(2),n.Q6J(\"ngIf\",s.showMemberRoles),n.xp6(2),n.Q6J(\"ngIf\",s.showGroupColumn),n.xp6(4),n.Q6J(\"ngIf\",!e.readonly)}}function ae(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"tr\"),n._uU(1,\"\\n      \"),n.TgZ(2,\"td\",7),n._uU(3),n.qZA(),n._uU(4,\"\\n    \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.emptySelectionText)}}function le(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n.YNc(1,re,20,10,\"tr\",21),n._uU(2,\"\\n    \"),n.YNc(3,ae,5,1,\"tr\",4),n._uU(4,\"\\n  \")),2\u0026e){const e=n.oxw();n.xp6(1),n.Q6J(\"ngForOf\",e.selectionList.selectedItems),n.xp6(2),n.Q6J(\"ngIf\",0==e.selectionList.selectedItems.length)}}var ce;!function(e){e.Hidden=\"hidden\",e.Readonly=\"readonly\",e.Edit=\"edit\"}(ce||(ce={}));class ue{get items(){return this.selectionList.allItems}set items(e){var t;const i=(null!==(t=this.selectionList.formArray.getRawValue())\u0026\u0026void 0!==t?t:[]).concat(e.filter((e=\u003ee.readonly)));this.selectionList.populateItems(e.map((e=\u003e{var t;return e.icon=null!==(t=e.icon)\u0026\u0026void 0!==t?t:this.itemIcon(e),e})),i)}get permissionMode(){return this._permissionMode}set permissionMode(e){this._permissionMode=e,this.updateAllRowControlDisableStates()}constructor(e,t){this.formBuilder=e,this.i18nService=t,this.destroy$=new o.x,this.updateRowControlDisableState=(e,t)=\u003e{t.readonly?e.disable():(e.enable(),(t.accessAllItems||this.permissionMode!=ce.Edit)\u0026\u0026e.controls.permission.disable())},this.updateAllRowControlDisableStates=()=\u003e{this.selectionList.forEachControlItem(((e,t)=\u003e{this.updateRowControlDisableState(e,t)}))},this.selectionList=new l((e=\u003e{const t=this.formBuilder.control(this.initialPermission),i=this.formBuilder.group({id:new s.NI(e.id),type:new s.NI(e.type),permission:t});return this.updateRowControlDisableState(i,e),i}),this._itemComparator.bind(this)),this.formGroup=this.formBuilder.group({items:this.selectionList.formArray}),this.itemType=c.zD,this.initialPermission=c.OU.View,this._permissionMode=ce.Hidden}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouch=e}setDisabledState(e){this.disabled=e,this.disabled?this.formGroup.disable():(this.formGroup.enable(),this.updateAllRowControlDisableStates())}writeValue(e){if(this.pauseChangeNotification=!0,this.selectionList.deselectAll(),this.selectionList.selectItems(this.items.filter((e=\u003ee.readonly)).map((e=\u003ee.id))),null!=e){if(!Array.isArray(e))throw new Error(\"The access selector component only supports Array form values!\");for(const t of e)this.selectionList.selectItem(t.id,t);this.pauseChangeNotification=!1}else this.pauseChangeNotification=!1}ngOnInit(){return E(this,void 0,void 0,(function*(){this.permissionList=(0,c.pZ)(this.flexibleCollectionsEnabled),this.selectionList.formArray.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe((e=\u003e{this.notifyOnChange\u0026\u0026!this.pauseChangeNotification\u0026\u0026(this.selectionList.formArray.disabled?this.notifyOnChange([]):this.notifyOnChange(e))}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleBlur(){this.notifyOnTouch\u0026\u0026this.notifyOnTouch()}selectItems(e){this.pauseChangeNotification=!0,this.selectionList.selectItems(e.map((e=\u003ee.id))),this.pauseChangeNotification=!1,null!=this.notifyOnChange\u0026\u0026this.notifyOnChange(this.selectionList.formArray.value)}itemIcon(e){switch(e.type){case c.zD.Collection:return\"bwi-collection\";case c.zD.Group:return\"bwi-users\";case c.zD.Member:return\"bwi-user\"}}permissionLabelId(e){var t;return null===(t=this.permissionList.find((t=\u003et.perm==e)))||void 0===t?void 0:t.labelId}accessAllLabelId(e){return e.type==c.zD.Group?\"groupAccessAll\":\"memberAccessAll\"}canEditItemPermission(e){return this.permissionMode==ce.Edit\u0026\u0026!e.readonly\u0026\u0026!e.accessAllItems}_itemComparator(e,t){return e.type-t.type||this.i18nService.collator.compare(e.listName,t.listName)||this.i18nService.collator.compare(e.labelName,t.labelName)||Number(t.readonly)-Number(e.readonly)}}ue.ɵfac=function(e){return new(e||ue)(n.Y36(s.qu),n.Y36(u.D))},ue.ɵcmp=n.Xpm({type:ue,selectors:[[\"bit-access-selector\"]],inputs:{items:\"items\",permissionMode:\"permissionMode\",columnHeader:\"columnHeader\",selectorLabelText:\"selectorLabelText\",selectorHelpText:\"selectorHelpText\",emptySelectionText:\"emptySelectionText\",showMemberRoles:\"showMemberRoles\",showGroupColumn:\"showGroupColumn\",flexibleCollectionsEnabled:\"flexibleCollectionsEnabled\"},features:[n._Bn([{provide:s.JU,useExisting:(0,n.Gpc)((()=\u003eue)),multi:!0}])],decls:39,vars:11,consts:[[1,\"tw-flex\"],[\"class\",\"tw-mr-3 tw-shrink-0\",4,\"ngIf\"],[1,\"tw-grow\"],[1,\"tw-w-full\",3,\"baseItems\",\"removeSelectedItems\",\"disabled\",\"onItemsConfirmed\",\"blur\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"header\",\"\"],[\"bitCell\",\"\"],[\"bitCell\",\"\",\"id\",\"permissionColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",\"id\",\"roleColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",\"id\",\"groupColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",1,\"tw-w-20\"],[\"body\",\"\",\"formArrayName\",\"items\"],[1,\"tw-mr-3\",\"tw-shrink-0\"],[\"bitInput\",\"\",1,\"tw-h-[35px]\",3,\"disabled\",\"ngModel\",\"ngModelOptions\",\"ngModelChange\",\"blur\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"value\"],[\"bitCell\",\"\",\"id\",\"permissionColHeading\"],[1,\"tw-border\",\"tw-border-solid\",\"tw-border-transparent\"],[\"bitCell\",\"\",\"id\",\"roleColHeading\"],[\"bitCell\",\"\",\"id\",\"groupColHeading\"],[\"bitRow\",\"\",3,\"formGroupName\",\"ngClass\",4,\"ngFor\",\"ngForOf\"],[\"bitRow\",\"\",3,\"formGroupName\",\"ngClass\"],[\"bitCell\",\"\",3,\"ngSwitch\"],[\"class\",\"tw-flex tw-items-center\",4,\"ngSwitchCase\"],[\"class\",\"tw-flex tw-items-center\",4,\"ngSwitchDefault\"],[\"bitCell\",\"\",4,\"ngIf\"],[\"bitCell\",\"\",1,\"tw-text-right\"],[\"type\",\"button\",\"bitIconButton\",\"bwi-close\",\"buttonType\",\"muted\",3,\"appA11yTitle\",\"disabled\",\"click\",4,\"ngIf\"],[1,\"tw-flex\",\"tw-items-center\"],[\"size\",\"small\",1,\"tw-mr-3\",3,\"text\"],[1,\"tw-flex\",\"tw-flex-col\"],[\"bitBadge\",\"\",\"variant\",\"secondary\",4,\"ngIf\"],[\"class\",\"tw-text-xs tw-text-muted\",4,\"ngIf\"],[\"bitBadge\",\"\",\"variant\",\"secondary\"],[1,\"tw-text-xs\",\"tw-text-muted\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"tw-mr-3\",\"tw-px-0.5\",\"tw-text-2xl\",3,\"ngClass\"],[4,\"ngIf\",\"ngIfElse\"],[\"readOnlyPerm\",\"\"],[1,\"sr-only\",3,\"for\"],[1,\"tw-relative\",\"tw-inline-block\"],[\"bitInput\",\"\",\"formControlName\",\"permission\",1,\"tw-apperance-none\",\"-tw-ml-3\",\"tw-max-w-40\",\"tw-appearance-none\",\"tw-overflow-ellipsis\",\"!tw-rounded\",\"tw-border-transparent\",\"!tw-bg-transparent\",\"tw-pr-6\",\"tw-font-bold\",\"hover:tw-border-primary-700\",3,\"id\",\"blur\"],[1,\"tw-absolute\",\"tw-inset-y-0\",\"tw-right-4\",\"tw-mb-0\",\"tw-flex\",\"tw-items-center\",3,\"for\"],[1,\"bwi\",\"bwi-sm\",\"bwi-angle-down\",\"tw-leading-[0]\"],[\"class\",\"tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-border tw-border-solid tw-border-transparent tw-font-bold tw-text-muted\",3,\"appA11yTitle\",4,\"ngIf\"],[\"class\",\"tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-font-bold tw-text-muted\",3,\"title\",4,\"ngIf\"],[1,\"tw-max-w-40\",\"tw-overflow-hidden\",\"tw-overflow-ellipsis\",\"tw-whitespace-nowrap\",\"tw-border\",\"tw-border-solid\",\"tw-border-transparent\",\"tw-font-bold\",\"tw-text-muted\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-filter\",\"tw-ml-1\"],[1,\"tw-max-w-40\",\"tw-overflow-hidden\",\"tw-overflow-ellipsis\",\"tw-whitespace-nowrap\",\"tw-font-bold\",\"tw-text-muted\",3,\"title\"],[\"type\",\"button\",\"bitIconButton\",\"bwi-close\",\"buttonType\",\"muted\",3,\"appA11yTitle\",\"disabled\",\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n._uU(0,\"\\n\"),n._uU(1,\"\\n\"),n.TgZ(2,\"div\",0),n._uU(3,\"\\n  \"),n.YNc(4,J,12,8,\"bit-form-field\",1),n._uU(5,\"\\n\\n  \"),n.TgZ(6,\"bit-form-field\",2),n._uU(7,\"\\n    \"),n.TgZ(8,\"bit-label\"),n._uU(9),n.qZA(),n._uU(10,\"\\n    \"),n.TgZ(11,\"bit-multi-select\",3),n.NdJ(\"onItemsConfirmed\",(function(e){return t.selectItems(e)}))(\"blur\",(function(){return t.handleBlur()})),n.qZA(),n._uU(12,\"\\n    \"),n.YNc(13,Y,2,1,\"bit-hint\",4),n._uU(14,\"\\n  \"),n.qZA(),n._uU(15,\"\\n\"),n.qZA(),n._uU(16,\"\\n\\n\"),n.TgZ(17,\"bit-table\",5),n._uU(18,\"\\n  \"),n.ynx(19,6),n._uU(20,\"\\n    \"),n.TgZ(21,\"tr\"),n._uU(22,\"\\n      \"),n.TgZ(23,\"th\",7),n._uU(24),n.qZA(),n._uU(25,\"\\n      \"),n.YNc(26,z,6,3,\"th\",8),n._uU(27,\"\\n      \"),n.YNc(28,K,3,3,\"th\",9),n._uU(29,\"\\n      \"),n.YNc(30,Q,3,3,\"th\",10),n._uU(31,\"\\n      \"),n._UZ(32,\"th\",11),n._uU(33,\"\\n    \"),n.qZA(),n._uU(34,\"\\n  \"),n.BQk(),n._uU(35,\"\\n  \"),n.YNc(36,le,5,2,\"ng-template\",12),n._uU(37,\"\\n\"),n.qZA(),n._uU(38,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(4),n.Q6J(\"ngIf\",\"edit\"==t.permissionMode),n.xp6(5),n.Oqu(t.selectorLabelText),n.xp6(2),n.Q6J(\"baseItems\",t.selectionList.deselectedItems)(\"removeSelectedItems\",!0)(\"disabled\",t.disabled),n.xp6(2),n.Q6J(\"ngIf\",t.selectorHelpText),n.xp6(4),n.Q6J(\"formGroup\",t.formGroup),n.xp6(7),n.Oqu(t.columnHeader),n.xp6(2),n.Q6J(\"ngIf\",\"hidden\"!=t.permissionMode),n.xp6(2),n.Q6J(\"ngIf\",t.showMemberRoles),n.xp6(2),n.Q6J(\"ngIf\",t.showGroupColumn))},dependencies:[d.mk,d.sg,d.O5,d.RF,d.n9,d.ED,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,s.x0,s.CE,p.B,h.A,g.l,f.d,m.G,C,O.u,k.M,q.Q,P.a,I.Y,M.v,P.f,N.C,D],encapsulation:2})},34632:(e,t,i)=\u003e{\"use strict\";i.d(t,{E2:()=\u003el,OU:()=\u003en,XL:()=\u003ep,d4:()=\u003ea,hs:()=\u003ed,pZ:()=\u003er,zD:()=\u003es});var n,s,o=i(63078);!function(e){e.View=\"view\",e.ViewExceptPass=\"viewExceptPass\",e.Edit=\"edit\",e.EditExceptPass=\"editExceptPass\",e.Manage=\"manage\"}(n||(n={})),function(e){e[e.Collection=0]=\"Collection\",e[e.Group=1]=\"Group\",e[e.Member=2]=\"Member\"}(s||(s={}));const r=e=\u003e{const t=[{perm:n.View,labelId:\"canView\"},{perm:n.ViewExceptPass,labelId:\"canViewExceptPass\"},{perm:n.Edit,labelId:\"canEdit\"},{perm:n.EditExceptPass,labelId:\"canEditExceptPass\"}];return e\u0026\u0026t.push({perm:n.Manage,labelId:\"canManage\"}),t},a=e=\u003ee.manage?n.Manage:e.readOnly?e.hidePasswords?n.ViewExceptPass:n.View:e.hidePasswords?n.EditExceptPass:n.Edit,l=e=\u003enew o.KF({id:e.id,readOnly:c(e.permission),hidePasswords:u(e.permission),manage:e.permission===n.Manage}),c=e=\u003e[n.View,n.ViewExceptPass].includes(e),u=e=\u003e[n.ViewExceptPass,n.EditExceptPass].includes(e);function d(e){return{id:e.id,type:s.Group,listName:e.name,labelName:e.name,accessAllItems:e.accessAll,readonly:e.accessAll}}function p(e){var t,i;return{id:e.id,type:s.Member,email:e.email,role:e.type,listName:(null===(t=e.name)||void 0===t?void 0:t.length)\u003e0?`${e.name} (${e.email})`:e.email,labelName:null!==(i=e.name)\u0026\u0026void 0!==i?i:e.email,status:e.status,accessAllItems:e.accessAll,readonly:e.accessAll}}},1176:(e,t,i)=\u003e{\"use strict\";i.d(t,{k:()=\u003eo});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m]})},29428:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003er});var n=i(17682),s=i(2978),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({providers:[n.N,s.d]})},10945:(e,t,i)=\u003e{\"use strict\";var n;i.d(t,{L:()=\u003en}),function(e){e[e.Invited=0]=\"Invited\",e[e.Accepted=1]=\"Accepted\",e[e.Confirmed=2]=\"Confirmed\",e[e.RecoveryInitiated=3]=\"RecoveryInitiated\",e[e.RecoveryApproved=4]=\"RecoveryApproved\"}(n||(n={}))},76736:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003en.x,d:()=\u003es.d});var n=i(29428),s=i(2978)},17682:(e,t,i)=\u003e{\"use strict\";i.d(t,{N:()=\u003eg});var n=i(41489),s=i(42844),o=i(58043),r=i(5094);class a extends o.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.granteeId=this.getResponseProperty(\"GranteeId\"),this.name=this.getResponseProperty(\"Name\"),this.email=this.getResponseProperty(\"Email\"),this.type=this.getResponseProperty(\"Type\"),this.status=this.getResponseProperty(\"Status\"),this.waitTimeDays=this.getResponseProperty(\"WaitTimeDays\"),this.creationDate=this.getResponseProperty(\"CreationDate\"),this.avatarColor=this.getResponseProperty(\"AvatarColor\")}}class l extends o.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.grantorId=this.getResponseProperty(\"GrantorId\"),this.name=this.getResponseProperty(\"Name\"),this.email=this.getResponseProperty(\"Email\"),this.type=this.getResponseProperty(\"Type\"),this.status=this.getResponseProperty(\"Status\"),this.waitTimeDays=this.getResponseProperty(\"WaitTimeDays\"),this.creationDate=this.getResponseProperty(\"CreationDate\"),this.avatarColor=this.getResponseProperty(\"AvatarColor\")}}class c extends o.c{constructor(e){super(e),this.keyEncrypted=this.getResponseProperty(\"KeyEncrypted\"),this.kdf=this.getResponseProperty(\"Kdf\"),this.kdfIterations=this.getResponseProperty(\"KdfIterations\"),this.kdfMemory=this.getResponseProperty(\"KdfMemory\"),this.kdfParallelism=this.getResponseProperty(\"KdfParallelism\")}}class u extends o.c{constructor(e){super(e),this.ciphers=[],this.keyEncrypted=this.getResponseProperty(\"KeyEncrypted\");const t=this.getResponseProperty(\"Ciphers\");null!=t\u0026\u0026(this.ciphers=t.map((e=\u003enew r.r(e))))}}var d=i(24852),p=i(55602),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e){this.apiService=e}getEmergencyAccessTrusted(){return h(this,void 0,void 0,(function*(){const e=yield this.apiService.send(\"GET\",\"/emergency-access/trusted\",null,!0,!0);return new s.L(e,a)}))}getEmergencyAccessGranted(){return h(this,void 0,void 0,(function*(){const e=yield this.apiService.send(\"GET\",\"/emergency-access/granted\",null,!0,!0);return new s.L(e,l)}))}getEmergencyAccess(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"GET\",\"/emergency-access/\"+e,null,!0,!0);return new a(t)}))}getEmergencyGrantorPolicies(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"GET\",\"/emergency-access/\"+e+\"/policies\",null,!0,!0);return new s.L(t,n.j)}))}putEmergencyAccess(e,t){return this.apiService.send(\"PUT\",\"/emergency-access/\"+e,t,!0,!1)}deleteEmergencyAccess(e){return this.apiService.send(\"DELETE\",\"/emergency-access/\"+e,null,!0,!1)}postEmergencyAccessInvite(e){return this.apiService.send(\"POST\",\"/emergency-access/invite\",e,!0,!1)}postEmergencyAccessReinvite(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/reinvite\",null,!0,!1)}postEmergencyAccessAccept(e,t){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/accept\",t,!0,!1)}postEmergencyAccessConfirm(e,t){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/confirm\",t,!0,!1)}postEmergencyAccessInitiate(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/initiate\",null,!0,!1)}postEmergencyAccessApprove(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/approve\",null,!0,!1)}postEmergencyAccessReject(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/reject\",null,!0,!1)}postEmergencyAccessTakeover(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/takeover\",null,!0,!0);return new c(t)}))}postEmergencyAccessPassword(e,t){return h(this,void 0,void 0,(function*(){yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/password\",t,!0,!0)}))}postEmergencyAccessView(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/view\",null,!0,!0);return new u(t)}))}}g.ɵfac=function(e){return new(e||g)(d.LFG(p.s))},g.ɵprov=d.Yz7({token:g,factory:g.ɵfac})},2978:(e,t,i)=\u003e{\"use strict\";i.d(t,{d:()=\u003eZ});var n=i(63700),s=i(90692),o=i(88160),r=i(27646),a=i(55637),l=i(19572),c=i(10945);class u{}class d{}class p{}class h{}class g{}class f extends g{}var m=i(17682),y=i(24852),v=i(55602),w=i(76528),b=i(85540),U=i(92236),_=i(66459),A=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class Z{constructor(e,t,i,n,s,o){this.emergencyAccessApiService=e,this.apiService=t,this.cryptoService=i,this.encryptService=n,this.cipherService=s,this.logService=o}getEmergencyAccess(e){return this.emergencyAccessApiService.getEmergencyAccess(e)}getEmergencyAccessTrusted(){return A(this,void 0,void 0,(function*(){return(yield this.emergencyAccessApiService.getEmergencyAccessTrusted()).data}))}getEmergencyAccessGranted(){return A(this,void 0,void 0,(function*(){return(yield this.emergencyAccessApiService.getEmergencyAccessGranted()).data}))}getGrantorPolicies(e){return A(this,void 0,void 0,(function*(){const t=yield this.emergencyAccessApiService.getEmergencyGrantorPolicies(e);let i;return null!=t.data\u0026\u0026t.data.length\u003e0\u0026\u0026(i=t.data.map((e=\u003enew s.G(new n.n(e))))),i}))}invite(e,t,i){return A(this,void 0,void 0,(function*(){const n=new p;n.email=e.trim(),n.type=t,n.waitTimeDays=i,yield this.emergencyAccessApiService.postEmergencyAccessInvite(n)}))}reinvite(e){return this.emergencyAccessApiService.postEmergencyAccessReinvite(e)}update(e,t,i){return A(this,void 0,void 0,(function*(){const n=new g;n.type=t,n.waitTimeDays=i,yield this.emergencyAccessApiService.putEmergencyAccess(e,n)}))}accept(e,t){return A(this,void 0,void 0,(function*(){const i=new u;i.token=t,yield this.emergencyAccessApiService.postEmergencyAccessAccept(e,i)}))}confirm(e,t){return A(this,void 0,void 0,(function*(){const i=yield this.cryptoService.getUserKey();if(!i)throw new Error(\"No user key found\");const n=yield this.apiService.getUserPublicKey(t),s=r.c.fromB64ToArray(n.publicKey);try{this.logService.debug(\"User's fingerprint: \"+(yield this.cryptoService.getFingerprint(t,s)).join(\"-\"))}catch(a){}const o=new d;o.key=yield this.encryptKey(i,s),yield this.emergencyAccessApiService.postEmergencyAccessConfirm(e,o)}))}delete(e){return this.emergencyAccessApiService.deleteEmergencyAccess(e)}requestAccess(e){return this.emergencyAccessApiService.postEmergencyAccessInitiate(e)}approve(e){return this.emergencyAccessApiService.postEmergencyAccessApprove(e)}reject(e){return this.emergencyAccessApiService.postEmergencyAccessReject(e)}getViewOnlyCiphers(e){return A(this,void 0,void 0,(function*(){const t=yield this.emergencyAccessApiService.postEmergencyAccessView(e),i=yield this.cryptoService.rsaDecrypt(t.keyEncrypted),n=new a.N(i);return(yield this.encryptService.decryptItems(t.ciphers.map((e=\u003enew l.t(e))),n)).sort(this.cipherService.getLocaleSortingFunction())}))}takeover(e,t,i){return A(this,void 0,void 0,(function*(){const n=yield this.emergencyAccessApiService.postEmergencyAccessTakeover(e),s=yield this.cryptoService.rsaDecrypt(n.keyEncrypted);if(null==s)throw new Error(\"Failed to decrypt grantor key\");const r=new a.N(s),l=yield this.cryptoService.makeMasterKey(t,i,n.kdf,new o.E(n.kdfIterations,n.kdfMemory,n.kdfParallelism)),c=yield this.cryptoService.hashMasterKey(t,l),u=yield this.cryptoService.encryptUserKeyWithMasterKey(l,r),d=new h;d.newMasterPasswordHash=c,d.key=u[1].encryptedString,this.emergencyAccessApiService.postEmergencyAccessPassword(e,d)}))}getRotatedKeys(e){return A(this,void 0,void 0,(function*(){const t=[],i=yield this.emergencyAccessApiService.getEmergencyAccessTrusted();if(!i||0===i.data.length)return t;const n=new Set([c.L.Confirmed,c.L.RecoveryInitiated,c.L.RecoveryApproved]),s=i.data.filter((e=\u003en.has(e.status)));for(const o of s){const i=yield this.apiService.getUserPublicKey(o.granteeId),n=r.c.fromB64ToArray(i.publicKey),s=yield this.encryptKey(e,n),a=new f;a.id=o.id,a.type=o.type,a.waitTimeDays=o.waitTimeDays,a.keyEncrypted=s,t.push(a)}return t}))}encryptKey(e,t){return A(this,void 0,void 0,(function*(){return(yield this.cryptoService.rsaEncrypt(e.key,t)).encryptedString}))}postLegacyRotation(e){return A(this,void 0,void 0,(function*(){if(null!=e)for(const t of e)yield this.emergencyAccessApiService.putEmergencyAccess(t.id,t)}))}}Z.ɵfac=function(e){return new(e||Z)(y.LFG(m.N),y.LFG(v.s),y.LFG(w.$),y.LFG(b.U),y.LFG(U.u),y.LFG(_.$))},Z.ɵprov=y.Yz7({token:Z,factory:Z.ɵfac})},82421:(e,t,i)=\u003e{\"use strict\";i.d(t,{k:()=\u003eu});var n=i(24852),s=i(75557),o=i(2184),r=i(67855),a=i(27646),l=i(70062),c=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function u(){return(t,i)=\u003ec(this,void 0,void 0,(function*(){const t=(0,n.f3M)(o.e),c=(0,n.f3M)(s.F0),u=(0,n.f3M)(l.c),d=i.url,p=u.getPreviousUrl();if((yield t.getAuthStatus())===r.y.Unlocked){const e=yield u.getAndClearLoginRedirectUrl();return!!a.c.isNullOrEmpty(e)||c.navigateByUrl(e)}return e(d)?yield u.persistLoginRedirectUrl(d):e(p)\u0026\u0026(yield u.persistLoginRedirectUrl(p)),!0}));function e(e){return!a.c.isNullOrEmpty(e)\u0026\u0026!(null==e?void 0:e.toLocaleLowerCase().includes(\"lock\"))}}},79797:(e,t,i)=\u003e{\"use strict\";i.d(t,{D:()=\u003eo});var n=i(24852),s=i(55602);class o{constructor(){this.apiService=(0,n.f3M)(s.s)}postUserKeyUpdate(e){return this.apiService.send(\"POST\",\"/accounts/key\",e,!0,!1)}}o.ɵfac=function(e){return new(e||o)},o.ɵprov=n.Yz7({token:o,factory:o.ɵfac})},41366:(e,t,i)=\u003e{\"use strict\";i.d(t,{N:()=\u003er});var n=i(79797),s=i(92879),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({providers:[s.j,n.D]})},92879:(e,t,i)=\u003e{\"use strict\";i.d(t,{j:()=\u003eU});var n=i(99042),s=i(59281),o=i(41412),r=i(79971),a=i(98157),l=i(76736);class c{constructor(){this.ciphers=[],this.folders=[],this.sends=[],this.emergencyAccessKeys=[],this.resetPasswordKeys=[]}}var u=i(79797),d=i(24852),p=i(92236),h=i(23031),g=i(92649),f=i(78200),m=i(76528),y=i(85540),v=i(58172),w=i(23915),b=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class U{constructor(e,t,i,n,s,o,r,a,l,c,u){this.apiService=e,this.cipherService=t,this.folderService=i,this.sendService=n,this.emergencyAccessService=s,this.resetPasswordService=o,this.deviceTrustCryptoService=r,this.cryptoService=a,this.encryptService=l,this.stateService=c,this.configService=u}rotateUserKeyAndEncryptedData(e){return b(this,void 0,void 0,(function*(){if(!e)throw new Error(\"Invalid master password\");const t=yield this.cryptoService.makeMasterKey(e,yield this.stateService.getEmail(),yield this.stateService.getKdfType(),yield this.stateService.getKdfConfig());if(!t)throw new Error(\"Master key could not be created\");yield this.cryptoService.setMasterKey(t);const[i,n]=yield this.cryptoService.makeUserKey(t);if(!i||!n)throw new Error(\"User key could not be created\");const o=new c;o.key=n.encryptedString;const r=yield this.cryptoService.hashMasterKey(e,t);o.masterPasswordHash=r,o.privateKey=yield this.encryptPrivateKey(i),o.ciphers=yield this.encryptCiphers(i),o.folders=yield this.encryptFolders(i),o.sends=yield this.sendService.getRotatedKeys(i),o.emergencyAccessKeys=yield this.emergencyAccessService.getRotatedKeys(i),o.resetPasswordKeys=yield this.resetPasswordService.getRotatedKeys(i),(yield this.configService.getFeatureFlag(s.T.KeyRotationImprovements))?yield this.apiService.postUserKeyUpdate(o):yield this.rotateUserKeyAndEncryptedDataLegacy(o),yield this.deviceTrustCryptoService.rotateDevicesTrust(i,r)}))}encryptPrivateKey(e){return b(this,void 0,void 0,(function*(){const t=yield this.cryptoService.getPrivateKey();if(t)return(yield this.encryptService.encrypt(t,e)).encryptedString}))}encryptCiphers(e){return b(this,void 0,void 0,(function*(){const t=yield this.cipherService.getAllDecrypted();return t?yield Promise.all(t.map((t=\u003eb(this,void 0,void 0,(function*(){const i=yield this.cipherService.encrypt(t,e);return new o.K(i)}))))):[]}))}encryptFolders(e){return b(this,void 0,void 0,(function*(){const t=yield(0,n.z)(this.folderService.folderViews$);return t?yield Promise.all(t.map((t=\u003eb(this,void 0,void 0,(function*(){const i=yield this.folderService.encrypt(t,e);return new r.C(i)}))))):[]}))}rotateUserKeyAndEncryptedDataLegacy(e){return b(this,void 0,void 0,(function*(){yield this.apiService.postUserKeyUpdate(e),yield this.emergencyAccessService.postLegacyRotation(e.emergencyAccessKeys);const t=yield this.stateService.getUserId();yield this.resetPasswordService.postLegacyRotation(t,e.resetPasswordKeys)}))}}U.ɵfac=function(e){return new(e||U)(d.LFG(u.D),d.LFG(p.u),d.LFG(h.s),d.LFG(g.N),d.LFG(l.d),d.LFG(a.v),d.LFG(f.u),d.LFG(m.$),d.LFG(y.U),d.LFG(v.b),d.LFG(w.i))},U.ɵprov=d.Yz7({token:U,factory:U.ɵfac})},99005:(e,t,i)=\u003e{\"use strict\";i.d(t,{Q:()=\u003er});var n=i(40164),s=i(71146),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({imports:[s.m,n.ey]})},31978:(e,t,i)=\u003e{\"use strict\";i.d(t,{q:()=\u003el});var n=i(15346),s=i(33229),o=i(24852),r=i(28315),a=i(82933);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵcmp=o.Xpm({type:l,selectors:[[\"app-danger-zone\"]],standalone:!0,features:[o.jDz],ngContentSelectors:[\"*\"],decls:16,vars:6,consts:[[\"bitTypography\",\"h1\",1,\"tw-mt-16\",\"tw-pb-2.5\",\"!tw-text-danger\"],[1,\"tw-rounded\",\"tw-border\",\"tw-border-solid\",\"tw-border-danger-500\",\"tw-p-5\"],[1,\"tw-flex\",\"tw-flex-row\",\"tw-gap-2\"]],template:function(e,t){1\u0026e\u0026\u0026(o.F$t(),o.TgZ(0,\"h1\",0),o._uU(1),o.ALo(2,\"i18n\"),o.qZA(),o._uU(3,\"\\n\\n\"),o.TgZ(4,\"div\",1),o._uU(5,\"\\n  \"),o.TgZ(6,\"p\"),o._uU(7),o.ALo(8,\"i18n\"),o.qZA(),o._uU(9,\"\\n\\n  \"),o.TgZ(10,\"div\",2),o._uU(11,\"\\n    \"),o.Hsn(12),o._uU(13,\"\\n  \"),o.qZA(),o._uU(14,\"\\n\"),o.qZA(),o._uU(15,\"\\n\")),2\u0026e\u0026\u0026(o.xp6(1),o.Oqu(o.lcZ(2,2,\"dangerZone\")),o.xp6(6),o.Oqu(o.lcZ(8,4,\"dangerZoneDesc\")))},dependencies:[s.Z,r.t,n.b,a.C],encapsulation:2})},99877:(e,t,i)=\u003e{\"use strict\";i.d(t,{d:()=\u003eE});var n=i(24852),s=i(54019),o=i(68362),r=i(77494);class a{constructor(e,t){this.culture=\"en-US\",this.name=e,this.masterPasswordHint=t||null}}var l=i(59554),c=i(27027),u=i(27646),d=i(78627),p=i(99721),h=i(66459),g=i(4885),f=i(19419),m=i(98645),y=i(33245),v=i(53707),w=i(2051),b=i(14970);class U{constructor(){this.border=!1,this.selected=!1,this.select=new n.vpe}onFire(){this.select.emit(this.color)}get classList(){return[\"tw-rounded-full tw-inline-block\"].concat([\"tw-cursor-pointer\",\"tw-outline\",\"tw-outline-solid\",\"tw-outline-offset-1\"]).concat(this.selected?[\"tw-outline-[3px]\",\"tw-outline-primary-500\"]:[\"tw-outline-0\",\"hover:tw-outline-1\",\"hover:tw-outline-primary-300\",\"focus:tw-outline-2\",\"focus:tw-outline-primary-500\"])}}U.ɵfac=function(e){return new(e||U)},U.ɵcmp=n.Xpm({type:U,selectors:[[\"selectable-avatar\"]],inputs:{id:\"id\",text:\"text\",title:\"title\",color:\"color\",border:\"border\",selected:\"selected\"},outputs:{select:\"select\"},decls:5,vars:9,consts:[[\"tabindex\",\"0\",3,\"title\",\"ngClass\",\"click\",\"keyup.enter\"],[\"appStopClick\",\"\",\"size\",\"xlarge\",3,\"text\",\"color\",\"border\",\"id\",\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\",0),n.NdJ(\"click\",(function(){return t.onFire()}))(\"keyup.enter\",(function(){return t.onFire()})),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-avatar\",1),n._uU(3,\"\\n    \"),n.qZA(),n._uU(4,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.Q6J(\"title\",t.title)(\"ngClass\",t.classList),n.xp6(2),n.Q6J(\"text\",t.text)(\"text\",t.text)(\"color\",t.color)(\"border\",!1)(\"id\",t.id)(\"border\",t.border)(\"title\",t.title))},dependencies:[f.mk,w.O,b.A],encapsulation:2});var _=i(82933),A=i(19576),Z=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const x=[\"colorPicker\"];function S(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",21),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",19),n.ALo(3,\"i18n\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(2),n.hij(\"\\n          \",n.lcZ(5,4,\"loading\"),\"\\n        \"))}function T(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",22),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.hij(\"\\n          \",e.error,\"\\n        \")}}function C(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"selectable-avatar\",23),n.NdJ(\"select\",(function(){const t=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.setSelection(t.color))})),n.ALo(3,\"userName\"),n._uU(4,\"\\n            \"),n.qZA(),n._uU(5,\"\\n          \"),n.BQk()}if(2\u0026e){const e=t.$implicit,i=n.oxw();n.xp6(2),n.s9C(\"text\",n.lcZ(3,5,i.profile)),n.Q6J(\"selected\",e.selected)(\"title\",e.name)(\"color\",e.color)(\"border\",!0)}}const O=function(e){return{\"!tw-outline-[3px] tw-outline-primary-500 hover:tw-outline-[3px] hover:tw-outline-primary-500\":e}};class k{constructor(e,t,i,o){this.i18nService=e,this.platformUtilsService=t,this.logService=i,this.accountUpdateService=o,this.changeColor=new n.vpe,this.onSaved=new n.vpe,this.loading=!1,this.defaultColorPalette=[{name:\"brightBlue\",color:\"#16cbfc\"},{name:\"green\",color:\"#94cc4b\"},{name:\"orange\",color:\"#ffb520\"},{name:\"lavender\",color:\"#e5beed\"},{name:\"yellow\",color:\"#fcff41\"},{name:\"indigo\",color:\"#acbdf7\"},{name:\"teal\",color:\"#8ecdc5\"},{name:\"salmon\",color:\"#ffa3a3\"},{name:\"pink\",color:\"#ffa2d4\"}],this.customColorSelected=!1,this.customColor$=new l.X(null),this.customTextColor$=new l.X(\"#000000\"),this.destroy$=new s.x}ngOnInit(){return Z(this,void 0,void 0,(function*(){this.defaultColorPalette.forEach((e=\u003ee.name=this.i18nService.t(e.name))),this.customColor$.pipe((0,c.b)(200),(0,o.R)(this.destroy$)).subscribe((e=\u003e{null!=e\u0026\u0026(this.customTextColor$.next(u.c.pickTextColorBasedOnBgColor(e)),this.customColorSelected=!0,this.currentSelection=e)})),this.setSelection(yield this.accountUpdateService.loadColorFromState())}))}showCustomPicker(){return Z(this,void 0,void 0,(function*(){this.customColorSelected=!0,this.colorPickerElement.nativeElement.click(),this.setSelection(this.customColor$.value)}))}generateAvatarColor(){return Z(this,void 0,void 0,(function*(){u.c.stringToColor(this.profile.name.toString())}))}submit(){return Z(this,void 0,void 0,(function*(){try{u.c.validateHexColor(this.currentSelection)||null==this.currentSelection?(yield this.accountUpdateService.pushUpdate(this.currentSelection),this.changeColor.emit(this.currentSelection),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"avatarUpdated\"))):this.platformUtilsService.showToast(\"error\",null,this.i18nService.t(\"errorOccurred\"))}catch(e){this.logService.error(e),this.platformUtilsService.showToast(\"error\",null,this.i18nService.t(\"errorOccurred\"))}}))}ngOnDestroy(){return Z(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}setSelection(e){return Z(this,void 0,void 0,(function*(){if(this.defaultColorPalette.filter((e=\u003ee.selected)).forEach((e=\u003ee.selected=!1)),null!=e)if(e=e.toLowerCase(),this.customColorSelected=!1,this.currentSelection===e)this.currentSelection=null;else{const t=this.defaultColorPalette.findIndex((t=\u003et.color===e));-1!==t?(this.defaultColorPalette[t].selected=!0,this.currentSelection=e):this.customColor$.next(e)}}))}}k.ɵfac=function(e){return new(e||k)(n.Y36(d.D),n.Y36(p.P),n.Y36(h.$),n.Y36(g.Q))},k.ɵcmp=n.Xpm({type:k,selectors:[[\"app-change-avatar\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(x,5),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.colorPickerElement=e.first)}},inputs:{profile:\"profile\"},outputs:{changeColor:\"changeColor\",onSaved:\"onSaved\"},decls:73,vars:40,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"customizeTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\",\"tw-w-[600px]\",\"tw-max-w-none\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"customizeTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"class\",\"card-body text-center\",4,\"ngIf\"],[\"type\",\"error\",4,\"ngIf\"],[1,\"tw-text-lg\"],[1,\"tw-flex\",\"tw-flex-wrap\",\"tw-justify-center\",\"tw-gap-8\"],[4,\"ngFor\",\"ngForOf\"],[1,\"tw-outline-solid\",\"tw-bg-white\",\"tw-relative\",\"tw-flex\",\"tw-h-24\",\"tw-w-24\",\"tw-cursor-pointer\",\"tw-place-content-center\",\"tw-content-center\",\"tw-justify-center\",\"tw-rounded-full\",\"tw-border\",\"tw-border-solid\",\"tw-border-secondary-500\",\"tw-outline\",\"tw-outline-0\",\"tw-outline-offset-1\",\"hover:tw-outline-1\",\"hover:tw-outline-primary-300\",\"focus:tw-outline-2\",\"focus:tw-outline-primary-500\",3,\"tabIndex\",\"title\",\"ngClass\",\"keyup.enter\",\"click\"],[1,\"bwi\",\"bwi-pencil\",\"tw-m-auto\",\"tw-text-3xl\"],[\"tabindex\",\"-1\",\"type\",\"color\",1,\"tw-absolute\",\"tw-bottom-0\",\"tw-right-0\",\"tw-h-px\",\"tw-w-px\",\"tw-border-none\",\"tw-bg-transparent\",\"tw-opacity-0\",3,\"ngModel\",\"ngModelChange\"],[\"colorPicker\",\"\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[1,\"card-body\",\"text-center\"],[\"type\",\"error\"],[\"appStopClick\",\"\",3,\"selected\",\"title\",\"text\",\"color\",\"border\",\"select\"]],template:function(e,t){1\u0026e\u0026\u0026(n._uU(0,\"\\n\"),n._uU(1,\"\\n\"),n.TgZ(2,\"div\",0),n._uU(3,\"\\n  \"),n.TgZ(4,\"div\",1),n._uU(5,\"\\n    \"),n.TgZ(6,\"div\",2),n._uU(7,\"\\n      \"),n.TgZ(8,\"div\",3),n._uU(9,\"\\n        \"),n.TgZ(10,\"h2\",4),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n        \"),n.TgZ(14,\"button\",5),n.ALo(15,\"i18n\"),n._uU(16,\"\\n          \"),n.TgZ(17,\"span\",6),n._uU(18,\"×\"),n.qZA(),n._uU(19,\"\\n        \"),n.qZA(),n._uU(20,\"\\n      \"),n.qZA(),n._uU(21,\"\\n      \"),n.TgZ(22,\"div\",7),n._uU(23,\"\\n        \"),n.YNc(24,S,6,6,\"div\",8),n._uU(25,\"\\n        \"),n.YNc(26,T,2,1,\"app-callout\",9),n._uU(27,\"\\n        \"),n.TgZ(28,\"p\",10),n._uU(29),n.ALo(30,\"i18n\"),n.qZA(),n._uU(31,\"\\n        \"),n.TgZ(32,\"div\",11),n._uU(33,\"\\n          \"),n.YNc(34,C,6,7,\"ng-container\",12),n._uU(35,\"\\n          \"),n.TgZ(36,\"span\"),n._uU(37,\"\\n            \"),n.TgZ(38,\"span\",13),n.NdJ(\"keyup.enter\",(function(){return t.showCustomPicker()}))(\"click\",(function(){return t.showCustomPicker()})),n.ALo(39,\"async\"),n.ALo(40,\"i18n\"),n._uU(41,\"\\n              \"),n.TgZ(42,\"i\",14),n.ALo(43,\"async\"),n.qZA(),n._uU(44,\"\\n              \"),n.TgZ(45,\"input\",15,16),n.NdJ(\"ngModelChange\",(function(e){return t.customColor$.next(e)})),n.ALo(47,\"async\"),n.qZA(),n._uU(48,\"\\n            \"),n.qZA(),n._uU(49,\"\\n          \"),n.qZA(),n._uU(50,\"\\n        \"),n.qZA(),n._uU(51,\"\\n      \"),n.qZA(),n._uU(52,\"\\n      \"),n.TgZ(53,\"div\",17),n._uU(54,\"\\n        \"),n.TgZ(55,\"button\",18),n.NdJ(\"click\",(function(){return t.submit()})),n._uU(56,\"\\n          \"),n._UZ(57,\"i\",19),n.ALo(58,\"i18n\"),n._uU(59,\"\\n          \"),n.TgZ(60,\"span\"),n._uU(61),n.ALo(62,\"i18n\"),n.qZA(),n._uU(63,\"\\n        \"),n.qZA(),n._uU(64,\"\\n        \"),n.TgZ(65,\"button\",20),n._uU(66),n.ALo(67,\"i18n\"),n.qZA(),n._uU(68,\"\\n      \"),n.qZA(),n._uU(69,\"\\n    \"),n.qZA(),n._uU(70,\"\\n  \"),n.qZA(),n._uU(71,\"\\n\"),n.qZA(),n._uU(72,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(11),n.Oqu(n.lcZ(12,18,\"customizeAvatar\")),n.xp6(3),n.s9C(\"appA11yTitle\",n.lcZ(15,20,\"close\")),n.xp6(10),n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.error),n.xp6(3),n.Oqu(n.lcZ(30,22,\"pickAnAvatarColor\")),n.xp6(5),n.Q6J(\"ngForOf\",t.defaultColorPalette),n.xp6(4),n.Udp(\"background-color\",n.lcZ(39,24,t.customColor$)),n.s9C(\"title\",n.lcZ(40,26,\"customColor\")),n.Q6J(\"tabIndex\",0)(\"ngClass\",n.VKq(38,O,t.customColorSelected)),n.xp6(4),n.Udp(\"color\",n.lcZ(43,28,t.customTextColor$)),n.xp6(3),n.Q6J(\"ngModel\",n.lcZ(47,30,t.customColor$)),n.xp6(10),n.Q6J(\"disabled\",t.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(58,32,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(62,34,\"save\")),n.xp6(5),n.hij(\"\\n          \",n.lcZ(67,36,\"close\"),\"\\n        \"))},dependencies:[f.mk,f.sg,f.O5,m.Fj,m.JJ,m.On,y.B,v.O,w.O,U,f.Ov,_.C,A.z],encapsulation:2});var q=i(55602),P=i(58172),I=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const M=[\"avatarModalTemplate\"];function N(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\"),n._uU(1,\"\\n  \"),n._UZ(2,\"i\",3),n.ALo(3,\"i18n\"),n._uU(4,\"\\n  \"),n.TgZ(5,\"span\",4),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function L(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",5,6),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n  \"),n.TgZ(3,\"div\",7),n._uU(4,\"\\n    \"),n.TgZ(5,\"div\",8),n._uU(6,\"\\n      \"),n.TgZ(7,\"div\",9),n._uU(8,\"\\n        \"),n.TgZ(9,\"label\",10),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n        \"),n.TgZ(13,\"input\",11),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.profile.name=t)})),n.qZA(),n._uU(14,\"\\n      \"),n.qZA(),n._uU(15,\"\\n      \"),n.TgZ(16,\"div\",9),n._uU(17,\"\\n        \"),n.TgZ(18,\"label\",12),n._uU(19),n.ALo(20,\"i18n\"),n.qZA(),n._uU(21,\"\\n        \"),n.TgZ(22,\"input\",13),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.profile.email=t)})),n.qZA(),n._uU(23,\"\\n      \"),n.qZA(),n._uU(24,\"\\n    \"),n.qZA(),n._uU(25,\"\\n    \"),n.TgZ(26,\"div\",8),n._uU(27,\"\\n      \"),n.TgZ(28,\"div\",14),n._uU(29,\"\\n        \"),n.TgZ(30,\"dynamic-avatar\",15),n.ALo(31,\"userName\"),n._uU(32,\"\\n        \"),n.qZA(),n._uU(33,\"\\n        \"),n.TgZ(34,\"button\",16),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.openChangeAvatar())})),n._uU(35,\"\\n          \"),n._UZ(36,\"i\",17),n._uU(37,\"\\n          Customize\\n        \"),n.qZA(),n._uU(38,\"\\n      \"),n.qZA(),n._uU(39,\"\\n      \"),n.TgZ(40,\"app-account-fingerprint\",18),n.ALo(41,\"i18n\"),n._uU(42,\"\\n      \"),n.qZA(),n._uU(43,\"\\n    \"),n.qZA(),n._uU(44,\"\\n  \"),n.qZA(),n._uU(45,\"\\n  \"),n.TgZ(46,\"button\",19),n._uU(47,\"\\n    \"),n._UZ(48,\"i\",20),n.ALo(49,\"i18n\"),n._uU(50,\"\\n    \"),n.TgZ(51,\"span\"),n._uU(52),n.ALo(53,\"i18n\"),n.qZA(),n._uU(54,\"\\n  \"),n.qZA(),n._uU(55,\"\\n\"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(10),n.Oqu(n.lcZ(11,13,\"name\")),n.xp6(3),n.Q6J(\"ngModel\",t.profile.name),n.xp6(6),n.Oqu(n.lcZ(20,15,\"email\")),n.xp6(3),n.Q6J(\"ngModel\",t.profile.email),n.xp6(8),n.s9C(\"text\",n.lcZ(31,17,t.profile)),n.Q6J(\"id\",t.profile.id)(\"size\",\"large\"),n.xp6(10),n.s9C(\"fingerprintLabel\",n.lcZ(41,19,\"yourAccountsFingerprint\")),n.Q6J(\"fingerprintMaterial\",t.fingerprintMaterial),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(49,21,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(53,23,\"save\"))}}function D(e,t){}class E{constructor(e,t,i,n,o,r){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=n,this.stateService=o,this.modalService=r,this.loading=!0,this.destroy$=new s.x}ngOnInit(){return I(this,void 0,void 0,(function*(){this.profile=yield this.apiService.getProfile(),this.loading=!1,this.fingerprintMaterial=yield this.stateService.getUserId()}))}ngOnDestroy(){return I(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}openChangeAvatar(){return I(this,void 0,void 0,(function*(){const e=yield this.modalService.openViewRef(k,this.avatarModalRef,(t=\u003e{t.profile=this.profile,t.changeColor.pipe((0,o.R)(this.destroy$)).subscribe((()=\u003e{e[0].close()}))}))}))}submit(){return I(this,void 0,void 0,(function*(){try{const e=new a(this.profile.name,this.profile.masterPasswordHint);this.formPromise=this.apiService.putProfile(e),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"accountUpdated\"))}catch(e){this.logService.error(e)}}))}}E.ɵfac=function(e){return new(e||E)(n.Y36(q.s),n.Y36(d.D),n.Y36(p.P),n.Y36(h.$),n.Y36(P.b),n.Y36(r.Z))},E.ɵcmp=n.Xpm({type:E,selectors:[[\"app-profile\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(M,7,n.s_b),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.avatarModalRef=e.first)}},decls:7,vars:2,consts:[[4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"avatarModalTemplate\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"row\"],[1,\"col-6\"],[1,\"form-group\"],[\"for\",\"name\"],[\"id\",\"name\",\"type\",\"text\",\"name\",\"Name\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"email\"],[\"id\",\"email\",\"type\",\"text\",\"name\",\"Email\",\"readonly\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"mb-3\"],[3,\"text\",\"id\",\"size\"],[\"type\",\"button\",\"appStopClick\",\"\",\"appStopProp\",\"\",1,\"btn\",\"btn-outline-secondary\",\"tw-ml-3.5\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-lg\",\"bwi-pencil-square\"],[3,\"fingerprintMaterial\",\"fingerprintLabel\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,N,9,6,\"div\",0),n._uU(1,\"\\n\"),n.YNc(2,L,56,25,\"form\",1),n._uU(3,\"\\n\"),n.YNc(4,D,0,0,\"ng-template\",null,2,n.W1O),n._uU(6,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.profile\u0026\u0026!t.loading))},encapsulation:2})},64447:(e,t,i)=\u003e{\"use strict\";i.d(t,{B:()=\u003ev});var n=i(24852),s=i(42304),o=i(66459),r=i(19419),a=i(98645),l=i(33245),c=i(24610),u=i(53707),d=i(94516),p=i(82933),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function g(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-user-verification\",15),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.masterPassword=t)})),n._uU(1,\"\\n        \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"ngModel\",e.masterPassword)}}function f(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,e.apiKeyWarning))}}function m(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",17),n.ALo(1,\"i18n\"),n._uU(2,\"\\n          \"),n.TgZ(3,\"p\",18),n._uU(4,\"\\n            \"),n.TgZ(5,\"strong\"),n._uU(6,\"client_id:\"),n.qZA(),n._UZ(7,\"br\"),n._uU(8,\"\\n            \"),n.TgZ(9,\"code\"),n._uU(10),n.qZA(),n._uU(11,\"\\n          \"),n.qZA(),n._uU(12,\"\\n          \"),n.TgZ(13,\"p\",18),n._uU(14,\"\\n            \"),n.TgZ(15,\"strong\"),n._uU(16,\"client_secret:\"),n.qZA(),n._UZ(17,\"br\"),n._uU(18,\"\\n            \"),n.TgZ(19,\"code\"),n._uU(20),n.qZA(),n._uU(21,\"\\n          \"),n.qZA(),n._uU(22,\"\\n          \"),n.TgZ(23,\"p\",18),n._uU(24,\"\\n            \"),n.TgZ(25,\"strong\"),n._uU(26,\"scope:\"),n.qZA(),n._UZ(27,\"br\"),n._uU(28,\"\\n            \"),n.TgZ(29,\"code\"),n._uU(30),n.qZA(),n._uU(31,\"\\n          \"),n.qZA(),n._uU(32,\"\\n          \"),n.TgZ(33,\"p\",19),n._uU(34,\"\\n            \"),n.TgZ(35,\"strong\"),n._uU(36,\"grant_type:\"),n.qZA(),n._UZ(37,\"br\"),n._uU(38,\"\\n            \"),n.TgZ(39,\"code\"),n._uU(40),n.qZA(),n._uU(41,\"\\n          \"),n.qZA(),n._uU(42,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw();n.s9C(\"title\",n.lcZ(1,5,\"oauth2ClientCredentials\")),n.xp6(10),n.Oqu(e.clientId),n.xp6(10),n.Oqu(e.clientSecret),n.xp6(10),n.Oqu(e.scope),n.xp6(10),n.Oqu(e.grantType)}}function y(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"button\",20),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",21),n.ALo(3,\"i18n\"),n._uU(4,\"\\n          \"),n.TgZ(5,\"span\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw(),t=n.MAs(5);n.Q6J(\"disabled\",t.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(3,3,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,5,e.isRotation?\"rotateApiKey\":\"viewApiKey\"))}}class v{constructor(e,t){this.userVerificationService=e,this.logService=t}submit(){return h(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=\u003ethis.postKey(this.entityId,e)));const e=yield this.formPromise;this.clientSecret=e.apiKey,this.clientId=`${this.keyType}.${this.entityId}`}catch(e){this.logService.error(e)}}))}}v.ɵfac=function(e){return new(e||v)(n.Y36(s.i),n.Y36(o.$))},v.ɵcmp=n.Xpm({type:v,selectors:[[\"app-api-key\"]],decls:46,vars:17,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"apiKeyTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\"],[\"ngNativeValidate\",\"\",1,\"modal-content\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-header\"],[\"id\",\"apiKeyTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\",4,\"ngIf\"],[\"type\",\"warning\",4,\"ngIf\"],[\"type\",\"info\",\"icon\",\"bwi bwi-key\",3,\"title\",4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",\"class\",\"btn btn-primary btn-submit\",3,\"disabled\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\"],[\"type\",\"warning\"],[\"type\",\"info\",\"icon\",\"bwi bwi-key\",3,\"title\"],[1,\"mb-1\"],[1,\"mb-0\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"form\",2,3),n.NdJ(\"ngSubmit\",(function(){return t.submit()})),n._uU(6,\"\\n      \"),n.TgZ(7,\"div\",4),n._uU(8,\"\\n        \"),n.TgZ(9,\"h1\",5),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n        \"),n.TgZ(13,\"button\",6),n.ALo(14,\"i18n\"),n._uU(15,\"\\n          \"),n.TgZ(16,\"span\",7),n._uU(17,\"×\"),n.qZA(),n._uU(18,\"\\n        \"),n.qZA(),n._uU(19,\"\\n      \"),n.qZA(),n._uU(20,\"\\n      \"),n.TgZ(21,\"div\",8),n._uU(22,\"\\n        \"),n.TgZ(23,\"p\"),n._uU(24),n.ALo(25,\"i18n\"),n.qZA(),n._uU(26,\"\\n        \"),n.YNc(27,g,2,1,\"app-user-verification\",9),n._uU(28,\"\\n\\n        \"),n.YNc(29,f,3,3,\"app-callout\",10),n._uU(30,\"\\n        \"),n.YNc(31,m,43,7,\"app-callout\",11),n._uU(32,\"\\n      \"),n.qZA(),n._uU(33,\"\\n      \"),n.TgZ(34,\"div\",12),n._uU(35,\"\\n        \"),n.YNc(36,y,9,7,\"button\",13),n._uU(37,\"\\n        \"),n.TgZ(38,\"button\",14),n._uU(39),n.ALo(40,\"i18n\"),n.qZA(),n._uU(41,\"\\n      \"),n.qZA(),n._uU(42,\"\\n    \"),n.qZA(),n._uU(43,\"\\n  \"),n.qZA(),n._uU(44,\"\\n\"),n.qZA(),n._uU(45,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(4),n.Q6J(\"appApiAction\",t.formPromise),n.xp6(6),n.Oqu(n.lcZ(11,9,t.apiKeyTitle)),n.xp6(3),n.s9C(\"appA11yTitle\",n.lcZ(14,11,\"close\")),n.xp6(11),n.Oqu(n.lcZ(25,13,t.apiKeyDescription)),n.xp6(3),n.Q6J(\"ngIf\",!t.clientSecret),n.xp6(2),n.Q6J(\"ngIf\",t.clientSecret),n.xp6(2),n.Q6J(\"ngIf\",t.clientSecret),n.xp6(5),n.Q6J(\"ngIf\",!t.clientSecret),n.xp6(3),n.hij(\"\\n          \",n.lcZ(40,15,\"close\"),\"\\n        \"))},dependencies:[r.O5,a.Fj,a.JJ,a.JL,a.On,a.F,l.B,c.b,u.O,d.W,p.C],encapsulation:2})},90668:(e,t,i)=\u003e{\"use strict\";i.d(t,{c:()=\u003eg});var n=i(24852),s=i(48103),o=i(91667);class r extends o.Y{}var a=i(55602),l=i(78627),c=i(99721),u=i(66459),d=i(42304),p=i(73369),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,o,r,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=o,this.userVerificationService=r,this.dialogService=a,this.onUpdated=new n.vpe,this.twoFactorProviderType=s.L,this.enabled=!1,this.authed=!1,this.componentName=\"\"}auth(e){this.hashedSecret=e.secret,this.verificationType=e.verificationType,this.authed=!0}enable(e){return h(this,void 0,void 0,(function*(){try{yield e(),this.onUpdated.emit(!0)}catch(t){this.logService.error(t)}}))}disable(e){return h(this,void 0,void 0,(function*(){if(yield this.dialogService.openSimpleDialog({title:{key:\"disable\"},content:{key:\"twoStepDisableDesc\"},type:\"warning\"}))try{const t=yield this.buildRequestModel(r);t.type=this.type,e=null!=this.organizationId?this.apiService.putTwoFactorOrganizationDisable(this.organizationId,t):this.apiService.putTwoFactorDisable(t),yield e,this.enabled=!1,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"twoStepDisabled\")),this.onUpdated.emit(!1)}catch(t){this.logService.error(t)}}))}buildRequestModel(e){return h(this,void 0,void 0,(function*(){return this.userVerificationService.buildRequest({secret:this.hashedSecret,type:this.verificationType},e,!0)}))}}g.ɵfac=function(e){return new(e||g)(n.Y36(a.s),n.Y36(l.D),n.Y36(c.P),n.Y36(u.$),n.Y36(d.i),n.Y36(p.x))},g.ɵdir=n.lG2({type:g,outputs:{onUpdated:\"onUpdated\"}})},41648:(e,t,i)=\u003e{\"use strict\";i.d(t,{C:()=\u003eO});var n=i(48103),s=i(91667);class o extends s.Y{}var r=i(90668),a=i(24852),l=i(55602),c=i(78627),u=i(99721),d=i(66459),p=i(42304),h=i(73369),g=i(19419),f=i(98645),m=i(33245),y=i(24610),v=i(53707),w=i(85356),b=i(19227),U=i(82933),_=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function A(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"app-two-factor-verify\",9),a.NdJ(\"onAuthed\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.auth(t))})),a._uU(1,\"\\n      \"),a.qZA()}if(2\u0026e){const e=a.oxw();a.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function Z(e,t){if(1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n            \"),a.TgZ(2,\"app-callout\",18),a.ALo(3,\"i18n\"),a._uU(4),a.ALo(5,\"i18n\"),a.qZA(),a._uU(6,\"\\n            \"),a._UZ(7,\"img\",19),a._uU(8,\"\\n            \"),a.TgZ(9,\"strong\"),a._uU(10),a.ALo(11,\"i18n\"),a.qZA(),a._uU(12),a._UZ(13,\"br\"),a._uU(14,\"\\n            \"),a.TgZ(15,\"strong\"),a._uU(16),a.ALo(17,\"i18n\"),a.qZA(),a._uU(18),a._UZ(19,\"br\"),a._uU(20,\"\\n            \"),a.TgZ(21,\"strong\"),a._uU(22),a.ALo(23,\"i18n\"),a.qZA(),a._uU(24),a.BQk()),2\u0026e){const e=a.oxw(2);a.xp6(2),a.s9C(\"title\",a.lcZ(3,8,\"enabled\")),a.xp6(2),a.hij(\"\\n              \",a.lcZ(5,10,\"twoStepLoginProviderEnabled\"),\"\\n            \"),a.xp6(6),a.hij(\"\",a.lcZ(11,12,\"twoFactorDuoIntegrationKey\"),\":\"),a.xp6(2),a.hij(\" \",e.ikey,\"\\n            \"),a.xp6(4),a.hij(\"\",a.lcZ(17,14,\"twoFactorDuoSecretKey\"),\":\"),a.xp6(2),a.hij(\" \",e.skey,\"\\n            \"),a.xp6(4),a.hij(\"\",a.lcZ(23,16,\"twoFactorDuoApiHostname\"),\":\"),a.xp6(2),a.hij(\" \",e.host,\"\\n          \")}}function x(e,t){if(1\u0026e){const e=a.EpF();a.ynx(0),a._uU(1,\"\\n            \"),a._UZ(2,\"img\",19),a._uU(3,\"\\n            \"),a.TgZ(4,\"p\"),a._uU(5),a.ALo(6,\"i18n\"),a.qZA(),a._uU(7,\"\\n            \"),a.TgZ(8,\"div\",20),a._uU(9,\"\\n              \"),a.TgZ(10,\"label\",21),a._uU(11),a.ALo(12,\"i18n\"),a.qZA(),a._uU(13,\"\\n              \"),a.TgZ(14,\"input\",22),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.ikey=t)})),a.qZA(),a._uU(15,\"\\n            \"),a.qZA(),a._uU(16,\"\\n            \"),a.TgZ(17,\"div\",20),a._uU(18,\"\\n              \"),a.TgZ(19,\"label\",23),a._uU(20),a.ALo(21,\"i18n\"),a.qZA(),a._uU(22,\"\\n              \"),a.TgZ(23,\"input\",24),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.skey=t)})),a.qZA(),a._uU(24,\"\\n            \"),a.qZA(),a._uU(25,\"\\n            \"),a.TgZ(26,\"div\",20),a._uU(27,\"\\n              \"),a.TgZ(28,\"label\",25),a._uU(29),a.ALo(30,\"i18n\"),a.qZA(),a._uU(31,\"\\n              \"),a.TgZ(32,\"input\",26),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.host=t)})),a.ALo(33,\"i18n\"),a.qZA(),a._uU(34,\"\\n            \"),a.qZA(),a._uU(35,\"\\n          \"),a.BQk()}if(2\u0026e){const e=a.oxw(2);a.xp6(5),a.Oqu(a.lcZ(6,8,\"twoFactorDuoDesc\")),a.xp6(6),a.Oqu(a.lcZ(12,10,\"twoFactorDuoIntegrationKey\")),a.xp6(3),a.Q6J(\"ngModel\",e.ikey),a.xp6(6),a.Oqu(a.lcZ(21,12,\"twoFactorDuoSecretKey\")),a.xp6(3),a.Q6J(\"ngModel\",e.skey),a.xp6(6),a.Oqu(a.lcZ(30,14,\"twoFactorDuoApiHostname\")),a.xp6(3),a.MGl(\"placeholder\",\"\",a.lcZ(33,16,\"ex\"),\" api-xxxxxxxx.duosecurity.com\"),a.Q6J(\"ngModel\",e.host)}}function S(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"span\"),a._uU(1),a.ALo(2,\"i18n\"),a.qZA()),2\u0026e\u0026\u0026(a.xp6(1),a.Oqu(a.lcZ(2,1,\"enable\")))}function T(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"span\"),a._uU(1),a.ALo(2,\"i18n\"),a.qZA()),2\u0026e\u0026\u0026(a.xp6(1),a.Oqu(a.lcZ(2,1,\"disable\")))}function C(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"form\",10,11),a.NdJ(\"ngSubmit\",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.submit())})),a._uU(2,\"\\n        \"),a.TgZ(3,\"div\",12),a._uU(4,\"\\n          \"),a.YNc(5,Z,25,18,\"ng-container\",13),a._uU(6,\"\\n          \"),a.YNc(7,x,36,18,\"ng-container\",13),a._uU(8,\"\\n        \"),a.qZA(),a._uU(9,\"\\n        \"),a.TgZ(10,\"div\",14),a._uU(11,\"\\n          \"),a.TgZ(12,\"button\",15),a._uU(13,\"\\n            \"),a._UZ(14,\"i\",16),a.ALo(15,\"i18n\"),a._uU(16,\"\\n            \"),a.YNc(17,S,3,3,\"span\",13),a._uU(18,\"\\n            \"),a.YNc(19,T,3,3,\"span\",13),a._uU(20,\"\\n          \"),a.qZA(),a._uU(21,\"\\n          \"),a.TgZ(22,\"button\",17),a._uU(23),a.ALo(24,\"i18n\"),a.qZA(),a._uU(25,\"\\n        \"),a.qZA(),a._uU(26,\"\\n      \"),a.qZA()}if(2\u0026e){const e=a.MAs(1),t=a.oxw();a.Q6J(\"appApiAction\",t.formPromise),a.xp6(5),a.Q6J(\"ngIf\",t.enabled),a.xp6(2),a.Q6J(\"ngIf\",!t.enabled),a.xp6(5),a.Q6J(\"disabled\",e.loading),a.xp6(2),a.s9C(\"title\",a.lcZ(15,8,\"loading\")),a.xp6(3),a.Q6J(\"ngIf\",!t.enabled),a.xp6(2),a.Q6J(\"ngIf\",t.enabled),a.xp6(4),a.hij(\"\\n            \",a.lcZ(24,10,\"close\"),\"\\n          \")}}class O extends r.c{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r),this.type=n.L.Duo,this.componentName=\"app-two-factor-duo\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return _(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(o);return t.integrationKey=this.ikey,t.secretKey=this.skey,t.host=this.host,e.enable.call(this,(()=\u003e_(this,void 0,void 0,(function*(){null!=this.organizationId?this.formPromise=this.apiService.putTwoFactorOrganizationDuo(this.organizationId,t):this.formPromise=this.apiService.putTwoFactorDuo(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){this.ikey=e.integrationKey,this.skey=e.secretKey,this.host=e.host,this.enabled=e.enabled}}O.ɵfac=function(e){return new(e||O)(a.Y36(l.s),a.Y36(c.D),a.Y36(u.P),a.Y36(d.$),a.Y36(p.i),a.Y36(h.x))},O.ɵcmp=a.Xpm({type:O,selectors:[[\"app-two-factor-duo\"]],features:[a.qOj],decls:30,vars:8,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faDuoTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faDuoTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[\"alt\",\"Duo logo\",1,\"float-right\",\"ml-3\",\"mfaType2\"],[1,\"form-group\"],[\"for\",\"ikey\"],[\"id\",\"ikey\",\"type\",\"text\",\"name\",\"IntegrationKey\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"skey\"],[\"id\",\"skey\",\"type\",\"password\",\"name\",\"SecretKey\",\"required\",\"\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"host\"],[\"id\",\"host\",\"type\",\"text\",\"name\",\"Host\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"placeholder\",\"ngModelChange\"]],template:function(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"div\",0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",1),a._uU(3,\"\\n    \"),a.TgZ(4,\"div\",2),a._uU(5,\"\\n      \"),a.TgZ(6,\"div\",3),a._uU(7,\"\\n        \"),a.TgZ(8,\"h1\",4),a._uU(9),a.ALo(10,\"i18n\"),a.TgZ(11,\"small\"),a._uU(12,\"Duo\"),a.qZA(),a._uU(13,\"\\n        \"),a.qZA(),a._uU(14,\"\\n        \"),a.TgZ(15,\"button\",5),a.ALo(16,\"i18n\"),a._uU(17,\"\\n          \"),a.TgZ(18,\"span\",6),a._uU(19,\"×\"),a.qZA(),a._uU(20,\"\\n        \"),a.qZA(),a._uU(21,\"\\n      \"),a.qZA(),a._uU(22,\"\\n      \"),a.YNc(23,A,2,2,\"app-two-factor-verify\",7),a._uU(24,\"\\n      \"),a.YNc(25,C,27,12,\"form\",8),a._uU(26,\"\\n    \"),a.qZA(),a._uU(27,\"\\n  \"),a.qZA(),a._uU(28,\"\\n\"),a.qZA(),a._uU(29,\"\\n\")),2\u0026e\u0026\u0026(a.xp6(9),a.hij(\"\\n          \",a.lcZ(10,4,\"twoStepLogin\"),\"\\n          \"),a.xp6(6),a.s9C(\"appA11yTitle\",a.lcZ(16,6,\"close\")),a.xp6(8),a.Q6J(\"ngIf\",!t.authed),a.xp6(2),a.Q6J(\"ngIf\",t.authed))},dependencies:[g.O5,f.Fj,f.JJ,f.JL,f.Q7,f.On,f.F,m.B,y.b,v.O,w.b,b.c,U.C],encapsulation:2})},62941:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003eyt});var n=i(24852),s=i(54019),o=i(68362),r=i(77494),a=i(20099),l=i(48103),c=i(66990),u=i(87264),d=i(91667);class p extends d.Y{}var h=i(27646),g=i(90668),f=i(55602),m=i(78627),y=i(42304),v=i(99721),w=i(66459),b=i(58172),U=i(73369),_=i(19419),A=i(98645),Z=i(33245),x=i(24610),S=i(53707),T=i(85356),C=i(19227),O=i(82933),k=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function q(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function P(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n._UZ(2,\"img\",28),n._uU(3,\"\\n            \"),n.TgZ(4,\"p\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n            \"),n.TgZ(8,\"p\"),n._uU(9,\"\\n              \"),n.TgZ(10,\"strong\"),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n            \"),n.qZA(),n._uU(14,\"\\n          \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(5),n.Oqu(n.lcZ(6,2,\"twoStepAuthenticatorDesc\")),n.xp6(6),n.hij(\"1. \",n.lcZ(12,4,\"twoStepAuthenticatorDownloadApp\"),\"\"))}function I(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"app-callout\",29),n.ALo(3,\"i18n\"),n._uU(4,\"\\n              \"),n.TgZ(5,\"p\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10,\"\\n            \"),n._UZ(11,\"img\",28),n._uU(12,\"\\n            \"),n.TgZ(13,\"p\"),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n          \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,4,\"enabled\")),n.xp6(4),n.Oqu(n.lcZ(7,6,\"twoStepLoginProviderEnabled\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(9,8,\"twoStepAuthenticatorReaddDesc\"),\"\\n            \"),n.xp6(6),n.Oqu(n.lcZ(15,10,\"twoStepAuthenticatorNeedApp\")))}function M(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"p\"),n._uU(1,\"\\n            \"),n.TgZ(2,\"strong\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"2. \",n.lcZ(4,1,\"twoStepAuthenticatorScanCode\"),\"\"))}function N(e,t){1\u0026e\u0026\u0026n._UZ(0,\"hr\")}function L(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"label\",30),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n            \"),n.TgZ(6,\"input\",31),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.token=t)})),n.qZA(),n._uU(7,\"\\n          \"),n.BQk()}if(2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"3. \",n.lcZ(4,2,\"twoStepAuthenticatorEnterCode\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",e.token)}}function D(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"enable\")))}function E(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"disable\")))}const F=function(e){return{\"mb-0\":e}};function R(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,P,15,6,\"ng-container\",13),n._uU(6,\"\\n          \"),n.YNc(7,I,17,12,\"ng-container\",13),n._uU(8,\"\\n          \"),n.TgZ(9,\"ul\",14),n._uU(10,\"\\n            \"),n.TgZ(11,\"li\"),n._uU(12,\"\\n              \"),n._UZ(13,\"i\",15),n._uU(14),n.ALo(15,\"i18n\"),n.TgZ(16,\"a\",16),n._uU(17,\"Authy\"),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n            \"),n.TgZ(20,\"li\"),n._uU(21,\"\\n              \"),n._UZ(22,\"i\",17),n._uU(23),n.ALo(24,\"i18n\"),n.TgZ(25,\"a\",18),n._uU(26,\"Authy\"),n.qZA(),n._uU(27,\"\\n            \"),n.qZA(),n._uU(28,\"\\n            \"),n.TgZ(29,\"li\"),n._uU(30,\"\\n              \"),n._UZ(31,\"i\",19),n._uU(32),n.ALo(33,\"i18n\"),n.TgZ(34,\"a\",20),n._uU(35,\"Microsoft Authenticator\"),n.qZA(),n._uU(36,\"\\n            \"),n.qZA(),n._uU(37,\"\\n          \"),n.qZA(),n._uU(38,\"\\n          \"),n.TgZ(39,\"p\"),n._uU(40),n.ALo(41,\"i18n\"),n.qZA(),n._uU(42,\"\\n          \"),n.YNc(43,M,6,3,\"p\",13),n._uU(44,\"\\n          \"),n.YNc(45,N,1,0,\"hr\",13),n._uU(46,\"\\n          \"),n.TgZ(47,\"p\",21),n._uU(48,\"\\n            \"),n._UZ(49,\"canvas\",22)(50,\"br\"),n._uU(51,\"\\n            \"),n.TgZ(52,\"code\",23),n.ALo(53,\"i18n\"),n._uU(54),n.qZA(),n._uU(55,\"\\n          \"),n.qZA(),n._uU(56,\"\\n          \"),n.YNc(57,L,8,4,\"ng-container\",13),n._uU(58,\"\\n        \"),n.qZA(),n._uU(59,\"\\n        \"),n.TgZ(60,\"div\",24),n._uU(61,\"\\n          \"),n.TgZ(62,\"button\",25),n._uU(63,\"\\n            \"),n._UZ(64,\"i\",26),n.ALo(65,\"i18n\"),n._uU(66,\"\\n            \"),n.YNc(67,D,3,3,\"span\",13),n._uU(68,\"\\n            \"),n.YNc(69,E,3,3,\"span\",13),n._uU(70,\"\\n          \"),n.qZA(),n._uU(71,\"\\n          \"),n.TgZ(72,\"button\",27),n._uU(73),n.ALo(74,\"i18n\"),n.qZA(),n._uU(75,\"\\n        \"),n.qZA(),n._uU(76,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(7),n.hij(\"\",n.lcZ(15,18,\"iosDevices\"),\":\\n              \"),n.xp6(9),n.hij(\"\",n.lcZ(24,20,\"androidDevices\"),\":\\n              \"),n.xp6(9),n.hij(\"\",n.lcZ(33,22,\"windowsDevices\"),\":\\n              \"),n.xp6(8),n.Oqu(n.lcZ(41,24,\"twoStepAuthenticatorAppsRecommended\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(2),n.Q6J(\"ngClass\",n.VKq(32,F,t.enabled)),n.xp6(5),n.s9C(\"appA11yTitle\",n.lcZ(53,26,\"key\")),n.xp6(2),n.Oqu(t.key),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(5),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(65,28,\"loading\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(4),n.hij(\"\\n            \",n.lcZ(74,30,\"close\"),\"\\n          \")}}class J extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,n,s,i,r),this.stateService=o,this.type=l.L.Authenticator,this.componentName=\"app-two-factor-authenticator\",this.qrScript=window.document.createElement(\"script\"),this.qrScript.src=\"scripts/qrious.min.js\",this.qrScript.async=!0}ngOnInit(){window.document.body.appendChild(this.qrScript)}ngOnDestroy(){window.document.body.removeChild(this.qrScript)}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return k(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(p);return t.token=this.token,t.key=this.key,e.enable.call(this,(()=\u003ek(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorAuthenticator(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return k(this,void 0,void 0,(function*(){this.token=null,this.enabled=e.enabled,this.key=e.key;const t=yield this.stateService.getEmail();window.setTimeout((()=\u003e{new window.QRious({element:document.getElementById(\"qr\"),value:\"otpauth://totp/Vaultwarden:\"+h.c.encodeRFC3986URIComponent(t)+\"?secret=\"+encodeURIComponent(this.key)+\"\u0026issuer=Vaultwarden\",size:160})}),100)}))}}J.ɵfac=function(e){return new(e||J)(n.Y36(f.s),n.Y36(m.D),n.Y36(y.i),n.Y36(v.P),n.Y36(w.$),n.Y36(b.b),n.Y36(U.x))},J.ɵcmp=n.Xpm({type:J,selectors:[[\"app-two-factor-authenticator\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faAuthenticatorTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faAuthenticatorTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"bwi-ul\"],[1,\"bwi\",\"bwi-li\",\"bwi-apple\"],[\"href\",\"https://itunes.apple.com/us/app/authy/id494168017?mt=8\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"bwi\",\"bwi-li\",\"bwi-android\"],[\"href\",\"https://play.google.com/store/apps/details?id=com.authy.authy\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"bwi\",\"bwi-li\",\"bwi-windows\"],[\"href\",\"https://www.microsoft.com/p/authenticator/9wzdncrfj3rj\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"text-center\",3,\"ngClass\"],[\"id\",\"qr\"],[3,\"appA11yTitle\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"alt\",\"Authenticator app logo\",1,\"float-right\",\"mfaType0\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[\"for\",\"token\"],[\"id\",\"token\",\"type\",\"text\",\"name\",\"Token\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,q,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,R,77,34,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"authenticatorAppTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.mk,_.O5,A.Fj,A.JJ,A.JL,A.Q7,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});var Y=i(41648),z=i(15800);class K extends d.Y{}var Q=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function B(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function G(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"app-callout\",18),n.ALo(3,\"i18n\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n            \"),n.TgZ(7,\"strong\"),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.s9C(\"title\",n.lcZ(3,4,\"enabled\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(5,6,\"twoStepLoginProviderEnabled\"),\"\\n            \"),n.xp6(4),n.hij(\"\",n.lcZ(9,8,\"email\"),\":\"),n.xp6(2),n.hij(\" \",e.email,\"\\n          \")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\",31),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(1),n.hij(\"\\n                \",n.xi3(2,1,\"verificationCodeEmailSent\",e.sentEmail),\"\\n              \")}}function j(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"p\",19),n._uU(3,\"\\n              \"),n.TgZ(4,\"span\",20),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n              \"),n._UZ(8,\"img\",21),n._uU(9,\"\\n            \"),n.qZA(),n._uU(10,\"\\n            \"),n.TgZ(11,\"div\",22),n._uU(12,\"\\n              \"),n.TgZ(13,\"label\",23),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n              \"),n.TgZ(17,\"input\",24),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.email=t)})),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n            \"),n.TgZ(20,\"div\",25),n._uU(21,\"\\n              \"),n.TgZ(22,\"button\",26,27),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.sendEmail())})),n._uU(24,\"\\n                \"),n._UZ(25,\"i\",16),n.ALo(26,\"i18n\"),n._uU(27,\"\\n                \"),n.TgZ(28,\"span\"),n._uU(29),n.ALo(30,\"i18n\"),n.qZA(),n._uU(31,\"\\n              \"),n.qZA(),n._uU(32,\"\\n              \"),n.YNc(33,V,3,4,\"span\",28),n._uU(34,\"\\n            \"),n.qZA(),n._uU(35,\"\\n            \"),n.TgZ(36,\"div\",22),n._uU(37,\"\\n              \"),n.TgZ(38,\"label\",29),n._uU(39),n.ALo(40,\"i18n\"),n.qZA(),n._uU(41,\"\\n              \"),n.TgZ(42,\"input\",30),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.token=t)})),n.qZA(),n._uU(43,\"\\n            \"),n.qZA(),n._uU(44,\"\\n          \"),n.BQk()}if(2\u0026e){const e=n.MAs(23),t=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,10,\"twoFactorEmailDesc\")),n.xp6(9),n.hij(\"1. \",n.lcZ(15,12,\"twoFactorEmailEnterEmail\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",t.email),n.xp6(5),n.Q6J(\"appApiAction\",t.emailPromise)(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(26,14,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(30,16,\"sendEmail\")),n.xp6(4),n.Q6J(\"ngIf\",t.sentEmail),n.xp6(6),n.hij(\"2. \",n.lcZ(40,18,\"twoFactorEmailEnterCode\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",t.token)}}function H(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"enable\")))}function $(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"disable\")))}function W(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,G,11,10,\"ng-container\",13),n._uU(6,\"\\n          \"),n.YNc(7,j,45,20,\"ng-container\",13),n._uU(8,\"\\n        \"),n.qZA(),n._uU(9,\"\\n        \"),n.TgZ(10,\"div\",14),n._uU(11,\"\\n          \"),n.TgZ(12,\"button\",15),n._uU(13,\"\\n            \"),n._UZ(14,\"i\",16),n.ALo(15,\"i18n\"),n._uU(16,\"\\n            \"),n.YNc(17,H,3,3,\"span\",13),n._uU(18,\"\\n            \"),n.YNc(19,$,3,3,\"span\",13),n._uU(20,\"\\n          \"),n.qZA(),n._uU(21,\"\\n          \"),n.TgZ(22,\"button\",17),n._uU(23),n.ALo(24,\"i18n\"),n.qZA(),n._uU(25,\"\\n        \"),n.qZA(),n._uU(26,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",t.enabled),n.xp6(2),n.Q6J(\"ngIf\",!t.enabled),n.xp6(5),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(15,8,\"loading\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(4),n.hij(\"\\n            \",n.lcZ(24,10,\"close\"),\"\\n          \")}}class X extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,i,n,s,r),this.stateService=o,this.type=l.L.Email,this.componentName=\"app-two-factor-email\"}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}sendEmail(){return Q(this,void 0,void 0,(function*(){try{const e=yield this.buildRequestModel(z.U);e.email=this.email,this.emailPromise=this.apiService.postTwoFactorEmailSetup(e),yield this.emailPromise,this.sentEmail=this.email}catch(e){this.logService.error(e)}}))}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return Q(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(K);return t.email=this.email,t.token=this.token,e.enable.call(this,(()=\u003eQ(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorEmail(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return Q(this,void 0,void 0,(function*(){this.token=null,this.email=e.email,this.enabled=e.enabled,this.enabled||null!=this.email\u0026\u0026\"\"!==this.email||(this.email=yield this.stateService.getEmail())}))}}function ee(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"type\",e.type)}}function te(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n            \"),n.TgZ(6,\"code\",14),n._uU(7),n.qZA(),n._uU(8,\"\\n          \"),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"\",n.lcZ(4,2,\"twoFactorRecoveryYourCode\"),\":\"),n.xp6(4),n.Oqu(e.code)}}function ie(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n            \",n.lcZ(2,1,\"twoFactorRecoveryNoCode\"),\"\\n          \"))}function ne(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",15),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.print())})),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n            \",n.lcZ(2,1,\"printCode\"),\"\\n          \"))}function se(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",10),n._uU(3,\"\\n          \"),n.YNc(4,te,9,4,\"ng-container\",8),n._uU(5,\"\\n          \"),n.YNc(6,ie,3,3,\"ng-container\",8),n._uU(7,\"\\n        \"),n.qZA(),n._uU(8,\"\\n        \"),n.TgZ(9,\"div\",11),n._uU(10,\"\\n          \"),n.YNc(11,ne,3,3,\"button\",12),n._uU(12,\"\\n          \"),n.TgZ(13,\"button\",13),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n        \"),n.qZA(),n._uU(17,\"\\n      \"),n.BQk()),2\u0026e){const e=n.oxw();n.xp6(4),n.Q6J(\"ngIf\",e.code),n.xp6(2),n.Q6J(\"ngIf\",!e.code),n.xp6(5),n.Q6J(\"ngIf\",e.code),n.xp6(3),n.hij(\"\\n            \",n.lcZ(15,4,\"close\"),\"\\n          \")}}X.ɵfac=function(e){return new(e||X)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(w.$),n.Y36(y.i),n.Y36(b.b),n.Y36(U.x))},X.ɵcmp=n.Xpm({type:X,selectors:[[\"app-two-factor-email\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faEmailTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faEmailTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[1,\"d-flex\"],[1,\"mr-3\"],[\"alt\",\"Email logo\",1,\"float-right\",\"ml-auto\",\"mfaType1\"],[1,\"form-group\"],[\"for\",\"email\"],[\"id\",\"email\",\"type\",\"text\",\"name\",\"Email\",\"required\",\"\",\"inputmode\",\"email\",\"appInputVerbatim\",\"false\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"mb-3\",\"d-flex\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-primary\",\"btn-sm\",\"btn-submit\",\"align-self-start\",3,\"appApiAction\",\"disabled\",\"click\"],[\"sendBtn\",\"\"],[\"class\",\"text-success ml-3\",4,\"ngIf\"],[\"for\",\"token\"],[\"id\",\"token\",\"type\",\"text\",\"name\",\"Token\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"text-success\",\"ml-3\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,B,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,W,27,12,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"emailTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.O5,A.Fj,A.JJ,A.JL,A.Q7,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});class oe{constructor(e){this.i18nService=e,this.type=-1,this.twoFactorProviderType=l.L}auth(e){this.authed=!0,this.processResponse(e.response)}print(){const e=window.open();e.document.write('\u003cdiv style=\"font-size: 18px; text-align: center;\"\u003e\u003cp\u003e'+this.i18nService.t(\"twoFactorRecoveryYourCode\")+\":\u003c/p\u003e\u003ccode style=\\\"font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\\\"\u003e\"+this.code+'\u003c/code\u003e\u003c/div\u003e\u003cp style=\"text-align: center;\"\u003e'+new Date+\"\u003c/p\u003e\"),e.onafterprint=()=\u003ee.close(),e.print()}formatString(e){return null==e?null:e.replace(/(.{4})/g,\"$1 \").trim().toUpperCase()}processResponse(e){this.code=this.formatString(e.code)}}oe.ɵfac=function(e){return new(e||oe)(n.Y36(m.D))},oe.ɵcmp=n.Xpm({type:oe,selectors:[[\"app-two-factor-recovery\"]],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faRecoveryTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faRecoveryTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"type\",\"onAuthed\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"type\",\"onAuthed\"],[1,\"modal-body\",\"text-center\"],[1,\"modal-footer\"],[\"type\",\"button\",\"class\",\"btn btn-primary\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[1,\"text-lg\"],[\"type\",\"button\",1,\"btn\",\"btn-primary\",3,\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,ee,2,1,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,se,18,6,\"ng-container\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"recoveryCodeTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.O5,Z.B,C.c,O.C],encapsulation:2});class re extends d.Y{}class ae extends d.Y{}var le=i(2051),ce=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function ue(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function de(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",31),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.s9C(\"title\",n.lcZ(1,2,\"enabled\")),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"twoStepLoginProviderEnabled\"),\"\\n          \"))}function pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"strong\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw().index;n.xp6(1),n.Oqu(n.xi3(2,1,\"webAuthnkeyX\",e+1))}}function he(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"strong\"),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e.name)}}function ge(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n                  \"),n.TgZ(2,\"span\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n                \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,1,\"webAuthnMigrated\")))}function fe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n                \"),n.YNc(2,ge,6,3,\"ng-container\",25),n._uU(3,\"\\n              \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(2),n.Q6J(\"ngIf\",e.migrated)}}function me(e,t){1\u0026e\u0026\u0026(n._UZ(0,\"i\",37),n.ALo(1,\"i18n\")),2\u0026e\u0026\u0026n.s9C(\"title\",n.lcZ(1,1,\"loading\"))}function ye(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n                \"),n.YNc(2,me,2,3,\"i\",35),n._uU(3,\"\\n                -\\n                \"),n.TgZ(4,\"a\",36),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.remove(t))})),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n              \"),n.BQk()}if(2\u0026e){n.oxw();const e=n.MAs(1);n.xp6(2),n.Q6J(\"ngIf\",e.loading),n.xp6(3),n.Oqu(n.lcZ(6,2,\"remove\"))}}function ve(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"li\",32,33),n._uU(2,\"\\n              \"),n._UZ(3,\"i\",34),n._uU(4,\"\\n              \"),n.YNc(5,pe,3,4,\"strong\",25),n._uU(6,\"\\n              \"),n.YNc(7,he,2,1,\"strong\",25),n._uU(8,\"\\n              \"),n.YNc(9,fe,4,1,\"ng-container\",25),n._uU(10,\"\\n              \"),n.YNc(11,ye,8,4,\"ng-container\",25),n._uU(12,\"\\n            \"),n.qZA()),2\u0026e){const e=t.$implicit,i=n.MAs(1),s=n.oxw(2);n.Q6J(\"appApiAction\",e.removePromise),n.xp6(5),n.Q6J(\"ngIf\",!e.configured||!e.name),n.xp6(2),n.Q6J(\"ngIf\",e.configured\u0026\u0026e.name),n.xp6(2),n.Q6J(\"ngIf\",e.configured\u0026\u0026!i.loading),n.xp6(2),n.Q6J(\"ngIf\",s.keysConfiguredCount\u003e1\u0026\u0026e.configured)}}function we(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n._UZ(2,\"i\",38),n._uU(3,\"\\n          \"),n.BQk())}function be(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",38),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fWaiting\"),\"...\\n            \"))}function Ue(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",39),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fClickSave\"),\"\\n            \"))}function _e(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",40),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fProblemReadingTryAgain\"),\"\\n            \"))}function Ae(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.YNc(2,be,5,3,\"ng-container\",25),n._uU(3,\"\\n            \"),n.YNc(4,Ue,5,3,\"ng-container\",25),n._uU(5,\"\\n            \"),n.YNc(6,_e,5,3,\"ng-container\",25),n._uU(7,\"\\n          \"),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnListening),n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnResponse),n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnError)}}function Ze(e,t){1\u0026e\u0026\u0026(n._UZ(0,\"i\",41),n.ALo(1,\"i18n\")),2\u0026e\u0026\u0026n.s9C(\"title\",n.lcZ(1,1,\"loading\"))}function xe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"save\")))}function Se(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",42,43),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.disable())})),n._uU(2,\"\\n            \"),n._UZ(3,\"i\",41),n.ALo(4,\"i18n\"),n._uU(5,\"\\n            \"),n.TgZ(6,\"span\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.qZA()}if(2\u0026e){const e=n.MAs(1);n.Q6J(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(4,3,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(8,5,\"disableAllKeys\"))}}function Te(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,de,4,6,\"app-callout\",13),n._uU(6,\"\\n          \"),n.TgZ(7,\"app-callout\",14),n._uU(8,\"\\n            \"),n.TgZ(9,\"p\"),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"ul\",15),n._uU(14,\"\\n              \"),n.TgZ(15,\"li\"),n._uU(16),n.ALo(17,\"i18n\"),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n          \"),n.qZA(),n._uU(20,\"\\n          \"),n._UZ(21,\"img\",16),n._uU(22,\"\\n          \"),n.TgZ(23,\"ul\",17),n._uU(24,\"\\n            \"),n.YNc(25,ve,13,5,\"li\",18),n._uU(26,\"\\n          \"),n.qZA(),n._uU(27,\"\\n          \"),n._UZ(28,\"hr\"),n._uU(29,\"\\n          \"),n.TgZ(30,\"p\"),n._uU(31),n.ALo(32,\"i18n\"),n.qZA(),n._uU(33,\"\\n          \"),n.TgZ(34,\"ol\"),n._uU(35,\"\\n            \"),n.TgZ(36,\"li\"),n._uU(37),n.ALo(38,\"i18n\"),n.qZA(),n._uU(39,\"\\n            \"),n.TgZ(40,\"li\"),n._uU(41),n.ALo(42,\"i18n\"),n.qZA(),n._uU(43,\"\\n            \"),n.TgZ(44,\"li\"),n._uU(45),n.ALo(46,\"i18n\"),n.qZA(),n._uU(47,\"\\n            \"),n.TgZ(48,\"li\"),n._uU(49),n.ALo(50,\"i18n\"),n.qZA(),n._uU(51,\"\\n          \"),n.qZA(),n._uU(52,\"\\n          \"),n.TgZ(53,\"div\",19),n._uU(54,\"\\n            \"),n.TgZ(55,\"div\",20),n._uU(56,\"\\n              \"),n.TgZ(57,\"label\",21),n._uU(58),n.ALo(59,\"i18n\"),n.qZA(),n._uU(60,\"\\n              \"),n.TgZ(61,\"input\",22),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.name=t)})),n.qZA(),n._uU(62,\"\\n            \"),n.qZA(),n._uU(63,\"\\n          \"),n.qZA(),n._uU(64,\"\\n          \"),n.TgZ(65,\"button\",23,24),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.readKey())})),n._uU(67),n.ALo(68,\"i18n\"),n.qZA(),n._uU(69,\"\\n          \"),n.YNc(70,we,4,0,\"ng-container\",25),n._uU(71,\"\\n          \"),n.YNc(72,Ae,8,3,\"ng-container\",25),n._uU(73,\"\\n        \"),n.qZA(),n._uU(74,\"\\n        \"),n.TgZ(75,\"div\",26),n._uU(76,\"\\n          \"),n.TgZ(77,\"button\",27),n._uU(78,\"\\n            \"),n.YNc(79,Ze,2,3,\"i\",28),n._uU(80,\"\\n            \"),n.YNc(81,xe,3,3,\"span\",25),n._uU(82,\"\\n          \"),n.qZA(),n._uU(83,\"\\n          \"),n.YNc(84,Se,10,7,\"button\",29),n._uU(85,\"\\n          \"),n.TgZ(86,\"button\",30),n._uU(87),n.ALo(88,\"i18n\"),n.qZA(),n._uU(89,\"\\n        \"),n.qZA(),n._uU(90,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.MAs(66),i=n.oxw();n.Q6J(\"appApiAction\",i.formPromise),n.xp6(5),n.Q6J(\"ngIf\",i.enabled),n.xp6(5),n.Oqu(n.lcZ(11,23,\"twoFactorWebAuthnWarning\")),n.xp6(6),n.Oqu(n.lcZ(17,25,\"twoFactorWebAuthnSupportWeb\")),n.xp6(9),n.Q6J(\"ngForOf\",i.keys),n.xp6(6),n.hij(\"\",n.lcZ(32,27,\"twoFactorWebAuthnAdd\"),\":\"),n.xp6(6),n.Oqu(n.lcZ(38,29,\"twoFactorU2fGiveName\")),n.xp6(4),n.Oqu(n.lcZ(42,31,\"twoFactorU2fPlugInReadKey\")),n.xp6(4),n.Oqu(n.lcZ(46,33,\"twoFactorU2fTouchButton\")),n.xp6(4),n.Oqu(n.lcZ(50,35,\"twoFactorU2fSaveForm\")),n.xp6(9),n.Oqu(n.lcZ(59,37,\"name\")),n.xp6(3),n.Q6J(\"ngModel\",i.name)(\"disabled\",!i.keyIdAvailable),n.xp6(4),n.Q6J(\"disabled\",t.loading||i.webAuthnListening||!i.keyIdAvailable)(\"appApiAction\",i.challengePromise),n.xp6(2),n.hij(\"\\n            \",n.lcZ(68,39,\"readKey\"),\"\\n          \"),n.xp6(3),n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",!t.loading),n.xp6(5),n.Q6J(\"disabled\",e.loading||!i.webAuthnResponse),n.xp6(2),n.Q6J(\"ngIf\",e.loading),n.xp6(2),n.Q6J(\"ngIf\",!e.loading),n.xp6(3),n.Q6J(\"ngIf\",i.enabled),n.xp6(3),n.hij(\"\\n            \",n.lcZ(88,41,\"close\"),\"\\n          \")}}class Ce extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,i,s,o,r),this.ngZone=n,this.type=l.L.WebAuthn,this.keyIdAvailable=null,this.keysConfiguredCount=0,this.componentName=\"app-two-factor-webauthn\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return ce(this,void 0,void 0,(function*(){if(null==this.webAuthnResponse||null==this.keyIdAvailable)return Promise.reject();const t=yield this.buildRequestModel(ae);return t.deviceResponse=this.webAuthnResponse,t.id=this.keyIdAvailable,t.name=this.name,e.enable.call(this,(()=\u003ece(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorWebAuthn(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}disable(){return super.disable(this.formPromise)}remove(e){return ce(this,void 0,void 0,(function*(){if(this.keysConfiguredCount\u003c=1||null!=e.removePromise)return;const t=null!=e.name?e.name:this.i18nService.t(\"webAuthnkeyX\",e.id);if(!(yield this.dialogService.openSimpleDialog({title:t,content:{key:\"removeU2fConfirmation\"},type:\"warning\"})))return;const i=yield this.buildRequestModel(re);i.id=e.id;try{e.removePromise=this.apiService.deleteTwoFactorWebAuthn(i);const t=yield e.removePromise;e.removePromise=null,yield this.processResponse(t)}catch(n){this.logService.error(n)}}))}readKey(){return ce(this,void 0,void 0,(function*(){if(null==this.keyIdAvailable)return;const e=yield this.buildRequestModel(d.Y);try{this.challengePromise=this.apiService.getTwoFactorWebAuthnChallenge(e);const t=yield this.challengePromise;this.readDevice(t)}catch(t){this.logService.error(t)}}))}readDevice(e){console.log(\"listening for key...\"),this.resetWebAuthn(!0),navigator.credentials.create({publicKey:e}).then((e=\u003e{this.ngZone.run((()=\u003e{this.webAuthnListening=!1,this.webAuthnResponse=e}))})).catch((e=\u003e{console.error(e),this.resetWebAuthn(!1),this.webAuthnError=!0}))}resetWebAuthn(e=!1){this.webAuthnResponse=null,this.webAuthnError=!1,this.webAuthnListening=e}processResponse(e){this.resetWebAuthn(),this.keys=[],this.keyIdAvailable=null,this.name=null,this.keysConfiguredCount=0;for(let t=1;t\u003c=5;t++){if(null!=e.keys){const i=e.keys.filter((e=\u003ee.id===t));if(i.length\u003e0){this.keysConfiguredCount++,this.keys.push({id:t,name:i[0].name,configured:!0,migrated:i[0].migrated,removePromise:null});continue}}this.keys.push({id:t,name:null,configured:!1,removePromise:null}),null==this.keyIdAvailable\u0026\u0026(this.keyIdAvailable=t)}this.enabled=e.enabled}}Ce.ɵfac=function(e){return new(e||Ce)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(n.R0b),n.Y36(w.$),n.Y36(y.i),n.Y36(U.x))},Ce.ɵcmp=n.Xpm({type:Ce,selectors:[[\"app-two-factor-webauthn\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faU2fTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-lg\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faU2fTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\",4,\"ngIf\"],[\"type\",\"warning\"],[1,\"mb-0\"],[\"alt\",\"FIDO2 WebAuthn logo'\",1,\"float-right\",\"ml-5\",\"mfaType7\"],[1,\"bwi-ul\"],[3,\"appApiAction\",4,\"ngFor\",\"ngForOf\"],[1,\"row\"],[1,\"form-group\",\"col-6\"],[\"for\",\"name\"],[\"id\",\"name\",\"type\",\"text\",\"name\",\"Name\",1,\"form-control\",3,\"ngModel\",\"disabled\",\"ngModelChange\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"mr-2\",3,\"disabled\",\"appApiAction\",\"click\"],[\"readKeyBtn\",\"\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",3,\"disabled\"],[\"class\",\"bwi bwi-spinner bwi-spin\",\"aria-hidden\",\"true\",3,\"title\",4,\"ngIf\"],[\"type\",\"button\",\"class\",\"btn btn-outline-secondary btn-submit\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[3,\"appApiAction\"],[\"removeKeyBtn\",\"\"],[1,\"bwi\",\"bwi-li\",\"bwi-key\"],[\"class\",\"bwi bwi-spin bwi-spinner text-muted bwi-fw\",\"aria-hidden\",\"true\",3,\"title\",4,\"ngIf\"],[\"href\",\"#\",\"appStopClick\",\"\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spin\",\"bwi-spinner\",\"text-muted\",\"bwi-fw\",3,\"title\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check-circle\",\"text-success\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-exclamation-triangle\",\"text-danger\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"btn-submit\",3,\"disabled\",\"click\"],[\"disableBtn\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,ue,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,Te,91,43,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"webAuthnTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.sg,_.O5,A.Fj,A.JJ,A.JL,A.On,A.F,Z.B,x.b,S.O,le.O,C.c,O.C],encapsulation:2});class Oe extends d.Y{}var ke=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function qe(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function Pe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",29),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.s9C(\"title\",n.lcZ(1,2,\"enabled\")),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"twoStepLoginProviderEnabled\"),\"\\n          \"))}function Ie(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"input\",34),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw().$implicit;return n.KtG(i.key=t)})),n.qZA()}if(2\u0026e){const e=n.oxw(),t=e.index,i=e.$implicit;n.MGl(\"id\",\"key\",t+1,\"\")(\"name\",\"Key\",t+1,\"\"),n.Q6J(\"ngModel\",i.key)}}function Me(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\",35),n._uU(1,\"\\n                \"),n.TgZ(2,\"span\",36),n._uU(3),n.qZA(),n._uU(4,\"\\n                \"),n.TgZ(5,\"button\",37),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.remove(t))})),n.ALo(6,\"i18n\"),n._uU(7,\"\\n                  \"),n._UZ(8,\"i\",38),n._uU(9,\"\\n                \"),n.qZA(),n._uU(10,\"\\n              \"),n.qZA()}if(2\u0026e){const e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.existingKey),n.xp6(2),n.s9C(\"appA11yTitle\",n.lcZ(6,2,\"remove\"))}}function Ne(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",30),n._uU(1,\"\\n              \"),n.TgZ(2,\"label\",31),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n              \"),n.YNc(6,Ie,1,3,\"input\",32),n._uU(7,\"\\n              \"),n.YNc(8,Me,11,4,\"div\",33),n._uU(9,\"\\n            \"),n.qZA()),2\u0026e){const e=t.$implicit,i=t.index;n.xp6(2),n.MGl(\"for\",\"key\",i+1,\"\"),n.xp6(1),n.Oqu(n.xi3(4,4,\"yubikeyX\",i+1)),n.xp6(3),n.Q6J(\"ngIf\",!e.existingKey),n.xp6(2),n.Q6J(\"ngIf\",e.existingKey)}}function Le(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",39,40),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.disable())})),n._uU(2,\"\\n            \"),n._UZ(3,\"i\",26),n.ALo(4,\"i18n\"),n._uU(5,\"\\n            \"),n.TgZ(6,\"span\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw(2);n.Q6J(\"appApiAction\",t.disablePromise)(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(4,4,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(8,6,\"disableAllKeys\"))}}function De(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,Pe,4,6,\"app-callout\",13),n._uU(6,\"\\n          \"),n.TgZ(7,\"app-callout\",14),n._uU(8,\"\\n            \"),n.TgZ(9,\"p\"),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"ul\",15),n._uU(14,\"\\n              \"),n.TgZ(15,\"li\"),n._uU(16),n.ALo(17,\"i18n\"),n.qZA(),n._uU(18,\"\\n              \"),n.TgZ(19,\"li\"),n._uU(20),n.ALo(21,\"i18n\"),n.qZA(),n._uU(22,\"\\n            \"),n.qZA(),n._uU(23,\"\\n          \"),n.qZA(),n._uU(24,\"\\n          \"),n._UZ(25,\"img\",16),n._uU(26,\"\\n          \"),n.TgZ(27,\"p\"),n._uU(28),n.ALo(29,\"i18n\"),n.qZA(),n._uU(30,\"\\n          \"),n.TgZ(31,\"ol\"),n._uU(32,\"\\n            \"),n.TgZ(33,\"li\"),n._uU(34),n.ALo(35,\"i18n\"),n.qZA(),n._uU(36,\"\\n            \"),n.TgZ(37,\"li\"),n._uU(38),n.ALo(39,\"i18n\"),n.qZA(),n._uU(40,\"\\n            \"),n.TgZ(41,\"li\"),n._uU(42),n.ALo(43,\"i18n\"),n.qZA(),n._uU(44,\"\\n            \"),n.TgZ(45,\"li\"),n._uU(46),n.ALo(47,\"i18n\"),n.qZA(),n._uU(48,\"\\n          \"),n.qZA(),n._uU(49,\"\\n          \"),n._UZ(50,\"hr\"),n._uU(51,\"\\n          \"),n.TgZ(52,\"div\",17),n._uU(53,\"\\n            \"),n.YNc(54,Ne,10,7,\"div\",18),n._uU(55,\"\\n          \"),n.qZA(),n._uU(56,\"\\n          \"),n.TgZ(57,\"strong\",19),n._uU(58),n.ALo(59,\"i18n\"),n.qZA(),n._uU(60,\"\\n          \"),n.TgZ(61,\"div\",20),n._uU(62,\"\\n            \"),n.TgZ(63,\"input\",21),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.nfc=t)})),n.qZA(),n._uU(64,\"\\n            \"),n.TgZ(65,\"label\",22),n._uU(66),n.ALo(67,\"i18n\"),n.qZA(),n._uU(68,\"\\n          \"),n.qZA(),n._uU(69,\"\\n          \"),n.TgZ(70,\"small\",23),n._uU(71),n.ALo(72,\"i18n\"),n.qZA(),n._uU(73,\"\\n        \"),n.qZA(),n._uU(74,\"\\n        \"),n.TgZ(75,\"div\",24),n._uU(76,\"\\n          \"),n.TgZ(77,\"button\",25),n._uU(78,\"\\n            \"),n._UZ(79,\"i\",26),n.ALo(80,\"i18n\"),n._uU(81,\"\\n            \"),n.TgZ(82,\"span\"),n._uU(83),n.ALo(84,\"i18n\"),n.qZA(),n._uU(85,\"\\n          \"),n.qZA(),n._uU(86,\"\\n          \"),n.YNc(87,Le,10,8,\"button\",27),n._uU(88,\"\\n          \"),n.TgZ(89,\"button\",28),n._uU(90),n.ALo(91,\"i18n\"),n.qZA(),n._uU(92,\"\\n        \"),n.qZA(),n._uU(93,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",t.enabled),n.xp6(5),n.Oqu(n.lcZ(11,20,\"twoFactorYubikeyWarning\")),n.xp6(6),n.Oqu(n.lcZ(17,22,\"twoFactorYubikeySupportUsb\")),n.xp6(4),n.Oqu(n.lcZ(21,24,\"twoFactorYubikeySupportMobile\")),n.xp6(8),n.hij(\"\",n.lcZ(29,26,\"twoFactorYubikeyAdd\"),\":\"),n.xp6(6),n.Oqu(n.lcZ(35,28,\"twoFactorYubikeyPlugIn\")),n.xp6(4),n.Oqu(n.lcZ(39,30,\"twoFactorYubikeySelectKey\")),n.xp6(4),n.Oqu(n.lcZ(43,32,\"twoFactorYubikeyTouchButton\")),n.xp6(4),n.Oqu(n.lcZ(47,34,\"twoFactorYubikeySaveForm\")),n.xp6(8),n.Q6J(\"ngForOf\",t.keys),n.xp6(4),n.Oqu(n.lcZ(59,36,\"nfcSupport\")),n.xp6(5),n.Q6J(\"ngModel\",t.nfc),n.xp6(3),n.Oqu(n.lcZ(67,38,\"twoFactorYubikeySupportsNfc\")),n.xp6(5),n.Oqu(n.lcZ(72,40,\"twoFactorYubikeySupportsNfcDesc\")),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(80,42,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(84,44,\"save\")),n.xp6(4),n.Q6J(\"ngIf\",t.enabled),n.xp6(3),n.hij(\"\\n            \",n.lcZ(91,46,\"close\"),\"\\n          \")}}class Ee extends g.c{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o),this.type=l.L.Yubikey,this.nfc=!1,this.componentName=\"app-two-factor-yubikey\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return ke(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(Oe);return t.key1=null!=this.keys\u0026\u0026this.keys.length\u003e0?this.keys[0].key:null,t.key2=null!=this.keys\u0026\u0026this.keys.length\u003e1?this.keys[1].key:null,t.key3=null!=this.keys\u0026\u0026this.keys.length\u003e2?this.keys[2].key:null,t.key4=null!=this.keys\u0026\u0026this.keys.length\u003e3?this.keys[3].key:null,t.key5=null!=this.keys\u0026\u0026this.keys.length\u003e4?this.keys[4].key:null,t.nfc=this.nfc,e.enable.call(this,(()=\u003eke(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorYubiKey(t);const e=yield this.formPromise;yield this.processResponse(e),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"yubikeysUpdated\"))}))))}))}disable(){return super.disable(this.disablePromise)}remove(e){e.existingKey=null,e.key=null}processResponse(e){this.enabled=e.enabled,this.keys=[{key:e.key1,existingKey:this.padRight(e.key1)},{key:e.key2,existingKey:this.padRight(e.key2)},{key:e.key3,existingKey:this.padRight(e.key3)},{key:e.key4,existingKey:this.padRight(e.key4)},{key:e.key5,existingKey:this.padRight(e.key5)}],this.nfc=e.nfc||!e.enabled}padRight(e,t=\"•\",i=44){if(null==e||null==t||e.length\u003e=i)return e;const n=(i-e.length)/t.length;for(let s=0;s\u003cn;s++)e+=t;return e}}Ee.ɵfac=function(e){return new(e||Ee)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(w.$),n.Y36(y.i),n.Y36(U.x))},Ee.ɵcmp=n.Xpm({type:Ee,selectors:[[\"app-two-factor-yubikey\"]],features:[n.qOj],decls:30,vars:8,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faYubiKeyTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-lg\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faYubiKeyTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\",4,\"ngIf\"],[\"type\",\"warning\"],[1,\"mb-0\"],[\"alt\",\"YubiKey OTP security key logo\",1,\"float-right\",\"mfaType3\"],[1,\"row\"],[\"class\",\"form-group col-6\",4,\"ngFor\",\"ngForOf\"],[1,\"d-block\",\"mb-2\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"nfc\",\"name\",\"Nfc\",1,\"form-check-input\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"nfc\",1,\"form-check-label\"],[1,\"form-text\",\"text-muted\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"class\",\"btn btn-outline-secondary btn-submit\",3,\"appApiAction\",\"disabled\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[1,\"form-group\",\"col-6\"],[3,\"for\"],[\"type\",\"password\",\"class\",\"form-control\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",3,\"id\",\"name\",\"ngModel\",\"ngModelChange\",4,\"ngIf\"],[\"class\",\"d-flex\",4,\"ngIf\"],[\"type\",\"password\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",1,\"form-control\",3,\"id\",\"name\",\"ngModel\",\"ngModelChange\"],[1,\"d-flex\"],[1,\"mr-2\"],[\"type\",\"button\",1,\"btn\",\"btn-link\",\"text-danger\",\"ml-auto\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-minus-circle\",\"bwi-lg\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"btn-submit\",3,\"appApiAction\",\"disabled\",\"click\"],[\"disableBtn\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12,\"YubiKey\"),n.qZA(),n._uU(13,\"\\n        \"),n.qZA(),n._uU(14,\"\\n        \"),n.TgZ(15,\"button\",5),n.ALo(16,\"i18n\"),n._uU(17,\"\\n          \"),n.TgZ(18,\"span\",6),n._uU(19,\"×\"),n.qZA(),n._uU(20,\"\\n        \"),n.qZA(),n._uU(21,\"\\n      \"),n.qZA(),n._uU(22,\"\\n      \"),n.YNc(23,qe,2,2,\"app-two-factor-verify\",7),n._uU(24,\"\\n      \"),n.YNc(25,De,94,48,\"form\",8),n._uU(26,\"\\n    \"),n.qZA(),n._uU(27,\"\\n  \"),n.qZA(),n._uU(28,\"\\n\"),n.qZA(),n._uU(29,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,4,\"twoStepLogin\"),\"\\n          \"),n.xp6(6),n.s9C(\"appA11yTitle\",n.lcZ(16,6,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.sg,_.O5,A.Fj,A.Wl,A.JJ,A.JL,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});var Fe=i(34961),Re=i(83924),Je=i(75557),Ye=i(81974),ze=i(24083),Ke=i(55039),Qe=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const Be=[\"recoveryTemplate\"],Ge=[\"authenticatorTemplate\"],Ve=[\"yubikeyTemplate\"],je=[\"duoTemplate\"],He=[\"emailTemplate\"],$e=[\"webAuthnTemplate\"];function We(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"h1\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLogin\")))}function Xe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"h1\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLoginEnforcement\")))}function et(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"p\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLoginDesc\")))}function tt(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.TgZ(3,\"a\",13),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n      \"),n._UZ(7,\"br\"),n._uU(8),n.ALo(9,\"i18n\"),n._UZ(10,\"br\"),n._uU(11,\"\\n      \"),n._UZ(12,\"br\"),n._uU(13,\"\\n      \"),n.TgZ(14,\"p\"),n._uU(15),n.ALo(16,\"i18n\"),n.qZA(),n._uU(17,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n      \",n.lcZ(2,4,\"twoStepLoginEnterpriseDescStart\"),\"\\n      \"),n.xp6(3),n.hij(\"\",n.lcZ(5,6,\"twoStepLoginPolicy\"),\".\"),n.xp6(4),n.hij(\"\\n      \",n.lcZ(9,8,\"twoStepLoginOrganizationDuoDesc\"),\"\\n      \"),n.xp6(7),n.Oqu(n.lcZ(16,10,\"twoStepLoginOrganizationSsoDesc\")))}function it(e,t){1\u0026e\u0026\u0026(n._uU(0),n.ALo(1,\"i18n\"),n._UZ(2,\"br\"),n._uU(3),n.ALo(4,\"i18n\")),2\u0026e\u0026\u0026(n.hij(\"\\n      \",n.lcZ(1,2,\"twoStepLoginTeamsDesc\"),\"\\n      \"),n.xp6(3),n.hij(\"\\n      \",n.lcZ(4,4,\"twoStepLoginOrganizationDuoDesc\"),\"\\n    \"))}function nt(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3,\"\\n    \"),n.YNc(4,tt,18,12,\"ng-container\",11),n._uU(5,\"\\n    \"),n.YNc(6,it,5,6,\"ng-template\",null,12,n.W1O),n._uU(8,\"\\n  \"),n.qZA(),n._uU(9,\"\\n\"),n.BQk()),2\u0026e){const e=n.MAs(7),t=n.oxw();n.xp6(4),n.Q6J(\"ngIf\",t.isEnterpriseOrg)(\"ngIfElse\",e)}}function st(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"bit-callout\",14),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.TgZ(6,\"button\",15),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.recoveryCode())})),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,2,\"twoStepLoginRecoveryWarning\")),n.xp6(4),n.hij(\"\\n    \",n.lcZ(8,4,\"viewRecoveryCode\"),\"\\n  \"))}function ot(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n    \"),n._UZ(2,\"i\",16),n.ALo(3,\"i18n\"),n._uU(4,\"\\n    \"),n.TgZ(5,\"span\",17),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function rt(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"bit-callout\",14),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n  \",n.lcZ(2,1,\"twoStepLoginPolicyUserWarning\"),\"\\n\"))}function at(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",25),n.ALo(3,\"i18n\"),n._uU(4,\"\\n          \"),n.TgZ(5,\"span\",17),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"enabled\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"enabled\")))}function lt(e,t){1\u0026e\u0026\u0026n._UZ(0,\"app-premium-badge\")}function ct(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"li\",18),n._uU(1,\"\\n    \"),n.TgZ(2,\"div\",19),n._uU(3,\"\\n      \"),n._UZ(4,\"img\",20),n._uU(5,\"\\n    \"),n.qZA(),n._uU(6,\"\\n    \"),n.TgZ(7,\"div\",21),n._uU(8,\"\\n      \"),n.TgZ(9,\"h3\",22),n._uU(10),n.YNc(11,at,9,6,\"ng-container\",1),n._uU(12,\"\\n        \"),n.YNc(13,lt,1,0,\"app-premium-badge\",1),n._uU(14,\"\\n      \"),n.qZA(),n._uU(15),n.qZA(),n._uU(16,\"\\n    \"),n.TgZ(17,\"div\",23),n._uU(18,\"\\n      \"),n.TgZ(19,\"button\",24),n.NdJ(\"click\",(function(){const t=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.manage(t.type))})),n._uU(20),n.ALo(21,\"i18n\"),n.qZA(),n._uU(22,\"\\n    \"),n.qZA(),n._uU(23,\"\\n  \"),n.qZA()}if(2\u0026e){const e=t.$implicit,i=n.oxw();n.xp6(4),n.Tol(\"mfaType\"+e.type),n.Q6J(\"alt\",e.name+\" logo\"),n.xp6(6),n.hij(\"\\n        \",e.name,\"\\n        \"),n.xp6(1),n.Q6J(\"ngIf\",e.enabled),n.xp6(2),n.Q6J(\"ngIf\",e.premium),n.xp6(2),n.hij(\"\\n      \",e.description,\"\\n    \"),n.xp6(4),n.Q6J(\"disabled\",!i.canAccessPremium\u0026\u0026e.premium),n.xp6(1),n.hij(\"\\n        \",n.lcZ(21,9,\"manage\"),\"\\n      \")}}function ut(e,t){}function dt(e,t){}function pt(e,t){}function ht(e,t){}function gt(e,t){}function ft(e,t){}const mt=function(e){return{\"mt-5\":e}};class yt{constructor(e,t,i,n,o){this.apiService=e,this.modalService=t,this.messagingService=i,this.policyService=n,this.stateService=o,this.providers=[],this.showPolicyWarning=!1,this.loading=!0,this.tabbedHeader=!0,this.destroy$=new s.x}ngOnInit(){return Qe(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium();for(const e in c.V){if(!c.V.hasOwnProperty(e))continue;const t=c.V[e];this.filterProvider(t.type)||this.providers.push({type:t.type,name:t.name,description:t.description,enabled:!1,premium:t.premium,sort:t.sort})}this.providers.sort(((e,t)=\u003ee.sort-t.sort)),this.policyService.policyAppliesToActiveUser$(a.Mi.TwoFactorAuthentication).pipe((0,o.R)(this.destroy$)).subscribe((e=\u003e{this.twoFactorAuthPolicyAppliesToActiveUser=e})),yield this.load()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){return Qe(this,void 0,void 0,(function*(){this.loading=!0;(yield this.getTwoFactorProviders()).data.forEach((e=\u003e{this.providers.forEach((t=\u003e{e.type===t.type\u0026\u0026(t.enabled=e.enabled)}))})),this.evaluatePolicies(),this.loading=!1}))}manage(e){return Qe(this,void 0,void 0,(function*(){switch(e){case l.L.Authenticator:(yield this.openModal(this.authenticatorModalRef,J)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Authenticator)}));break;case l.L.Yubikey:(yield this.openModal(this.yubikeyModalRef,Ee)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Yubikey)}));break;case l.L.Duo:(yield this.openModal(this.duoModalRef,Y.C)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Duo)}));break;case l.L.Email:(yield this.openModal(this.emailModalRef,X)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Email)}));break;case l.L.WebAuthn:(yield this.openModal(this.webAuthnModalRef,Ce)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.WebAuthn)}));break}}))}recoveryCode(){this.openModal(this.recoveryModalRef,oe)}premiumRequired(){return Qe(this,void 0,void 0,(function*(){this.canAccessPremium||this.messagingService.send(\"premiumRequired\")}))}getTwoFactorProviders(){return this.apiService.getTwoFactorProviders()}filterProvider(e){return e===l.L.OrganizationDuo}openModal(e,t){return Qe(this,void 0,void 0,(function*(){const[i,n]=yield this.modalService.openViewRef(t,e);return this.modal=i,n}))}updateStatus(e,t){e||null==this.modal||this.modal.close(),this.providers.forEach((i=\u003e{i.type===t\u0026\u0026(i.enabled=e)})),this.evaluatePolicies()}evaluatePolicies(){null==this.organizationId\u0026\u00261===this.providers.filter((e=\u003ee.enabled)).length?this.showPolicyWarning=this.twoFactorAuthPolicyAppliesToActiveUser:this.showPolicyWarning=!1}get isEnterpriseOrg(){var e;return(null===(e=this.organization)||void 0===e?void 0:e.planProductType)===u.kv.Enterprise}}yt.ɵfac=function(e){return new(e||yt)(n.Y36(f.s),n.Y36(r.Z),n.Y36(Fe.o),n.Y36(Re.d),n.Y36(b.b))},yt.ɵcmp=n.Xpm({type:yt,selectors:[[\"app-two-factor-setup\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(n.Gf(Be,7,n.s_b),n.Gf(Ge,7,n.s_b),n.Gf(Ve,7,n.s_b),n.Gf(je,7,n.s_b),n.Gf(He,7,n.s_b),n.Gf($e,7,n.s_b)),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.recoveryModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.authenticatorModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.yubikeyModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.duoModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.emailModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.webAuthnModalRef=e.first)}},decls:44,vars:15,consts:[[3,\"ngClass\"],[4,\"ngIf\"],[\"type\",\"warning\",4,\"ngIf\"],[1,\"list-group\",\"list-group-2fa\"],[\"class\",\"list-group-item d-flex align-items-center\",4,\"ngFor\",\"ngForOf\"],[\"authenticatorTemplate\",\"\"],[\"recoveryTemplate\",\"\"],[\"duoTemplate\",\"\"],[\"emailTemplate\",\"\"],[\"yubikeyTemplate\",\"\"],[\"webAuthnTemplate\",\"\"],[4,\"ngIf\",\"ngIfElse\"],[\"teamsDescription\",\"\"],[\"routerLink\",\"../policies\"],[\"type\",\"warning\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"bwi-fw\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"list-group-item\",\"d-flex\",\"align-items-center\"],[1,\"logo-2fa\",\"d-flex\",\"justify-content-center\"],[3,\"alt\"],[1,\"mx-4\"],[1,\"mb-0\"],[1,\"ml-auto\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check\",\"text-success\",\"bwi-fw\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.YNc(2,We,3,3,\"h1\",1),n._uU(3,\"\\n  \"),n.YNc(4,Xe,3,3,\"h1\",1),n._uU(5,\"\\n\"),n.qZA(),n._uU(6,\"\\n\"),n.YNc(7,et,3,3,\"p\",1),n._uU(8,\"\\n\"),n.YNc(9,nt,10,2,\"ng-container\",1),n._uU(10,\"\\n\"),n.YNc(11,st,10,6,\"bit-callout\",2),n._uU(12,\"\\n\"),n.TgZ(13,\"h2\",0),n._uU(14),n.ALo(15,\"i18n\"),n.YNc(16,ot,9,6,\"small\",1),n._uU(17,\"\\n\"),n.qZA(),n._uU(18,\"\\n\"),n.YNc(19,rt,3,3,\"bit-callout\",2),n._uU(20,\"\\n\"),n.TgZ(21,\"ul\",3),n._uU(22,\"\\n  \"),n.YNc(23,ct,24,11,\"li\",4),n._uU(24,\"\\n\"),n.qZA(),n._uU(25,\"\\n\\n\"),n.YNc(26,ut,0,0,\"ng-template\",null,5,n.W1O),n._uU(28,\"\\n\"),n.YNc(29,dt,0,0,\"ng-template\",null,6,n.W1O),n._uU(31,\"\\n\"),n.YNc(32,pt,0,0,\"ng-template\",null,7,n.W1O),n._uU(34,\"\\n\"),n.YNc(35,ht,0,0,\"ng-template\",null,8,n.W1O),n._uU(37,\"\\n\"),n.YNc(38,gt,0,0,\"ng-template\",null,9,n.W1O),n._uU(40,\"\\n\"),n.YNc(41,ft,0,0,\"ng-template\",null,10,n.W1O),n._uU(43,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngClass\",t.tabbedHeader?\"tabbed-header\":\"page-header\"),n.xp6(2),n.Q6J(\"ngIf\",!t.organizationId||!t.isEnterpriseOrg),n.xp6(2),n.Q6J(\"ngIf\",t.organizationId\u0026\u0026t.isEnterpriseOrg),n.xp6(3),n.Q6J(\"ngIf\",!t.organizationId),n.xp6(2),n.Q6J(\"ngIf\",t.organizationId),n.xp6(2),n.Q6J(\"ngIf\",!t.organizationId),n.xp6(2),n.Q6J(\"ngClass\",n.VKq(13,mt,!t.organizationId)),n.xp6(1),n.hij(\"\\n  \",n.lcZ(15,11,\"providers\"),\"\\n  \"),n.xp6(2),n.Q6J(\"ngIf\",t.loading),n.xp6(3),n.Q6J(\"ngIf\",t.showPolicyWarning),n.xp6(4),n.Q6J(\"ngForOf\",t.providers))},dependencies:[_.mk,_.sg,_.O5,Je.rH,Ye.r,ze.O,Ke.R,O.C],encapsulation:2})},19227:(e,t,i)=\u003e{\"use strict\";i.d(t,{c:()=\u003eg});var n=i(24852),s=i(48103),o=i(70138),r=i(55602),a=i(66459),l=i(42304),c=i(98645),u=i(24610),d=i(94516),p=i(82933),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i){this.apiService=e,this.logService=t,this.userVerificationService=i,this.onAuthed=new n.vpe}submit(){return h(this,void 0,void 0,(function*(){let e;try{this.formPromise=this.userVerificationService.buildRequest(this.secret).then((t=\u003e(e=this.secret.type===o.R.MasterPassword?t.masterPasswordHash:t.otp,this.apiCall(t))));const t=yield this.formPromise;this.onAuthed.emit({response:t,secret:e,verificationType:this.secret.type})}catch(t){this.logService.error(t)}}))}apiCall(e){switch(this.type){case-1:return this.apiService.getTwoFactorRecover(e);case s.L.Duo:case s.L.OrganizationDuo:return null!=this.organizationId?this.apiService.getTwoFactorOrganizationDuo(this.organizationId,e):this.apiService.getTwoFactorDuo(e);case s.L.Email:return this.apiService.getTwoFactorEmail(e);case s.L.WebAuthn:return this.apiService.getTwoFactorWebAuthn(e);case s.L.Authenticator:return this.apiService.getTwoFactorAuthenticator(e);case s.L.Yubikey:return this.apiService.getTwoFactorYubiKey(e)}}}g.ɵfac=function(e){return new(e||g)(n.Y36(r.s),n.Y36(a.$),n.Y36(l.i))},g.ɵcmp=n.Xpm({type:g,selectors:[[\"app-two-factor-verify\"]],inputs:{type:\"type\",organizationId:\"organizationId\"},outputs:{onAuthed:\"onAuthed\"},decls:27,vars:12,consts:[[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"]],template:function(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",0,1),n.NdJ(\"ngSubmit\",(function(){return t.submit()})),n._uU(2,\"\\n  \"),n.TgZ(3,\"div\",2),n._uU(4,\"\\n    \"),n.TgZ(5,\"app-user-verification\",3),n.NdJ(\"ngModelChange\",(function(e){return t.secret=e})),n._uU(6,\"\\n    \"),n.qZA(),n._uU(7,\"\\n  \"),n.qZA(),n._uU(8,\"\\n  \"),n.TgZ(9,\"div\",4),n._uU(10,\"\\n    \"),n.TgZ(11,\"button\",5),n._uU(12,\"\\n      \"),n._UZ(13,\"i\",6),n.ALo(14,\"i18n\"),n._uU(15,\"\\n      \"),n.TgZ(16,\"span\"),n._uU(17),n.ALo(18,\"i18n\"),n.qZA(),n._uU(19,\"\\n    \"),n.qZA(),n._uU(20,\"\\n    \"),n.TgZ(21,\"button\",7),n._uU(22),n.ALo(23,\"i18n\"),n.qZA(),n._uU(24,\"\\n  \"),n.qZA(),n._uU(25,\"\\n\"),n.qZA(),n._uU(26,\"\\n\")),2\u0026e){const e=n.MAs(1);n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngModel\",t.secret),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(14,6,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(18,8,\"continue\")),n.xp6(5),n.hij(\"\\n      \",n.lcZ(23,10,\"close\"),\"\\n    \")}},dependencies:[c.Fj,c.JJ,c.JL,c.On,c.F,u.b,d.W,p.C],encapsulation:2})},4519:(e,t,i)=\u003e{\"use strict\";i.d(t,{Zn:()=\u003er,CV:()=\u003eZ});var n=i(98645),s=i(98694),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({imports:[s.m,n.u5,n.UX]});var a=i(94516),l=i(65017),c=i(77494),u=i(56965),d=i(42304),p=i(99721),h=i(78627),g=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class f{constructor(e,t,i,n,s,o){this.modalRef=e,this.config=t,this.userVerificationService=i,this.formBuilder=n,this.platformUtilsService=s,this.i18nService=o,this.confirmDescription=this.config.data.confirmDescription,this.confirmButtonText=this.config.data.confirmButtonText,this.modalTitle=this.config.data.modalTitle,this.formGroup=this.formBuilder.group({secret:this.formBuilder.control(null)}),this.invalidSecret=!1,this.submit=()=\u003eg(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){try{yield this.userVerificationService.verifyUser(this.secret.value),this.invalidSecret=!1}catch(e){return this.invalidSecret=!0,void this.platformUtilsService.showToast(\"error\",this.i18nService.t(\"error\"),e.message)}this.close(!0)}}))}get secret(){return this.formGroup.controls.secret}close(e){this.modalRef.close(e)}}f.ɵfac=function(e){return new(e||f)(o.Y36(u.b),o.Y36(c.u),o.Y36(d.i),o.Y36(n.qu),o.Y36(p.P),o.Y36(h.D))},f.ɵdir=o.lG2({type:f});var m=i(46246),y=i(36338),v=i(81974),w=i(29465),b=i(18362),U=i(28315),_=i(82933);class A extends f{constructor(e,t,i,n,s,o){super(null,{data:e},i,n,s,o),this.dialogRef=t}close(e){this.dialogRef.close(e)}}A.ɵfac=function(e){return new(e||A)(o.Y36(l.Kt),o.Y36(l.zj),o.Y36(d.i),o.Y36(n.qu),o.Y36(p.P),o.Y36(h.D))},A.ɵcmp=o.Xpm({type:A,selectors:[[\"ng-component\"]],features:[o.qOj],decls:30,vars:15,consts:[[3,\"formGroup\",\"bitSubmit\"],[\"bitDialogTitle\",\"\"],[\"bitDialogContent\",\"\"],[\"bitTypography\",\"body1\"],[\"formControlName\",\"secret\",3,\"invalidSecret\",\"invalidSecretChange\"],[\"bitDialogFooter\",\"\"],[\"type\",\"submit\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"primary\"],[\"type\",\"button\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"secondary\",\"bitDialogClose\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(o.TgZ(0,\"form\",0),o._uU(1,\"\\n  \"),o.TgZ(2,\"bit-dialog\"),o._uU(3,\"\\n    \"),o.TgZ(4,\"span\",1),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o.ynx(8,2),o._uU(9,\"\\n      \"),o.TgZ(10,\"p\",3),o._uU(11),o.ALo(12,\"i18n\"),o.qZA(),o._uU(13,\"\\n      \"),o.TgZ(14,\"app-user-verification\",4),o.NdJ(\"invalidSecretChange\",(function(e){return t.invalidSecret=e})),o.qZA(),o._uU(15,\"\\n    \"),o.BQk(),o._uU(16,\"\\n    \"),o.ynx(17,5),o._uU(18,\"\\n      \"),o.TgZ(19,\"button\",6),o._uU(20),o.ALo(21,\"i18n\"),o.qZA(),o._uU(22,\"\\n      \"),o.TgZ(23,\"button\",7),o._uU(24),o.ALo(25,\"i18n\"),o.qZA(),o._uU(26,\"\\n    \"),o.BQk(),o._uU(27,\"\\n  \"),o.qZA(),o._uU(28,\"\\n\"),o.qZA(),o._uU(29,\"\\n\")),2\u0026e\u0026\u0026(o.Q6J(\"formGroup\",t.formGroup)(\"bitSubmit\",t.submit),o.xp6(5),o.Oqu(o.lcZ(6,7,t.modalTitle)),o.xp6(6),o.Oqu(o.lcZ(12,9,t.confirmDescription)),o.xp6(3),o.Q6J(\"invalidSecret\",t.invalidSecret),o.xp6(6),o.hij(\"\\n        \",o.lcZ(21,11,t.confirmButtonText),\"\\n      \"),o.xp6(4),o.hij(\"\\n        \",o.lcZ(25,13,\"cancel\"),\"\\n      \"))},dependencies:[n._Y,n.JJ,n.JL,n.sg,n.u,m.b,y.u,v.r,w.a,b.f,U.t,a.W,_.C],encapsulation:2});const Z=(e,t)=\u003ee.open(A,t)},94516:(e,t,i)=\u003e{\"use strict\";i.d(t,{W:()=\u003eq});var n=i(81815),s=i(98645),o=i(24852),r=i(54019),a=i(68362),l=i(70138),c=i(27646),u=i(76528),d=i(42304),p=i(78627),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{get invalidSecret(){return this._invalidSecret}set invalidSecret(e){this._invalidSecret=e,this.invalidSecretChange.emit(e),e\u0026\u0026this.secret.markAsTouched(),this.secret.updateValueAndValidity({emitEvent:!1})}constructor(e,t,i){this.cryptoService=e,this.userVerificationService=t,this.i18nService=i,this._invalidSecret=!1,this.invalidSecretChange=new o.vpe,this.hasMasterPassword=!0,this.disableRequestOTP=!1,this.sentCode=!1,this.secret=new s.NI(\"\",[s.kI.required,()=\u003e{if(this.invalidSecret)return{invalidSecret:{message:this.hasMasterPassword?this.i18nService.t(\"incorrectPassword\"):this.i18nService.t(\"incorrectCode\")}}}]),this.destroy$=new r.x,this.requestOTP=()=\u003eh(this,void 0,void 0,(function*(){if(!this.hasMasterPassword){this.disableRequestOTP=!0;try{yield this.userVerificationService.requestOTP(),this.sentCode=!0}finally{this.disableRequestOTP=!1}}}))}ngOnInit(){return h(this,void 0,void 0,(function*(){this.hasMasterPassword=yield this.userVerificationService.hasMasterPasswordAndMasterKeyHash(),this.processChanges(this.secret.value),this.secret.valueChanges.pipe((0,a.R)(this.destroy$)).subscribe((e=\u003ethis.processChanges(e)))}))}writeValue(e){this.secret.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){this.disableRequestOTP=e,e?this.secret.disable():this.secret.enable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}processChanges(e){this.invalidSecret=!1,null!=this.onChange\u0026\u0026this.onChange({type:this.hasMasterPassword?l.R.MasterPassword:l.R.OTP,secret:c.c.isNullOrWhitespace(e)?null:e})}}g.ɵfac=function(e){return new(e||g)(o.Y36(u.$),o.Y36(d.i),o.Y36(p.D))},g.ɵdir=o.lG2({type:g,selectors:[[\"app-user-verification\"]],inputs:{invalidSecret:\"invalidSecret\"},outputs:{invalidSecretChange:\"invalidSecretChange\"}});var f=i(19419),m=i(62357),y=i(85356),v=i(98205),w=i(81974),b=i(24637),U=i(11512),_=i(54666),A=i(1e4),Z=i(36179),x=i(44358),S=i(21656),T=i(82933);function C(e,t){if(1\u0026e\u0026\u0026(o.ynx(0),o._uU(1,\"\\n  \"),o.TgZ(2,\"bit-form-field\",1),o._uU(3,\"\\n    \"),o.TgZ(4,\"bit-label\"),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o._UZ(8,\"input\",2),o._uU(9,\"\\n    \"),o._UZ(10,\"button\",3),o._uU(11,\"\\n    \"),o.TgZ(12,\"bit-hint\"),o._uU(13),o.ALo(14,\"i18n\"),o.qZA(),o._uU(15,\"\\n  \"),o.qZA(),o._uU(16,\"\\n\"),o.BQk()),2\u0026e){const e=o.oxw();o.xp6(5),o.Oqu(o.lcZ(6,3,\"masterPass\")),o.xp6(3),o.Q6J(\"formControl\",e.secret),o.xp6(5),o.Oqu(o.lcZ(14,5,\"confirmIdentity\"))}}function O(e,t){1\u0026e\u0026\u0026(o.TgZ(0,\"span\",9),o._uU(1,\"\\n      \"),o._UZ(2,\"i\",10),o._uU(3),o.ALo(4,\"i18n\"),o.qZA()),2\u0026e\u0026\u0026(o.Q6J(\"@sent\",void 0),o.xp6(3),o.hij(\"\\n      \",o.lcZ(4,2,\"codeSent\"),\"\\n    \"))}function k(e,t){if(1\u0026e\u0026\u0026(o.ynx(0),o._uU(1,\"\\n  \"),o.TgZ(2,\"div\",4),o._uU(3,\"\\n    \"),o.TgZ(4,\"label\",5),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o.TgZ(8,\"button\",6),o._uU(9),o.ALo(10,\"i18n\"),o.qZA(),o._uU(11,\"\\n    \"),o.YNc(12,O,5,4,\"span\",7),o._uU(13,\"\\n  \"),o.qZA(),o._uU(14,\"\\n\\n  \"),o.TgZ(15,\"bit-form-field\",1),o._uU(16,\"\\n    \"),o.TgZ(17,\"bit-label\"),o._uU(18),o.ALo(19,\"i18n\"),o.qZA(),o._uU(20,\"\\n    \"),o._UZ(21,\"input\",8),o._uU(22,\"\\n    \"),o.TgZ(23,\"bit-hint\"),o._uU(24),o.ALo(25,\"i18n\"),o.qZA(),o._uU(26,\"\\n  \"),o.qZA(),o._uU(27,\"\\n\"),o.BQk()),2\u0026e){const e=o.oxw();o.xp6(5),o.Oqu(o.lcZ(6,7,\"sendVerificationCode\")),o.xp6(3),o.Q6J(\"bitAction\",e.requestOTP),o.xp6(1),o.hij(\"\\n      \",o.lcZ(10,9,\"sendCode\"),\"\\n    \"),o.xp6(3),o.Q6J(\"ngIf\",e.sentCode),o.xp6(6),o.Oqu(o.lcZ(19,11,\"verificationCode\")),o.xp6(3),o.Q6J(\"formControl\",e.secret),o.xp6(3),o.Oqu(o.lcZ(25,13,\"confirmIdentity\"))}}class q extends g{}q.ɵfac=function(){let e;return function(t){return(e||(e=o.n5z(q)))(t||q)}}(),q.ɵcmp=o.Xpm({type:q,selectors:[[\"app-user-verification\"]],features:[o._Bn([{provide:s.JU,multi:!0,useExisting:q}]),o.qOj],decls:4,vars:2,consts:[[4,\"ngIf\"],[\"disableMargin\",\"\"],[\"bitInput\",\"\",\"id\",\"masterPassword\",\"type\",\"password\",\"name\",\"MasterPasswordHash\",\"appAutofocus\",\"\",\"appInputVerbatim\",\"\",3,\"formControl\"],[\"type\",\"button\",\"bitIconButton\",\"\",\"bitSuffix\",\"\",\"bitPasswordInputToggle\",\"\"],[1,\"tw-mb-6\"],[1,\"tw-block\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",\"appAutofocus\",\"\",3,\"bitAction\"],[\"class\",\"tw-ml-2 tw-text-success\",\"role\",\"alert\",4,\"ngIf\"],[\"bitInput\",\"\",\"type\",\"text\",\"id\",\"verificationCode\",\"name\",\"verificationCode\",\"appInputVerbatim\",\"\",3,\"formControl\"],[\"role\",\"alert\",1,\"tw-ml-2\",\"tw-text-success\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check-circle\"]],template:function(e,t){1\u0026e\u0026\u0026(o.YNc(0,C,17,7,\"ng-container\",0),o._uU(1,\"\\n\"),o.YNc(2,k,28,15,\"ng-container\",0),o._uU(3,\"\\n\")),2\u0026e\u0026\u0026(o.Q6J(\"ngIf\",t.hasMasterPassword),o.xp6(2),o.Q6J(\"ngIf\",!t.hasMasterPassword))},dependencies:[f.O5,s.Fj,s.JJ,s.oH,m.U,y.b,v.Q,w.r,b.d,U.G,_.w,A.e,Z.u,x.M,S.Q,T.C],encapsulation:2,data:{animation:[(0,n.X$)(\"sent\",[(0,n.eR)(\":enter\",[(0,n.oB)({opacity:0}),(0,n.jt)(\"100ms\",(0,n.oB)({opacity:1}))])])]}})},40868:(e,t,i)=\u003e{\"use strict\";i.d(t,{z:()=\u003eYe});var n=i(24852),s=i(98645),o=i(54019),r=i(68362),a=i(58691),l=i(20099);class c{}var u=i(44882);class d{}class p{constructor(e,t){this.clientOwnerEmail=e,this.organizationCreateRequest=t}}var h=i(69485),g=i(95608),f=i(87264),m=i(93273),y=i(68605),v=i(42759),w=i(34279),b=i(55602),U=i(78627),_=i(99721),A=i(76528),Z=i(75557),x=i(4871),S=i(83924),T=i(66459),C=i(34961),O=i(97360),k=i(19419),q=i(24610),P=i(53707),I=i(81974),M=i(7644),N=i(82933),L=i(99022),D=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function E(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n  \"),n._UZ(2,\"i\",2),n.ALo(3,\"i18n\"),n._uU(4,\"\\n  \"),n.TgZ(5,\"span\",3),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function F(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.TgZ(6,\"form\",4,5),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(8,\"\\n    \"),n.TgZ(9,\"div\",6),n._uU(10,\"\\n      \"),n.TgZ(11,\"label\",7),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n      \"),n._UZ(15,\"input\",8),n._uU(16,\"\\n      \"),n.TgZ(17,\"small\",9),n._uU(18),n.ALo(19,\"i18n\"),n.qZA(),n._uU(20,\"\\n    \"),n.qZA(),n._uU(21,\"\\n    \"),n.TgZ(22,\"button\",10),n._uU(23,\"\\n      \"),n._UZ(24,\"i\",11),n.ALo(25,\"i18n\"),n._uU(26,\"\\n      \"),n.TgZ(27,\"span\"),n._uU(28),n.ALo(29,\"i18n\"),n.qZA(),n._uU(30,\"\\n    \"),n.qZA(),n._uU(31,\"\\n  \"),n.qZA(),n._uU(32,\"\\n\"),n.BQk()}if(2\u0026e){const e=n.MAs(7),t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,7,\"uploadLicenseFileOrg\")),n.xp6(3),n.Q6J(\"appApiAction\",t.formPromise),n.xp6(6),n.Oqu(n.lcZ(13,9,\"licenseFile\")),n.xp6(6),n.Oqu(n.xi3(19,11,\"licenseFileDesc\",\"bitwarden_organization_license.json\")),n.xp6(4),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(25,14,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(29,16,\"submit\"))}}function R(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"onPremHostingOptional\"),\"\"))}function J(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"includeSsoAuthentication\"),\"\"))}function Y(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"includeEnterprisePolicies\"),\"\"))}function z(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(\"•\\n          \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n        \")}}function K(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n        \"),n.TgZ(2,\"small\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n        \"),n.YNc(6,R,3,3,\"small\",0),n._uU(7,\"\\n        \"),n.YNc(8,J,3,3,\"small\",0),n._uU(9,\"\\n        \"),n.YNc(10,Y,3,3,\"small\",0),n._uU(11,\"\\n        \"),n.YNc(12,z,3,4,\"small\",0),n._uU(13,\"\\n      \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(3),n.hij(\"• \",n.lcZ(4,5,\"includeAllTeamsFeatures\"),\"\"),n.xp6(3),n.Q6J(\"ngIf\",e.hasSelfHost),n.xp6(2),n.Q6J(\"ngIf\",e.hasSso),n.xp6(2),n.Q6J(\"ngIf\",e.hasPolicies),n.xp6(2),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function Q(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"\\n            • \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n          \")}}function B(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n          \"),n.TgZ(2,\"small\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.TgZ(6,\"small\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.TgZ(10,\"small\"),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n          \"),n.YNc(14,Q,3,4,\"small\",0),n._uU(15,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(2);n.xp6(3),n.hij(\"• \",n.lcZ(4,4,\"includeAllTeamsStarterFeatures\"),\"\"),n.xp6(4),n.hij(\"• \",n.lcZ(8,6,\"chooseMonthlyOrAnnualBilling\"),\"\"),n.xp6(4),n.hij(\"• \",n.xi3(12,8,\"abilityToAddMoreThanNMembers\",10),\"\"),n.xp6(3),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function G(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"• \",n.xi3(2,1,\"limitedUsers\",e.PasswordManager.maxSeats),\"\")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"addShareLimitedUsers\",e.PasswordManager.maxSeats),\"\")}}function j(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"addShareUnlimitedUsers\"),\"\"))}function H(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"limitedCollections\",e.PasswordManager.maxCollections),\"\")}}function $(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"addShareLimitedUsers\",e.PasswordManager.maxAdditionalSeats),\"\")}}function W(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"createUnlimitedCollections\"),\"\"))}function X(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"gbEncryptedFileStorage\",e.PasswordManager.baseStorageGb+\"GB\"),\"\")}}function ee(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"controlAccessWithGroups\"),\"\"))}function te(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"trackAuditLogs\"),\"\"))}function ie(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"syncUsersFromDirectory\"),\"\"))}function ne(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"onPremHostingOptional\"),\"\"))}function se(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"usersGetPremium\"),\"\"))}function oe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"priorityCustomerSupport\"),\"\"))}function re(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n          \")}}function ae(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n          \"),n.YNc(1,G,3,4,\"small\",0),n._uU(2,\"\\n          \"),n.YNc(3,V,3,4,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,j,3,3,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,H,3,4,\"small\",0),n._uU(8,\"\\n          \"),n.YNc(9,$,3,4,\"small\",0),n._uU(10,\"\\n          \"),n.YNc(11,W,3,3,\"small\",0),n._uU(12,\"\\n          \"),n.YNc(13,X,3,4,\"small\",0),n._uU(14,\"\\n          \"),n.YNc(15,ee,3,3,\"small\",0),n._uU(16,\"\\n          \"),n.YNc(17,te,3,3,\"small\",0),n._uU(18,\"\\n          \"),n.YNc(19,ie,3,3,\"small\",0),n._uU(20,\"\\n          \"),n.YNc(21,ne,3,3,\"small\",0),n._uU(22,\"\\n          \"),n.YNc(23,se,3,3,\"small\",0),n._uU(24,\"\\n          \"),n.YNc(25,oe,3,3,\"small\",0),n._uU(26,\"\\n          \"),n.YNc(27,re,3,4,\"small\",0),n._uU(28,\"\\n        \")),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(2);n.xp6(1),n.Q6J(\"ngIf\",e.product==t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",e.product!=t.productTypes.Free\u0026\u0026e.product!=t.productTypes.TeamsStarter\u0026\u0026e.PasswordManager.maxSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.maxSeats),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.maxCollections),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.maxAdditionalSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.maxCollections),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseStorageGb),n.xp6(2),n.Q6J(\"ngIf\",e.hasGroups),n.xp6(2),n.Q6J(\"ngIf\",e.hasApi),n.xp6(2),n.Q6J(\"ngIf\",e.hasDirectory),n.xp6(2),n.Q6J(\"ngIf\",e.hasSelfHost),n.xp6(2),n.Q6J(\"ngIf\",e.usersGetPremium),n.xp6(2),n.Q6J(\"ngIf\",e.product!=t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function le(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n        \"),n.YNc(1,B,16,11,\"ng-container\",26),n._uU(2,\"\\n        \"),n.YNc(3,ae,29,14,\"ng-template\",null,28,n.W1O),n._uU(5,\"\\n      \")),2\u0026e){const e=n.MAs(4),t=n.oxw().$implicit,i=n.oxw(2);n.xp6(1),n.Q6J(\"ngIf\",t.product===i.productTypes.Teams)(\"ngIfElse\",e)}}function ce(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.lnq(\"\\n            \",n.lcZ(2,3,\"additionalUsers\").toLowerCase(),\"\\n            \",n.xi3(3,5,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\"),\"\\n            /\",n.lcZ(4,8,\"month\"),\"\\n          \")}}function ue(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"currency\"),n.ALo(3,\"i18n\"),n.ALo(4,\"i18n\"),n.YNc(5,ce,5,10,\"ng-container\",0),n._uU(6,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.lnq(\"\\n          \",n.xi3(2,4,e.isAnnual?e.PasswordManager.basePrice/12:e.PasswordManager.basePrice,\"$\"),\"\\n          /\",n.lcZ(3,7,\"month\"),\",\\n          \",n.xi3(4,9,\"includesXUsers\",e.PasswordManager.baseSeats),\"\\n          \"),n.xp6(4),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption)}}function de(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1,\"\\n        \"),n.YNc(2,ue,7,12,\"ng-container\",0),n._uU(3,\"\\n      \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice\u0026\u0026!t.acceptingSponsorship)}}function pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.AsE(\"\\n        \",n.xi3(2,2,\"costPerUser\",n.xi3(3,5,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\")),\"\\n        /\",n.lcZ(4,8,\"month\"),\"\\n      \")}}function he(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"freeForever\")))}function ge(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\",22),n._uU(1,\"\\n    \"),n.TgZ(2,\"input\",23),n.NdJ(\"change\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedProduct())})),n.qZA(),n._uU(3,\"\\n    \"),n.TgZ(4,\"label\",24),n._uU(5),n.ALo(6,\"i18n\"),n.TgZ(7,\"small\",25),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10,\"\\n      \"),n.YNc(11,K,14,7,\"ng-container\",26),n._uU(12,\"\\n      \"),n.YNc(13,le,6,2,\"ng-template\",null,27,n.W1O),n._uU(15,\"\\n      \"),n.YNc(16,de,4,1,\"span\",0),n._uU(17,\"\\n      \"),n.YNc(18,pe,5,10,\"span\",0),n._uU(19,\"\\n      \"),n.YNc(20,he,3,3,\"span\",0),n._uU(21,\"\\n    \"),n.qZA(),n._uU(22,\"\\n  \"),n.qZA()}if(2\u0026e){const e=t.$implicit,i=n.MAs(14),s=n.oxw(2);n.xp6(2),n.MGl(\"id\",\"product\",e.product,\"\"),n.Q6J(\"value\",e.product),n.xp6(2),n.MGl(\"for\",\"product\",e.product,\"\"),n.xp6(1),n.hij(\"\\n      \",n.lcZ(6,10,e.nameLocalizationKey),\"\\n      \"),n.xp6(3),n.Oqu(n.xi3(9,12,e.descriptionLocalizationKey,\"1\")),n.xp6(3),n.Q6J(\"ngIf\",e.product===s.productTypes.Enterprise)(\"ngIfElse\",i),n.xp6(5),n.Q6J(\"ngIf\",e.product!=s.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.basePrice\u0026\u0026e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.product==s.productTypes.Free)}}function fe(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n      \"),n.TgZ(2,\"h2\",14),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",30),n._uU(7,\"\\n        \"),n.TgZ(8,\"div\",37),n._uU(9,\"\\n          \"),n.TgZ(10,\"label\",38),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n          \"),n._UZ(14,\"input\",39),n.ALo(15,\"i18n\"),n._uU(16,\"\\n          \"),n.TgZ(17,\"small\",34),n._uU(18),n.ALo(19,\"i18n\"),n.qZA(),n._uU(20,\"\\n        \"),n.qZA(),n._uU(21,\"\\n      \"),n.qZA(),n._uU(22,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,4,\"users\")),n.xp6(8),n.Oqu(n.lcZ(12,6,\"userSeats\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(15,8,\"userSeatsDesc\")),n.xp6(4),n.Oqu(n.lcZ(19,10,\"userSeatsHowManyDesc\")))}function me(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",30),n._uU(1,\"\\n      \"),n.TgZ(2,\"div\",31),n._uU(3,\"\\n        \"),n.TgZ(4,\"label\",38),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n        \"),n._UZ(8,\"input\",40),n.ALo(9,\"i18n\"),n._uU(10,\"\\n        \"),n.TgZ(11,\"small\",34),n._uU(12),n.ALo(13,\"i18n\"),n.ALo(14,\"currency\"),n.qZA(),n._uU(15,\"\\n      \"),n.qZA(),n._uU(16,\"\\n    \"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(5),n.Oqu(n.lcZ(6,3,\"additionalUserSeats\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(9,5,\"userSeatsDesc\")),n.xp6(4),n.Oqu(n.Dn7(13,7,\"userSeatsAdditionalDesc\",e.selectedPlan.PasswordManager.baseSeats,n.xi3(14,11,e.seatPriceMonthly(e.selectedPlan),\"$\")))}}function ye(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",31),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",41),n._uU(3,\"\\n          \"),n._UZ(4,\"input\",42),n._uU(5,\"\\n          \"),n.TgZ(6,\"label\",43),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n        \"),n.qZA(),n._uU(10,\"\\n        \"),n.TgZ(11,\"small\",34),n._uU(12),n.ALo(13,\"i18n\"),n.ALo(14,\"currency\"),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n      \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(7),n.Oqu(n.lcZ(8,2,\"premiumAccess\")),n.xp6(5),n.Oqu(n.Dn7(13,4,\"premiumAccessDesc\",n.xi3(14,8,3.33,\"$\"),n.lcZ(15,11,\"month\"))))}function ve(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n.TgZ(2,\"span\",46),n._uU(3),n.ALo(4,\"currency\"),n.qZA(),n._uU(5),n.ALo(6,\"i18n\"),n.BQk()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(3),n.Oqu(n.xi3(4,2,e.PasswordManager.basePrice,\"$\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(6,5,\"freeWithSponsorship\"),\"\\n            \")}}function we(e,t){if(1\u0026e\u0026\u0026(n._uU(0),n.ALo(1,\"currency\"),n.ALo(2,\"i18n\")),2\u0026e){const e=n.oxw(3).$implicit;n.AsE(\"\\n              \",n.xi3(1,2,e.PasswordManager.basePrice,\"$\"),\"\\n              /\",n.lcZ(2,5,\"year\"),\"\\n            \")}}function be(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.YNc(5,ve,7,7,\"ng-container\",26),n._uU(6,\"\\n            \"),n.YNc(7,we,3,7,\"ng-template\",null,45,n.W1O),n._uU(9,\"\\n          \"),n.qZA()),2\u0026e){const e=n.MAs(8),t=n.oxw(2).$implicit,i=n.oxw(3);n.xp6(1),n.lnq(\"\\n            \",n.lcZ(2,5,\"basePrice\"),\":\\n            \",n.xi3(3,7,t.isAnnual?t.PasswordManager.basePrice/12:t.PasswordManager.basePrice,\"$\"),\"\\n            × 12\\n            \",n.lcZ(4,10,\"monthAbbr\"),\"\\n            =\\n            \"),n.xp6(4),n.Q6J(\"ngIf\",i.acceptingSponsorship)(\"ngIfElse\",e)}}function Ue(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"additionalUsers\"),\":\"))}function _e(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"users\"),\":\"))}function Ae(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n            \"),n.YNc(2,Ue,3,3,\"span\",0),n._uU(3,\"\\n            \"),n.YNc(4,_e,3,3,\"span\",0),n._uU(5),n.ALo(6,\"currency\"),n.ALo(7,\"i18n\"),n.ALo(8,\"currency\"),n.ALo(9,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.baseSeats),n.xp6(1),n.xDo(\"\\n            \",t.formGroup.controls.additionalSeats.value||0,\" ×\\n            \",n.xi3(6,7,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\"),\"\\n            × 12 \",n.lcZ(7,10,\"monthAbbr\"),\" =\\n            \",n.xi3(8,12,t.passwordManagerSeatTotal(e,t.formGroup.value.additionalSeats),\"$\"),\"\\n            /\",n.lcZ(9,15,\"year\"),\"\\n          \")}}function Ze(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(1),n.gL8(\"\\n            \",n.lcZ(2,6,\"additionalStorageGb\"),\":\\n            \",t.formGroup.controls.additionalStorage.value||0,\" ×\\n            \",n.xi3(3,8,e.isAnnual?e.PasswordManager.additionalStoragePricePerGb/12:e.PasswordManager.additionalStoragePricePerGb,\"$\"),\"\\n            × 12 \",n.lcZ(4,11,\"monthAbbr\"),\" =\\n            \",n.xi3(5,13,t.additionalStorageTotal(e),\"$\"),\" /\",n.lcZ(6,16,\"year\"),\"\\n          \")}}function xe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.YNc(3,be,10,12,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,Ae,10,17,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,Ze,7,18,\"small\",0),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n          \",n.lcZ(2,4,\"annually\"),\"\\n          \"),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalStorageOption)}}function Se(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.xDo(\"\\n            \",n.lcZ(2,5,\"basePrice\"),\":\\n            \",n.xi3(3,7,e.PasswordManager.basePrice,\"$\"),\"\\n            \",n.lcZ(4,10,\"monthAbbr\"),\"\\n            =\\n            \",n.xi3(5,12,e.PasswordManager.basePrice,\"$\"),\"\\n            /\",n.lcZ(6,15,\"month\"),\"\\n          \")}}function Te(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"additionalUsers\"),\":\"))}function Ce(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"users\"),\":\"))}function Oe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n            \"),n.YNc(2,Te,3,3,\"span\",0),n._uU(3,\"\\n            \"),n.YNc(4,Ce,3,3,\"span\",0),n._uU(5),n.ALo(6,\"currency\"),n.ALo(7,\"i18n\"),n.ALo(8,\"currency\"),n.ALo(9,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.baseSeats),n.xp6(1),n.xDo(\"\\n            \",t.formGroup.controls.additionalSeats.value||0,\" ×\\n            \",n.xi3(6,7,e.PasswordManager.seatPrice,\"$\"),\"\\n            \",n.lcZ(7,10,\"monthAbbr\"),\" =\\n            \",n.xi3(8,12,t.passwordManagerSeatTotal(e,t.formGroup.value.additionalSeats),\"$\"),\"\\n            /\",n.lcZ(9,15,\"month\"),\"\\n          \")}}function ke(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(1),n.gL8(\"\\n            \",n.lcZ(2,6,\"additionalStorageGb\"),\":\\n            \",t.formGroup.controls.additionalStorage.value||0,\" ×\\n            \",n.xi3(3,8,e.PasswordManager.additionalStoragePricePerGb,\"$\"),\"\\n            \",n.lcZ(4,11,\"monthAbbr\"),\" =\\n            \",n.xi3(5,13,t.additionalStorageTotal(e),\"$\"),\" /\",n.lcZ(6,16,\"month\"),\"\\n          \")}}function qe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.YNc(3,Se,7,17,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,Oe,10,17,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,ke,7,18,\"small\",0),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n          \",n.lcZ(2,4,\"monthly\"),\"\\n          \"),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalStorageOption)}}function Pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",22),n._uU(1,\"\\n      \"),n._UZ(2,\"input\",44),n._uU(3,\"\\n      \"),n.TgZ(4,\"label\",24),n._uU(5,\"\\n        \"),n.YNc(6,xe,9,6,\"ng-container\",0),n._uU(7,\"\\n        \"),n.YNc(8,qe,9,6,\"ng-container\",0),n._uU(9,\"\\n      \"),n.qZA(),n._uU(10,\"\\n    \"),n.qZA()),2\u0026e){const e=t.$implicit;n.xp6(2),n.MGl(\"id\",\"interval\",e.type,\"\"),n.Q6J(\"value\",e.type),n.xp6(2),n.MGl(\"for\",\"interval\",e.type,\"\"),n.xp6(2),n.Q6J(\"ngIf\",e.isAnnual),n.xp6(2),n.Q6J(\"ngIf\",!e.isAnnual)}}function Ie(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.YNc(2,fe,23,12,\"ng-container\",0),n._uU(3,\"\\n    \"),n.TgZ(4,\"h2\",14),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n    \"),n.YNc(8,me,17,14,\"div\",29),n._uU(9,\"\\n    \"),n.TgZ(10,\"div\",30),n._uU(11,\"\\n      \"),n.TgZ(12,\"div\",31),n._uU(13,\"\\n        \"),n.TgZ(14,\"label\",32),n._uU(15),n.ALo(16,\"i18n\"),n.qZA(),n._uU(17,\"\\n        \"),n._UZ(18,\"input\",33),n.ALo(19,\"i18n\"),n._uU(20,\"\\n        \"),n.TgZ(21,\"small\",34),n._uU(22),n.ALo(23,\"i18n\"),n.ALo(24,\"currency\"),n.ALo(25,\"i18n\"),n.qZA(),n._uU(26,\"\\n      \"),n.qZA(),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n    \"),n.TgZ(29,\"div\",30),n._uU(30,\"\\n      \"),n.YNc(31,ye,17,13,\"div\",35),n._uU(32,\"\\n    \"),n.qZA(),n._uU(33,\"\\n    \"),n.TgZ(34,\"h2\",36),n._uU(35),n.ALo(36,\"i18n\"),n.qZA(),n._uU(37,\"\\n    \"),n.YNc(38,Pe,11,5,\"div\",15),n._uU(39,\"\\n  \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026!e.selectedPlan.PasswordManager.baseSeats),n.xp6(3),n.Oqu(n.lcZ(6,9,\"addons\")),n.xp6(3),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026e.selectedPlan.PasswordManager.baseSeats),n.xp6(7),n.Oqu(n.lcZ(16,11,\"additionalStorageGb\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(19,13,\"additionalStorageGbDesc\")),n.xp6(4),n.Oqu(n.gM2(23,15,\"additionalStorageIntervalDesc\",\"1 GB\",n.xi3(24,20,e.additionalStoragePriceMonthly(e.selectedPlan),\"$\"),n.lcZ(25,23,\"month\"))),n.xp6(9),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasPremiumAccessOption),n.xp6(4),n.Oqu(n.lcZ(36,25,\"summary\")),n.xp6(3),n.Q6J(\"ngForOf\",e.selectablePlans)}}function Me(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"sm-subscribe\",47),2\u0026e){const e=n.oxw(2);n.Q6J(\"formGroup\",e.formGroup.controls.secretsManager)(\"selectedPlan\",e.selectedSecretsManagerPlan)(\"upgradeOrganization\",!e.createOrganization)}}function Ne(e,t){1\u0026e\u0026\u0026n._UZ(0,\"app-payment\",56),2\u0026e\u0026\u0026n.Q6J(\"hideCredit\",!0)}function Le(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n._UZ(4,\"br\"),n._uU(5,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(1),n.AsE(\"\\n          \",n.lcZ(2,2,\"secretsManagerPlanPrice\"),\": \",n.xi3(3,4,e.secretsManagerSubtotal,\"USD $\"),\"\\n          \")}}function De(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n      \"),n._UZ(2,\"app-payment\",57),n._uU(3,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.Q6J(\"showMethods\",!1))}function Ee(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.TgZ(2,\"h2\",48),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n    \"),n.TgZ(6,\"small\",49),n._uU(7),n.qZA(),n._uU(8,\"\\n    \"),n.YNc(9,Ne,1,1,\"app-payment\",50),n._uU(10,\"\\n    \"),n.TgZ(11,\"app-tax-info\",51),n.NdJ(\"onCountryChanged\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedCountry())})),n.qZA(),n._uU(12,\"\\n    \"),n.TgZ(13,\"div\",52),n._uU(14,\"\\n      \"),n.TgZ(15,\"div\",53),n._uU(16),n.ALo(17,\"i18n\"),n.ALo(18,\"currency\"),n._UZ(19,\"br\"),n._uU(20,\"\\n        \"),n.YNc(21,Le,6,7,\"span\",0),n._uU(22,\"\\n        \"),n.ynx(23),n._uU(24),n.ALo(25,\"i18n\"),n.ALo(26,\"currency\"),n.BQk(),n._uU(27,\"\\n      \"),n.qZA(),n._uU(28,\"\\n      \"),n._UZ(29,\"hr\",54),n._uU(30,\"\\n      \"),n.TgZ(31,\"p\",55),n._uU(32,\"\\n        \"),n.TgZ(33,\"strong\"),n._uU(34),n.ALo(35,\"i18n\"),n.qZA(),n._uU(36),n.ALo(37,\"currency\"),n.ALo(38,\"i18n\"),n.qZA(),n._uU(39,\"\\n    \"),n.qZA(),n._uU(40,\"\\n    \"),n.YNc(41,De,4,1,\"ng-container\",0),n._uU(42,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"\\n      \",n.lcZ(4,12,e.createOrganization?\"paymentInformation\":\"billingInformation\"),\"\\n    \"),n.xp6(4),n.hij(\"\\n      \",e.paymentDesc,\"\\n    \"),n.xp6(2),n.Q6J(\"ngIf\",e.createOrganization||e.upgradeRequiresPaymentMethod),n.xp6(7),n.AsE(\"\\n        \",n.lcZ(17,14,\"passwordManagerPlanPrice\"),\": \",n.xi3(18,16,e.passwordManagerSubtotal,\"USD $\"),\"\\n        \"),n.xp6(5),n.Q6J(\"ngIf\",e.planOffersSecretsManager\u0026\u0026e.formGroup.value.secretsManager.enabled),n.xp6(3),n.AsE(\"\\n          \",n.lcZ(25,19,\"estimatedTax\"),\": \",n.xi3(26,21,e.taxCharges,\"USD $\"),\"\\n        \"),n.xp6(10),n.hij(\"\",n.lcZ(35,24,\"total\"),\":\"),n.xp6(2),n.AsE(\" \",n.xi3(37,26,e.total,\"USD $\"),\"/\",n.lcZ(38,29,e.selectedPlanInterval),\"\\n      \"),n.xp6(5),n.Q6J(\"ngIf\",!e.createOrganization)}}function Fe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",19),n._uU(1,\"\\n    \"),n.TgZ(2,\"app-callout\",58),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.Q6J(\"type\",\"error\"),n.xp6(1),n.Oqu(n.lcZ(4,2,\"singleOrgBlockCreateMessage\")))}function Re(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",59),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.cancel())})),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n      \",n.lcZ(2,1,\"cancel\"),\"\\n    \"))}function Je(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",12,5),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n  \"),n.TgZ(3,\"app-org-info\",13),n.NdJ(\"changedBusinessOwned\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.changedOwnedBusiness())})),n.qZA(),n._uU(4,\"\\n  \"),n.TgZ(5,\"h2\",14),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n  \"),n.YNc(9,ge,23,15,\"div\",15),n._uU(10,\"\\n  \"),n.YNc(11,Ie,40,27,\"div\",0),n._uU(12,\"\\n\\n  \"),n._uU(13,\"\\n  \"),n.TgZ(14,\"div\",16),n._uU(15,\"\\n    \"),n.YNc(16,Me,1,3,\"sm-subscribe\",17),n._uU(17,\"\\n  \"),n.qZA(),n._uU(18,\"\\n\\n  \"),n._uU(19,\"\\n  \"),n.YNc(20,Ee,43,31,\"div\",0),n._uU(21,\"\\n  \"),n.YNc(22,Fe,6,4,\"div\",18),n._uU(23,\"\\n  \"),n.TgZ(24,\"div\",19),n._uU(25,\"\\n    \"),n.TgZ(26,\"button\",20),n._uU(27),n.ALo(28,\"i18n\"),n.qZA(),n._uU(29,\"\\n    \"),n.YNc(30,Re,3,3,\"button\",21),n._uU(31,\"\\n  \"),n.qZA(),n._uU(32,\"\\n\"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"formGroup\",t.formGroup)(\"appApiAction\",t.formPromise),n.xp6(3),n.Q6J(\"formGroup\",t.formGroup)(\"createOrganization\",t.createOrganization)(\"isProvider\",!!t.providerId)(\"acceptingSponsorship\",t.acceptingSponsorship),n.xp6(3),n.Oqu(n.lcZ(7,16,\"chooseYourPlan\")),n.xp6(3),n.Q6J(\"ngForOf\",t.selectableProducts),n.xp6(2),n.Q6J(\"ngIf\",t.formGroup.value.product!==t.productTypes.Free),n.xp6(5),n.Q6J(\"ngIf\",t.planOffersSecretsManager\u0026\u0026!t.hasProvider),n.xp6(4),n.Q6J(\"ngIf\",t.formGroup.value.product!==t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",t.singleOrgPolicyBlock),n.xp6(4),n.Q6J(\"loading\",e.loading)(\"disabled\",!t.formGroup.valid),n.xp6(1),n.hij(\"\\n      \",n.lcZ(28,18,\"submit\"),\"\\n    \"),n.xp6(3),n.Q6J(\"ngIf\",t.showCancel)}}h.k9.TeamsMonthly2020,h.k9.TeamsAnnually2020,h.k9.EnterpriseAnnually2020,h.k9.EnterpriseMonthly2020;class Ye{get product(){return this._product}set product(e){var t,i,n;this._product=e,null===(n=null===(i=null===(t=this.formGroup)||void 0===t?void 0:t.controls)||void 0===i?void 0:i.product)||void 0===n||n.setValue(e)}get plan(){return this._plan}set plan(e){var t,i,n;this._plan=e,null===(n=null===(i=null===(t=this.formGroup)||void 0===t?void 0:t.controls)||void 0===i?void 0:i.plan)||void 0===n||n.setValue(e)}constructor(e,t,i,r,a,l,c,u,d,p,g,m){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.cryptoService=r,this.router=a,this.syncService=l,this.policyService=c,this.organizationService=u,this.logService=d,this.messagingService=p,this.formBuilder=g,this.organizationApiService=m,this.showFree=!0,this.showCancel=!1,this.acceptingSponsorship=!1,this._product=f.kv.Free,this._plan=h.k9.Free,this.onSuccess=new n.vpe,this.onCanceled=new n.vpe,this.onTrialBillingSuccess=new n.vpe,this.loading=!0,this.selfHosted=!1,this.productTypes=f.kv,this.singleOrgPolicyAppliesToActiveUser=!1,this.isInTrialFlow=!1,this.discount=0,this.secretsManagerSubscription=(0,y.DT)(this.formBuilder),this.formGroup=this.formBuilder.group({name:[\"\"],billingEmail:[\"\",[s.kI.email]],businessOwned:[!1],premiumAccessAddon:[!1],additionalStorage:[0,[s.kI.min(0),s.kI.max(99)]],additionalSeats:[0,[s.kI.min(0),s.kI.max(1e5)]],clientOwnerEmail:[\"\",[s.kI.email]],businessName:[\"\"],plan:[this.plan],product:[this.product],secretsManager:this.secretsManagerSubscription}),this.destroy$=new o.x,this.selfHosted=i.isSelfHost()}ngOnInit(){return D(this,void 0,void 0,(function*(){this.organizationId\u0026\u0026(this.organization=this.organizationService.get(this.organizationId),this.sub=yield this.organizationApiService.getSubscription(this.organizationId)),this.createOrganization?(this.formGroup.controls.name.addValidators([s.kI.required,s.kI.maxLength(50)]),this.formGroup.controls.billingEmail.addValidators(s.kI.required)):this.upgradeFlowPrefillForm(),this.policyService.policyAppliesToActiveUser$(l.Mi.SingleOrg).pipe((0,r.R)(this.destroy$)).subscribe((e=\u003e{this.singleOrgPolicyAppliesToActiveUser=e})),this.changedProduct(),this.loading=!1}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get singleOrgPolicyBlock(){return this.singleOrgPolicyAppliesToActiveUser\u0026\u0026!this.hasProvider}get createOrganization(){return null==this.organizationId}get upgradeRequiresPaymentMethod(){var e,t;return(null===(e=this.organization)||void 0===e?void 0:e.planProductType)===f.kv.Free\u0026\u0026!this.showFree\u0026\u0026!(null===(t=this.billing)||void 0===t?void 0:t.paymentSource)}get selectedPlan(){return this.passwordManagerPlans.find((e=\u003ee.type===this.formGroup.controls.plan.value))}get selectedSecretsManagerPlan(){return this.secretsManagerPlans.find((e=\u003ee.type===this.formGroup.controls.plan.value))}get selectedPlanInterval(){return this.selectedPlan.isAnnual?\"year\":\"month\"}isProviderQualifiedFor2020Plan(){const e=new Date(\"2023-11-06\");if(!this.provider||!this.provider.creationDate)return!1;return new Date(this.provider.creationDate)\u003ce}get selectableProducts(){return null}get selectablePlans(){return null}get hasProvider(){return null!=this.providerId}additionalStoragePriceMonthly(e){return e.isAnnual?e.PasswordManager.additionalStoragePricePerGb/12:e.PasswordManager.additionalStoragePricePerGb}seatPriceMonthly(e){return e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice}additionalStorageTotal(e){return e.PasswordManager.hasAdditionalStorageOption?e.PasswordManager.additionalStoragePricePerGb*Math.abs(this.formGroup.controls.additionalStorage.value||0):0}passwordManagerSeatTotal(e,t){return e.PasswordManager.hasAdditionalSeatsOption?e.PasswordManager.seatPrice*Math.abs(t||0):0}secretsManagerSeatTotal(e,t){return e.SecretsManager.hasAdditionalSeatsOption?e.SecretsManager.seatPrice*Math.abs(t||0):0}additionalServiceAccountTotal(e){return e.SecretsManager.hasAdditionalServiceAccountOption?e.SecretsManager.additionalPricePerServiceAccount*Math.abs(this.secretsManagerForm.value.additionalServiceAccounts||0):0}get passwordManagerSubtotal(){let e=this.selectedPlan.PasswordManager.basePrice;return this.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026this.formGroup.controls.additionalSeats.value\u0026\u0026(e+=this.passwordManagerSeatTotal(this.selectedPlan,this.formGroup.value.additionalSeats)),this.selectedPlan.PasswordManager.hasAdditionalStorageOption\u0026\u0026this.formGroup.controls.additionalStorage.value\u0026\u0026(e+=this.additionalStorageTotal(this.selectedPlan)),this.selectedPlan.PasswordManager.hasPremiumAccessOption\u0026\u0026this.formGroup.controls.premiumAccessAddon.value\u0026\u0026(e+=this.selectedPlan.PasswordManager.premiumAccessOptionPrice),e-this.discount}get secretsManagerSubtotal(){const e=this.selectedSecretsManagerPlan,t=this.secretsManagerForm.value;return this.planOffersSecretsManager\u0026\u0026t.enabled?e.SecretsManager.basePrice+this.secretsManagerSeatTotal(e,t.userSeats)+this.additionalServiceAccountTotal(e):0}get freeTrial(){return null!=this.selectedPlan.trialPeriodDays}get taxCharges(){return null!=this.taxComponent\u0026\u0026null!=this.taxComponent.taxRate?this.taxComponent.taxRate/100*(this.passwordManagerSubtotal+this.secretsManagerSubtotal):0}get total(){return this.passwordManagerSubtotal+this.secretsManagerSubtotal+this.taxCharges||0}get paymentDesc(){return this.acceptingSponsorship?this.i18nService.t(\"paymentSponsored\"):this.freeTrial\u0026\u0026this.createOrganization?this.i18nService.t(\"paymentChargedWithTrial\"):this.i18nService.t(\"paymentCharged\",this.i18nService.t(this.selectedPlanInterval))}get secretsManagerForm(){return this.formGroup.controls.secretsManager}get planOffersSecretsManager(){return!1}changedProduct(){}setPlanType(e){this.formGroup.controls.plan.setValue(e)}handlePremiumAddonAccess(e){this.formGroup.controls.premiumAccessAddon.setValue(!e)}handleAdditionalStorage(e){var t;e\u0026\u0026this.currentPlan?(null===(t=this.organization)||void 0===t?void 0:t.maxStorageGb)\u0026\u0026this.formGroup.controls.additionalStorage.setValue(this.organization.maxStorageGb-this.currentPlan.PasswordManager.baseStorageGb):this.formGroup.controls.additionalStorage.setValue(0)}handleAdditionalSeats(e){e?!this.currentPlan||this.currentPlan.PasswordManager.hasAdditionalSeatsOption?this.organization?this.formGroup.controls.additionalSeats.setValue(this.organization.seats):this.formGroup.controls.additionalSeats.setValue(1):this.formGroup.controls.additionalSeats.setValue(this.currentPlan.PasswordManager.baseSeats):this.formGroup.controls.additionalSeats.setValue(0)}handleSecretsManagerForm(){var e,t,i,n;this.planOffersSecretsManager\u0026\u0026this.secretsManagerForm.enable(),(null===(e=this.organization)||void 0===e?void 0:e.useSecretsManager)\u0026\u0026this.secretsManagerForm.controls.enabled.setValue(!0),this.secretsManagerForm.controls.enabled.value\u0026\u0026(this.secretsManagerForm.controls.userSeats.setValue((null===(t=this.sub)||void 0===t?void 0:t.smSeats)||1),this.secretsManagerForm.controls.additionalServiceAccounts.setValue((null===(i=this.sub)||void 0===i?void 0:i.smServiceAccounts)-(null===(n=this.currentPlan.SecretsManager)||void 0===n?void 0:n.baseServiceAccount)||0)),this.secretsManagerForm.updateValueAndValidity()}changedOwnedBusiness(){this.formGroup.controls.businessOwned.value\u0026\u0026!this.selectedPlan.canBeUsedByBusiness\u0026\u0026(this.formGroup.controls.product.setValue(f.kv.TeamsStarter),this.formGroup.controls.plan.setValue(h.k9.TeamsStarter),this.changedProduct())}changedCountry(){this.paymentComponent.hideBank=\"US\"!==this.taxComponent.taxInfo.country,this.paymentComponent.hideBank\u0026\u0026this.paymentComponent.method===h.Lt.BankAccount\u0026\u0026(this.paymentComponent.method=h.Lt.Card,this.paymentComponent.changeMethod())}cancel(){this.onCanceled.emit()}submit(){return D(this,void 0,void 0,(function*(){if(!this.singleOrgPolicyBlock)try{const e=()=\u003eD(this,void 0,void 0,(function*(){let e=null;if(this.createOrganization){const t=yield this.cryptoService.makeOrgKey(),i=t[0].encryptedString,n=(yield this.cryptoService.encrypt(this.i18nService.t(\"defaultCollection\"),t[1])).encryptedString,s=yield this.cryptoService.makeKeyPair(t[1]);e=this.selfHosted?yield this.createSelfHosted(i,n,s):yield this.createCloudHosted(i,n,s,t[1]),this.platformUtilsService.showToast(\"success\",this.i18nService.t(\"organizationCreated\"),this.i18nService.t(\"organizationReadyToGo\"))}else e=yield this.updateOrganization(e),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"organizationUpgraded\"));return yield this.apiService.refreshIdentityToken(),yield this.syncService.fullSync(!0),this.acceptingSponsorship||this.isInTrialFlow||this.router.navigate([\"/organizations/\"+e]),this.isInTrialFlow\u0026\u0026this.onTrialBillingSuccess.emit({orgId:e,subLabelText:this.billingSubLabelText()}),e}));this.formPromise=e();const t=yield this.formPromise;this.onSuccess.emit({organizationId:t}),this.messagingService.send(\"organizationCreated\",t)}catch(e){this.logService.error(e)}}))}updateOrganization(e){return D(this,void 0,void 0,(function*(){const e=new d;if(e.businessName=this.formGroup.controls.businessOwned.value?this.formGroup.controls.businessName.value:null,e.additionalSeats=this.formGroup.controls.additionalSeats.value,e.additionalStorageGb=this.formGroup.controls.additionalStorage.value,e.premiumAccessAddon=this.selectedPlan.PasswordManager.hasPremiumAccessOption\u0026\u0026this.formGroup.controls.premiumAccessAddon.value,e.planType=this.selectedPlan.type,e.billingAddressCountry=this.taxComponent.taxInfo.country,e.billingAddressPostalCode=this.taxComponent.taxInfo.postalCode,this.buildSecretsManagerRequest(e),this.upgradeRequiresPaymentMethod){const e=yield this.paymentComponent.createPaymentToken(),t=new g.t;t.paymentToken=e[0],t.paymentMethodType=e[1],t.country=this.taxComponent.taxInfo.country,t.postalCode=this.taxComponent.taxInfo.postalCode,yield this.organizationApiService.updatePayment(this.organizationId,t)}if(!this.organization.hasPublicAndPrivateKeys){const t=yield this.cryptoService.getOrgKey(this.organizationId),i=yield this.cryptoService.makeKeyPair(t);e.keys=new u.u(i[0],i[1].encryptedString)}const t=yield this.organizationApiService.upgrade(this.organizationId,e);return t.success||null==t.paymentIntentClientSecret||(yield this.paymentComponent.handleStripeCardPayment(t.paymentIntentClientSecret,null)),this.organizationId}))}createCloudHosted(e,t,i,n){return D(this,void 0,void 0,(function*(){const s=new c;if(s.key=e,s.collectionName=t,s.name=this.formGroup.controls.name.value,s.billingEmail=this.formGroup.controls.billingEmail.value,s.keys=new u.u(i[0],i[1].encryptedString),s.planType=h.k9.Free,this.hasProvider){const e=new p(this.formGroup.controls.clientOwnerEmail.value,s),t=yield this.cryptoService.getProviderKey(this.providerId);e.organizationCreateRequest.key=(yield this.cryptoService.encrypt(n.key,t)).encryptedString;return(yield this.apiService.postProviderCreateOrganization(this.providerId,e)).organizationId}return(yield this.organizationApiService.create(s)).id}))}createSelfHosted(e,t,i){return D(this,void 0,void 0,(function*(){const n=document.getElementById(\"file\").files;if(null==n||0===n.length)throw new Error(this.i18nService.t(\"selectFile\"));const s=new FormData;s.append(\"license\",n[0]),s.append(\"key\",e),s.append(\"collectionName\",t);const o=(yield this.organizationApiService.createLicense(s)).id;yield this.apiService.refreshIdentityToken();const r=new u.u(i[0],i[1].encryptedString);return yield this.organizationApiService.updateKeys(o,r),o}))}billingSubLabelText(){const e=this.selectedPlan,t=0===e.PasswordManager.basePrice?e.PasswordManager.seatPrice:e.PasswordManager.basePrice;let i=\"\";return e.isAnnual?i+=`${this.i18nService.t(\"annual\")} ($${t}/${this.i18nService.t(\"yr\")})`:i+=`${this.i18nService.t(\"monthly\")} ($${t}/${this.i18nService.t(\"monthAbbr\")})`,i}buildSecretsManagerRequest(e){const t=this.secretsManagerForm.value;e.useSecretsManager=this.planOffersSecretsManager\u0026\u0026t.enabled,e.useSecretsManager\u0026\u0026(this.selectedSecretsManagerPlan.SecretsManager.hasAdditionalSeatsOption\u0026\u0026(e.additionalSmSeats=t.userSeats),this.selectedSecretsManagerPlan.SecretsManager.hasAdditionalServiceAccountOption\u0026\u0026(e.additionalServiceAccounts=t.additionalServiceAccounts))}upgradeFlowPrefillForm(){if(this.acceptingSponsorship)return this.formGroup.controls.product.setValue(f.kv.Families),void this.changedProduct();if(this.currentPlan\u0026\u0026this.currentPlan.product!==f.kv.Enterprise){const e=this.passwordManagerPlans.find((e=\u003ethis.currentPlan.product===f.kv.Free?e.type===h.k9.FamiliesAnnually:e.upgradeSortOrder==this.currentPlan.upgradeSortOrder+1));this.plan=e.type,this.product=e.product,this.changedProduct()}}planIsEnabled(e){return!e.disabled\u0026\u0026!e.legacyYear}}Ye.ɵfac=function(e){return new(e||Ye)(n.Y36(b.s),n.Y36(U.D),n.Y36(_.P),n.Y36(A.$),n.Y36(Z.F0),n.Y36(x._),n.Y36(S.d),n.Y36(a.Mn),n.Y36(T.$),n.Y36(C.o),n.Y36(s.qu),n.Y36(O.M))},Ye.ɵcmp=n.Xpm({type:Ye,selectors:[[\"app-organization-plans\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(n.Gf(v.p,5),n.Gf(w.F,5)),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.paymentComponent=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.taxComponent=e.first)}},inputs:{organizationId:\"organizationId\",showFree:\"showFree\",showCancel:\"showCancel\",acceptingSponsorship:\"acceptingSponsorship\",currentPlan:\"currentPlan\",product:\"product\",plan:\"plan\",providerId:\"providerId\"},outputs:{onSuccess:\"onSuccess\",onCanceled:\"onCanceled\",onTrialBillingSuccess:\"onTrialBillingSuccess\"},standalone:!0,features:[n.jDz],decls:6,vars:3,consts:[[4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"class\",\"tw-pt-6\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"form-group\"],[\"for\",\"file\"],[\"type\",\"file\",\"id\",\"file\",\"name\",\"file\",\"required\",\"\",1,\"form-control-file\"],[1,\"form-text\",\"text-muted\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"ngNativeValidate\",\"\",1,\"tw-pt-6\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\"],[3,\"formGroup\",\"createOrganization\",\"isProvider\",\"acceptingSponsorship\",\"changedBusinessOwned\"],[1,\"mt-5\"],[\"class\",\"form-check form-check-block\",4,\"ngFor\",\"ngForOf\"],[1,\"tw-my-10\"],[3,\"formGroup\",\"selectedPlan\",\"upgradeOrganization\",4,\"ngIf\"],[\"class\",\"mt-4\",4,\"ngIf\"],[1,\"mt-4\"],[\"type\",\"submit\",\"buttonType\",\"primary\",\"bitButton\",\"\",3,\"loading\",\"disabled\"],[\"type\",\"button\",\"buttonType\",\"secondary\",\"bitButton\",\"\",3,\"click\",4,\"ngIf\"],[1,\"form-check\",\"form-check-block\"],[\"type\",\"radio\",\"name\",\"product\",\"formControlName\",\"product\",1,\"form-check-input\",3,\"id\",\"value\",\"change\"],[1,\"form-check-label\",3,\"for\"],[1,\"mb-1\"],[4,\"ngIf\",\"ngIfElse\"],[\"nonEnterprisePlans\",\"\"],[\"fullFeatureList\",\"\"],[\"class\",\"row\",4,\"ngIf\"],[1,\"row\"],[1,\"form-group\",\"col-6\"],[\"for\",\"additionalStorage\"],[\"id\",\"additionalStorage\",\"type\",\"number\",\"name\",\"additionalStorageGb\",\"formControlName\",\"additionalStorage\",\"step\",\"1\",1,\"form-control\",3,\"placeholder\"],[1,\"text-muted\",\"form-text\"],[\"class\",\"form-group col-6\",4,\"ngIf\"],[1,\"spaced-header\"],[1,\"col-6\"],[\"for\",\"additionalSeats\"],[\"id\",\"additionalSeats\",\"type\",\"number\",\"name\",\"additionalSeats\",\"formControlName\",\"additionalSeats\",\"required\",\"\",1,\"form-control\",3,\"placeholder\"],[\"id\",\"additionalSeats\",\"type\",\"number\",\"name\",\"additionalSeats\",\"formControlName\",\"additionalSeats\",1,\"form-control\",3,\"placeholder\"],[1,\"form-check\"],[\"id\",\"premiumAccess\",\"type\",\"checkbox\",\"name\",\"premiumAccessAddon\",\"formControlName\",\"premiumAccessAddon\",1,\"form-check-input\"],[\"for\",\"premiumAccess\",1,\"form-check-label\",\"bold\"],[\"type\",\"radio\",\"name\",\"plan\",\"formControlName\",\"plan\",1,\"form-check-input\",3,\"id\",\"value\"],[\"notAcceptingSponsorship\",\"\"],[2,\"text-decoration\",\"line-through\"],[3,\"formGroup\",\"selectedPlan\",\"upgradeOrganization\"],[1,\"mb-4\"],[1,\"text-muted\",\"font-italic\",\"mb-3\",\"d-block\"],[3,\"hideCredit\",4,\"ngIf\"],[3,\"onCountryChanged\"],[\"id\",\"price\",1,\"my-4\"],[1,\"text-muted\",\"text-sm\"],[1,\"my-1\",\"col-3\",\"ml-0\"],[1,\"text-lg\"],[3,\"hideCredit\"],[3,\"showMethods\"],[3,\"type\"],[\"type\",\"button\",\"buttonType\",\"secondary\",\"bitButton\",\"\",3,\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,E,9,6,\"ng-container\",0),n._uU(1,\"\\n\"),n.YNc(2,F,33,18,\"ng-container\",0),n._uU(3,\"\\n\"),n.YNc(4,Je,33,20,\"form\",1),n._uU(5,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.createOrganization\u0026\u0026t.selfHosted),n.xp6(2),n.Q6J(\"ngIf\",!t.loading))},dependencies:[y.ql,k.sg,k.O5,s.Fj,s.wV,s.Wl,s._,s.JJ,s.JL,s.Q7,s.F,s.sg,s.u,q.b,P.O,I.r,v.p,w.F,M.G,k.H9,N.C,m._,L.K],encapsulation:2})},68605:(e,t,i)=\u003e{\"use strict\";i.d(t,{ql:()=\u003ea,pV:()=\u003es.p,ZN:()=\u003eie,Fi:()=\u003eo.F,DT:()=\u003ene.D});var n=i(71146),s=i(42759),o=i(34279),r=i(24852);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=r.oAB({type:a}),a.ɵinj=r.cJS({imports:[n.m,s.p,o.F,n.m]});var l=i(98645),c=i(69485);class u{}var d=i(55602),p=i(97360),h=i(78627),g=i(99721),f=i(75557),m=i(66459),y=i(73369),v=i(19419),w=i(24610),b=i(53707),U=i(81974),_=i(24637),A=i(11512),Z=i(57139),x=i(36179),S=i(99042),T=i(58691);class C{}var O=i(58172),k=i(23915),q=i(33245),P=i(82933),I=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const M=[\"ppButtonForm\"];function N(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"div\",36),r._uU(1,\"\\n      \"),r.TgZ(2,\"div\",37),r._uU(3,\"\\n        \"),r.TgZ(4,\"input\",38),r.NdJ(\"ngModelChange\",(function(t){r.CHM(e);const i=r.oxw();return r.KtG(i.method=t)})),r.qZA(),r._uU(5,\"\\n        \"),r.TgZ(6,\"label\",39),r._uU(7,\"\\n          \"),r._UZ(8,\"i\",40),r._uU(9,\" PayPal\"),r.qZA(),r._uU(10,\"\\n      \"),r.qZA(),r._uU(11,\"\\n      \"),r.TgZ(12,\"div\",37),r._uU(13,\"\\n        \"),r.TgZ(14,\"input\",41),r.NdJ(\"ngModelChange\",(function(t){r.CHM(e);const i=r.oxw();return r.KtG(i.method=t)})),r.qZA(),r._uU(15,\"\\n        \"),r.TgZ(16,\"label\",42),r._uU(17,\"\\n          \"),r._UZ(18,\"i\",43),r._uU(19,\" Bitcoin\"),r.qZA(),r._uU(20,\"\\n      \"),r.qZA(),r._uU(21,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.oxw();r.xp6(4),r.Q6J(\"value\",e.paymentMethodType.PayPal)(\"ngModel\",e.method),r.xp6(10),r.Q6J(\"value\",e.paymentMethodType.BitPay)(\"ngModel\",e.method)}}class L{constructor(e,t,i,n,s,o){this.stateService=e,this.apiService=t,this.platformUtilsService=i,this.organizationService=n,this.logService=s,this.configService=o,this.showOptions=!0,this.method=c.Lt.PayPal,this.onAdded=new r.vpe,this.onCanceled=new r.vpe,this.paymentMethodType=c.Lt,this.ppLoading=!1;const a=\"AD3LAUZSNVPJY\",l=\"https://www.sandbox.paypal.com/cgi-bin/webscr\";this.ppButtonFormAction=l,this.ppButtonBusinessId=a}ngOnInit(){return I(this,void 0,void 0,(function*(){if(null!=this.organizationId){null==this.creditAmount\u0026\u0026(this.creditAmount=\"20.00\"),this.ppButtonCustomField=\"organization_id:\"+this.organizationId;const e=yield this.organizationService.get(this.organizationId);null!=e\u0026\u0026(this.subject=e.name,this.name=e.name)}else null==this.creditAmount\u0026\u0026(this.creditAmount=\"10.00\"),this.userId=yield this.stateService.getUserId(),this.subject=yield this.stateService.getEmail(),this.email=this.subject,this.ppButtonCustomField=\"user_id:\"+this.userId;this.region=yield(0,S.z)(this.configService.cloudRegion$),this.ppButtonCustomField+=\",account_credit:1\",this.ppButtonCustomField+=`,region:${this.region}`,this.returnUrl=window.location.href}))}submit(){return I(this,void 0,void 0,(function*(){if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount){if(this.method===c.Lt.PayPal)return this.ppButtonFormRef.nativeElement.submit(),void(this.ppLoading=!0);if(this.method!==c.Lt.BitPay)try{this.onAdded.emit()}catch(e){this.logService.error(e)}else try{const e=new C;e.email=this.email,e.name=this.name,e.credit=!0,e.amount=this.creditAmountNumber,e.organizationId=this.organizationId,e.userId=this.userId,e.returnUrl=this.returnUrl,this.formPromise=this.apiService.postBitPayInvoice(e);const t=yield this.formPromise;this.platformUtilsService.launchUri(t)}catch(e){this.logService.error(e)}}}))}cancel(){this.onCanceled.emit()}formatAmount(){try{if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount){const e=Math.abs(parseFloat(this.creditAmount));if(e\u003e0)return void(this.creditAmount=parseFloat((Math.round(100*e)/100).toString()).toFixed(2).toString())}}catch(e){this.logService.error(e)}this.creditAmount=\"\"}get creditAmountNumber(){if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount)try{return parseFloat(this.creditAmount)}catch(e){this.logService.error(e)}return null}}L.ɵfac=function(e){return new(e||L)(r.Y36(O.b),r.Y36(d.s),r.Y36(g.P),r.Y36(T.Mn),r.Y36(m.$),r.Y36(k.i))},L.ɵcmp=r.Xpm({type:L,selectors:[[\"app-add-credit\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026r.Gf(M,7,r.SBq),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.ppButtonFormRef=e.first)}},inputs:{creditAmount:\"creditAmount\",showOptions:\"showOptions\",method:\"method\",organizationId:\"organizationId\"},outputs:{onAdded:\"onAdded\",onCanceled:\"onCanceled\"},decls:94,vars:32,consts:[[\"ngNativeValidate\",\"\",1,\"card\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"card-body\"],[\"type\",\"button\",1,\"close\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\"],[1,\"card-body-header\"],[\"class\",\"mb-4 text-lg\",4,\"ngIf\"],[1,\"form-group\"],[1,\"row\"],[1,\"col-4\"],[\"for\",\"creditAmount\"],[1,\"input-group\"],[1,\"input-group-prepend\"],[1,\"input-group-text\"],[\"id\",\"creditAmount\",\"type\",\"text\",\"name\",\"CreditAmount\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\",\"blur\"],[1,\"form-text\",\"text-muted\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",3,\"click\"],[\"method\",\"post\",\"target\",\"_top\",3,\"action\"],[\"ppButtonForm\",\"\"],[\"type\",\"hidden\",\"name\",\"cmd\",\"value\",\"_xclick\"],[\"type\",\"hidden\",\"name\",\"business\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"button_subtype\",\"value\",\"services\"],[\"type\",\"hidden\",\"name\",\"no_note\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"no_shipping\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"rm\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"return\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"cancel_return\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"currency_code\",\"value\",\"USD\"],[\"type\",\"hidden\",\"name\",\"image_url\",\"value\",\"https://bitwarden.com/images/paypal-banner.png\"],[\"type\",\"hidden\",\"name\",\"bn\",\"value\",\"PP-BuyNowBF:btn_buynow_LG.gif:NonHosted\"],[\"type\",\"hidden\",\"name\",\"amount\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"custom\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"item_name\",\"value\",\"Bitwarden Account Credit\"],[\"type\",\"hidden\",\"name\",\"item_number\",3,\"value\"],[1,\"mb-4\",\"text-lg\"],[1,\"form-check\",\"form-check-inline\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"credit-method-paypal\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\"],[\"for\",\"credit-method-paypal\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-paypal\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"credit-method-bitcoin\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\"],[\"for\",\"credit-method-bitcoin\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-bitcoin\"]],template:function(e,t){if(1\u0026e\u0026\u0026(r.TgZ(0,\"form\",0,1),r.NdJ(\"ngSubmit\",(function(){return t.submit()})),r._uU(2,\"\\n  \"),r.TgZ(3,\"div\",2),r._uU(4,\"\\n    \"),r.TgZ(5,\"button\",3),r.NdJ(\"click\",(function(){return t.cancel()})),r.ALo(6,\"i18n\"),r._uU(7,\"\\n      \"),r.TgZ(8,\"span\",4),r._uU(9,\"×\"),r.qZA(),r._uU(10,\"\\n    \"),r.qZA(),r._uU(11,\"\\n    \"),r.TgZ(12,\"h3\",5),r._uU(13),r.ALo(14,\"i18n\"),r.qZA(),r._uU(15,\"\\n    \"),r.YNc(16,N,22,4,\"div\",6),r._uU(17,\"\\n    \"),r.TgZ(18,\"div\",7),r._uU(19,\"\\n      \"),r.TgZ(20,\"div\",8),r._uU(21,\"\\n        \"),r.TgZ(22,\"div\",9),r._uU(23,\"\\n          \"),r.TgZ(24,\"label\",10),r._uU(25),r.ALo(26,\"i18n\"),r.qZA(),r._uU(27,\"\\n          \"),r.TgZ(28,\"div\",11),r._uU(29,\"\\n            \"),r.TgZ(30,\"div\",12)(31,\"span\",13),r._uU(32,\"$USD\"),r.qZA()(),r._uU(33,\"\\n            \"),r.TgZ(34,\"input\",14),r.NdJ(\"ngModelChange\",(function(e){return t.creditAmount=e}))(\"blur\",(function(){return t.formatAmount()})),r.qZA(),r._uU(35,\"\\n          \"),r.qZA(),r._uU(36,\"\\n        \"),r.qZA(),r._uU(37,\"\\n      \"),r.qZA(),r._uU(38,\"\\n      \"),r.TgZ(39,\"small\",15),r._uU(40),r.ALo(41,\"i18n\"),r.qZA(),r._uU(42,\"\\n    \"),r.qZA(),r._uU(43,\"\\n    \"),r.TgZ(44,\"button\",16),r._uU(45,\"\\n      \"),r._UZ(46,\"i\",17),r.ALo(47,\"i18n\"),r._uU(48,\"\\n      \"),r.TgZ(49,\"span\"),r._uU(50),r.ALo(51,\"i18n\"),r.qZA(),r._uU(52,\"\\n    \"),r.qZA(),r._uU(53,\"\\n    \"),r.TgZ(54,\"button\",18),r.NdJ(\"click\",(function(){return t.cancel()})),r._uU(55),r.ALo(56,\"i18n\"),r.qZA(),r._uU(57,\"\\n  \"),r.qZA(),r._uU(58,\"\\n\"),r.qZA(),r._uU(59,\"\\n\"),r.TgZ(60,\"form\",19,20),r._uU(62,\"\\n  \"),r._UZ(63,\"input\",21),r._uU(64,\"\\n  \"),r._UZ(65,\"input\",22),r._uU(66,\"\\n  \"),r._UZ(67,\"input\",23),r._uU(68,\"\\n  \"),r._UZ(69,\"input\",24),r._uU(70,\"\\n  \"),r._UZ(71,\"input\",25),r._uU(72,\"\\n  \"),r._UZ(73,\"input\",26),r._uU(74,\"\\n  \"),r._UZ(75,\"input\",27),r._uU(76,\"\\n  \"),r._UZ(77,\"input\",28),r._uU(78,\"\\n  \"),r._UZ(79,\"input\",29),r._uU(80,\"\\n  \"),r._UZ(81,\"input\",30),r._uU(82,\"\\n  \"),r._UZ(83,\"input\",31),r._uU(84,\"\\n  \"),r._UZ(85,\"input\",32),r._uU(86,\"\\n  \"),r._UZ(87,\"input\",33),r._uU(88,\"\\n  \"),r._UZ(89,\"input\",34),r._uU(90,\"\\n  \"),r._UZ(91,\"input\",35),r._uU(92,\"\\n\"),r.qZA(),r._uU(93,\"\\n\")),2\u0026e){const e=r.MAs(1);r.Q6J(\"appApiAction\",t.formPromise),r.xp6(5),r.s9C(\"appA11yTitle\",r.lcZ(6,18,\"cancel\")),r.xp6(8),r.Oqu(r.lcZ(14,20,\"addCredit\")),r.xp6(3),r.Q6J(\"ngIf\",t.showOptions),r.xp6(9),r.Oqu(r.lcZ(26,22,\"amount\")),r.xp6(9),r.Q6J(\"ngModel\",t.creditAmount),r.xp6(6),r.Oqu(r.lcZ(41,24,\"creditDelayed\")),r.xp6(4),r.Q6J(\"disabled\",e.loading||t.ppLoading),r.xp6(2),r.s9C(\"title\",r.lcZ(47,26,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(51,28,\"submit\")),r.xp6(5),r.hij(\"\\n      \",r.lcZ(56,30,\"cancel\"),\"\\n    \"),r.xp6(5),r.s9C(\"action\",t.ppButtonFormAction,r.LSH),r.xp6(5),r.s9C(\"value\",t.ppButtonBusinessId),r.xp6(10),r.s9C(\"value\",t.returnUrl),r.xp6(2),r.s9C(\"value\",t.returnUrl),r.xp6(8),r.s9C(\"value\",t.creditAmount),r.xp6(2),r.s9C(\"value\",t.ppButtonCustomField),r.xp6(4),r.s9C(\"value\",t.subject)}},dependencies:[v.O5,l._Y,l.Fj,l._,l.JJ,l.JL,l.Q7,l.On,l.F,q.B,w.b,P.C],encapsulation:2});var D=i(95608),E=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class F{constructor(e,t,i,n,s){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=n,this.organizationApiService=s,this.onAdjusted=new r.vpe,this.onCanceled=new r.vpe,this.paymentMethodType=c.Lt}submit(){return E(this,void 0,void 0,(function*(){try{const e=new D.t;this.formPromise=this.paymentComponent.createPaymentToken().then((t=\u003e(e.paymentToken=t[0],e.paymentMethodType=t[1],e.postalCode=this.taxInfoComponent.taxInfo.postalCode,e.country=this.taxInfoComponent.taxInfo.country,null==this.organizationId?this.apiService.postAccountPayment(e):(e.taxId=this.taxInfoComponent.taxInfo.taxId,e.state=this.taxInfoComponent.taxInfo.state,e.line1=this.taxInfoComponent.taxInfo.line1,e.line2=this.taxInfoComponent.taxInfo.line2,e.city=this.taxInfoComponent.taxInfo.city,e.state=this.taxInfoComponent.taxInfo.state,this.organizationApiService.updatePayment(this.organizationId,e))))),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"updatedPaymentMethod\")),this.onAdjusted.emit()}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}changeCountry(){\"US\"===this.taxInfoComponent.taxInfo.country?this.paymentComponent.hideBank=!this.organizationId:(this.paymentComponent.hideBank=!0,this.paymentComponent.method===c.Lt.BankAccount\u0026\u0026(this.paymentComponent.method=c.Lt.Card,this.paymentComponent.changeMethod()))}}F.ɵfac=function(e){return new(e||F)(r.Y36(d.s),r.Y36(h.D),r.Y36(g.P),r.Y36(m.$),r.Y36(p.M))},F.ɵcmp=r.Xpm({type:F,selectors:[[\"app-adjust-payment\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(r.Gf(s.p,7),r.Gf(o.F,7)),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.paymentComponent=e.first),r.iGM(e=r.CRH())\u0026\u0026(t.taxInfoComponent=e.first)}},inputs:{currentType:\"currentType\",organizationId:\"organizationId\"},outputs:{onAdjusted:\"onAdjusted\",onCanceled:\"onCanceled\"},decls:36,vars:19,consts:[[\"ngNativeValidate\",\"\",1,\"card\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"card-body\"],[\"type\",\"button\",1,\"close\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\"],[1,\"card-body-header\"],[3,\"hideBank\",\"hideCredit\"],[3,\"onCountryChanged\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",3,\"click\"]],template:function(e,t){if(1\u0026e\u0026\u0026(r.TgZ(0,\"form\",0,1),r.NdJ(\"ngSubmit\",(function(){return t.submit()})),r._uU(2,\"\\n  \"),r.TgZ(3,\"div\",2),r._uU(4,\"\\n    \"),r.TgZ(5,\"button\",3),r.NdJ(\"click\",(function(){return t.cancel()})),r.ALo(6,\"i18n\"),r._uU(7,\"\\n      \"),r.TgZ(8,\"span\",4),r._uU(9,\"×\"),r.qZA(),r._uU(10,\"\\n    \"),r.qZA(),r._uU(11,\"\\n    \"),r.TgZ(12,\"h3\",5),r._uU(13),r.ALo(14,\"i18n\"),r.qZA(),r._uU(15,\"\\n    \"),r._UZ(16,\"app-payment\",6),r._uU(17,\"\\n    \"),r.TgZ(18,\"app-tax-info\",7),r.NdJ(\"onCountryChanged\",(function(){return t.changeCountry()})),r.qZA(),r._uU(19,\"\\n    \"),r.TgZ(20,\"button\",8),r._uU(21,\"\\n      \"),r._UZ(22,\"i\",9),r.ALo(23,\"i18n\"),r._uU(24,\"\\n      \"),r.TgZ(25,\"span\"),r._uU(26),r.ALo(27,\"i18n\"),r.qZA(),r._uU(28,\"\\n    \"),r.qZA(),r._uU(29,\"\\n    \"),r.TgZ(30,\"button\",10),r.NdJ(\"click\",(function(){return t.cancel()})),r._uU(31),r.ALo(32,\"i18n\"),r.qZA(),r._uU(33,\"\\n  \"),r.qZA(),r._uU(34,\"\\n\"),r.qZA(),r._uU(35,\"\\n\")),2\u0026e){const e=r.MAs(1);r.Q6J(\"appApiAction\",t.formPromise),r.xp6(5),r.s9C(\"appA11yTitle\",r.lcZ(6,9,\"cancel\")),r.xp6(8),r.hij(\"\\n      \",r.lcZ(14,11,null!=t.currentType?\"changePaymentMethod\":\"addPaymentMethod\"),\"\\n    \"),r.xp6(3),r.Q6J(\"hideBank\",!t.organizationId)(\"hideCredit\",!0),r.xp6(4),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(23,13,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(27,15,\"submit\")),r.xp6(5),r.hij(\"\\n      \",r.lcZ(32,17,\"cancel\"),\"\\n    \")}},dependencies:[l.JL,l.F,q.B,w.b,s.p,o.F,P.C],encapsulation:2});var R=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const J=function(e){return{\"bwi-spin\":e}};function Y(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",3),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.load())})),r._uU(1,\"\\n    \"),r._UZ(2,\"i\",4),r._uU(3),r.ALo(4,\"i18n\"),r.qZA()}if(2\u0026e){const e=r.oxw();r.Q6J(\"disabled\",e.loading),r.xp6(2),r.Q6J(\"ngClass\",r.VKq(5,J,e.loading)),r.xp6(1),r.hij(\"\\n    \",r.lcZ(4,3,\"refresh\"),\"\\n  \")}}function z(e,t){1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n  \"),r._UZ(2,\"i\",5),r.ALo(3,\"i18n\"),r._uU(4,\"\\n  \"),r.TgZ(5,\"span\",6),r._uU(6),r.ALo(7,\"i18n\"),r.qZA(),r._uU(8,\"\\n\"),r.BQk()),2\u0026e\u0026\u0026(r.xp6(2),r.s9C(\"title\",r.lcZ(3,2,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(7,4,\"loading\")))}function K(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",12),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.addCredit())})),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()}2\u0026e\u0026\u0026(r.xp6(1),r.hij(\"\\n    \",r.lcZ(2,1,\"addCredit\"),\"\\n  \"))}function Q(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-add-credit\",13),r.NdJ(\"onAdded\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closeAddCredit(!0))}))(\"onCanceled\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closeAddCredit(!1))})),r._uU(1,\"\\n  \"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.Q6J(\"organizationId\",e.organizationId)}}function B(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"p\"),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(1),r.Oqu(r.lcZ(2,1,\"noPaymentMethod\")))}function G(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-callout\",16),r.ALo(1,\"i18n\"),r._uU(2,\"\\n      \"),r.TgZ(3,\"p\"),r._uU(4),r.ALo(5,\"i18n\"),r.ALo(6,\"i18n\"),r.qZA(),r._uU(7,\"\\n      \"),r.TgZ(8,\"form\",17,18),r.NdJ(\"ngSubmit\",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.verifyBank())})),r._uU(10,\"\\n        \"),r.TgZ(11,\"bit-form-field\",19),r._uU(12,\"\\n          \"),r.TgZ(13,\"bit-label\"),r._uU(14),r.ALo(15,\"i18n\"),r.qZA(),r._uU(16,\"\\n          \"),r._UZ(17,\"input\",20),r._uU(18,\"\\n          \"),r.TgZ(19,\"span\",21),r._uU(20,\"$0.\"),r.qZA(),r._uU(21,\"\\n        \"),r.qZA(),r._uU(22,\"\\n        \"),r.TgZ(23,\"bit-form-field\",19),r._uU(24,\"\\n          \"),r.TgZ(25,\"bit-label\"),r._uU(26),r.ALo(27,\"i18n\"),r.qZA(),r._uU(28,\"\\n          \"),r._UZ(29,\"input\",22),r._uU(30,\"\\n          \"),r.TgZ(31,\"span\",21),r._uU(32,\"$0.\"),r.qZA(),r._uU(33,\"\\n        \"),r.qZA(),r._uU(34,\"\\n        \"),r.TgZ(35,\"button\",23),r._uU(36,\"\\n          \"),r._UZ(37,\"i\",24),r.ALo(38,\"i18n\"),r._uU(39,\"\\n          \"),r.TgZ(40,\"span\"),r._uU(41),r.ALo(42,\"i18n\"),r.qZA(),r._uU(43,\"\\n        \"),r.qZA(),r._uU(44,\"\\n      \"),r.qZA(),r._uU(45,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.MAs(9),t=r.oxw(3);r.s9C(\"title\",r.lcZ(1,10,\"verifyBankAccount\")),r.xp6(4),r.AsE(\"\",r.lcZ(5,12,\"verifyBankAccountDesc\"),\" \",r.lcZ(6,14,\"verifyBankAccountFailureWarning\"),\"\"),r.xp6(4),r.Q6J(\"formGroup\",t.verifyBankForm)(\"appApiAction\",t.verifyBankPromise),r.xp6(6),r.Oqu(r.xi3(15,16,\"amountX\",\"1\")),r.xp6(12),r.Oqu(r.xi3(27,19,\"amountX\",\"2\")),r.xp6(9),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(38,22,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(42,24,\"verifyBankAccount\"))}}function V(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n    \"),r.YNc(2,G,46,26,\"app-callout\",14),r._uU(3,\"\\n    \"),r.TgZ(4,\"p\"),r._uU(5,\"\\n      \"),r._UZ(6,\"i\",15),r._uU(7),r.qZA(),r._uU(8,\"\\n  \"),r.BQk()),2\u0026e){const e=r.oxw(2);r.xp6(2),r.Q6J(\"ngIf\",e.forOrganization\u0026\u0026e.paymentSource.type===e.paymentMethodType.BankAccount\u0026\u0026e.paymentSource.needsVerification),r.xp6(4),r.Q6J(\"ngClass\",e.paymentSourceClasses),r.xp6(1),r.hij(\"\\n      \",e.paymentSource.description,\"\\n    \")}}function j(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",12),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.changePayment())})),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.xp6(1),r.hij(\"\\n    \",r.lcZ(2,1,e.paymentSource?\"changePaymentMethod\":\"addPaymentMethod\"),\"\\n  \")}}function H(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-adjust-payment\",25),r.NdJ(\"onAdjusted\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePayment(!0))}))(\"onCanceled\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePayment(!1))})),r._uU(1,\"\\n  \"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.Q6J(\"organizationId\",e.organizationId)(\"currentType\",null!=e.paymentSource?e.paymentSource.type:null)}}function $(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"p\"),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(1),r.Oqu(r.lcZ(2,1,\"paymentChargedWithUnpaidSubscription\")))}function W(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"div\"),r._uU(1,\"\\n      \"),r._UZ(2,\"i\",5),r.ALo(3,\"i18n\"),r._uU(4,\"\\n      \"),r.TgZ(5,\"span\",6),r._uU(6),r.ALo(7,\"i18n\"),r.qZA(),r._uU(8,\"\\n    \"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(2),r.s9C(\"title\",r.lcZ(3,2,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(7,4,\"loading\")))}function X(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"form\",27,28),r.NdJ(\"ngSubmit\",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.submitTaxInfo())})),r._uU(2,\"\\n      \"),r._UZ(3,\"app-tax-info\"),r._uU(4,\"\\n      \"),r.TgZ(5,\"button\",29),r._uU(6,\"\\n        \"),r._UZ(7,\"i\",24),r.ALo(8,\"i18n\"),r._uU(9,\"\\n        \"),r.TgZ(10,\"span\"),r._uU(11),r.ALo(12,\"i18n\"),r.qZA(),r._uU(13,\"\\n      \"),r.qZA(),r._uU(14,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.MAs(1),t=r.oxw(3);r.Q6J(\"appApiAction\",t.taxFormPromise),r.xp6(5),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(8,4,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(12,6,\"save\"))}}function ee(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n    \"),r.TgZ(2,\"h2\",10),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n    \"),r.TgZ(6,\"p\"),r._uU(7),r.ALo(8,\"i18n\"),r.qZA(),r._uU(9,\"\\n    \"),r.YNc(10,W,9,6,\"div\",2),r._uU(11,\"\\n    \"),r.YNc(12,X,15,8,\"form\",26),r._uU(13,\"\\n  \"),r.BQk()),2\u0026e){const e=r.oxw(2);r.xp6(3),r.Oqu(r.lcZ(4,4,\"taxInformation\")),r.xp6(4),r.Oqu(r.lcZ(8,6,\"taxInformationDesc\")),r.xp6(3),r.Q6J(\"ngIf\",!e.org||e.loading),r.xp6(2),r.Q6J(\"ngIf\",e.org\u0026\u0026!e.loading)}}function te(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n  \"),r.TgZ(2,\"h2\"),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n  \"),r.TgZ(6,\"p\",7),r._uU(7,\"\\n    \"),r.TgZ(8,\"strong\"),r._uU(9),r.ALo(10,\"currency\"),r.qZA(),r._uU(11,\"\\n  \"),r.qZA(),r._uU(12,\"\\n  \"),r.TgZ(13,\"p\"),r._uU(14),r.ALo(15,\"i18n\"),r.qZA(),r._uU(16,\"\\n  \"),r.YNc(17,K,3,3,\"button\",8),r._uU(18,\"\\n  \"),r.YNc(19,Q,2,1,\"app-add-credit\",9),r._uU(20,\"\\n  \"),r.TgZ(21,\"h2\",10),r._uU(22),r.ALo(23,\"i18n\"),r.qZA(),r._uU(24,\"\\n  \"),r.YNc(25,B,3,3,\"p\",2),r._uU(26,\"\\n  \"),r.YNc(27,V,9,3,\"ng-container\",2),r._uU(28,\"\\n  \"),r.YNc(29,j,3,3,\"button\",8),r._uU(30,\"\\n  \"),r.YNc(31,H,2,2,\"app-adjust-payment\",11),r._uU(32,\"\\n  \"),r.YNc(33,$,3,3,\"p\",2),r._uU(34,\"\\n  \"),r.YNc(35,ee,14,8,\"ng-container\",2),r._uU(36,\"\\n\"),r.BQk()),2\u0026e){const e=r.oxw();r.xp6(3),r.Oqu(r.lcZ(4,12,e.isCreditBalance?\"accountCredit\":\"accountBalance\")),r.xp6(6),r.Oqu(r.xi3(10,14,e.creditOrBalance,\"$\")),r.xp6(5),r.Oqu(r.lcZ(15,17,\"creditAppliedDesc\")),r.xp6(3),r.Q6J(\"ngIf\",!e.showAddCredit),r.xp6(2),r.Q6J(\"ngIf\",e.showAddCredit),r.xp6(3),r.Oqu(r.lcZ(23,19,\"paymentMethod\")),r.xp6(3),r.Q6J(\"ngIf\",!e.paymentSource),r.xp6(2),r.Q6J(\"ngIf\",e.paymentSource),r.xp6(2),r.Q6J(\"ngIf\",!e.showAdjustPayment),r.xp6(2),r.Q6J(\"ngIf\",e.showAdjustPayment),r.xp6(2),r.Q6J(\"ngIf\",e.isUnpaid),r.xp6(2),r.Q6J(\"ngIf\",e.forOrganization)}}class ie{constructor(e,t,i,n,s,o,r,a,u){this.apiService=e,this.organizationApiService=t,this.i18nService=i,this.platformUtilsService=n,this.router=s,this.logService=o,this.route=r,this.formBuilder=a,this.dialogService=u,this.loading=!1,this.firstLoaded=!1,this.showAdjustPayment=!1,this.showAddCredit=!1,this.paymentMethodType=c.Lt,this.isUnpaid=!1,this.verifyBankForm=this.formBuilder.group({amount1:new l.NI(null,[l.kI.required,l.kI.max(99),l.kI.min(0)]),amount2:new l.NI(null,[l.kI.required,l.kI.max(99),l.kI.min(0)])})}ngOnInit(){return R(this,void 0,void 0,(function*(){this.route.params.subscribe((e=\u003eR(this,void 0,void 0,(function*(){if(e.organizationId)this.organizationId=e.organizationId;else if(this.platformUtilsService.isSelfHost())return void this.router.navigate([\"/settings/subscription\"]);yield this.load(),this.firstLoaded=!0}))))}))}load(){var e,t;return R(this,void 0,void 0,(function*(){if(!this.loading){if(this.loading=!0,this.forOrganization){const e=this.organizationApiService.getBilling(this.organizationId),t=this.organizationApiService.getSubscription(this.organizationId);[this.billing,this.org]=yield Promise.all([e,t])}else{const e=this.apiService.getUserBillingPayment(),t=this.apiService.getUserSubscription();[this.billing,this.sub]=yield Promise.all([e,t])}this.isUnpaid=null!==(t=\"unpaid\"===(null===(e=this.subscription)||void 0===e?void 0:e.status))\u0026\u0026void 0!==t\u0026\u0026t,this.loading=!1}}))}addCredit(){this.showAddCredit=!0}closeAddCredit(e){this.showAddCredit=!1,e\u0026\u0026this.load()}changePayment(){this.showAdjustPayment=!0}closePayment(e){this.showAdjustPayment=!1,e\u0026\u0026this.load()}verifyBank(){return R(this,void 0,void 0,(function*(){if(!this.loading\u0026\u0026this.forOrganization)try{const e=new u;e.amount1=this.verifyBankForm.value.amount1,e.amount2=this.verifyBankForm.value.amount2,this.verifyBankPromise=this.organizationApiService.verifyBank(this.organizationId,e),yield this.verifyBankPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"verifiedBankAccount\")),this.load()}catch(e){this.logService.error(e)}}))}submitTaxInfo(){return R(this,void 0,void 0,(function*(){this.taxFormPromise=this.taxInfo.submitTaxInfo(),yield this.taxFormPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"taxInfoUpdated\"))}))}get isCreditBalance(){return null==this.billing||this.billing.balance\u003c=0}get creditOrBalance(){return Math.abs(null!=this.billing?this.billing.balance:0)}get paymentSource(){return null!=this.billing?this.billing.paymentSource:null}get forOrganization(){return null!=this.organizationId}get headerClass(){return this.forOrganization?[\"page-header\"]:[\"tabbed-header\"]}get paymentSourceClasses(){if(null==this.paymentSource)return[];switch(this.paymentSource.type){case c.Lt.Card:return[\"bwi-credit-card\"];case c.Lt.BankAccount:return[\"bwi-bank\"];case c.Lt.Check:return[\"bwi-money\"];case c.Lt.PayPal:return[\"bwi-paypal text-primary\"];default:return[]}}get subscription(){var e,t,i,n;return null!==(n=null!==(t=null===(e=this.sub)||void 0===e?void 0:e.subscription)\u0026\u0026void 0!==t?t:null===(i=this.org)||void 0===i?void 0:i.subscription)\u0026\u0026void 0!==n?n:null}}ie.ɵfac=function(e){return new(e||ie)(r.Y36(d.s),r.Y36(p.M),r.Y36(h.D),r.Y36(g.P),r.Y36(f.F0),r.Y36(m.$),r.Y36(f.gz),r.Y36(l.qu),r.Y36(y.x))},ie.ɵcmp=r.Xpm({type:ie,selectors:[[\"ng-component\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026r.Gf(o.F,5),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.taxInfo=e.first)}},decls:13,vars:7,consts:[[1,\"d-flex\",3,\"ngClass\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",\"class\",\"tw-ml-auto\",3,\"disabled\",\"click\",4,\"ngIf\"],[4,\"ngIf\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",1,\"tw-ml-auto\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-refresh\",\"bwi-fw\",3,\"ngClass\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"text-lg\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\",4,\"ngIf\"],[3,\"organizationId\",\"onAdded\",\"onCanceled\",4,\"ngIf\"],[1,\"spaced-header\"],[3,\"organizationId\",\"currentType\",\"onAdjusted\",\"onCanceled\",4,\"ngIf\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\"],[3,\"organizationId\",\"onAdded\",\"onCanceled\"],[\"type\",\"warning\",3,\"title\",4,\"ngIf\"],[1,\"bwi\",\"bwi-fw\",3,\"ngClass\"],[\"type\",\"warning\",3,\"title\"],[\"ngNativeValidate\",\"\",1,\"form-inline\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\"],[\"verifyForm\",\"\"],[1,\"tw-mr-2\",\"tw-w-40\"],[\"bitInput\",\"\",\"type\",\"number\",\"step\",\"1\",\"placeholder\",\"xx\",\"formControlName\",\"amount1\"],[\"bitPrefix\",\"\"],[\"bitInput\",\"\",\"type\",\"number\",\"step\",\"1\",\"placeholder\",\"xx\",\"formControlName\",\"amount2\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"primary\",\"type\",\"submit\",1,\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[3,\"organizationId\",\"currentType\",\"onAdjusted\",\"onCanceled\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"formTax\",\"\"],[\"bitButton\",\"\",\"buttonType\",\"primary\",\"type\",\"submit\",1,\"btn-submit\",3,\"disabled\"]],template:function(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"div\",0),r._uU(1,\"\\n  \"),r.TgZ(2,\"h1\"),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n  \"),r.YNc(6,Y,5,7,\"button\",1),r._uU(7,\"\\n\"),r.qZA(),r._uU(8,\"\\n\"),r.YNc(9,z,9,6,\"ng-container\",2),r._uU(10,\"\\n\"),r.YNc(11,te,37,21,\"ng-container\",2),r._uU(12,\"\\n\")),2\u0026e\u0026\u0026(r.Q6J(\"ngClass\",t.headerClass),r.xp6(3),r.hij(\"\\n    \",r.lcZ(4,5,\"paymentMethod\"),\"\\n  \"),r.xp6(3),r.Q6J(\"ngIf\",t.firstLoaded),r.xp6(3),r.Q6J(\"ngIf\",!t.firstLoaded\u0026\u0026t.loading),r.xp6(2),r.Q6J(\"ngIf\",t.billing))},dependencies:[v.mk,v.O5,l.Fj,l.wV,l.JJ,l.JL,l.F,l.sg,l.u,w.b,b.O,U.r,_.d,A.G,Z.xO,x.u,o.F,L,F,v.H9,P.C],encapsulation:2});var ne=i(7644)},42759:(e,t,i)=\u003e{\"use strict\";i.d(t,{p:()=\u003eT});var n=i(54019),s=i(68362),o=i(69485),r=i(71146),a=i(24852),l=i(55602),c=i(66459),u=i(81301),d=i(19419),p=i(98645),h=i(33245),g=i(53707),f=i(85356),m=i(82933),y=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function v(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",3),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",9),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",10),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",11),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.BankAccount)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(8,3,\"bankAccount\"),\"\")}}function w(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",12),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",13),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",14),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",15),a._uU(7,\" PayPal\"),a.qZA(),a._uU(8,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.PayPal)(\"ngModel\",e.method)}}function b(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",12),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",16),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",17),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",18),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.Credit)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(8,3,\"accountCredit\"),\"\")}}function U(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",2),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",3),a._uU(3,\"\\n    \"),a.TgZ(4,\"input\",4),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.changeMethod())})),a.qZA(),a._uU(5,\"\\n    \"),a.TgZ(6,\"label\",5),a._uU(7,\"\\n      \"),a._UZ(8,\"i\",6),a._uU(9),a.ALo(10,\"i18n\"),a.qZA(),a._uU(11,\"\\n  \"),a.qZA(),a._uU(12,\"\\n  \"),a.YNc(13,v,10,5,\"div\",7),a._uU(14,\"\\n  \"),a.YNc(15,w,9,2,\"div\",8),a._uU(16,\"\\n  \"),a.YNc(17,b,10,5,\"div\",8),a._uU(18,\"\\n\"),a.qZA()}if(2\u0026e){const e=a.oxw();a.xp6(4),a.Q6J(\"value\",e.paymentMethodType.Card)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(10,6,\"creditCard\"),\"\"),a.xp6(4),a.Q6J(\"ngIf\",!e.hideBank),a.xp6(2),a.Q6J(\"ngIf\",!e.hidePaypal),a.xp6(2),a.Q6J(\"ngIf\",!e.hideCredit)}}function _(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"div\",32),a._uU(1,\"\\n      \"),a._UZ(2,\"img\",33),a._uU(3,\"\\n    \"),a.qZA())}function A(e,t){if(1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",19),a._uU(3,\"\\n    \"),a.TgZ(4,\"div\",20),a._uU(5,\"\\n      \"),a.TgZ(6,\"label\",21),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n      \"),a._UZ(10,\"div\",22),a._uU(11,\"\\n    \"),a.qZA(),a._uU(12,\"\\n    \"),a.YNc(13,_,4,0,\"div\",23),a._uU(14,\"\\n    \"),a.TgZ(15,\"div\",20),a._uU(16,\"\\n      \"),a.TgZ(17,\"label\",24),a._uU(18),a.ALo(19,\"i18n\"),a.qZA(),a._uU(20,\"\\n      \"),a._UZ(21,\"div\",25),a._uU(22,\"\\n    \"),a.qZA(),a._uU(23,\"\\n    \"),a.TgZ(24,\"div\",26),a._uU(25,\"\\n      \"),a.TgZ(26,\"div\",27),a._uU(27,\"\\n        \"),a.TgZ(28,\"label\",28),a._uU(29),a.ALo(30,\"i18n\"),a.qZA(),a._uU(31,\"\\n        \"),a.TgZ(32,\"a\",29),a.ALo(33,\"i18n\"),a._uU(34,\"\\n          \"),a._UZ(35,\"i\",30),a._uU(36,\"\\n        \"),a.qZA(),a._uU(37,\"\\n      \"),a.qZA(),a._uU(38,\"\\n      \"),a._UZ(39,\"div\",31),a._uU(40,\"\\n    \"),a.qZA(),a._uU(41,\"\\n  \"),a.qZA(),a._uU(42,\"\\n\"),a.BQk()),2\u0026e){const e=a.oxw();a.xp6(4),a.Q6J(\"ngClass\",e.trialFlow?\"col-5\":\"col-4\"),a.xp6(3),a.Oqu(a.lcZ(8,7,\"number\")),a.xp6(6),a.Q6J(\"ngIf\",!e.trialFlow),a.xp6(2),a.Q6J(\"ngClass\",e.trialFlow?\"col-3\":\"col-4\"),a.xp6(3),a.Oqu(a.lcZ(19,9,\"expiration\")),a.xp6(11),a.hij(\"\\n          \",a.lcZ(30,11,\"securityCode\"),\"\\n        \"),a.xp6(3),a.s9C(\"appA11yTitle\",a.lcZ(33,13,\"learnMore\"))}}function Z(e,t){if(1\u0026e){const e=a.EpF();a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"app-callout\",34),a.ALo(3,\"i18n\"),a._uU(4),a.ALo(5,\"i18n\"),a.ALo(6,\"i18n\"),a.qZA(),a._uU(7,\"\\n  \"),a.TgZ(8,\"div\",19),a._uU(9,\"\\n    \"),a.TgZ(10,\"div\",35),a._uU(11,\"\\n      \"),a.TgZ(12,\"label\",36),a._uU(13),a.ALo(14,\"i18n\"),a.qZA(),a._uU(15,\"\\n      \"),a.TgZ(16,\"input\",37),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.routing_number=t)})),a.qZA(),a._uU(17,\"\\n    \"),a.qZA(),a._uU(18,\"\\n    \"),a.TgZ(19,\"div\",35),a._uU(20,\"\\n      \"),a.TgZ(21,\"label\",38),a._uU(22),a.ALo(23,\"i18n\"),a.qZA(),a._uU(24,\"\\n      \"),a.TgZ(25,\"input\",39),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_number=t)})),a.qZA(),a._uU(26,\"\\n    \"),a.qZA(),a._uU(27,\"\\n    \"),a.TgZ(28,\"div\",35),a._uU(29,\"\\n      \"),a.TgZ(30,\"label\",40),a._uU(31),a.ALo(32,\"i18n\"),a.qZA(),a._uU(33,\"\\n      \"),a.TgZ(34,\"input\",41),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_holder_name=t)})),a.qZA(),a._uU(35,\"\\n    \"),a.qZA(),a._uU(36,\"\\n    \"),a.TgZ(37,\"div\",35),a._uU(38,\"\\n      \"),a.TgZ(39,\"label\",42),a._uU(40),a.ALo(41,\"i18n\"),a.qZA(),a._uU(42,\"\\n      \"),a.TgZ(43,\"select\",43),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_holder_type=t)})),a._uU(44,\"\\n        \"),a.TgZ(45,\"option\",44),a._uU(46),a.ALo(47,\"i18n\"),a.qZA(),a._uU(48,\"\\n        \"),a.TgZ(49,\"option\",45),a._uU(50),a.ALo(51,\"i18n\"),a.qZA(),a._uU(52,\"\\n        \"),a.TgZ(53,\"option\",46),a._uU(54),a.ALo(55,\"i18n\"),a.qZA(),a._uU(56,\"\\n      \"),a.qZA(),a._uU(57,\"\\n    \"),a.qZA(),a._uU(58,\"\\n  \"),a.qZA(),a._uU(59,\"\\n\"),a.BQk()}if(2\u0026e){const e=a.oxw();a.xp6(2),a.s9C(\"title\",a.lcZ(3,14,\"verifyBankAccount\")),a.xp6(2),a.AsE(\"\\n    \",a.lcZ(5,16,\"verifyBankAccountInitialDesc\"),\" \",a.lcZ(6,18,\"verifyBankAccountFailureWarning\"),\"\\n  \"),a.xp6(9),a.Oqu(a.lcZ(14,20,\"routingNumber\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.routing_number),a.xp6(6),a.Oqu(a.lcZ(23,22,\"accountNumber\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_number),a.xp6(6),a.Oqu(a.lcZ(32,24,\"accountHolderName\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_holder_name),a.xp6(6),a.Oqu(a.lcZ(41,26,\"bankAccountType\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_holder_type),a.xp6(3),a.hij(\"-- \",a.lcZ(47,28,\"select\"),\" --\"),a.xp6(4),a.Oqu(a.lcZ(51,30,\"bankAccountTypeCompany\")),a.xp6(4),a.Oqu(a.lcZ(55,32,\"bankAccountTypeIndividual\"))}}function x(e,t){1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",47),a._uU(3,\"\\n    \"),a._UZ(4,\"div\",48),a._uU(5,\"\\n    \"),a.TgZ(6,\"small\",49),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA(),a._uU(10,\"\\n\"),a.BQk()),2\u0026e\u0026\u0026(a.xp6(7),a.Oqu(a.lcZ(8,1,\"paypalClickSubmit\")))}function S(e,t){1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"app-callout\",50),a._uU(3),a.ALo(4,\"i18n\"),a.qZA(),a._uU(5,\"\\n\"),a.BQk()),2\u0026e\u0026\u0026(a.xp6(3),a.hij(\"\\n    \",a.lcZ(4,1,\"makeSureEnoughCredit\"),\"\\n  \"))}class T{constructor(e,t,i){this.apiService=e,this.logService=t,this.themingService=i,this.showMethods=!0,this.showOptions=!0,this.method=o.Lt.Card,this.hideBank=!1,this.hidePaypal=!1,this.hideCredit=!1,this.trialFlow=!1,this.destroy$=new n.x,this.bank={routing_number:null,account_number:null,account_holder_name:null,account_holder_type:\"\",currency:\"USD\",country:\"US\"},this.paymentMethodType=o.Lt,this.btInstance=null,this.stripe=null,this.stripeElements=null,this.stripeCardNumberElement=null,this.stripeCardExpiryElement=null,this.stripeCardCvcElement=null,this.stripeScript=window.document.createElement(\"script\"),this.stripeScript.src=\"https://js.stripe.com/v3/?advancedFraudSignals=false\",this.stripeScript.async=!0,this.stripeScript.onload=()=\u003e{this.stripe=window.Stripe(\"********************************\"),this.stripeElements=this.stripe.elements(),this.setStripeElement()},this.btScript=window.document.createElement(\"script\"),this.btScript.src=\"scripts/dropin.js?cache=mw0sn\",this.btScript.async=!0,this.StripeElementStyle={base:{color:null,fontFamily:'\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',fontSize:\"14px\",fontSmoothing:\"antialiased\",\"::placeholder\":{color:null}},invalid:{color:null}},this.StripeElementClasses={focus:\"is-focused\",empty:\"is-empty\",invalid:\"is-invalid\"}}ngOnInit(){return y(this,void 0,void 0,(function*(){this.showOptions||(this.hidePaypal=this.method!==o.Lt.PayPal,this.hideBank=this.method!==o.Lt.BankAccount,this.hideCredit=this.method!==o.Lt.Credit),this.subscribeToTheme(),window.document.head.appendChild(this.stripeScript),this.hidePaypal||window.document.head.appendChild(this.btScript)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),window.document.head.removeChild(this.stripeScript),window.setTimeout((()=\u003e{Array.from(window.document.querySelectorAll(\"iframe\")).forEach((e=\u003e{if(null!=e.src\u0026\u0026e.src.indexOf(\"stripe\")\u003e-1)try{window.document.body.removeChild(e)}catch(t){this.logService.error(t)}}))}),500),this.hidePaypal||(window.document.head.removeChild(this.btScript),window.setTimeout((()=\u003e{Array.from(window.document.head.querySelectorAll(\"script\")).forEach((e=\u003e{if(null!=e.src\u0026\u0026e.src.indexOf(\"paypal\")\u003e-1)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}));const e=window.document.head.querySelector(\"#braintree-dropin-stylesheet\");if(null!=e)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}),500))}changeMethod(){this.btInstance=null,this.method===o.Lt.PayPal?window.setTimeout((()=\u003e{window.braintree.dropin.create({authorization:\"sandbox_r72q8jq6_9pnxkwm75f87sdc2\",container:\"#bt-dropin-container\",paymentOptionPriority:[\"paypal\"],paypal:{flow:\"vault\",buttonStyle:{label:\"pay\",size:\"medium\",shape:\"pill\",color:\"blue\",tagline:\"false\"}}},((e,t)=\u003e{null==e?this.btInstance=t:console.error(e)}))}),250):this.setStripeElement()}createPaymentToken(){return new Promise(((e,t)=\u003e{this.method===o.Lt.Credit?e([null,this.method]):this.method===o.Lt.PayPal?this.btInstance.requestPaymentMethod().then((t=\u003e{e([t.nonce,this.method])})).catch((e=\u003e{t(e.message)})):this.method!==o.Lt.Card\u0026\u0026this.method!==o.Lt.BankAccount||(this.method===o.Lt.Card?this.apiService.postSetupPayment().then((e=\u003ethis.stripe.handleCardSetup(e,this.stripeCardNumberElement))).then((i=\u003e{i.error?t(i.error.message):i.setupIntent\u0026\u0026\"succeeded\"===i.setupIntent.status?e([i.setupIntent.payment_method,this.method]):t()})):this.stripe.createToken(\"bank_account\",this.bank).then((i=\u003e{i.error?t(i.error.message):i.token\u0026\u0026null!=i.token.id?e([i.token.id,this.method]):t()})))}))}handleStripeCardPayment(e,t){return new Promise(((i,n)=\u003e{if(this.showMethods\u0026\u0026null==this.stripeCardNumberElement)return void n();return(()=\u003ethis.showMethods?this.stripe.handleCardSetup(e,this.stripeCardNumberElement):this.stripe.handleCardSetup(e))().then((e=\u003ey(this,void 0,void 0,(function*(){e.error?n(e.error.message):e.paymentIntent\u0026\u0026\"succeeded\"===e.paymentIntent.status?(null!=t\u0026\u0026(yield t()),i()):n()}))))}))}setStripeElement(){window.setTimeout((()=\u003e{this.showMethods\u0026\u0026this.method===o.Lt.Card\u0026\u0026(null==this.stripeCardNumberElement\u0026\u0026(this.stripeCardNumberElement=this.stripeElements.create(\"cardNumber\",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:\"\"})),null==this.stripeCardExpiryElement\u0026\u0026(this.stripeCardExpiryElement=this.stripeElements.create(\"cardExpiry\",{style:this.StripeElementStyle,classes:this.StripeElementClasses})),null==this.stripeCardCvcElement\u0026\u0026(this.stripeCardCvcElement=this.stripeElements.create(\"cardCvc\",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:\"\"})),this.stripeCardNumberElement.mount(\"#stripe-card-number-element\"),this.stripeCardExpiryElement.mount(\"#stripe-card-expiry-element\"),this.stripeCardCvcElement.mount(\"#stripe-card-cvc-element\"))}),50)}subscribeToTheme(){this.themingService.theme$.pipe((0,s.R)(this.destroy$)).subscribe((()=\u003e{const e=getComputedStyle(document.documentElement);this.StripeElementStyle.base.color=`rgb(${e.getPropertyValue(\"--color-text-main\")})`,this.StripeElementStyle.base[\"::placeholder\"].color=`rgb(${e.getPropertyValue(\"--color-text-muted\")})`,this.StripeElementStyle.invalid.color=`rgb(${e.getPropertyValue(\"--color-text-main\")})`,this.StripeElementStyle.invalid.borderColor=`rgb(${e.getPropertyValue(\"--color-danger-500\")})`}))}}T.ɵfac=function(e){return new(e||T)(a.Y36(l.s),a.Y36(c.$),a.Y36(u.v))},T.ɵcmp=a.Xpm({type:T,selectors:[[\"app-payment\"]],inputs:{showMethods:\"showMethods\",showOptions:\"showOptions\",method:\"method\",hideBank:\"hideBank\",hidePaypal:\"hidePaypal\",hideCredit:\"hideCredit\",trialFlow:\"trialFlow\"},standalone:!0,features:[a.jDz],decls:10,vars:5,consts:[[\"class\",\"mb-4 text-lg\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"mb-4\",\"text-lg\"],[1,\"form-check\",\"form-check-inline\",\"mr-4\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-card\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-card\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-credit-card\"],[\"class\",\"form-check form-check-inline mr-4\",4,\"ngIf\"],[\"class\",\"form-check form-check-inline\",4,\"ngIf\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-bank\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-bank\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-bank\"],[1,\"form-check\",\"form-check-inline\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-paypal\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-paypal\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-paypal\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-credit\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-credit\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-dollar\"],[1,\"row\"],[1,\"form-group\",3,\"ngClass\"],[\"for\",\"stripe-card-number-element\"],[\"id\",\"stripe-card-number-element\",1,\"form-control\",\"stripe-form-control\"],[\"class\",\"form-group col-8 d-flex align-items-end\",4,\"ngIf\"],[\"for\",\"stripe-card-expiry-element\"],[\"id\",\"stripe-card-expiry-element\",1,\"form-control\",\"stripe-form-control\"],[1,\"form-group\",\"col-4\"],[1,\"d-flex\"],[\"for\",\"stripe-card-cvc-element\"],[\"href\",\"https://www.cvvnumber.com/cvv.html\",\"tabindex\",\"-1\",\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"ml-auto\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-question-circle\"],[\"id\",\"stripe-card-cvc-element\",1,\"form-control\",\"stripe-form-control\"],[1,\"form-group\",\"col-8\",\"d-flex\",\"align-items-end\"],[\"src\",\"../../images/cards.png\",\"alt\",\"Visa, MasterCard, Discover, AmEx, JCB, Diners Club, UnionPay\",\"width\",\"323\",\"height\",\"32\"],[\"type\",\"warning\",3,\"title\"],[1,\"form-group\",\"col-6\"],[\"for\",\"routing_number\"],[\"id\",\"routing_number\",\"type\",\"text\",\"name\",\"routing_number\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_number\"],[\"id\",\"account_number\",\"type\",\"text\",\"name\",\"account_number\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_holder_name\"],[\"id\",\"account_holder_name\",\"type\",\"text\",\"name\",\"account_holder_name\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_holder_type\"],[\"id\",\"account_holder_type\",\"name\",\"account_holder_type\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"value\",\"\"],[\"value\",\"company\"],[\"value\",\"individual\"],[1,\"mb-3\"],[\"id\",\"bt-dropin-container\",1,\"mb-1\"],[1,\"text-muted\"],[\"type\",\"note\"]],template:function(e,t){1\u0026e\u0026\u0026(a.YNc(0,U,19,8,\"div\",0),a._uU(1,\"\\n\"),a.YNc(2,A,43,15,\"ng-container\",1),a._uU(3,\"\\n\"),a.YNc(4,Z,60,34,\"ng-container\",1),a._uU(5,\"\\n\"),a.YNc(6,x,11,3,\"ng-container\",1),a._uU(7,\"\\n\"),a.YNc(8,S,6,3,\"ng-container\",1),a._uU(9,\"\\n\")),2\u0026e\u0026\u0026(a.Q6J(\"ngIf\",t.showOptions\u0026\u0026t.showMethods),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.Card),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.BankAccount),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.PayPal),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.Credit))},dependencies:[r.m,d.mk,d.O5,p.YN,p.Kr,p.Fj,p.EJ,p._,p.JJ,p.Q7,p.On,h.B,g.O,f.b,m.C],encapsulation:2})},7644:(e,t,i)=\u003e{\"use strict\";i.d(t,{G:()=\u003eL,D:()=\u003eN});var n=i(98645),s=i(54019),o=i(53634),r=i(68362),a=i(87264);const l=i(66997).W4`",
                "IsCause": true,
                "Annotation": "",
                "Truncated": false,
                "Highlighted": "(()=\u003e{var e,t,i,n,s,o={28753:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003en});class n{constructor(){this.policies=[]}addPolicies(e){this.policies.push(...e)}getPolicies(){return this.policies}}},63078:(e,t,i)=\u003e{\"use strict\";i.d(t,{KF:()=\u003ep.K,WO:()=\u003es,lT:()=\u003ew,Rq:()=\u003eh,My:()=\u003eb,Qg:()=\u003eA,XD:()=\u003eS});var n=i(24852);class s{}s.ɵfac=function(e){return new(e||s)},s.ɵmod=n.oAB({type:s}),s.ɵinj=n.cJS({});var o=i(3289),r=i(59281),a=i(42844),l=i(88652),c=i(58043);class u extends c.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.organizationId=this.getResponseProperty(\"OrganizationId\"),this.name=this.getResponseProperty(\"Name\"),this.accessAll=this.getResponseProperty(\"AccessAll\"),this.externalId=this.getResponseProperty(\"ExternalId\")}}class d extends u{constructor(e){super(e),this.collections=[];const t=this.getResponseProperty(\"Collections\");null!=t\u0026\u0026(this.collections=t.map((e=\u003enew l.Y(e))))}}var p=i(50342);class h{constructor(){this.collections=[],this.members=[]}static fromResponse(e){const t=Object.assign(new h,e);return e instanceof d\u0026\u0026null!=e.collections\u0026\u0026(t.collections=e.collections.map((e=\u003enew p.K(e)))),t}}class g{constructor(){this.collections=[],this.users=[]}}class f{constructor(e){this.ids=null==e?[]:e}}var m=i(55602),y=i(23915),v=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class w{constructor(e,t){this.apiService=e,this.configService=t}groupViewFromResponse(e){return v(this,void 0,void 0,(function*(){const t=h.fromResponse(e);return(yield this.configService.getFeatureFlag(r.T.FlexibleCollections,!1))\u0026\u0026(t.accessAll=!1),t}))}get(e,t){return v(this,void 0,void 0,(function*(){const i=yield this.apiService.send(\"GET\",\"/organizations/\"+e+\"/groups/\"+t+\"/details\",null,!0,!0);return this.groupViewFromResponse(new d(i))}))}getAll(e){var t,i;return v(this,void 0,void 0,(function*(){const n=yield this.apiService.send(\"GET\",\"/organizations/\"+e+\"/groups\",null,!0,!0),s=new a.L(n,d);return null!==(i=Promise.all(null===(t=s.data)||void 0===t?void 0:t.map((e=\u003ethis.groupViewFromResponse(e)))))\u0026\u0026void 0!==i?i:[]}))}}w.ɵfac=function(e){return new(e||w)(n.LFG(m.s),n.LFG(y.i))},w.ɵprov=n.Yz7({token:w,factory:w.ɵfac,providedIn:\"root\"});class b extends w{constructor(e,t){super(e,t),this.apiService=e,this.configService=t}delete(e,t){return v(this,void 0,void 0,(function*(){yield this.apiService.send(\"DELETE\",\"/organizations/\"+e+\"/groups/\"+t,null,!0,!1)}))}deleteMany(e,t){return v(this,void 0,void 0,(function*(){yield this.apiService.send(\"DELETE\",\"/organizations/\"+e+\"/groups\",new f(t),!0,!0)}))}save(e){return v(this,void 0,void 0,(function*(){const t=new g;return t.name=e.name,t.accessAll=e.accessAll,t.users=e.members,t.collections=e.collections.map((e=\u003enew o.d(e.id,e.readOnly,e.hidePasswords,e.manage))),null==e.id?yield this.postGroup(e.organizationId,t):yield this.putGroup(e.organizationId,e.id,t)}))}postGroup(e,t){return v(this,void 0,void 0,(function*(){const i=yield this.apiService.send(\"POST\",\"/organizations/\"+e+\"/groups\",t,!0,!0);return this.groupViewFromResponse(new u(i))}))}putGroup(e,t,i){return v(this,void 0,void 0,(function*(){const n=yield this.apiService.send(\"PUT\",\"/organizations/\"+e+\"/groups/\"+t,i,!0,!0);return this.groupViewFromResponse(new u(n))}))}}b.ɵfac=function(e){return new(e||b)(n.LFG(m.s),n.LFG(y.i))},b.ɵprov=n.Yz7({token:b,factory:b.ɵfac,providedIn:s});class U{constructor(){this.collections=[],this.groups=[]}}class _{constructor(){this.emails=[],this.collections=[]}}class A{constructor(){this.collections=[],this.groups=[]}}var Z=i(47244),x=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class S{constructor(e,t){this.configService=e,this.organizationUserService=t}get(e,t){return x(this,void 0,void 0,(function*(){const i=yield this.organizationUserService.getOrganizationUser(e,t,{includeGroups:!0});if(null==i)return;const[n]=yield this.decryptMany(e,[i]);return n}))}save(e){return x(this,void 0,void 0,(function*(){const t=new U;t.accessAll=e.accessAll,t.permissions=e.permissions,t.type=e.type,t.collections=e.collections,t.groups=e.groups,t.accessSecretsManager=e.accessSecretsManager,yield this.organizationUserService.putOrganizationUser(e.organizationId,e.id,t)}))}invite(e,t){return x(this,void 0,void 0,(function*(){const i=new _;i.emails=e,i.accessAll=t.accessAll,i.permissions=t.permissions,i.type=t.type,i.collections=t.collections,i.groups=t.groups,i.accessSecretsManager=t.accessSecretsManager,yield this.organizationUserService.postOrganizationUserInvite(t.organizationId,i)}))}decryptMany(e,t){return x(this,void 0,void 0,(function*(){const i=t.map((t=\u003ex(this,void 0,void 0,(function*(){const i=new A;return i.id=t.id,i.organizationId=e,i.userId=t.userId,i.type=t.type,i.status=t.status,i.externalId=t.externalId,i.accessAll=!(yield this.configService.getFeatureFlag(r.T.FlexibleCollections,!1))\u0026\u0026t.accessAll,i.permissions=t.permissions,i.resetPasswordEnrolled=t.resetPasswordEnrolled,i.collections=t.collections.map((e=\u003e({id:e.id,hidePasswords:e.hidePasswords,readOnly:e.readOnly,manage:e.manage}))),i.groups=t.groups,i.accessSecretsManager=t.accessSecretsManager,i.hasMasterPassword=t.hasMasterPassword,i}))));return yield Promise.all(i)}))}}S.ɵfac=function(e){return new(e||S)(n.LFG(y.i),n.LFG(Z.t))},S.ɵprov=n.Yz7({token:S,factory:S.ɵfac,providedIn:s})},50342:(e,t,i)=\u003e{\"use strict\";i.d(t,{K:()=\u003es});class n{}class s extends n{constructor(e){super(),e\u0026\u0026(this.id=e.id,this.readOnly=e.readOnly,this.hidePasswords=e.hidePasswords,this.manage=e.manage)}}},93273:(e,t,i)=\u003e{\"use strict\";i.d(t,{_:()=\u003eo});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m]})},99022:(e,t,i)=\u003e{\"use strict\";i.d(t,{K:()=\u003em});var n=i(24852),s=i(19419),o=i(98645),r=i(24637),a=i(11512),l=i(36179),c=i(82933);function u(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",1,2),n._uU(2,\"\\n  \"),n.TgZ(3,\"bit-form-field\"),n._uU(4,\"\\n    \"),n.TgZ(5,\"bit-label\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n    \"),n._UZ(9,\"input\",3),n._uU(10,\"\\n  \"),n.qZA(),n._uU(11,\"\\n\"),n.qZA()),2\u0026e){const e=n.oxw();n.Q6J(\"formGroup\",e.formGroup),n.xp6(6),n.Oqu(n.lcZ(7,2,\"organizationName\"))}}function d(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"bit-form-field\",7),n._uU(1,\"\\n      \"),n.TgZ(2,\"bit-label\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n._UZ(6,\"input\",10),n._uU(7,\"\\n    \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,1,\"clientOwnerEmail\")))}function p(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",6),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-form-field\",7),n._uU(3,\"\\n      \"),n.TgZ(4,\"bit-label\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n      \"),n._UZ(8,\"input\",3),n._uU(9,\"\\n    \"),n.qZA(),n._uU(10,\"\\n    \"),n.TgZ(11,\"bit-form-field\",7),n._uU(12,\"\\n      \"),n.TgZ(13,\"bit-label\"),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n      \"),n._UZ(17,\"input\",8),n._uU(18,\"\\n    \"),n.qZA(),n._uU(19,\"\\n    \"),n.YNc(20,d,8,3,\"bit-form-field\",9),n._uU(21,\"\\n  \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,3,\"organizationName\")),n.xp6(9),n.Oqu(n.lcZ(15,5,\"email\")),n.xp6(6),n.Q6J(\"ngIf\",e.isProvider)}}function h(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",14),n._uU(1,\"\\n      \"),n.TgZ(2,\"bit-form-field\",7),n._uU(3,\"\\n        \"),n.TgZ(4,\"bit-label\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n        \"),n._UZ(8,\"input\",15),n._uU(9,\"\\n      \"),n.qZA(),n._uU(10,\"\\n    \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(5),n.Oqu(n.lcZ(6,1,\"businessName\")))}function g(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.TgZ(2,\"input\",11),n.NdJ(\"change\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedBusinessOwned.emit())})),n.qZA(),n._uU(3,\"\\n    \"),n.TgZ(4,\"bit-label\",12),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n    \"),n.YNc(8,h,11,3,\"div\",13),n._uU(9,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,2,\"accountOwnedBusiness\")),n.xp6(3),n.Q6J(\"ngIf\",e.formGroup.controls.businessOwned.value)}}function f(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",1,2),n._uU(2,\"\\n  \"),n.TgZ(3,\"h2\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n  \"),n.YNc(7,p,22,7,\"div\",4),n._uU(8,\"\\n  \"),n.YNc(9,g,10,4,\"div\",5),n._uU(10,\"\\n\"),n.qZA()),2\u0026e){const e=n.oxw();n.Q6J(\"formGroup\",e.formGroup),n.xp6(4),n.Oqu(n.lcZ(5,4,\"generalInformation\")),n.xp6(3),n.Q6J(\"ngIf\",e.createOrganization),n.xp6(2),n.Q6J(\"ngIf\",!e.isProvider\u0026\u0026!e.acceptingSponsorship)}}class m{constructor(){this.nameOnly=!1,this.createOrganization=!0,this.isProvider=!1,this.acceptingSponsorship=!1,this.changedBusinessOwned=new n.vpe}}m.ɵfac=function(e){return new(e||m)},m.ɵcmp=n.Xpm({type:m,selectors:[[\"app-org-info\"]],inputs:{nameOnly:\"nameOnly\",createOrganization:\"createOrganization\",isProvider:\"isProvider\",acceptingSponsorship:\"acceptingSponsorship\",formGroup:\"formGroup\"},outputs:{changedBusinessOwned:\"changedBusinessOwned\"},decls:4,vars:2,consts:[[3,\"formGroup\",4,\"ngIf\"],[3,\"formGroup\"],[\"form\",\"\"],[\"bitInput\",\"\",\"type\",\"text\",\"formControlName\",\"name\"],[\"class\",\"tw-flex tw-w-full tw-space-x-4\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"tw-flex\",\"tw-w-full\",\"tw-space-x-4\"],[1,\"tw-w-1/2\"],[\"bitInput\",\"\",\"type\",\"email\",\"formControlName\",\"billingEmail\"],[\"class\",\"tw-w-1/2\",4,\"ngIf\"],[\"bitInput\",\"\",\"type\",\"email\",\"formControlName\",\"clientOwnerEmail\"],[\"type\",\"checkbox\",\"name\",\"businessOwned\",\"formControlName\",\"businessOwned\",3,\"change\"],[\"for\",\"businessOwned\",1,\"tw-mb-3\"],[\"class\",\"tw-mt-4\",4,\"ngIf\"],[1,\"tw-mt-4\"],[\"bitInput\",\"\",\"type\",\"text\",\"formControlName\",\"businessName\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,u,12,4,\"form\",0),n._uU(1,\"\\n\"),n.YNc(2,f,11,6,\"form\",0),n._uU(3,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.nameOnly),n.xp6(2),n.Q6J(\"ngIf\",!t.nameOnly))},dependencies:[s.O5,o._Y,o.Fj,o.Wl,o.JJ,o.JL,o.sg,o.u,r.d,a.G,l.u,c.C],encapsulation:2})},98157:(e,t,i)=\u003e{\"use strict\";i.d(t,{v:()=\u003ey});var n=i(58691),s=i(54427),o=i(82558),r=i(88160),a=i(27646),l=i(70427),c=i(55637),u=i(24852),d=i(76528),p=i(85540),h=i(47244),g=i(97360),f=i(78627),m=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class y{constructor(e,t,i,n,s,o){this.cryptoService=e,this.encryptService=t,this.organizationService=i,this.organizationUserService=n,this.organizationApiService=s,this.i18nService=o}buildRecoveryKey(e,t){return m(this,void 0,void 0,(function*(){const i=yield this.organizationApiService.getKeys(e);if(null==i)throw new Error(this.i18nService.t(\"resetPasswordOrgKeysError\"));const n=a.c.fromB64ToArray(i.publicKey);if(null!=t||(t=yield this.cryptoService.getUserKey()),null==t)throw new Error(\"No user key found\");return(yield this.cryptoService.rsaEncrypt(t.key,n)).encryptedString}))}resetMasterPassword(e,t,i,n){return m(this,void 0,void 0,(function*(){const o=yield this.organizationUserService.getOrganizationUserResetPasswordDetails(n,i);if(null==o)throw new Error(this.i18nService.t(\"resetPasswordDetailsError\"));const a=yield this.cryptoService.getOrgKey(n);if(null==a)throw new Error(\"No org key found\");const u=yield this.encryptService.decryptToBytes(new l._(o.encryptedPrivateKey),a),d=yield this.cryptoService.rsaDecrypt(o.resetPasswordKey,u),p=new c.N(d),h=yield this.cryptoService.makeMasterKey(e,t.trim().toLowerCase(),o.kdf,new r.E(o.kdfIterations,o.kdfMemory,o.kdfParallelism)),g=yield this.cryptoService.hashMasterKey(e,h),f=yield this.cryptoService.encryptUserKeyWithMasterKey(h,p),m=new s.s;m.key=f[1].encryptedString,m.newMasterPasswordHash=g,yield this.organizationUserService.putOrganizationUserResetPassword(n,i,m)}))}getRotatedKeys(e){return m(this,void 0,void 0,(function*(){if(null==e)throw new Error(\"New user key is required for rotation.\");const t=yield this.organizationService.getAll();if(!t)return;const i=[];for(const n of t){if(!n.resetPasswordEnrolled)continue;const t=yield this.buildRecoveryKey(n.id,e),s=new o.u;s.organizationId=n.id,s.resetPasswordKey=t,s.masterPasswordHash=\"ignored\",i.push(s)}return i}))}postLegacyRotation(e,t){return m(this,void 0,void 0,(function*(){if(null!=t)for(const i of t)yield this.organizationUserService.putOrganizationUserResetPasswordEnrollment(i.organizationId,e,i)}))}}y.ɵfac=function(e){return new(e||y)(u.LFG(d.$),u.LFG(p.U),u.LFG(n.Mn),u.LFG(h.t),u.LFG(g.M),u.LFG(f.D))},y.ɵprov=u.Yz7({token:y,factory:y.ɵfac,providedIn:\"root\"})},96963:(e,t,i)=\u003e{\"use strict\";i.d(t,{v2:()=\u003eh,WS:()=\u003eO,bT:()=\u003eP,tc:()=\u003eM,K:()=\u003ebe,I2:()=\u003eo,UG:()=\u003eL,jR:()=\u003eJ,mD:()=\u003ez,qT:()=\u003eQ,n6:()=\u003eG});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m,n.f]});var r=i(98645);class a{}class l{display(e){return!0}}class c{constructor(){this.enabled=new r.p4(!1),this.data=null}ngOnInit(){this.enabled.setValue(this.policyResponse.enabled),null!=this.policyResponse.data\u0026\u0026this.loadData()}loadData(){var e;this.data.patchValue(null!==(e=this.policyResponse.data)\u0026\u0026void 0!==e?e:{})}buildRequestData(){return null!=this.data?this.data.value:null}buildRequest(e){const t=new a;return t.enabled=this.enabled.value,t.type=this.policy.type,t.data=this.buildRequestData(),Promise.resolve(t)}}c.ɵfac=function(e){return new(e||c)},c.ɵdir=s.lG2({type:c,inputs:{policyResponse:\"policyResponse\",policy:\"policy\"}});var u=i(20099),d=i(53707),p=i(82933);class h extends l{constructor(){super(...arguments),this.name=\"disableSend\",this.description=\"disableSendPolicyDesc\",this.type=u.Mi.DisableSend,this.component=g}}class g extends c{}g.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(g)))(t||g)}}(),g.ɵcmp=s.Xpm({type:g,selectors:[[\"policy-disable-send\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"disableSendExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var f=i(58691),m=i(27646),y=i(78627),v=i(19419),w=i(7172),b=i(24637),U=i(11512),_=i(75734),A=i(36179),Z=i(28975),x=i(30469),S=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function T(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",14),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,1,\"keyConnectorPolicyRestriction\"),\"\\n\"))}function C(e,t){if(1\u0026e\u0026\u0026s._UZ(0,\"bit-option\",15),2\u0026e){const e=t.$implicit;s.Q6J(\"value\",e.value)(\"label\",e.name)}}class O extends l{constructor(){super(...arguments),this.name=\"masterPassPolicyTitle\",this.description=\"masterPassPolicyDesc\",this.type=u.Mi.MasterPassword,this.component=k}}class k extends c{constructor(e,t,i){super(),this.formBuilder=e,this.organizationService=i,this.MinPasswordLength=m.c.minimumPasswordLength,this.data=this.formBuilder.group({minComplexity:[null],minLength:[this.MinPasswordLength,[r.kI.min(m.c.minimumPasswordLength)]],requireUpper:[!1],requireLower:[!1],requireNumbers:[!1],requireSpecial:[!1],enforceOnLogin:[!1]}),this.showKeyConnectorInfo=!1,this.passwordScores=[{name:\"-- \"+t.t(\"select\")+\" --\",value:null},{name:t.t(\"weak\")+\" (0)\",value:0},{name:t.t(\"weak\")+\" (1)\",value:1},{name:t.t(\"weak\")+\" (2)\",value:2},{name:t.t(\"good\")+\" (3)\",value:3},{name:t.t(\"strong\")+\" (4)\",value:4}]}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=\u003esuper.ngOnInit}});return S(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}function q(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"option\",32),s._uU(1),s.qZA()),2\u0026e){const e=t.$implicit;s.Q6J(\"ngValue\",e.value),s.xp6(1),s.Oqu(e.name)}}k.ɵfac=function(e){return new(e||k)(s.Y36(r.qu),s.Y36(y.D),s.Y36(f.Mn))},k.ɵcmp=s.Xpm({type:k,selectors:[[\"policy-master-password\"]],features:[s.qOj],decls:79,vars:17,consts:[[\"type\",\"info\",4,\"ngIf\"],[3,\"formGroup\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"id\",\"enabled\",3,\"formControl\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"enforceOnLogin\",\"id\",\"enforceOnLogin\"],[1,\"tw-flex\",\"tw-space-x-4\"],[1,\"tw-flex-auto\"],[\"formControlName\",\"minComplexity\",\"id\",\"minComplexity\"],[3,\"value\",\"label\",4,\"ngFor\",\"ngForOf\"],[\"bitInput\",\"\",\"type\",\"number\",\"formControlName\",\"minLength\",\"id\",\"minLength\",3,\"min\"],[1,\"!tw-mb-2\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireUpper\",\"id\",\"requireUpper\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireLower\",\"id\",\"requireLower\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireNumbers\",\"id\",\"requireNumbers\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"requireSpecial\",\"id\",\"requireSpecial\"],[\"type\",\"info\"],[3,\"value\",\"label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.YNc(0,T,3,3,\"app-callout\",0),s._uU(1,\"\\n\\n\"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n  \"),s.TgZ(4,\"bit-form-control\"),s._uU(5,\"\\n    \"),s._UZ(6,\"input\",2),s._uU(7,\"\\n    \"),s.TgZ(8,\"bit-label\"),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n  \"),s.qZA(),s._uU(12,\"\\n\\n  \"),s.TgZ(13,\"bit-form-control\"),s._uU(14,\"\\n    \"),s._UZ(15,\"input\",3),s._uU(16,\"\\n    \"),s.TgZ(17,\"bit-label\"),s._uU(18),s.ALo(19,\"i18n\"),s.qZA(),s._uU(20,\"\\n  \"),s.qZA(),s._uU(21,\"\\n\\n  \"),s.TgZ(22,\"div\",4),s._uU(23,\"\\n    \"),s.TgZ(24,\"bit-form-field\",5),s._uU(25,\"\\n      \"),s.TgZ(26,\"bit-label\"),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n      \"),s.TgZ(30,\"bit-select\",6),s._uU(31,\"\\n        \"),s.YNc(32,C,1,2,\"bit-option\",7),s._uU(33,\"\\n      \"),s.qZA(),s._uU(34,\"\\n    \"),s.qZA(),s._uU(35,\"\\n    \"),s.TgZ(36,\"bit-form-field\",5),s._uU(37,\"\\n      \"),s.TgZ(38,\"bit-label\"),s._uU(39),s.ALo(40,\"i18n\"),s.qZA(),s._uU(41,\"\\n      \"),s._UZ(42,\"input\",8),s._uU(43,\"\\n    \"),s.qZA(),s._uU(44,\"\\n  \"),s.qZA(),s._uU(45,\"\\n\\n  \"),s.TgZ(46,\"bit-form-control\",9),s._uU(47,\"\\n    \"),s._UZ(48,\"input\",10),s._uU(49,\"\\n    \"),s.TgZ(50,\"bit-label\"),s._uU(51,\"A-Z\"),s.qZA(),s._uU(52,\"\\n  \"),s.qZA(),s._uU(53,\"\\n  \"),s.TgZ(54,\"bit-form-control\",9),s._uU(55,\"\\n    \"),s._UZ(56,\"input\",11),s._uU(57,\"\\n    \"),s.TgZ(58,\"bit-label\"),s._uU(59,\"a-z\"),s.qZA(),s._uU(60,\"\\n  \"),s.qZA(),s._uU(61,\"\\n  \"),s.TgZ(62,\"bit-form-control\",9),s._uU(63,\"\\n    \"),s._UZ(64,\"input\",12),s._uU(65,\"\\n    \"),s.TgZ(66,\"bit-label\"),s._uU(67,\"0-9\"),s.qZA(),s._uU(68,\"\\n  \"),s.qZA(),s._uU(69,\"\\n  \"),s.TgZ(70,\"bit-form-control\"),s._uU(71,\"\\n    \"),s._UZ(72,\"input\",13),s._uU(73,\"\\n    \"),s.TgZ(74,\"bit-label\"),s._uU(75,\"!@#$%^\u0026*\"),s.qZA(),s._uU(76,\"\\n  \"),s.qZA(),s._uU(77,\"\\n\"),s.qZA(),s._uU(78,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"ngIf\",t.showKeyConnectorInfo),s.xp6(2),s.Q6J(\"formGroup\",t.data),s.xp6(4),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(10,9,\"turnOn\")),s.xp6(9),s.Oqu(s.lcZ(19,11,\"enforceOnLoginDesc\")),s.xp6(9),s.Oqu(s.lcZ(28,13,\"minComplexityScore\")),s.xp6(5),s.Q6J(\"ngForOf\",t.passwordScores),s.xp6(7),s.Oqu(s.lcZ(40,15,\"minLength\")),s.xp6(3),s.Q6J(\"min\",t.MinPasswordLength))},dependencies:[v.sg,v.O5,r.Fj,r.wV,r.Wl,r.JJ,r.JL,r.qQ,r.oH,r.sg,r.u,d.O,w.b,b.d,U.G,_.A,A.u,Z.H,x.x,p.C],encapsulation:2});class P extends l{constructor(){super(...arguments),this.name=\"passwordGenerator\",this.description=\"passwordGeneratorPolicyDesc\",this.type=u.Mi.PasswordGenerator,this.component=I}}class I extends c{constructor(e,t){super(),this.formBuilder=e,this.data=this.formBuilder.group({defaultType:[null],minLength:[null],useUpper:[null],useLower:[null],useNumbers:[null],useSpecial:[null],minNumbers:[null],minSpecial:[null],minNumberWords:[null],capitalize:[null],includeNumber:[null]}),this.defaultTypes=[{name:t.t(\"userPreference\"),value:null},{name:t.t(\"password\"),value:\"password\"},{name:t.t(\"passphrase\"),value:\"passphrase\"}]}}I.ɵfac=function(e){return new(e||I)(s.Y36(r.QS),s.Y36(y.D))},I.ɵcmp=s.Xpm({type:I,selectors:[[\"policy-password-generator\"]],features:[s.qOj],decls:133,vars:33,consts:[[3,\"formGroup\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"],[1,\"row\"],[1,\"col-6\",\"form-group\",\"mb-0\"],[\"for\",\"defaultType\"],[\"id\",\"defaultType\",\"name\",\"defaultType\",\"formControlName\",\"defaultType\",1,\"form-control\"],[3,\"ngValue\",4,\"ngFor\",\"ngForOf\"],[1,\"mt-4\"],[1,\"col-6\",\"form-group\"],[\"for\",\"minLength\"],[\"id\",\"minLength\",\"type\",\"number\",\"name\",\"minLength\",\"min\",\"5\",\"max\",\"128\",\"formControlName\",\"minLength\",1,\"form-control\"],[\"for\",\"minNumbers\"],[\"id\",\"minNumbers\",\"type\",\"number\",\"name\",\"minNumbers\",\"min\",\"0\",\"max\",\"9\",\"formControlName\",\"minNumbers\",1,\"form-control\"],[\"for\",\"minSpecial\"],[\"id\",\"minSpecial\",\"type\",\"number\",\"name\",\"minSpecial\",\"min\",\"0\",\"max\",\"9\",\"formControlName\",\"minSpecial\",1,\"form-control\"],[\"type\",\"checkbox\",\"id\",\"useUpper\",\"formControlName\",\"useUpper\",\"name\",\"useUpper\",1,\"form-check-input\"],[\"for\",\"useUpper\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useLower\",\"name\",\"useLower\",\"formControlName\",\"useLower\",1,\"form-check-input\"],[\"for\",\"useLower\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useNumbers\",\"name\",\"useNumbers\",\"formControlName\",\"useNumbers\",1,\"form-check-input\"],[\"for\",\"useNumbers\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"useSpecial\",\"name\",\"useSpecial\",\"formControlName\",\"useSpecial\",1,\"form-check-input\"],[\"for\",\"useSpecial\",1,\"form-check-label\"],[\"for\",\"minNumberWords\"],[\"id\",\"minNumberWords\",\"type\",\"number\",\"name\",\"minNumberWords\",\"min\",\"3\",\"max\",\"20\",\"formControlName\",\"minNumberWords\",1,\"form-control\"],[\"type\",\"checkbox\",\"id\",\"capitalize\",\"name\",\"capitalize\",\"formControlName\",\"capitalize\",1,\"form-check-input\"],[\"for\",\"capitalize\",1,\"form-check-label\"],[\"type\",\"checkbox\",\"id\",\"includeNumber\",\"name\",\"includeNumber\",\"formControlName\",\"includeNumber\",1,\"form-check-input\"],[\"for\",\"includeNumber\",1,\"form-check-label\"],[3,\"ngValue\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n    \"),s.TgZ(4,\"div\",2),s._uU(5,\"\\n      \"),s._UZ(6,\"input\",3),s._uU(7,\"\\n      \"),s.TgZ(8,\"label\",4),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n    \"),s.qZA(),s._uU(12,\"\\n  \"),s.qZA(),s._uU(13,\"\\n\\n  \"),s.TgZ(14,\"div\",5),s._uU(15,\"\\n    \"),s.TgZ(16,\"div\",6),s._uU(17,\"\\n      \"),s.TgZ(18,\"label\",7),s._uU(19),s.ALo(20,\"i18n\"),s.qZA(),s._uU(21,\"\\n      \"),s.TgZ(22,\"select\",8),s._uU(23,\"\\n        \"),s.YNc(24,q,2,2,\"option\",9),s._uU(25,\"\\n      \"),s.qZA(),s._uU(26,\"\\n    \"),s.qZA(),s._uU(27,\"\\n  \"),s.qZA(),s._uU(28,\"\\n  \"),s.TgZ(29,\"h3\",10),s._uU(30),s.ALo(31,\"i18n\"),s.qZA(),s._uU(32,\"\\n  \"),s.TgZ(33,\"div\",5),s._uU(34,\"\\n    \"),s.TgZ(35,\"div\",11),s._uU(36,\"\\n      \"),s.TgZ(37,\"label\",12),s._uU(38),s.ALo(39,\"i18n\"),s.qZA(),s._uU(40,\"\\n      \"),s._UZ(41,\"input\",13),s._uU(42,\"\\n    \"),s.qZA(),s._uU(43,\"\\n  \"),s.qZA(),s._uU(44,\"\\n  \"),s.TgZ(45,\"div\",5),s._uU(46,\"\\n    \"),s.TgZ(47,\"div\",11),s._uU(48,\"\\n      \"),s.TgZ(49,\"label\",14),s._uU(50),s.ALo(51,\"i18n\"),s.qZA(),s._uU(52,\"\\n      \"),s._UZ(53,\"input\",15),s._uU(54,\"\\n    \"),s.qZA(),s._uU(55,\"\\n    \"),s.TgZ(56,\"div\",11),s._uU(57,\"\\n      \"),s.TgZ(58,\"label\",16),s._uU(59),s.ALo(60,\"i18n\"),s.qZA(),s._uU(61,\"\\n      \"),s._UZ(62,\"input\",17),s._uU(63,\"\\n    \"),s.qZA(),s._uU(64,\"\\n  \"),s.qZA(),s._uU(65,\"\\n  \"),s.TgZ(66,\"div\",2),s._uU(67,\"\\n    \"),s._UZ(68,\"input\",18),s._uU(69,\"\\n    \"),s.TgZ(70,\"label\",19),s._uU(71,\"A-Z\"),s.qZA(),s._uU(72,\"\\n  \"),s.qZA(),s._uU(73,\"\\n  \"),s.TgZ(74,\"div\",2),s._uU(75,\"\\n    \"),s._UZ(76,\"input\",20),s._uU(77,\"\\n    \"),s.TgZ(78,\"label\",21),s._uU(79,\"a-z\"),s.qZA(),s._uU(80,\"\\n  \"),s.qZA(),s._uU(81,\"\\n  \"),s.TgZ(82,\"div\",2),s._uU(83,\"\\n    \"),s._UZ(84,\"input\",22),s._uU(85,\"\\n    \"),s.TgZ(86,\"label\",23),s._uU(87,\"0-9\"),s.qZA(),s._uU(88,\"\\n  \"),s.qZA(),s._uU(89,\"\\n  \"),s.TgZ(90,\"div\",2),s._uU(91,\"\\n    \"),s._UZ(92,\"input\",24),s._uU(93,\"\\n    \"),s.TgZ(94,\"label\",25),s._uU(95,\"!@#$%^\u0026*\"),s.qZA(),s._uU(96,\"\\n  \"),s.qZA(),s._uU(97,\"\\n  \"),s.TgZ(98,\"h3\",10),s._uU(99),s.ALo(100,\"i18n\"),s.qZA(),s._uU(101,\"\\n  \"),s.TgZ(102,\"div\",5),s._uU(103,\"\\n    \"),s.TgZ(104,\"div\",11),s._uU(105,\"\\n      \"),s.TgZ(106,\"label\",26),s._uU(107),s.ALo(108,\"i18n\"),s.qZA(),s._uU(109,\"\\n      \"),s._UZ(110,\"input\",27),s._uU(111,\"\\n    \"),s.qZA(),s._uU(112,\"\\n  \"),s.qZA(),s._uU(113,\"\\n  \"),s.TgZ(114,\"div\",2),s._uU(115,\"\\n    \"),s._UZ(116,\"input\",28),s._uU(117,\"\\n    \"),s.TgZ(118,\"label\",29),s._uU(119),s.ALo(120,\"i18n\"),s.qZA(),s._uU(121,\"\\n  \"),s.qZA(),s._uU(122,\"\\n  \"),s.TgZ(123,\"div\",2),s._uU(124,\"\\n    \"),s._UZ(125,\"input\",30),s._uU(126,\"\\n    \"),s.TgZ(127,\"label\",31),s._uU(128),s.ALo(129,\"i18n\"),s.qZA(),s._uU(130,\"\\n  \"),s.qZA(),s._uU(131,\"\\n\"),s.qZA(),s._uU(132,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"formGroup\",t.data),s.xp6(6),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(10,13,\"turnOn\")),s.xp6(10),s.Oqu(s.lcZ(20,15,\"defaultType\")),s.xp6(5),s.Q6J(\"ngForOf\",t.defaultTypes),s.xp6(6),s.Oqu(s.lcZ(31,17,\"password\")),s.xp6(8),s.Oqu(s.lcZ(39,19,\"minLength\")),s.xp6(12),s.Oqu(s.lcZ(51,21,\"minNumbers\")),s.xp6(9),s.Oqu(s.lcZ(60,23,\"minSpecial\")),s.xp6(40),s.Oqu(s.lcZ(100,25,\"passphrase\")),s.xp6(8),s.Oqu(s.lcZ(108,27,\"minimumNumberOfWords\")),s.xp6(12),s.Oqu(s.lcZ(120,29,\"capitalize\")),s.xp6(9),s.Oqu(s.lcZ(129,31,\"includeNumber\")))},dependencies:[v.sg,r.YN,r.Kr,r.Fj,r.wV,r.Wl,r.EJ,r.JJ,r.JL,r.qQ,r.Fd,r.oH,r.sg,r.u,p.C],encapsulation:2});class M extends l{constructor(){super(...arguments),this.name=\"personalOwnership\",this.description=\"personalOwnershipPolicyDesc\",this.type=u.Mi.PersonalOwnership,this.component=N}}class N extends c{}N.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(N)))(t||N)}}(),N.ɵcmp=s.Xpm({type:N,selectors:[[\"policy-personal-ownership\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"personalOwnershipExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});class L extends l{constructor(){super(...arguments),this.name=\"requireSso\",this.description=\"requireSsoPolicyDesc\",this.type=u.Mi.RequireSso,this.component=D}display(e){return e.useSso}}class D extends c{constructor(e){super(),this.i18nService=e}buildRequest(e){var t;const i=null!==(t=e.get(u.Mi.SingleOrg))\u0026\u0026void 0!==t\u0026\u0026t;if(this.enabled.value\u0026\u0026!i)throw new Error(this.i18nService.t(\"requireSsoPolicyReqError\"));return super.buildRequest(e)}}D.ɵfac=function(e){return new(e||D)(s.Y36(y.D))},D.ɵcmp=s.Xpm({type:D,selectors:[[\"policy-require-sso\"]],features:[s.qOj],decls:21,vars:13,consts:[[\"type\",\"tip\",3,\"title\"],[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s.ALo(1,\"i18n\"),s._uU(2),s.ALo(3,\"i18n\"),s.qZA(),s._uU(4,\"\\n\"),s.TgZ(5,\"app-callout\",1),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n\\n\"),s.TgZ(9,\"div\",2),s._uU(10,\"\\n  \"),s.TgZ(11,\"div\",3),s._uU(12,\"\\n    \"),s._UZ(13,\"input\",4),s._uU(14,\"\\n    \"),s.TgZ(15,\"label\",5),s._uU(16),s.ALo(17,\"i18n\"),s.qZA(),s._uU(18,\"\\n  \"),s.qZA(),s._uU(19,\"\\n\"),s.qZA(),s._uU(20,\"\\n\")),2\u0026e\u0026\u0026(s.s9C(\"title\",s.lcZ(1,5,\"prerequisite\")),s.xp6(2),s.hij(\"\\n  \",s.lcZ(3,7,\"requireSsoPolicyReq\"),\"\\n\"),s.xp6(4),s.hij(\"\\n  \",s.lcZ(7,9,\"requireSsoExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(17,11,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var E=i(24083),F=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function R(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"bit-callout\",7),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,1,\"keyConnectorPolicyRestriction\"),\"\\n\"))}class J extends l{constructor(){super(...arguments),this.name=\"accountRecoveryPolicy\",this.description=\"accountRecoveryPolicyDesc\",this.type=u.Mi.ResetPassword,this.component=Y}display(e){return e.useResetPassword}}class Y extends c{constructor(e,t){super(),this.formBuilder=e,this.organizationService=t,this.data=this.formBuilder.group({autoEnrollEnabled:!1}),this.showKeyConnectorInfo=!1}ngOnInit(){const e=Object.create(null,{ngOnInit:{get:()=\u003esuper.ngOnInit}});return F(this,void 0,void 0,(function*(){e.ngOnInit.call(this);const t=yield this.organizationService.get(this.policyResponse.organizationId);this.showKeyConnectorInfo=t.keyConnectorEnabled}))}}Y.ɵfac=function(e){return new(e||Y)(s.Y36(r.qu),s.Y36(f.Mn))},Y.ɵcmp=s.Xpm({type:Y,selectors:[[\"policy-reset-password\"]],features:[s.qOj],decls:32,vars:18,consts:[[\"type\",\"info\",4,\"ngIf\"],[\"type\",\"success\",\"icon\",\"bwi-lightbulb\",3,\"title\"],[\"type\",\"warning\"],[1,\"!tw-mb-1\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"id\",\"enabled\",3,\"formControl\"],[3,\"formGroup\"],[\"type\",\"checkbox\",\"bitCheckbox\",\"\",\"formControlName\",\"autoEnrollEnabled\",\"id\",\"autoEnrollEnabled\"],[\"type\",\"info\"]],template:function(e,t){1\u0026e\u0026\u0026(s.YNc(0,R,3,3,\"bit-callout\",0),s._uU(1,\"\\n\\n\"),s.TgZ(2,\"bit-callout\",1),s.ALo(3,\"i18n\"),s._uU(4),s.ALo(5,\"i18n\"),s.qZA(),s._uU(6,\"\\n\\n\"),s.TgZ(7,\"bit-callout\",2),s._uU(8),s.ALo(9,\"i18n\"),s.qZA(),s._uU(10,\"\\n\\n\"),s.TgZ(11,\"bit-form-control\",3),s._uU(12,\"\\n  \"),s._UZ(13,\"input\",4),s._uU(14,\"\\n  \"),s.TgZ(15,\"bit-label\"),s._uU(16),s.ALo(17,\"i18n\"),s.qZA(),s._uU(18,\"\\n\"),s.qZA(),s._uU(19,\"\\n\\n\"),s.ynx(20,5),s._uU(21,\"\\n  \"),s.TgZ(22,\"bit-form-control\",3),s._uU(23,\"\\n    \"),s._UZ(24,\"input\",6),s._uU(25,\"\\n    \"),s.TgZ(26,\"bit-label\"),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n  \"),s.qZA(),s._uU(30,\"\\n\"),s.BQk(),s._uU(31,\"\\n\")),2\u0026e\u0026\u0026(s.Q6J(\"ngIf\",t.showKeyConnectorInfo),s.xp6(2),s.Q6J(\"title\",s.lcZ(3,8,\"prerequisite\")),s.xp6(2),s.hij(\"\\n  \",s.lcZ(5,10,\"accountRecoverySingleOrgRequirementDesc\"),\"\\n\"),s.xp6(4),s.hij(\"\\n  \",s.lcZ(9,12,\"accountRecoveryPolicyWarning\"),\"\\n\"),s.xp6(5),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(17,14,\"turnOn\")),s.xp6(4),s.Q6J(\"formGroup\",t.data),s.xp6(7),s.Oqu(s.lcZ(28,16,\"resetPasswordPolicyAutoEnrollCheckbox\")))},dependencies:[v.O5,r.Wl,r.JJ,r.JL,r.oH,r.sg,r.u,E.O,w.b,_.A,A.u,p.C],encapsulation:2});class z extends l{constructor(){super(...arguments),this.name=\"sendOptions\",this.description=\"sendOptionsPolicyDesc\",this.type=u.Mi.SendOptions,this.component=K}}class K extends c{constructor(e){super(),this.formBuilder=e,this.data=this.formBuilder.group({disableHideEmail:!1})}}K.ɵfac=function(e){return new(e||K)(s.Y36(r.QS))},K.ɵcmp=s.Xpm({type:K,selectors:[[\"policy-send-options\"]],features:[s.qOj],decls:32,vars:14,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"],[3,\"formGroup\"],[1,\"mt-4\"],[\"type\",\"checkbox\",\"id\",\"disableHideEmail\",\"name\",\"DisableHideEmail\",\"formControlName\",\"disableHideEmail\",1,\"form-check-input\"],[\"for\",\"disableHideEmail\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\\n\"),s.TgZ(16,\"div\",5),s._uU(17,\"\\n  \"),s.TgZ(18,\"h3\",6),s._uU(19),s.ALo(20,\"i18n\"),s.qZA(),s._uU(21,\"\\n  \"),s.TgZ(22,\"div\",2),s._uU(23,\"\\n    \"),s._UZ(24,\"input\",7),s._uU(25,\"\\n    \"),s.TgZ(26,\"label\",8),s._uU(27),s.ALo(28,\"i18n\"),s.qZA(),s._uU(29,\"\\n  \"),s.qZA(),s._uU(30,\"\\n\"),s.qZA(),s._uU(31,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,6,\"sendOptionsExemption\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,8,\"turnOn\")),s.xp6(5),s.Q6J(\"formGroup\",t.data),s.xp6(3),s.Oqu(s.lcZ(20,10,\"options\")),s.xp6(8),s.Oqu(s.lcZ(28,12,\"disableHideEmail\")))},dependencies:[r.Wl,r.JJ,r.JL,r.oH,r.sg,r.u,d.O,p.C],encapsulation:2});class Q extends l{constructor(){super(...arguments),this.name=\"singleOrg\",this.description=\"singleOrgDesc\",this.type=u.Mi.SingleOrg,this.component=B}}class B extends c{constructor(e){super(),this.i18nService=e}buildRequest(e){var t,i;if(!this.enabled.value){if(null!==(t=e.get(u.Mi.RequireSso))\u0026\u0026void 0!==t\u0026\u0026t)throw new Error(this.i18nService.t(\"disableRequiredError\",this.i18nService.t(\"requireSso\")));if(null!==(i=e.get(u.Mi.MaximumVaultTimeout))\u0026\u0026void 0!==i\u0026\u0026i)throw new Error(this.i18nService.t(\"disableRequiredError\",this.i18nService.t(\"maximumVaultTimeoutLabel\")))}return super.buildRequest(e)}}B.ɵfac=function(e){return new(e||B)(s.Y36(y.D))},B.ɵcmp=s.Xpm({type:B,selectors:[[\"policy-single-org\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"singleOrgPolicyWarning\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});class G extends l{constructor(){super(...arguments),this.name=\"twoStepLoginPolicyTitle\",this.description=\"twoStepLoginPolicyDesc\",this.type=u.Mi.TwoFactorAuthentication,this.component=V}}class V extends c{}V.ɵfac=function(){let e;return function(t){return(e||(e=s.n5z(V)))(t||V)}}(),V.ɵcmp=s.Xpm({type:V,selectors:[[\"policy-two-factor-authentication\"]],features:[s.qOj],decls:16,vars:7,consts:[[\"type\",\"warning\"],[1,\"form-group\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"enabled\",\"name\",\"Enabled\",1,\"form-check-input\",3,\"formControl\"],[\"for\",\"enabled\",1,\"form-check-label\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"app-callout\",0),s._uU(1),s.ALo(2,\"i18n\"),s.qZA(),s._uU(3,\"\\n\\n\"),s.TgZ(4,\"div\",1),s._uU(5,\"\\n  \"),s.TgZ(6,\"div\",2),s._uU(7,\"\\n    \"),s._UZ(8,\"input\",3),s._uU(9,\"\\n    \"),s.TgZ(10,\"label\",4),s._uU(11),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n  \"),s.qZA(),s._uU(14,\"\\n\"),s.qZA(),s._uU(15,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(1),s.hij(\"\\n  \",s.lcZ(2,3,\"twoStepLoginPolicyWarning\"),\"\\n\"),s.xp6(7),s.Q6J(\"formControl\",t.enabled),s.xp6(3),s.Oqu(s.lcZ(12,5,\"turnOn\")))},dependencies:[r.Wl,r.JJ,r.oH,d.O,p.C],encapsulation:2});var j=i(19887),H=i(77494),$=i(41489),W=i(50137),X=i(99721),ee=i(66459),te=i(33245),ie=i(24610),ne=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const se=[\"policyForm\"];function oe(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",8),s._uU(1,\"\\n          \"),s._UZ(2,\"i\",16),s.ALo(3,\"i18n\"),s._uU(4,\"\\n          \"),s.TgZ(5,\"span\",17),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n        \"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(2),s.s9C(\"title\",s.lcZ(3,2,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(7,4,\"loading\")))}function re(e,t){}class ae{constructor(e,t,i,n,o,r){this.policyApiService=e,this.i18nService=t,this.platformUtilsService=i,this.componentFactoryResolver=n,this.cdr=o,this.logService=r,this.policiesEnabledMap=new Map,this.onSavedPolicy=new s.vpe,this.policyType=u.Mi,this.loading=!0,this.enabled=!1}ngAfterViewInit(){return ne(this,void 0,void 0,(function*(){yield this.load(),this.loading=!1;const e=this.componentFactoryResolver.resolveComponentFactory(this.policy.component);this.policyComponent=this.policyFormRef.createComponent(e).instance,this.policyComponent.policy=this.policy,this.policyComponent.policyResponse=this.policyResponse,this.cdr.detectChanges()}))}load(){return ne(this,void 0,void 0,(function*(){try{this.policyResponse=yield this.policyApiService.getPolicy(this.organizationId,this.policy.type)}catch(e){if(404!==e.statusCode)throw e;this.policyResponse=new $.j({Enabled:!1})}}))}submit(){return ne(this,void 0,void 0,(function*(){let e;try{e=yield this.policyComponent.buildRequest(this.policiesEnabledMap)}catch(t){return void this.platformUtilsService.showToast(\"error\",null,t.message)}try{this.formPromise=this.policyApiService.putPolicy(this.organizationId,this.policy.type,e),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"editedPolicyId\",this.i18nService.t(this.policy.name))),this.onSavedPolicy.emit()}catch(t){this.logService.error(t)}}))}}ae.ɵfac=function(e){return new(e||ae)(s.Y36(W.P),s.Y36(y.D),s.Y36(X.P),s.Y36(s._Vd),s.Y36(s.sBO),s.Y36(ee.$))},ae.ɵcmp=s.Xpm({type:ae,selectors:[[\"app-policy-edit\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026s.Gf(se,7,s.s_b),2\u0026e){let e;s.iGM(e=s.CRH())\u0026\u0026(t.policyFormRef=e.first)}},inputs:{policy:\"policy\",organizationId:\"organizationId\",policiesEnabledMap:\"policiesEnabledMap\"},outputs:{onSavedPolicy:\"onSavedPolicy\"},decls:57,vars:25,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"policiesEditTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\"],[\"ngNativeValidate\",\"\",1,\"modal-content\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-header\"],[\"id\",\"policiesEditTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"class\",\"modal-body\",4,\"ngIf\"],[3,\"hidden\"],[\"policyForm\",\"\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"]],template:function(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"div\",1),s._uU(3,\"\\n    \"),s.TgZ(4,\"form\",2,3),s.NdJ(\"ngSubmit\",(function(){return t.submit()})),s._uU(6,\"\\n      \"),s.TgZ(7,\"div\",4),s._uU(8,\"\\n        \"),s.TgZ(9,\"h1\",5),s._uU(10),s.ALo(11,\"i18n\"),s.ALo(12,\"i18n\"),s.qZA(),s._uU(13,\"\\n        \"),s.TgZ(14,\"button\",6),s.ALo(15,\"i18n\"),s._uU(16,\"\\n          \"),s.TgZ(17,\"span\",7),s._uU(18,\"×\"),s.qZA(),s._uU(19,\"\\n        \"),s.qZA(),s._uU(20,\"\\n      \"),s.qZA(),s._uU(21,\"\\n\\n      \"),s.TgZ(22,\"div\",8),s._uU(23,\"\\n        \"),s.YNc(24,oe,9,6,\"div\",9),s._uU(25,\"\\n        \"),s.TgZ(26,\"div\",10),s._uU(27,\"\\n          \"),s.TgZ(28,\"p\"),s._uU(29),s.ALo(30,\"i18n\"),s.qZA(),s._uU(31,\"\\n          \"),s.YNc(32,re,0,0,\"ng-template\",null,11,s.W1O),s._uU(34,\"\\n        \"),s.qZA(),s._uU(35,\"\\n      \"),s.qZA(),s._uU(36,\"\\n      \"),s.TgZ(37,\"div\",12),s._uU(38,\"\\n        \"),s.TgZ(39,\"button\",13),s._uU(40,\"\\n          \"),s._UZ(41,\"i\",14),s.ALo(42,\"i18n\"),s._uU(43,\"\\n          \"),s.TgZ(44,\"span\"),s._uU(45),s.ALo(46,\"i18n\"),s.qZA(),s._uU(47,\"\\n        \"),s.qZA(),s._uU(48,\"\\n        \"),s.TgZ(49,\"button\",15),s._uU(50),s.ALo(51,\"i18n\"),s.qZA(),s._uU(52,\"\\n      \"),s.qZA(),s._uU(53,\"\\n    \"),s.qZA(),s._uU(54,\"\\n  \"),s.qZA(),s._uU(55,\"\\n\"),s.qZA(),s._uU(56,\"\\n\")),2\u0026e){const e=s.MAs(5);s.xp6(4),s.Q6J(\"appApiAction\",t.formPromise),s.xp6(6),s.AsE(\"\\n          \",s.lcZ(11,11,\"editPolicy\"),\" - \",s.lcZ(12,13,t.policy.name),\"\\n        \"),s.xp6(4),s.s9C(\"appA11yTitle\",s.lcZ(15,15,\"close\")),s.xp6(10),s.Q6J(\"ngIf\",t.loading),s.xp6(2),s.Q6J(\"hidden\",t.loading),s.xp6(3),s.Oqu(s.lcZ(30,17,t.policy.description)),s.xp6(10),s.Q6J(\"disabled\",e.loading),s.xp6(2),s.s9C(\"title\",s.lcZ(42,19,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(46,21,\"save\")),s.xp6(5),s.hij(\"\\n          \",s.lcZ(51,23,\"cancel\"),\"\\n        \")}},dependencies:[v.O5,r.JL,r.F,te.B,ie.b,p.C],encapsulation:2});var le=i(75557),ce=i(28753),ue=i(2051),de=i(66385),pe=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const he=[\"editTemplate\"];function ge(e,t){1\u0026e\u0026\u0026(s.ynx(0),s._uU(1,\"\\n  \"),s._UZ(2,\"i\",4),s.ALo(3,\"i18n\"),s._uU(4,\"\\n  \"),s.TgZ(5,\"span\",5),s._uU(6),s.ALo(7,\"i18n\"),s.qZA(),s._uU(8,\"\\n\"),s.BQk()),2\u0026e\u0026\u0026(s.xp6(2),s.s9C(\"title\",s.lcZ(3,2,\"loading\")),s.xp6(4),s.Oqu(s.lcZ(7,4,\"loading\")))}function fe(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"span\",11),s._uU(1),s.ALo(2,\"i18n\"),s.qZA()),2\u0026e\u0026\u0026(s.xp6(1),s.Oqu(s.lcZ(2,1,\"on\")))}function me(e,t){if(1\u0026e){const e=s.EpF();s.TgZ(0,\"td\"),s._uU(1,\"\\n        \"),s.TgZ(2,\"a\",8),s.NdJ(\"click\",(function(){s.CHM(e);const t=s.oxw().$implicit,i=s.oxw(2);return s.KtG(i.edit(t))})),s._uU(3),s.ALo(4,\"i18n\"),s.qZA(),s._uU(5,\"\\n        \"),s.YNc(6,fe,3,3,\"span\",9),s._uU(7,\"\\n        \"),s.TgZ(8,\"small\",10),s._uU(9),s.ALo(10,\"i18n\"),s.qZA(),s._uU(11,\"\\n      \"),s.qZA()}if(2\u0026e){const e=s.oxw().$implicit,t=s.oxw(2);s.xp6(3),s.Oqu(s.lcZ(4,3,e.name)),s.xp6(3),s.Q6J(\"ngIf\",t.policiesEnabledMap.get(e.type)),s.xp6(3),s.Oqu(s.lcZ(10,5,e.description))}}function ye(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"tr\"),s._uU(1,\"\\n      \"),s.YNc(2,me,12,7,\"td\",1),s._uU(3,\"\\n    \"),s.qZA()),2\u0026e){const e=t.$implicit,i=s.oxw(2);s.xp6(2),s.Q6J(\"ngIf\",e.display(i.organization))}}function ve(e,t){if(1\u0026e\u0026\u0026(s.TgZ(0,\"table\",6),s._uU(1,\"\\n  \"),s.TgZ(2,\"tbody\"),s._uU(3,\"\\n    \"),s.YNc(4,ye,4,1,\"tr\",7),s._uU(5,\"\\n  \"),s.qZA(),s._uU(6,\"\\n\"),s.qZA()),2\u0026e){const e=s.oxw();s.xp6(4),s.Q6J(\"ngForOf\",e.policies)}}function we(e,t){}class be{constructor(e,t,i,n,s,o){this.route=e,this.modalService=t,this.organizationService=i,this.policyApiService=n,this.policyListService=s,this.router=o,this.loading=!0,this.policiesEnabledMap=new Map}ngOnInit(){return pe(this,void 0,void 0,(function*(){this.route.parent.parent.params.subscribe((e=\u003epe(this,void 0,void 0,(function*(){this.organizationId=e.organizationId,this.organization=yield this.organizationService.get(this.organizationId),this.policies=this.policyListService.getPolicies(),yield this.load(),this.route.queryParams.pipe((0,j.P)()).subscribe((e=\u003epe(this,void 0,void 0,(function*(){if(null!=e.policyId){const t=e.policyId;for(const e of this.orgPolicies)if(e.id===t){for(let t=0;t\u003cthis.policies.length;t++)if(this.policies[t].type===e.type){this.edit(this.policies[t]);break}break}}}))))}))))}))}load(){return pe(this,void 0,void 0,(function*(){const e=yield this.policyApiService.getPolicies(this.organizationId);this.orgPolicies=null!=e.data\u0026\u0026e.data.length\u003e0?e.data:[],this.orgPolicies.forEach((e=\u003e{this.policiesEnabledMap.set(e.type,e.enabled)})),this.loading=!1}))}edit(e){return pe(this,void 0,void 0,(function*(){const[t]=yield this.modalService.openViewRef(ae,this.editModalRef,(i=\u003e{i.policy=e,i.organizationId=this.organizationId,i.policiesEnabledMap=this.policiesEnabledMap,i.onSavedPolicy.subscribe((()=\u003e{t.close(),this.load()}))}))}))}}be.ɵfac=function(e){return new(e||be)(s.Y36(le.gz),s.Y36(H.Z),s.Y36(f.Mn),s.Y36(W.P),s.Y36(ce.x),s.Y36(le.F0))},be.ɵcmp=s.Xpm({type:be,selectors:[[\"app-org-policies\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026s.Gf(he,7,s.s_b),2\u0026e){let e;s.iGM(e=s.CRH())\u0026\u0026(t.editModalRef=e.first)}},decls:14,vars:5,consts:[[1,\"page-header\",\"d-flex\"],[4,\"ngIf\"],[\"class\",\"table table-hover table-list\",4,\"ngIf\"],[\"editTemplate\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"table\",\"table-hover\",\"table-list\"],[4,\"ngFor\",\"ngForOf\"],[\"href\",\"#\",\"appStopClick\",\"\",3,\"click\"],[\"bitBadge\",\"\",\"variant\",\"success\",4,\"ngIf\"],[1,\"text-muted\",\"d-block\"],[\"bitBadge\",\"\",\"variant\",\"success\"]],template:function(e,t){1\u0026e\u0026\u0026(s.TgZ(0,\"div\",0),s._uU(1,\"\\n  \"),s.TgZ(2,\"h1\"),s._uU(3),s.ALo(4,\"i18n\"),s.qZA(),s._uU(5,\"\\n\"),s.qZA(),s._uU(6,\"\\n\"),s.YNc(7,ge,9,6,\"ng-container\",1),s._uU(8,\"\\n\"),s.YNc(9,ve,7,1,\"table\",2),s._uU(10,\"\\n\"),s.YNc(11,we,0,0,\"ng-template\",null,3,s.W1O),s._uU(13,\"\\n\")),2\u0026e\u0026\u0026(s.xp6(3),s.Oqu(s.lcZ(4,3,\"policies\")),s.xp6(4),s.Q6J(\"ngIf\",t.loading),s.xp6(2),s.Q6J(\"ngIf\",!t.loading))},dependencies:[v.sg,v.O5,ue.O,de.l,p.C],encapsulation:2})},13159:(e,t,i)=\u003e{\"use strict\";i.d(t,{_P:()=\u003en,j1:()=\u003eE});var n,s=i(65017),o=i(98645),r=i(54019),a=i(33031),l=i(68362),c=i(58691),u=i(27646),d=i(89474),p=i(4519),h=i(98694),g=i(24852),f=i(78627),m=i(99721),y=i(42304),v=i(92236),w=i(97360),b=i(19419),U=i(53707),_=i(46246),A=i(36338),Z=i(81974),x=i(29465),S=i(18362),T=i(82933),C=i(94516),O=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function k(e,t){1\u0026e\u0026\u0026(g.ynx(0),g._uU(1),g.ALo(2,\"i18n\"),g.BQk()),2\u0026e\u0026\u0026(g.xp6(1),g.hij(\"\\n          \",g.lcZ(2,1,\"orgCreatedSponsorshipInvalid\"),\"\\n        \"))}function q(e,t){if(1\u0026e\u0026\u0026(g.TgZ(0,\"li\"),g._uU(1),g.ALo(2,\"i18n\"),g.qZA()),2\u0026e){const e=t.$implicit;g.xp6(1),g.AsE(\"\\n                \",e.count,\" \",g.lcZ(2,2,e.localizationKey),\"\\n              \")}}function P(e,t){if(1\u0026e\u0026\u0026(g.ynx(0),g._uU(1),g.ALo(2,\"i18n\"),g.TgZ(3,\"ul\"),g._uU(4,\"\\n              \"),g.YNc(5,q,3,4,\"li\",13),g._uU(6,\"\\n            \"),g.qZA(),g._uU(7),g.ALo(8,\"i18n\"),g.BQk()),2\u0026e){const e=g.oxw(2);g.xp6(1),g.hij(\"\\n            \",g.xi3(2,3,\"deletingOrganizationContentWarning\",null==e.organization?null:e.organization.name),\"\\n            \"),g.xp6(4),g.Q6J(\"ngForOf\",e.organizationContentSummary.itemCountByType),g.xp6(2),g.hij(\"\\n            \",g.lcZ(8,6,\"deletingOrganizationActiveUserAccountsWarning\"),\"\\n          \")}}function I(e,t){if(1\u0026e\u0026\u0026(g._uU(0,\"\\n          \"),g.YNc(1,P,9,8,\"ng-container\",12),g._uU(2,\"\\n        \")),2\u0026e){const e=g.oxw();g.xp6(1),g.Q6J(\"ngIf\",e.organizationContentSummary.totalItemCount\u003e0)}}class M{getKey(e){return 1==e?this.singular:this.plural}constructor(e,t){this.singular=e,this.plural=t}}class N{get localizationKey(){return this.localizationKeyOptions.getKey(this.count)}constructor(e,t){this.count=e,this.localizationKeyOptions=t}}class L{constructor(){this.totalItemCount=0,this.itemCountByType=[]}}!function(e){e.Deleted=\"deleted\",e.Canceled=\"canceled\"}(n||(n={}));class D{constructor(e,t,i,s,a,l,c,u,d){this.params=e,this.dialogRef=t,this.i18nService=i,this.platformUtilsService=s,this.userVerificationService=a,this.cipherService=l,this.organizationService=c,this.organizationApiService=u,this.formBuilder=d,this.destroy$=new r.x,this.deleteOrganizationRequestType=\"RegularDelete\",this.organizationContentSummary=new L,this.formGroup=this.formBuilder.group({secret:new o.NI(null,[o.kI.required])}),this.submit=()=\u003eO(this,void 0,void 0,(function*(){yield this.userVerificationService.buildRequest(this.formGroup.value.secret).then((e=\u003ethis.organizationApiService.delete(this.organization.id,e))),this.platformUtilsService.showToast(\"success\",this.i18nService.t(\"organizationDeleted\"),this.i18nService.t(\"organizationDeletedDesc\")),this.dialogRef.close(n.Deleted)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnInit(){return O(this,void 0,void 0,(function*(){this.deleteOrganizationRequestType=this.params.requestType,(0,a.a)([this.organizationService.get$(this.params.organizationId),this.cipherService.getAllFromApiForOrganization(this.params.organizationId)]).pipe((0,l.R)(this.destroy$)).subscribe((([e,t])=\u003e{this.organization=e,this.organizationContentSummary=this.buildOrganizationContentSummary(t),this.loaded=!0}))}))}buildOrganizationContentSummary(e){const t=new L,i=e.filter((e=\u003enull==e.deletedDate));if(i.length\u003c1)return t;t.totalItemCount=i.length;for(const n of u.c.iterateEnum(d.Ou)){const e=this.getOrganizationItemCountByType(i,n);e\u003e0\u0026\u0026t.itemCountByType.push(new N(e,this.getOrganizationItemLocalizationKeysByType(d.Ou[n])))}return t}getOrganizationItemCountByType(e,t){return e.filter((e=\u003ee.type==t)).length}getOrganizationItemLocalizationKeysByType(e){return new M(`type${e}`,`type${e}Plural`)}}function E(e,t){return e.open(D,t)}D.ɵfac=function(e){return new(e||D)(g.Y36(s.Kt),g.Y36(s.zj),g.Y36(f.D),g.Y36(m.P),g.Y36(y.i),g.Y36(v.u),g.Y36(c.Mn),g.Y36(w.M),g.Y36(o.qu))},D.ɵcmp=g.Xpm({type:D,selectors:[[\"app-delete-organization\"]],standalone:!0,features:[g.jDz],decls:39,vars:19,consts:[[3,\"formGroup\",\"bitSubmit\"],[3,\"loading\"],[\"bitDialogTitle\",\"\"],[\"bitDialogContent\",\"\"],[\"type\",\"warning\"],[\"id\",\"organizationDeleteDescription\"],[4,\"ngIf\",\"ngIfElse\"],[\"regularDelete\",\"\"],[\"formControlName\",\"secret\"],[\"bitDialogFooter\",\"\"],[\"type\",\"submit\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"danger\",3,\"disabled\"],[\"type\",\"button\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"secondary\",\"bitDialogClose\",\"\"],[4,\"ngIf\"],[4,\"ngFor\",\"ngForOf\"]],template:function(e,t){if(1\u0026e\u0026\u0026(g.TgZ(0,\"form\",0),g._uU(1,\"\\n  \"),g.TgZ(2,\"bit-dialog\",1),g._uU(3,\"\\n    \"),g.TgZ(4,\"span\",2),g._uU(5),g.ALo(6,\"i18n\"),g.qZA(),g._uU(7,\"\\n    \"),g.TgZ(8,\"div\",3),g._uU(9,\"\\n      \"),g.TgZ(10,\"app-callout\",4),g._uU(11),g.ALo(12,\"i18n\"),g.qZA(),g._uU(13,\"\\n      \"),g.TgZ(14,\"p\",5),g._uU(15,\"\\n        \"),g.YNc(16,k,3,3,\"ng-container\",6),g._uU(17,\"\\n        \"),g.YNc(18,I,3,1,\"ng-template\",null,7,g.W1O),g._uU(20,\"\\n      \"),g.qZA(),g._uU(21,\"\\n      \"),g.TgZ(22,\"app-user-verification\",8),g._uU(23,\" \"),g.qZA(),g._uU(24,\"\\n    \"),g.qZA(),g._uU(25,\"\\n    \"),g.TgZ(26,\"div\",9),g._uU(27,\"\\n      \"),g.TgZ(28,\"button\",10),g._uU(29),g.ALo(30,\"i18n\"),g.qZA(),g._uU(31,\"\\n      \"),g.TgZ(32,\"button\",11),g._uU(33),g.ALo(34,\"i18n\"),g.qZA(),g._uU(35,\"\\n    \"),g.qZA(),g._uU(36,\"\\n  \"),g.qZA(),g._uU(37,\"\\n\"),g.qZA(),g._uU(38,\"\\n\")),2\u0026e){const e=g.MAs(19);g.Q6J(\"formGroup\",t.formGroup)(\"bitSubmit\",t.submit),g.xp6(2),g.Q6J(\"loading\",!t.loaded),g.xp6(3),g.Oqu(g.lcZ(6,10,\"deleteOrganization\")),g.xp6(6),g.Oqu(g.xi3(12,12,\"deletingOrganizationIsPermanentWarning\",null==t.organization?null:t.organization.name)),g.xp6(5),g.Q6J(\"ngIf\",\"InvalidFamiliesForEnterprise\"===t.deleteOrganizationRequestType)(\"ngIfElse\",e),g.xp6(12),g.Q6J(\"disabled\",!t.loaded),g.xp6(1),g.hij(\"\\n        \",g.lcZ(30,15,\"deleteOrganization\"),\"\\n      \"),g.xp6(4),g.hij(\"\\n        \",g.lcZ(34,17,\"cancel\"),\"\\n      \")}},dependencies:[h.m,b.sg,b.O5,o._Y,o.JJ,o.JL,o.sg,o.u,U.O,_.b,A.u,Z.r,x.a,S.f,T.C,p.Zn,C.W],encapsulation:2})},90054:(e,t,i)=\u003e{\"use strict\";i.d(t,{f:()=\u003eue,R:()=\u003ece});var n=i(24852),s=i(98645),o=i(54019),r=i(68362);function a(e,t,i){let n=0,s=e.length||0,o=-1,r=0;for(;n\u003cs;)if(o=Math.floor((n+s)/2),r=i(e[o],t),r\u003c0)n=o+1;else{if(!(r\u003e0))return o;s=o}return n}class l{constructor(e,t){this.controlFactory=e,this.compareFn=t,this.allItems=[],this.selectedItems=[],this.deselectedItems=[],this.formArray=new s.Oe([])}selectItems(e,t){for(const i of e)this.selectItem(i,t)}deselectItems(e){for(const t of e)this.deselectItem(t)}deselectAll(){this.formArray.clear(),this.selectedItems=[],this.deselectedItems=[...this.allItems]}selectItem(e,t){const i=this.deselectedItems.findIndex((t=\u003et.id===e));if(-1===i)return;const n=this.deselectedItems[i];this.deselectedItems=[...this.deselectedItems.slice(0,i),...this.deselectedItems.slice(i+1)];const s=a(this.selectedItems,n,this.compareFn);this.selectedItems=[...this.selectedItems.slice(0,s),n,...this.selectedItems.slice(s)];const o=this.controlFactory(n);o.patchValue(Object.assign({id:e},t)),this.formArray.insert(s,o)}deselectItem(e){const t=this.selectedItems.findIndex((t=\u003et.id===e));if(-1===t)return;const i=this.selectedItems[t];this.selectedItems=[...this.selectedItems.slice(0,t),...this.selectedItems.slice(t+1)],this.formArray.removeAt(t);const n=a(this.deselectedItems,i,this.compareFn);this.deselectedItems=[...this.deselectedItems.slice(0,n),i,...this.deselectedItems.slice(n)]}populateItems(e,t=[]){this.formArray.clear(),this.allItems=[...e].sort(this.compareFn),this.selectedItems=[],this.deselectedItems=[...this.allItems];for(const i of t)this.selectItem(i.id,i)}forEachControlItem(e){for(let t=0;t\u003cthis.formArray.length;t++)e(this.formArray.at(t),this.selectedItems[t])}}var c=i(34632),u=i(78627),d=i(19419),p=i(33245),h=i(14970),g=i(66385),f=i(24637),m=i(11512),y=i(8776),v=i(12546),w=i(23182),b=i(49399);function U(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n._UZ(1,\"i\",4),n._uU(2,\"\\n  \")),2\u0026e){const e=n.oxw();n.xp6(1),n.Q6J(\"title\",e.loadingText)}}function _(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"i\",8),2\u0026e){const e=n.oxw().item;n.Gre(\"tw-mr-1 bwi bwi-fw \",e.icon,\"\")}}function A(e,t){if(1\u0026e){const e=n.EpF();n._uU(0,\"\\n    \"),n.TgZ(1,\"button\",5),n.NdJ(\"click\",(function(){const t=n.CHM(e),i=t.item,s=t.clear;return n.KtG(s(i))})),n._uU(2,\"\\n      \"),n.YNc(3,_,1,3,\"i\",6),n._uU(4),n._UZ(5,\"i\",7),n._uU(6,\"\\n    \"),n.qZA(),n._uU(7,\"\\n  \")}if(2\u0026e){const e=t.item,i=n.oxw();n.xp6(1),n.Q6J(\"disabled\",i.disabled),n.xp6(2),n.Q6J(\"ngIf\",null!=e.icon),n.xp6(1),n.hij(\"\\n      \",e.labelName,\"\\n      \")}}function Z(e,t){1\u0026e\u0026\u0026n._UZ(0,\"i\",14)}function x(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"i\",8),2\u0026e){const e=n.oxw().item;n.Gre(\"bwi bwi-fw \",e.icon,\"\")}}function S(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n.TgZ(1,\"div\",9),n._uU(2,\"\\n      \"),n.TgZ(3,\"div\",10),n._uU(4,\"\\n        \"),n.YNc(5,Z,1,0,\"i\",11),n._uU(6,\"\\n      \"),n.qZA(),n._uU(7,\"\\n      \"),n.TgZ(8,\"div\",12),n._uU(9,\"\\n        \"),n.YNc(10,x,1,3,\"i\",6),n._uU(11,\"\\n      \"),n.qZA(),n._uU(12,\"\\n      \"),n.TgZ(13,\"div\",13),n._uU(14),n.qZA(),n._uU(15,\"\\n    \"),n.qZA(),n._uU(16,\"\\n  \")),2\u0026e){const e=t.item,i=n.oxw();n.xp6(5),n.Q6J(\"ngIf\",i.isSelected(e)),n.xp6(5),n.Q6J(\"ngIf\",null!=e.icon),n.xp6(4),n.hij(\"\\n        \",e.listName,\"\\n      \")}}let T=0;class C{constructor(e,t){this.i18nService=e,this.ngControl=t,this.removeSelectedItems=!1,this.loading=!1,this.disabled=!1,this.searchInputId=\"search-input-\"+T++,this.onItemsConfirmed=new n.vpe,this.keyDown=e=\u003e!(!this.select.isOpen\u0026\u0026\"Enter\"===e.key\u0026\u0026!(0,y.Vb)(e))\u0026\u0026(!(this.select.isOpen\u0026\u0026\"Escape\"===e.key\u0026\u0026!(0,y.Vb)(e))||(this.selectedItems=[],this.select.close(),e.stopPropagation(),!1)),this.id=\"bit-multi-select-\"+T++,null!=t\u0026\u0026(t.valueAccessor=this)}ngOnInit(){var e;this.placeholder=null!==(e=this.placeholder)\u0026\u0026void 0!==e?e:this.i18nService.t(\"multiSelectPlaceholder\"),this.loadingText=this.i18nService.t(\"multiSelectLoading\")}isSelected(e){var t;return null!=(null===(t=this.selectedItems)||void 0===t?void 0:t.find((t=\u003et.id===e.id)))}onDropdownClosed(){if(null!=this.selectedItems\u0026\u00260!=this.selectedItems.length\u0026\u0026(this.onItemsConfirmed.emit(this.selectedItems),this.removeSelectedItems)){let e=this.baseItems;this.selectedItems.forEach((t=\u003e{e=e.filter((e=\u003et.id!==e.id))})),this.selectedItems=null,this.baseItems=e}}writeValue(e){this.selectedItems=e}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouched=e}setDisabledState(e){this.disabled=e}onChange(e){this.notifyOnChange\u0026\u0026this.notifyOnChange(e)}onBlur(){this.notifyOnTouched\u0026\u0026this.notifyOnTouched()}get ariaDescribedBy(){return this._ariaDescribedBy}set ariaDescribedBy(e){var t;this._ariaDescribedBy=e,null===(t=this.select)||void 0===t||t.searchInput.nativeElement.setAttribute(\"aria-describedby\",e)}get labelForId(){return this.searchInputId}get required(){var e,t,i,n;return null!==(n=null!==(e=this._required)\u0026\u0026void 0!==e?e:null===(i=null===(t=this.ngControl)||void 0===t?void 0:t.control)||void 0===i?void 0:i.hasValidator(s.kI.required))\u0026\u0026void 0!==n\u0026\u0026n}set required(e){this._required=null!=e\u0026\u0026!1!==e}get hasError(){var e,t;return\"INVALID\"===(null===(e=this.ngControl)||void 0===e?void 0:e.status)\u0026\u0026(null===(t=this.ngControl)||void 0===t?void 0:t.touched)}get error(){var e,t;const i=Object.keys(null===(e=this.ngControl)||void 0===e?void 0:e.errors)[0];return[i,null===(t=this.ngControl)||void 0===t?void 0:t.errors[i]]}}C.ɵfac=function(e){return new(e||C)(n.Y36(u.D),n.Y36(s.a5,10))},C.ɵcmp=n.Xpm({type:C,selectors:[[\"bit-multi-select\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(v.w9,5),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.select=e.first)}},hostVars:3,hostBindings:function(e,t){2\u0026e\u0026\u0026(n.Ikx(\"id\",t.id),n.uIk(\"aria-describedby\",t.ariaDescribedBy)(\"required\",t.required))},inputs:{baseItems:\"baseItems\",removeSelectedItems:\"removeSelectedItems\",placeholder:\"placeholder\",loading:\"loading\",disabled:\"disabled\",selectedItems:\"selectedItems\",id:\"id\",required:\"required\"},outputs:{onItemsConfirmed:\"onItemsConfirmed\"},features:[n._Bn([{provide:w.v,useExisting:C}])],decls:11,vars:17,consts:[[\"bindLabel\",\"listName\",\"groupBy\",\"parentGrouping\",\"appendTo\",\"body\",3,\"items\",\"ngModel\",\"placeholder\",\"loading\",\"loadingText\",\"notFoundText\",\"clearAllText\",\"multiple\",\"closeOnSelect\",\"disabled\",\"clearSearchOnAdd\",\"labelForId\",\"keyDownFn\",\"ngModelChange\",\"blur\",\"close\"],[\"ng-loadingspinner-tmp\",\"\"],[\"ng-label-tmp\",\"\"],[\"ng-option-tmp\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"tw-mr-1\",3,\"title\"],[\"type\",\"button\",\"bitBadge\",\"\",\"variant\",\"primary\",1,\"tw-mr-1\",\"disabled:tw-border-0\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",3,\"class\",4,\"ngIf\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-close\",\"bwi-sm\",\"tw-ml-1\"],[\"aria-hidden\",\"true\"],[1,\"tw-flex\"],[1,\"tw-w-7\",\"tw-flex-none\"],[\"class\",\"bwi bwi-fw bwi-check\",\"aria-hidden\",\"true\",4,\"ngIf\"],[1,\"tw-mr-2\",\"tw-flex-initial\"],[1,\"tw-flex-1\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-check\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"ng-select\",0),n.NdJ(\"ngModelChange\",(function(e){return t.selectedItems=e}))(\"ngModelChange\",(function(e){return t.onChange(e)}))(\"blur\",(function(){return t.onBlur()}))(\"close\",(function(){return t.onDropdownClosed()})),n.ALo(1,\"i18n\"),n.ALo(2,\"i18n\"),n._uU(3,\"\\n  \"),n.YNc(4,U,3,1,\"ng-template\",1),n._uU(5,\"\\n  \"),n.YNc(6,A,8,3,\"ng-template\",2),n._uU(7,\"\\n  \"),n.YNc(8,S,17,3,\"ng-template\",3),n._uU(9,\"\\n\"),n.qZA(),n._uU(10,\"\\n\")),2\u0026e\u0026\u0026(n.s9C(\"notFoundText\",n.lcZ(1,13,\"multiSelectNotFound\")),n.s9C(\"clearAllText\",n.lcZ(2,15,\"multiSelectClearAll\")),n.Q6J(\"items\",t.baseItems)(\"ngModel\",t.selectedItems)(\"placeholder\",t.placeholder)(\"loading\",t.loading)(\"loadingText\",t.loadingText)(\"multiple\",!0)(\"closeOnSelect\",!1)(\"disabled\",t.disabled)(\"clearSearchOnAdd\",!0)(\"labelForId\",t.labelForId)(\"keyDownFn\",t.keyDown))},dependencies:[d.O5,s.JJ,s.On,v.w9,v.ir,v.mR,v.dk,g.l,b.C],encapsulation:2});var O=i(36179),k=i(44358),q=i(21656),P=i(54735),I=i(50941),M=i(26361),N=i(82933),L=i(20099);class D{constructor(e){this.i18nService=e}transform(e,t){if(null==e)return null!=t?t:this.i18nService.t(\"unknown\");switch(e){case L.je.Owner:return this.i18nService.t(\"owner\");case L.je.Admin:return this.i18nService.t(\"admin\");case L.je.User:return this.i18nService.t(\"user\");case L.je.Manager:return this.i18nService.t(\"manager\");case L.je.Custom:return this.i18nService.t(\"custom\")}}}D.ɵfac=function(e){return new(e||D)(n.Y36(u.D,16))},D.ɵpipe=n.Yjl({name:\"userType\",type:D,pure:!0});var E=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function F(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"option\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=t.$implicit;n.Q6J(\"value\",e.perm),n.xp6(1),n.hij(\"\\n        \",n.lcZ(2,2,e.labelId),\"\\n      \")}}const R=function(){return{standalone:!0}};function J(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"bit-form-field\",13),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-label\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n    \"),n._uU(6,\"\\n    \"),n.TgZ(7,\"select\",14),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.initialPermission=t)}))(\"blur\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.handleBlur())})),n._uU(8,\"\\n      \"),n.YNc(9,F,3,4,\"option\",15),n._uU(10,\"\\n    \"),n.qZA(),n._uU(11,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,5,\"permission\")),n.xp6(4),n.Q6J(\"disabled\",e.disabled)(\"ngModel\",e.initialPermission)(\"ngModelOptions\",n.DdM(7,R)),n.xp6(2),n.Q6J(\"ngForOf\",e.permissionList)}}function Y(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"bit-hint\"),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.Oqu(e.selectorHelpText)}}function z(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",17),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",18),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n          \",n.lcZ(4,1,\"permission\"),\"\\n        \"))}function K(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",19),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"role\")))}function Q(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"th\",20),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"group\")))}function B(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\",34),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n                \",n.lcZ(2,1,\"invited\"),\"\\n              \"))}function G(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",35),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(\"\\n              \",e.email,\"\\n            \")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",29),n._uU(1,\"\\n          \"),n._UZ(2,\"bit-avatar\",30),n._uU(3,\"\\n          \"),n.TgZ(4,\"div\",31),n._uU(5,\"\\n            \"),n.TgZ(6,\"div\"),n._uU(7),n.YNc(8,B,3,3,\"span\",32),n._uU(9,\"\\n            \"),n.qZA(),n._uU(10,\"\\n            \"),n.YNc(11,G,2,1,\"div\",33),n._uU(12,\"\\n          \"),n.qZA(),n._uU(13,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(2),n.s9C(\"text\",e.labelName),n.xp6(5),n.hij(\"\\n              \",e.labelName,\"\\n              \"),n.xp6(1),n.Q6J(\"ngIf\",0==e.status),n.xp6(3),n.Q6J(\"ngIf\",0!=e.status)}}function j(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",29),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",36),n._uU(3,\"\\n          \"),n.TgZ(4,\"span\"),n._uU(5),n.qZA(),n._uU(6,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(2),n.Q6J(\"ngClass\",e.icon||t.itemIcon(e)),n.xp6(3),n.Oqu(e.labelName)}}function H(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"option\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=t.$implicit;n.Q6J(\"value\",e.perm),n.xp6(1),n.hij(\"\\n                \",n.lcZ(2,2,e.labelId),\"\\n              \")}}function $(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n          \"),n.TgZ(2,\"label\",39),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.TgZ(6,\"div\",40),n._uU(7,\"\\n            \"),n.TgZ(8,\"select\",41),n.NdJ(\"blur\",(function(){n.CHM(e);const t=n.oxw(4);return n.KtG(t.handleBlur())})),n._uU(9,\"\\n              \"),n.YNc(10,H,3,4,\"option\",15),n._uU(11,\"\\n            \"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"label\",42),n._uU(14,\"\\n              \"),n._UZ(15,\"i\",43),n._uU(16,\"\\n            \"),n.qZA(),n._uU(17,\"\\n          \"),n.qZA(),n._uU(18,\"\\n        \"),n.BQk()}if(2\u0026e){const e=n.oxw(2),t=e.index,i=e.$implicit,s=n.oxw(2);n.xp6(2),n.Q6J(\"for\",\"permission\"+t),n.xp6(1),n.AsE(\"\",i.labelName,\" \",n.lcZ(4,6,\"permission\"),\"\"),n.xp6(5),n.Q6J(\"id\",\"permission\"+t),n.xp6(2),n.Q6J(\"ngForOf\",s.permissionList),n.xp6(3),n.Q6J(\"for\",\"permission\"+t)}}function W(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",46),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n._UZ(4,\"i\",47),n._uU(5,\"\\n          \"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J(\"appA11yTitle\",n.lcZ(1,2,t.accessAllLabelId(e))),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"canEdit\"),\"\\n            \")}}function X(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",48),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit,t=n.oxw(2);n.Q6J(\"title\",n.lcZ(1,2,t.permissionLabelId(e.readonlyPermission))),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,t.permissionLabelId(e.readonlyPermission)),\"\\n          \")}}function ee(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n          \"),n.YNc(1,W,6,6,\"div\",44),n._uU(2,\"\\n\\n          \"),n.YNc(3,X,4,6,\"div\",45),n._uU(4,\"\\n        \")),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.Q6J(\"ngIf\",e.accessAllItems),n.xp6(2),n.Q6J(\"ngIf\",e.readonly)}}function te(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1,\"\\n        \"),n.YNc(2,$,19,8,\"ng-container\",37),n._uU(3,\"\\n\\n        \"),n.YNc(4,ee,5,2,\"ng-template\",null,38,n.W1O),n._uU(6,\"\\n      \"),n.qZA()),2\u0026e){const e=n.MAs(5),t=n.oxw().$implicit,i=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",i.canEditItemPermission(t))(\"ngIfElse\",e)}}function ie(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1),n.ALo(2,\"userType\"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n        \",n.xi3(2,1,e.role,\"-\"),\"\\n      \")}}function ne(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"td\",7),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw().$implicit;let t;n.xp6(1),n.hij(\"\\n        \",null!==(t=e.viaGroupName)\u0026\u0026void 0!==t?t:\"-\",\"\\n      \")}}function se(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",49),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return i.selectionList.deselectItem(t.id),n.KtG(i.handleBlur())})),n.ALo(1,\"i18n\"),n.qZA()}if(2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.hYB(\"appA11yTitle\",\"\",n.lcZ(1,3,\"remove\"),\" \",e.labelName,\"\"),n.Q6J(\"disabled\",t.disabled)}}const oe=function(e){return{\"tw-text-muted\":e}};function re(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"tr\",22),n._uU(1,\"\\n      \"),n.TgZ(2,\"td\",23),n._uU(3,\"\\n        \"),n.YNc(4,V,14,4,\"div\",24),n._uU(5,\"\\n\\n        \"),n.YNc(6,j,7,2,\"div\",25),n._uU(7,\"\\n      \"),n.qZA(),n._uU(8,\"\\n\\n      \"),n.YNc(9,te,7,2,\"td\",26),n._uU(10,\"\\n\\n      \"),n.YNc(11,ie,3,4,\"td\",26),n._uU(12,\"\\n\\n      \"),n.YNc(13,ne,2,1,\"td\",26),n._uU(14,\"\\n\\n      \"),n.TgZ(15,\"td\",27),n._uU(16,\"\\n        \"),n.YNc(17,se,2,5,\"button\",28),n._uU(18,\"\\n      \"),n.qZA(),n._uU(19,\"\\n    \"),n.qZA()),2\u0026e){const e=t.$implicit,i=t.index,s=n.oxw(2);n.Q6J(\"formGroupName\",i)(\"ngClass\",n.VKq(8,oe,e.readonly)),n.xp6(2),n.Q6J(\"ngSwitch\",e.type),n.xp6(2),n.Q6J(\"ngSwitchCase\",s.itemType.Member),n.xp6(5),n.Q6J(\"ngIf\",\"hidden\"!=s.permissionMode),n.xp6(2),n.Q6J(\"ngIf\",s.showMemberRoles),n.xp6(2),n.Q6J(\"ngIf\",s.showGroupColumn),n.xp6(4),n.Q6J(\"ngIf\",!e.readonly)}}function ae(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"tr\"),n._uU(1,\"\\n      \"),n.TgZ(2,\"td\",7),n._uU(3),n.qZA(),n._uU(4,\"\\n    \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(3),n.Oqu(e.emptySelectionText)}}function le(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n    \"),n.YNc(1,re,20,10,\"tr\",21),n._uU(2,\"\\n    \"),n.YNc(3,ae,5,1,\"tr\",4),n._uU(4,\"\\n  \")),2\u0026e){const e=n.oxw();n.xp6(1),n.Q6J(\"ngForOf\",e.selectionList.selectedItems),n.xp6(2),n.Q6J(\"ngIf\",0==e.selectionList.selectedItems.length)}}var ce;!function(e){e.Hidden=\"hidden\",e.Readonly=\"readonly\",e.Edit=\"edit\"}(ce||(ce={}));class ue{get items(){return this.selectionList.allItems}set items(e){var t;const i=(null!==(t=this.selectionList.formArray.getRawValue())\u0026\u0026void 0!==t?t:[]).concat(e.filter((e=\u003ee.readonly)));this.selectionList.populateItems(e.map((e=\u003e{var t;return e.icon=null!==(t=e.icon)\u0026\u0026void 0!==t?t:this.itemIcon(e),e})),i)}get permissionMode(){return this._permissionMode}set permissionMode(e){this._permissionMode=e,this.updateAllRowControlDisableStates()}constructor(e,t){this.formBuilder=e,this.i18nService=t,this.destroy$=new o.x,this.updateRowControlDisableState=(e,t)=\u003e{t.readonly?e.disable():(e.enable(),(t.accessAllItems||this.permissionMode!=ce.Edit)\u0026\u0026e.controls.permission.disable())},this.updateAllRowControlDisableStates=()=\u003e{this.selectionList.forEachControlItem(((e,t)=\u003e{this.updateRowControlDisableState(e,t)}))},this.selectionList=new l((e=\u003e{const t=this.formBuilder.control(this.initialPermission),i=this.formBuilder.group({id:new s.NI(e.id),type:new s.NI(e.type),permission:t});return this.updateRowControlDisableState(i,e),i}),this._itemComparator.bind(this)),this.formGroup=this.formBuilder.group({items:this.selectionList.formArray}),this.itemType=c.zD,this.initialPermission=c.OU.View,this._permissionMode=ce.Hidden}registerOnChange(e){this.notifyOnChange=e}registerOnTouched(e){this.notifyOnTouch=e}setDisabledState(e){this.disabled=e,this.disabled?this.formGroup.disable():(this.formGroup.enable(),this.updateAllRowControlDisableStates())}writeValue(e){if(this.pauseChangeNotification=!0,this.selectionList.deselectAll(),this.selectionList.selectItems(this.items.filter((e=\u003ee.readonly)).map((e=\u003ee.id))),null!=e){if(!Array.isArray(e))throw new Error(\"The access selector component only supports Array form values!\");for(const t of e)this.selectionList.selectItem(t.id,t);this.pauseChangeNotification=!1}else this.pauseChangeNotification=!1}ngOnInit(){return E(this,void 0,void 0,(function*(){this.permissionList=(0,c.pZ)(this.flexibleCollectionsEnabled),this.selectionList.formArray.valueChanges.pipe((0,r.R)(this.destroy$)).subscribe((e=\u003e{this.notifyOnChange\u0026\u0026!this.pauseChangeNotification\u0026\u0026(this.selectionList.formArray.disabled?this.notifyOnChange([]):this.notifyOnChange(e))}))}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleBlur(){this.notifyOnTouch\u0026\u0026this.notifyOnTouch()}selectItems(e){this.pauseChangeNotification=!0,this.selectionList.selectItems(e.map((e=\u003ee.id))),this.pauseChangeNotification=!1,null!=this.notifyOnChange\u0026\u0026this.notifyOnChange(this.selectionList.formArray.value)}itemIcon(e){switch(e.type){case c.zD.Collection:return\"bwi-collection\";case c.zD.Group:return\"bwi-users\";case c.zD.Member:return\"bwi-user\"}}permissionLabelId(e){var t;return null===(t=this.permissionList.find((t=\u003et.perm==e)))||void 0===t?void 0:t.labelId}accessAllLabelId(e){return e.type==c.zD.Group?\"groupAccessAll\":\"memberAccessAll\"}canEditItemPermission(e){return this.permissionMode==ce.Edit\u0026\u0026!e.readonly\u0026\u0026!e.accessAllItems}_itemComparator(e,t){return e.type-t.type||this.i18nService.collator.compare(e.listName,t.listName)||this.i18nService.collator.compare(e.labelName,t.labelName)||Number(t.readonly)-Number(e.readonly)}}ue.ɵfac=function(e){return new(e||ue)(n.Y36(s.qu),n.Y36(u.D))},ue.ɵcmp=n.Xpm({type:ue,selectors:[[\"bit-access-selector\"]],inputs:{items:\"items\",permissionMode:\"permissionMode\",columnHeader:\"columnHeader\",selectorLabelText:\"selectorLabelText\",selectorHelpText:\"selectorHelpText\",emptySelectionText:\"emptySelectionText\",showMemberRoles:\"showMemberRoles\",showGroupColumn:\"showGroupColumn\",flexibleCollectionsEnabled:\"flexibleCollectionsEnabled\"},features:[n._Bn([{provide:s.JU,useExisting:(0,n.Gpc)((()=\u003eue)),multi:!0}])],decls:39,vars:11,consts:[[1,\"tw-flex\"],[\"class\",\"tw-mr-3 tw-shrink-0\",4,\"ngIf\"],[1,\"tw-grow\"],[1,\"tw-w-full\",3,\"baseItems\",\"removeSelectedItems\",\"disabled\",\"onItemsConfirmed\",\"blur\"],[4,\"ngIf\"],[3,\"formGroup\"],[\"header\",\"\"],[\"bitCell\",\"\"],[\"bitCell\",\"\",\"id\",\"permissionColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",\"id\",\"roleColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",\"id\",\"groupColHeading\",4,\"ngIf\"],[\"bitCell\",\"\",1,\"tw-w-20\"],[\"body\",\"\",\"formArrayName\",\"items\"],[1,\"tw-mr-3\",\"tw-shrink-0\"],[\"bitInput\",\"\",1,\"tw-h-[35px]\",3,\"disabled\",\"ngModel\",\"ngModelOptions\",\"ngModelChange\",\"blur\"],[3,\"value\",4,\"ngFor\",\"ngForOf\"],[3,\"value\"],[\"bitCell\",\"\",\"id\",\"permissionColHeading\"],[1,\"tw-border\",\"tw-border-solid\",\"tw-border-transparent\"],[\"bitCell\",\"\",\"id\",\"roleColHeading\"],[\"bitCell\",\"\",\"id\",\"groupColHeading\"],[\"bitRow\",\"\",3,\"formGroupName\",\"ngClass\",4,\"ngFor\",\"ngForOf\"],[\"bitRow\",\"\",3,\"formGroupName\",\"ngClass\"],[\"bitCell\",\"\",3,\"ngSwitch\"],[\"class\",\"tw-flex tw-items-center\",4,\"ngSwitchCase\"],[\"class\",\"tw-flex tw-items-center\",4,\"ngSwitchDefault\"],[\"bitCell\",\"\",4,\"ngIf\"],[\"bitCell\",\"\",1,\"tw-text-right\"],[\"type\",\"button\",\"bitIconButton\",\"bwi-close\",\"buttonType\",\"muted\",3,\"appA11yTitle\",\"disabled\",\"click\",4,\"ngIf\"],[1,\"tw-flex\",\"tw-items-center\"],[\"size\",\"small\",1,\"tw-mr-3\",3,\"text\"],[1,\"tw-flex\",\"tw-flex-col\"],[\"bitBadge\",\"\",\"variant\",\"secondary\",4,\"ngIf\"],[\"class\",\"tw-text-xs tw-text-muted\",4,\"ngIf\"],[\"bitBadge\",\"\",\"variant\",\"secondary\"],[1,\"tw-text-xs\",\"tw-text-muted\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"tw-mr-3\",\"tw-px-0.5\",\"tw-text-2xl\",3,\"ngClass\"],[4,\"ngIf\",\"ngIfElse\"],[\"readOnlyPerm\",\"\"],[1,\"sr-only\",3,\"for\"],[1,\"tw-relative\",\"tw-inline-block\"],[\"bitInput\",\"\",\"formControlName\",\"permission\",1,\"tw-apperance-none\",\"-tw-ml-3\",\"tw-max-w-40\",\"tw-appearance-none\",\"tw-overflow-ellipsis\",\"!tw-rounded\",\"tw-border-transparent\",\"!tw-bg-transparent\",\"tw-pr-6\",\"tw-font-bold\",\"hover:tw-border-primary-700\",3,\"id\",\"blur\"],[1,\"tw-absolute\",\"tw-inset-y-0\",\"tw-right-4\",\"tw-mb-0\",\"tw-flex\",\"tw-items-center\",3,\"for\"],[1,\"bwi\",\"bwi-sm\",\"bwi-angle-down\",\"tw-leading-[0]\"],[\"class\",\"tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-border tw-border-solid tw-border-transparent tw-font-bold tw-text-muted\",3,\"appA11yTitle\",4,\"ngIf\"],[\"class\",\"tw-max-w-40 tw-overflow-hidden tw-overflow-ellipsis tw-whitespace-nowrap tw-font-bold tw-text-muted\",3,\"title\",4,\"ngIf\"],[1,\"tw-max-w-40\",\"tw-overflow-hidden\",\"tw-overflow-ellipsis\",\"tw-whitespace-nowrap\",\"tw-border\",\"tw-border-solid\",\"tw-border-transparent\",\"tw-font-bold\",\"tw-text-muted\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-filter\",\"tw-ml-1\"],[1,\"tw-max-w-40\",\"tw-overflow-hidden\",\"tw-overflow-ellipsis\",\"tw-whitespace-nowrap\",\"tw-font-bold\",\"tw-text-muted\",3,\"title\"],[\"type\",\"button\",\"bitIconButton\",\"bwi-close\",\"buttonType\",\"muted\",3,\"appA11yTitle\",\"disabled\",\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n._uU(0,\"\\n\"),n._uU(1,\"\\n\"),n.TgZ(2,\"div\",0),n._uU(3,\"\\n  \"),n.YNc(4,J,12,8,\"bit-form-field\",1),n._uU(5,\"\\n\\n  \"),n.TgZ(6,\"bit-form-field\",2),n._uU(7,\"\\n    \"),n.TgZ(8,\"bit-label\"),n._uU(9),n.qZA(),n._uU(10,\"\\n    \"),n.TgZ(11,\"bit-multi-select\",3),n.NdJ(\"onItemsConfirmed\",(function(e){return t.selectItems(e)}))(\"blur\",(function(){return t.handleBlur()})),n.qZA(),n._uU(12,\"\\n    \"),n.YNc(13,Y,2,1,\"bit-hint\",4),n._uU(14,\"\\n  \"),n.qZA(),n._uU(15,\"\\n\"),n.qZA(),n._uU(16,\"\\n\\n\"),n.TgZ(17,\"bit-table\",5),n._uU(18,\"\\n  \"),n.ynx(19,6),n._uU(20,\"\\n    \"),n.TgZ(21,\"tr\"),n._uU(22,\"\\n      \"),n.TgZ(23,\"th\",7),n._uU(24),n.qZA(),n._uU(25,\"\\n      \"),n.YNc(26,z,6,3,\"th\",8),n._uU(27,\"\\n      \"),n.YNc(28,K,3,3,\"th\",9),n._uU(29,\"\\n      \"),n.YNc(30,Q,3,3,\"th\",10),n._uU(31,\"\\n      \"),n._UZ(32,\"th\",11),n._uU(33,\"\\n    \"),n.qZA(),n._uU(34,\"\\n  \"),n.BQk(),n._uU(35,\"\\n  \"),n.YNc(36,le,5,2,\"ng-template\",12),n._uU(37,\"\\n\"),n.qZA(),n._uU(38,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(4),n.Q6J(\"ngIf\",\"edit\"==t.permissionMode),n.xp6(5),n.Oqu(t.selectorLabelText),n.xp6(2),n.Q6J(\"baseItems\",t.selectionList.deselectedItems)(\"removeSelectedItems\",!0)(\"disabled\",t.disabled),n.xp6(2),n.Q6J(\"ngIf\",t.selectorHelpText),n.xp6(4),n.Q6J(\"formGroup\",t.formGroup),n.xp6(7),n.Oqu(t.columnHeader),n.xp6(2),n.Q6J(\"ngIf\",\"hidden\"!=t.permissionMode),n.xp6(2),n.Q6J(\"ngIf\",t.showMemberRoles),n.xp6(2),n.Q6J(\"ngIf\",t.showGroupColumn))},dependencies:[d.mk,d.sg,d.O5,d.RF,d.n9,d.ED,s.YN,s.Kr,s.EJ,s.JJ,s.JL,s.On,s.sg,s.u,s.x0,s.CE,p.B,h.A,g.l,f.d,m.G,C,O.u,k.M,q.Q,P.a,I.Y,M.v,P.f,N.C,D],encapsulation:2})},34632:(e,t,i)=\u003e{\"use strict\";i.d(t,{E2:()=\u003el,OU:()=\u003en,XL:()=\u003ep,d4:()=\u003ea,hs:()=\u003ed,pZ:()=\u003er,zD:()=\u003es});var n,s,o=i(63078);!function(e){e.View=\"view\",e.ViewExceptPass=\"viewExceptPass\",e.Edit=\"edit\",e.EditExceptPass=\"editExceptPass\",e.Manage=\"manage\"}(n||(n={})),function(e){e[e.Collection=0]=\"Collection\",e[e.Group=1]=\"Group\",e[e.Member=2]=\"Member\"}(s||(s={}));const r=e=\u003e{const t=[{perm:n.View,labelId:\"canView\"},{perm:n.ViewExceptPass,labelId:\"canViewExceptPass\"},{perm:n.Edit,labelId:\"canEdit\"},{perm:n.EditExceptPass,labelId:\"canEditExceptPass\"}];return e\u0026\u0026t.push({perm:n.Manage,labelId:\"canManage\"}),t},a=e=\u003ee.manage?n.Manage:e.readOnly?e.hidePasswords?n.ViewExceptPass:n.View:e.hidePasswords?n.EditExceptPass:n.Edit,l=e=\u003enew o.KF({id:e.id,readOnly:c(e.permission),hidePasswords:u(e.permission),manage:e.permission===n.Manage}),c=e=\u003e[n.View,n.ViewExceptPass].includes(e),u=e=\u003e[n.ViewExceptPass,n.EditExceptPass].includes(e);function d(e){return{id:e.id,type:s.Group,listName:e.name,labelName:e.name,accessAllItems:e.accessAll,readonly:e.accessAll}}function p(e){var t,i;return{id:e.id,type:s.Member,email:e.email,role:e.type,listName:(null===(t=e.name)||void 0===t?void 0:t.length)\u003e0?`${e.name} (${e.email})`:e.email,labelName:null!==(i=e.name)\u0026\u0026void 0!==i?i:e.email,status:e.status,accessAllItems:e.accessAll,readonly:e.accessAll}}},1176:(e,t,i)=\u003e{\"use strict\";i.d(t,{k:()=\u003eo});var n=i(71146),s=i(24852);class o{}o.ɵfac=function(e){return new(e||o)},o.ɵmod=s.oAB({type:o}),o.ɵinj=s.cJS({imports:[n.m]})},29428:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003er});var n=i(17682),s=i(2978),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({providers:[n.N,s.d]})},10945:(e,t,i)=\u003e{\"use strict\";var n;i.d(t,{L:()=\u003en}),function(e){e[e.Invited=0]=\"Invited\",e[e.Accepted=1]=\"Accepted\",e[e.Confirmed=2]=\"Confirmed\",e[e.RecoveryInitiated=3]=\"RecoveryInitiated\",e[e.RecoveryApproved=4]=\"RecoveryApproved\"}(n||(n={}))},76736:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003en.x,d:()=\u003es.d});var n=i(29428),s=i(2978)},17682:(e,t,i)=\u003e{\"use strict\";i.d(t,{N:()=\u003eg});var n=i(41489),s=i(42844),o=i(58043),r=i(5094);class a extends o.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.granteeId=this.getResponseProperty(\"GranteeId\"),this.name=this.getResponseProperty(\"Name\"),this.email=this.getResponseProperty(\"Email\"),this.type=this.getResponseProperty(\"Type\"),this.status=this.getResponseProperty(\"Status\"),this.waitTimeDays=this.getResponseProperty(\"WaitTimeDays\"),this.creationDate=this.getResponseProperty(\"CreationDate\"),this.avatarColor=this.getResponseProperty(\"AvatarColor\")}}class l extends o.c{constructor(e){super(e),this.id=this.getResponseProperty(\"Id\"),this.grantorId=this.getResponseProperty(\"GrantorId\"),this.name=this.getResponseProperty(\"Name\"),this.email=this.getResponseProperty(\"Email\"),this.type=this.getResponseProperty(\"Type\"),this.status=this.getResponseProperty(\"Status\"),this.waitTimeDays=this.getResponseProperty(\"WaitTimeDays\"),this.creationDate=this.getResponseProperty(\"CreationDate\"),this.avatarColor=this.getResponseProperty(\"AvatarColor\")}}class c extends o.c{constructor(e){super(e),this.keyEncrypted=this.getResponseProperty(\"KeyEncrypted\"),this.kdf=this.getResponseProperty(\"Kdf\"),this.kdfIterations=this.getResponseProperty(\"KdfIterations\"),this.kdfMemory=this.getResponseProperty(\"KdfMemory\"),this.kdfParallelism=this.getResponseProperty(\"KdfParallelism\")}}class u extends o.c{constructor(e){super(e),this.ciphers=[],this.keyEncrypted=this.getResponseProperty(\"KeyEncrypted\");const t=this.getResponseProperty(\"Ciphers\");null!=t\u0026\u0026(this.ciphers=t.map((e=\u003enew r.r(e))))}}var d=i(24852),p=i(55602),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e){this.apiService=e}getEmergencyAccessTrusted(){return h(this,void 0,void 0,(function*(){const e=yield this.apiService.send(\"GET\",\"/emergency-access/trusted\",null,!0,!0);return new s.L(e,a)}))}getEmergencyAccessGranted(){return h(this,void 0,void 0,(function*(){const e=yield this.apiService.send(\"GET\",\"/emergency-access/granted\",null,!0,!0);return new s.L(e,l)}))}getEmergencyAccess(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"GET\",\"/emergency-access/\"+e,null,!0,!0);return new a(t)}))}getEmergencyGrantorPolicies(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"GET\",\"/emergency-access/\"+e+\"/policies\",null,!0,!0);return new s.L(t,n.j)}))}putEmergencyAccess(e,t){return this.apiService.send(\"PUT\",\"/emergency-access/\"+e,t,!0,!1)}deleteEmergencyAccess(e){return this.apiService.send(\"DELETE\",\"/emergency-access/\"+e,null,!0,!1)}postEmergencyAccessInvite(e){return this.apiService.send(\"POST\",\"/emergency-access/invite\",e,!0,!1)}postEmergencyAccessReinvite(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/reinvite\",null,!0,!1)}postEmergencyAccessAccept(e,t){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/accept\",t,!0,!1)}postEmergencyAccessConfirm(e,t){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/confirm\",t,!0,!1)}postEmergencyAccessInitiate(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/initiate\",null,!0,!1)}postEmergencyAccessApprove(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/approve\",null,!0,!1)}postEmergencyAccessReject(e){return this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/reject\",null,!0,!1)}postEmergencyAccessTakeover(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/takeover\",null,!0,!0);return new c(t)}))}postEmergencyAccessPassword(e,t){return h(this,void 0,void 0,(function*(){yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/password\",t,!0,!0)}))}postEmergencyAccessView(e){return h(this,void 0,void 0,(function*(){const t=yield this.apiService.send(\"POST\",\"/emergency-access/\"+e+\"/view\",null,!0,!0);return new u(t)}))}}g.ɵfac=function(e){return new(e||g)(d.LFG(p.s))},g.ɵprov=d.Yz7({token:g,factory:g.ɵfac})},2978:(e,t,i)=\u003e{\"use strict\";i.d(t,{d:()=\u003eZ});var n=i(63700),s=i(90692),o=i(88160),r=i(27646),a=i(55637),l=i(19572),c=i(10945);class u{}class d{}class p{}class h{}class g{}class f extends g{}var m=i(17682),y=i(24852),v=i(55602),w=i(76528),b=i(85540),U=i(92236),_=i(66459),A=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class Z{constructor(e,t,i,n,s,o){this.emergencyAccessApiService=e,this.apiService=t,this.cryptoService=i,this.encryptService=n,this.cipherService=s,this.logService=o}getEmergencyAccess(e){return this.emergencyAccessApiService.getEmergencyAccess(e)}getEmergencyAccessTrusted(){return A(this,void 0,void 0,(function*(){return(yield this.emergencyAccessApiService.getEmergencyAccessTrusted()).data}))}getEmergencyAccessGranted(){return A(this,void 0,void 0,(function*(){return(yield this.emergencyAccessApiService.getEmergencyAccessGranted()).data}))}getGrantorPolicies(e){return A(this,void 0,void 0,(function*(){const t=yield this.emergencyAccessApiService.getEmergencyGrantorPolicies(e);let i;return null!=t.data\u0026\u0026t.data.length\u003e0\u0026\u0026(i=t.data.map((e=\u003enew s.G(new n.n(e))))),i}))}invite(e,t,i){return A(this,void 0,void 0,(function*(){const n=new p;n.email=e.trim(),n.type=t,n.waitTimeDays=i,yield this.emergencyAccessApiService.postEmergencyAccessInvite(n)}))}reinvite(e){return this.emergencyAccessApiService.postEmergencyAccessReinvite(e)}update(e,t,i){return A(this,void 0,void 0,(function*(){const n=new g;n.type=t,n.waitTimeDays=i,yield this.emergencyAccessApiService.putEmergencyAccess(e,n)}))}accept(e,t){return A(this,void 0,void 0,(function*(){const i=new u;i.token=t,yield this.emergencyAccessApiService.postEmergencyAccessAccept(e,i)}))}confirm(e,t){return A(this,void 0,void 0,(function*(){const i=yield this.cryptoService.getUserKey();if(!i)throw new Error(\"No user key found\");const n=yield this.apiService.getUserPublicKey(t),s=r.c.fromB64ToArray(n.publicKey);try{this.logService.debug(\"User's fingerprint: \"+(yield this.cryptoService.getFingerprint(t,s)).join(\"-\"))}catch(a){}const o=new d;o.key=yield this.encryptKey(i,s),yield this.emergencyAccessApiService.postEmergencyAccessConfirm(e,o)}))}delete(e){return this.emergencyAccessApiService.deleteEmergencyAccess(e)}requestAccess(e){return this.emergencyAccessApiService.postEmergencyAccessInitiate(e)}approve(e){return this.emergencyAccessApiService.postEmergencyAccessApprove(e)}reject(e){return this.emergencyAccessApiService.postEmergencyAccessReject(e)}getViewOnlyCiphers(e){return A(this,void 0,void 0,(function*(){const t=yield this.emergencyAccessApiService.postEmergencyAccessView(e),i=yield this.cryptoService.rsaDecrypt(t.keyEncrypted),n=new a.N(i);return(yield this.encryptService.decryptItems(t.ciphers.map((e=\u003enew l.t(e))),n)).sort(this.cipherService.getLocaleSortingFunction())}))}takeover(e,t,i){return A(this,void 0,void 0,(function*(){const n=yield this.emergencyAccessApiService.postEmergencyAccessTakeover(e),s=yield this.cryptoService.rsaDecrypt(n.keyEncrypted);if(null==s)throw new Error(\"Failed to decrypt grantor key\");const r=new a.N(s),l=yield this.cryptoService.makeMasterKey(t,i,n.kdf,new o.E(n.kdfIterations,n.kdfMemory,n.kdfParallelism)),c=yield this.cryptoService.hashMasterKey(t,l),u=yield this.cryptoService.encryptUserKeyWithMasterKey(l,r),d=new h;d.newMasterPasswordHash=c,d.key=u[1].encryptedString,this.emergencyAccessApiService.postEmergencyAccessPassword(e,d)}))}getRotatedKeys(e){return A(this,void 0,void 0,(function*(){const t=[],i=yield this.emergencyAccessApiService.getEmergencyAccessTrusted();if(!i||0===i.data.length)return t;const n=new Set([c.L.Confirmed,c.L.RecoveryInitiated,c.L.RecoveryApproved]),s=i.data.filter((e=\u003en.has(e.status)));for(const o of s){const i=yield this.apiService.getUserPublicKey(o.granteeId),n=r.c.fromB64ToArray(i.publicKey),s=yield this.encryptKey(e,n),a=new f;a.id=o.id,a.type=o.type,a.waitTimeDays=o.waitTimeDays,a.keyEncrypted=s,t.push(a)}return t}))}encryptKey(e,t){return A(this,void 0,void 0,(function*(){return(yield this.cryptoService.rsaEncrypt(e.key,t)).encryptedString}))}postLegacyRotation(e){return A(this,void 0,void 0,(function*(){if(null!=e)for(const t of e)yield this.emergencyAccessApiService.putEmergencyAccess(t.id,t)}))}}Z.ɵfac=function(e){return new(e||Z)(y.LFG(m.N),y.LFG(v.s),y.LFG(w.$),y.LFG(b.U),y.LFG(U.u),y.LFG(_.$))},Z.ɵprov=y.Yz7({token:Z,factory:Z.ɵfac})},82421:(e,t,i)=\u003e{\"use strict\";i.d(t,{k:()=\u003eu});var n=i(24852),s=i(75557),o=i(2184),r=i(67855),a=i(27646),l=i(70062),c=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function u(){return(t,i)=\u003ec(this,void 0,void 0,(function*(){const t=(0,n.f3M)(o.e),c=(0,n.f3M)(s.F0),u=(0,n.f3M)(l.c),d=i.url,p=u.getPreviousUrl();if((yield t.getAuthStatus())===r.y.Unlocked){const e=yield u.getAndClearLoginRedirectUrl();return!!a.c.isNullOrEmpty(e)||c.navigateByUrl(e)}return e(d)?yield u.persistLoginRedirectUrl(d):e(p)\u0026\u0026(yield u.persistLoginRedirectUrl(p)),!0}));function e(e){return!a.c.isNullOrEmpty(e)\u0026\u0026!(null==e?void 0:e.toLocaleLowerCase().includes(\"lock\"))}}},79797:(e,t,i)=\u003e{\"use strict\";i.d(t,{D:()=\u003eo});var n=i(24852),s=i(55602);class o{constructor(){this.apiService=(0,n.f3M)(s.s)}postUserKeyUpdate(e){return this.apiService.send(\"POST\",\"/accounts/key\",e,!0,!1)}}o.ɵfac=function(e){return new(e||o)},o.ɵprov=n.Yz7({token:o,factory:o.ɵfac})},41366:(e,t,i)=\u003e{\"use strict\";i.d(t,{N:()=\u003er});var n=i(79797),s=i(92879),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({providers:[s.j,n.D]})},92879:(e,t,i)=\u003e{\"use strict\";i.d(t,{j:()=\u003eU});var n=i(99042),s=i(59281),o=i(41412),r=i(79971),a=i(98157),l=i(76736);class c{constructor(){this.ciphers=[],this.folders=[],this.sends=[],this.emergencyAccessKeys=[],this.resetPasswordKeys=[]}}var u=i(79797),d=i(24852),p=i(92236),h=i(23031),g=i(92649),f=i(78200),m=i(76528),y=i(85540),v=i(58172),w=i(23915),b=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class U{constructor(e,t,i,n,s,o,r,a,l,c,u){this.apiService=e,this.cipherService=t,this.folderService=i,this.sendService=n,this.emergencyAccessService=s,this.resetPasswordService=o,this.deviceTrustCryptoService=r,this.cryptoService=a,this.encryptService=l,this.stateService=c,this.configService=u}rotateUserKeyAndEncryptedData(e){return b(this,void 0,void 0,(function*(){if(!e)throw new Error(\"Invalid master password\");const t=yield this.cryptoService.makeMasterKey(e,yield this.stateService.getEmail(),yield this.stateService.getKdfType(),yield this.stateService.getKdfConfig());if(!t)throw new Error(\"Master key could not be created\");yield this.cryptoService.setMasterKey(t);const[i,n]=yield this.cryptoService.makeUserKey(t);if(!i||!n)throw new Error(\"User key could not be created\");const o=new c;o.key=n.encryptedString;const r=yield this.cryptoService.hashMasterKey(e,t);o.masterPasswordHash=r,o.privateKey=yield this.encryptPrivateKey(i),o.ciphers=yield this.encryptCiphers(i),o.folders=yield this.encryptFolders(i),o.sends=yield this.sendService.getRotatedKeys(i),o.emergencyAccessKeys=yield this.emergencyAccessService.getRotatedKeys(i),o.resetPasswordKeys=yield this.resetPasswordService.getRotatedKeys(i),(yield this.configService.getFeatureFlag(s.T.KeyRotationImprovements))?yield this.apiService.postUserKeyUpdate(o):yield this.rotateUserKeyAndEncryptedDataLegacy(o),yield this.deviceTrustCryptoService.rotateDevicesTrust(i,r)}))}encryptPrivateKey(e){return b(this,void 0,void 0,(function*(){const t=yield this.cryptoService.getPrivateKey();if(t)return(yield this.encryptService.encrypt(t,e)).encryptedString}))}encryptCiphers(e){return b(this,void 0,void 0,(function*(){const t=yield this.cipherService.getAllDecrypted();return t?yield Promise.all(t.map((t=\u003eb(this,void 0,void 0,(function*(){const i=yield this.cipherService.encrypt(t,e);return new o.K(i)}))))):[]}))}encryptFolders(e){return b(this,void 0,void 0,(function*(){const t=yield(0,n.z)(this.folderService.folderViews$);return t?yield Promise.all(t.map((t=\u003eb(this,void 0,void 0,(function*(){const i=yield this.folderService.encrypt(t,e);return new r.C(i)}))))):[]}))}rotateUserKeyAndEncryptedDataLegacy(e){return b(this,void 0,void 0,(function*(){yield this.apiService.postUserKeyUpdate(e),yield this.emergencyAccessService.postLegacyRotation(e.emergencyAccessKeys);const t=yield this.stateService.getUserId();yield this.resetPasswordService.postLegacyRotation(t,e.resetPasswordKeys)}))}}U.ɵfac=function(e){return new(e||U)(d.LFG(u.D),d.LFG(p.u),d.LFG(h.s),d.LFG(g.N),d.LFG(l.d),d.LFG(a.v),d.LFG(f.u),d.LFG(m.$),d.LFG(y.U),d.LFG(v.b),d.LFG(w.i))},U.ɵprov=d.Yz7({token:U,factory:U.ɵfac})},99005:(e,t,i)=\u003e{\"use strict\";i.d(t,{Q:()=\u003er});var n=i(40164),s=i(71146),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({imports:[s.m,n.ey]})},31978:(e,t,i)=\u003e{\"use strict\";i.d(t,{q:()=\u003el});var n=i(15346),s=i(33229),o=i(24852),r=i(28315),a=i(82933);class l{}l.ɵfac=function(e){return new(e||l)},l.ɵcmp=o.Xpm({type:l,selectors:[[\"app-danger-zone\"]],standalone:!0,features:[o.jDz],ngContentSelectors:[\"*\"],decls:16,vars:6,consts:[[\"bitTypography\",\"h1\",1,\"tw-mt-16\",\"tw-pb-2.5\",\"!tw-text-danger\"],[1,\"tw-rounded\",\"tw-border\",\"tw-border-solid\",\"tw-border-danger-500\",\"tw-p-5\"],[1,\"tw-flex\",\"tw-flex-row\",\"tw-gap-2\"]],template:function(e,t){1\u0026e\u0026\u0026(o.F$t(),o.TgZ(0,\"h1\",0),o._uU(1),o.ALo(2,\"i18n\"),o.qZA(),o._uU(3,\"\\n\\n\"),o.TgZ(4,\"div\",1),o._uU(5,\"\\n  \"),o.TgZ(6,\"p\"),o._uU(7),o.ALo(8,\"i18n\"),o.qZA(),o._uU(9,\"\\n\\n  \"),o.TgZ(10,\"div\",2),o._uU(11,\"\\n    \"),o.Hsn(12),o._uU(13,\"\\n  \"),o.qZA(),o._uU(14,\"\\n\"),o.qZA(),o._uU(15,\"\\n\")),2\u0026e\u0026\u0026(o.xp6(1),o.Oqu(o.lcZ(2,2,\"dangerZone\")),o.xp6(6),o.Oqu(o.lcZ(8,4,\"dangerZoneDesc\")))},dependencies:[s.Z,r.t,n.b,a.C],encapsulation:2})},99877:(e,t,i)=\u003e{\"use strict\";i.d(t,{d:()=\u003eE});var n=i(24852),s=i(54019),o=i(68362),r=i(77494);class a{constructor(e,t){this.culture=\"en-US\",this.name=e,this.masterPasswordHint=t||null}}var l=i(59554),c=i(27027),u=i(27646),d=i(78627),p=i(99721),h=i(66459),g=i(4885),f=i(19419),m=i(98645),y=i(33245),v=i(53707),w=i(2051),b=i(14970);class U{constructor(){this.border=!1,this.selected=!1,this.select=new n.vpe}onFire(){this.select.emit(this.color)}get classList(){return[\"tw-rounded-full tw-inline-block\"].concat([\"tw-cursor-pointer\",\"tw-outline\",\"tw-outline-solid\",\"tw-outline-offset-1\"]).concat(this.selected?[\"tw-outline-[3px]\",\"tw-outline-primary-500\"]:[\"tw-outline-0\",\"hover:tw-outline-1\",\"hover:tw-outline-primary-300\",\"focus:tw-outline-2\",\"focus:tw-outline-primary-500\"])}}U.ɵfac=function(e){return new(e||U)},U.ɵcmp=n.Xpm({type:U,selectors:[[\"selectable-avatar\"]],inputs:{id:\"id\",text:\"text\",title:\"title\",color:\"color\",border:\"border\",selected:\"selected\"},outputs:{select:\"select\"},decls:5,vars:9,consts:[[\"tabindex\",\"0\",3,\"title\",\"ngClass\",\"click\",\"keyup.enter\"],[\"appStopClick\",\"\",\"size\",\"xlarge\",3,\"text\",\"color\",\"border\",\"id\",\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\",0),n.NdJ(\"click\",(function(){return t.onFire()}))(\"keyup.enter\",(function(){return t.onFire()})),n._uU(1,\"\\n    \"),n.TgZ(2,\"bit-avatar\",1),n._uU(3,\"\\n    \"),n.qZA(),n._uU(4,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.Q6J(\"title\",t.title)(\"ngClass\",t.classList),n.xp6(2),n.Q6J(\"text\",t.text)(\"text\",t.text)(\"color\",t.color)(\"border\",!1)(\"id\",t.id)(\"border\",t.border)(\"title\",t.title))},dependencies:[f.mk,w.O,b.A],encapsulation:2});var _=i(82933),A=i(19576),Z=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const x=[\"colorPicker\"];function S(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",21),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",19),n.ALo(3,\"i18n\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(2),n.hij(\"\\n          \",n.lcZ(5,4,\"loading\"),\"\\n        \"))}function T(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",22),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.hij(\"\\n          \",e.error,\"\\n        \")}}function C(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"selectable-avatar\",23),n.NdJ(\"select\",(function(){const t=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.setSelection(t.color))})),n.ALo(3,\"userName\"),n._uU(4,\"\\n            \"),n.qZA(),n._uU(5,\"\\n          \"),n.BQk()}if(2\u0026e){const e=t.$implicit,i=n.oxw();n.xp6(2),n.s9C(\"text\",n.lcZ(3,5,i.profile)),n.Q6J(\"selected\",e.selected)(\"title\",e.name)(\"color\",e.color)(\"border\",!0)}}const O=function(e){return{\"!tw-outline-[3px] tw-outline-primary-500 hover:tw-outline-[3px] hover:tw-outline-primary-500\":e}};class k{constructor(e,t,i,o){this.i18nService=e,this.platformUtilsService=t,this.logService=i,this.accountUpdateService=o,this.changeColor=new n.vpe,this.onSaved=new n.vpe,this.loading=!1,this.defaultColorPalette=[{name:\"brightBlue\",color:\"#16cbfc\"},{name:\"green\",color:\"#94cc4b\"},{name:\"orange\",color:\"#ffb520\"},{name:\"lavender\",color:\"#e5beed\"},{name:\"yellow\",color:\"#fcff41\"},{name:\"indigo\",color:\"#acbdf7\"},{name:\"teal\",color:\"#8ecdc5\"},{name:\"salmon\",color:\"#ffa3a3\"},{name:\"pink\",color:\"#ffa2d4\"}],this.customColorSelected=!1,this.customColor$=new l.X(null),this.customTextColor$=new l.X(\"#000000\"),this.destroy$=new s.x}ngOnInit(){return Z(this,void 0,void 0,(function*(){this.defaultColorPalette.forEach((e=\u003ee.name=this.i18nService.t(e.name))),this.customColor$.pipe((0,c.b)(200),(0,o.R)(this.destroy$)).subscribe((e=\u003e{null!=e\u0026\u0026(this.customTextColor$.next(u.c.pickTextColorBasedOnBgColor(e)),this.customColorSelected=!0,this.currentSelection=e)})),this.setSelection(yield this.accountUpdateService.loadColorFromState())}))}showCustomPicker(){return Z(this,void 0,void 0,(function*(){this.customColorSelected=!0,this.colorPickerElement.nativeElement.click(),this.setSelection(this.customColor$.value)}))}generateAvatarColor(){return Z(this,void 0,void 0,(function*(){u.c.stringToColor(this.profile.name.toString())}))}submit(){return Z(this,void 0,void 0,(function*(){try{u.c.validateHexColor(this.currentSelection)||null==this.currentSelection?(yield this.accountUpdateService.pushUpdate(this.currentSelection),this.changeColor.emit(this.currentSelection),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"avatarUpdated\"))):this.platformUtilsService.showToast(\"error\",null,this.i18nService.t(\"errorOccurred\"))}catch(e){this.logService.error(e),this.platformUtilsService.showToast(\"error\",null,this.i18nService.t(\"errorOccurred\"))}}))}ngOnDestroy(){return Z(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}setSelection(e){return Z(this,void 0,void 0,(function*(){if(this.defaultColorPalette.filter((e=\u003ee.selected)).forEach((e=\u003ee.selected=!1)),null!=e)if(e=e.toLowerCase(),this.customColorSelected=!1,this.currentSelection===e)this.currentSelection=null;else{const t=this.defaultColorPalette.findIndex((t=\u003et.color===e));-1!==t?(this.defaultColorPalette[t].selected=!0,this.currentSelection=e):this.customColor$.next(e)}}))}}k.ɵfac=function(e){return new(e||k)(n.Y36(d.D),n.Y36(p.P),n.Y36(h.$),n.Y36(g.Q))},k.ɵcmp=n.Xpm({type:k,selectors:[[\"app-change-avatar\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(x,5),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.colorPickerElement=e.first)}},inputs:{profile:\"profile\"},outputs:{changeColor:\"changeColor\",onSaved:\"onSaved\"},decls:73,vars:40,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"customizeTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\",\"tw-w-[600px]\",\"tw-max-w-none\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"customizeTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"class\",\"card-body text-center\",4,\"ngIf\"],[\"type\",\"error\",4,\"ngIf\"],[1,\"tw-text-lg\"],[1,\"tw-flex\",\"tw-flex-wrap\",\"tw-justify-center\",\"tw-gap-8\"],[4,\"ngFor\",\"ngForOf\"],[1,\"tw-outline-solid\",\"tw-bg-white\",\"tw-relative\",\"tw-flex\",\"tw-h-24\",\"tw-w-24\",\"tw-cursor-pointer\",\"tw-place-content-center\",\"tw-content-center\",\"tw-justify-center\",\"tw-rounded-full\",\"tw-border\",\"tw-border-solid\",\"tw-border-secondary-500\",\"tw-outline\",\"tw-outline-0\",\"tw-outline-offset-1\",\"hover:tw-outline-1\",\"hover:tw-outline-primary-300\",\"focus:tw-outline-2\",\"focus:tw-outline-primary-500\",3,\"tabIndex\",\"title\",\"ngClass\",\"keyup.enter\",\"click\"],[1,\"bwi\",\"bwi-pencil\",\"tw-m-auto\",\"tw-text-3xl\"],[\"tabindex\",\"-1\",\"type\",\"color\",1,\"tw-absolute\",\"tw-bottom-0\",\"tw-right-0\",\"tw-h-px\",\"tw-w-px\",\"tw-border-none\",\"tw-bg-transparent\",\"tw-opacity-0\",3,\"ngModel\",\"ngModelChange\"],[\"colorPicker\",\"\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[1,\"card-body\",\"text-center\"],[\"type\",\"error\"],[\"appStopClick\",\"\",3,\"selected\",\"title\",\"text\",\"color\",\"border\",\"select\"]],template:function(e,t){1\u0026e\u0026\u0026(n._uU(0,\"\\n\"),n._uU(1,\"\\n\"),n.TgZ(2,\"div\",0),n._uU(3,\"\\n  \"),n.TgZ(4,\"div\",1),n._uU(5,\"\\n    \"),n.TgZ(6,\"div\",2),n._uU(7,\"\\n      \"),n.TgZ(8,\"div\",3),n._uU(9,\"\\n        \"),n.TgZ(10,\"h2\",4),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n        \"),n.TgZ(14,\"button\",5),n.ALo(15,\"i18n\"),n._uU(16,\"\\n          \"),n.TgZ(17,\"span\",6),n._uU(18,\"×\"),n.qZA(),n._uU(19,\"\\n        \"),n.qZA(),n._uU(20,\"\\n      \"),n.qZA(),n._uU(21,\"\\n      \"),n.TgZ(22,\"div\",7),n._uU(23,\"\\n        \"),n.YNc(24,S,6,6,\"div\",8),n._uU(25,\"\\n        \"),n.YNc(26,T,2,1,\"app-callout\",9),n._uU(27,\"\\n        \"),n.TgZ(28,\"p\",10),n._uU(29),n.ALo(30,\"i18n\"),n.qZA(),n._uU(31,\"\\n        \"),n.TgZ(32,\"div\",11),n._uU(33,\"\\n          \"),n.YNc(34,C,6,7,\"ng-container\",12),n._uU(35,\"\\n          \"),n.TgZ(36,\"span\"),n._uU(37,\"\\n            \"),n.TgZ(38,\"span\",13),n.NdJ(\"keyup.enter\",(function(){return t.showCustomPicker()}))(\"click\",(function(){return t.showCustomPicker()})),n.ALo(39,\"async\"),n.ALo(40,\"i18n\"),n._uU(41,\"\\n              \"),n.TgZ(42,\"i\",14),n.ALo(43,\"async\"),n.qZA(),n._uU(44,\"\\n              \"),n.TgZ(45,\"input\",15,16),n.NdJ(\"ngModelChange\",(function(e){return t.customColor$.next(e)})),n.ALo(47,\"async\"),n.qZA(),n._uU(48,\"\\n            \"),n.qZA(),n._uU(49,\"\\n          \"),n.qZA(),n._uU(50,\"\\n        \"),n.qZA(),n._uU(51,\"\\n      \"),n.qZA(),n._uU(52,\"\\n      \"),n.TgZ(53,\"div\",17),n._uU(54,\"\\n        \"),n.TgZ(55,\"button\",18),n.NdJ(\"click\",(function(){return t.submit()})),n._uU(56,\"\\n          \"),n._UZ(57,\"i\",19),n.ALo(58,\"i18n\"),n._uU(59,\"\\n          \"),n.TgZ(60,\"span\"),n._uU(61),n.ALo(62,\"i18n\"),n.qZA(),n._uU(63,\"\\n        \"),n.qZA(),n._uU(64,\"\\n        \"),n.TgZ(65,\"button\",20),n._uU(66),n.ALo(67,\"i18n\"),n.qZA(),n._uU(68,\"\\n      \"),n.qZA(),n._uU(69,\"\\n    \"),n.qZA(),n._uU(70,\"\\n  \"),n.qZA(),n._uU(71,\"\\n\"),n.qZA(),n._uU(72,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(11),n.Oqu(n.lcZ(12,18,\"customizeAvatar\")),n.xp6(3),n.s9C(\"appA11yTitle\",n.lcZ(15,20,\"close\")),n.xp6(10),n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.error),n.xp6(3),n.Oqu(n.lcZ(30,22,\"pickAnAvatarColor\")),n.xp6(5),n.Q6J(\"ngForOf\",t.defaultColorPalette),n.xp6(4),n.Udp(\"background-color\",n.lcZ(39,24,t.customColor$)),n.s9C(\"title\",n.lcZ(40,26,\"customColor\")),n.Q6J(\"tabIndex\",0)(\"ngClass\",n.VKq(38,O,t.customColorSelected)),n.xp6(4),n.Udp(\"color\",n.lcZ(43,28,t.customTextColor$)),n.xp6(3),n.Q6J(\"ngModel\",n.lcZ(47,30,t.customColor$)),n.xp6(10),n.Q6J(\"disabled\",t.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(58,32,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(62,34,\"save\")),n.xp6(5),n.hij(\"\\n          \",n.lcZ(67,36,\"close\"),\"\\n        \"))},dependencies:[f.mk,f.sg,f.O5,m.Fj,m.JJ,m.On,y.B,v.O,w.O,U,f.Ov,_.C,A.z],encapsulation:2});var q=i(55602),P=i(58172),I=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const M=[\"avatarModalTemplate\"];function N(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\"),n._uU(1,\"\\n  \"),n._UZ(2,\"i\",3),n.ALo(3,\"i18n\"),n._uU(4,\"\\n  \"),n.TgZ(5,\"span\",4),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function L(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",5,6),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n  \"),n.TgZ(3,\"div\",7),n._uU(4,\"\\n    \"),n.TgZ(5,\"div\",8),n._uU(6,\"\\n      \"),n.TgZ(7,\"div\",9),n._uU(8,\"\\n        \"),n.TgZ(9,\"label\",10),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n        \"),n.TgZ(13,\"input\",11),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.profile.name=t)})),n.qZA(),n._uU(14,\"\\n      \"),n.qZA(),n._uU(15,\"\\n      \"),n.TgZ(16,\"div\",9),n._uU(17,\"\\n        \"),n.TgZ(18,\"label\",12),n._uU(19),n.ALo(20,\"i18n\"),n.qZA(),n._uU(21,\"\\n        \"),n.TgZ(22,\"input\",13),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.profile.email=t)})),n.qZA(),n._uU(23,\"\\n      \"),n.qZA(),n._uU(24,\"\\n    \"),n.qZA(),n._uU(25,\"\\n    \"),n.TgZ(26,\"div\",8),n._uU(27,\"\\n      \"),n.TgZ(28,\"div\",14),n._uU(29,\"\\n        \"),n.TgZ(30,\"dynamic-avatar\",15),n.ALo(31,\"userName\"),n._uU(32,\"\\n        \"),n.qZA(),n._uU(33,\"\\n        \"),n.TgZ(34,\"button\",16),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.openChangeAvatar())})),n._uU(35,\"\\n          \"),n._UZ(36,\"i\",17),n._uU(37,\"\\n          Customize\\n        \"),n.qZA(),n._uU(38,\"\\n      \"),n.qZA(),n._uU(39,\"\\n      \"),n.TgZ(40,\"app-account-fingerprint\",18),n.ALo(41,\"i18n\"),n._uU(42,\"\\n      \"),n.qZA(),n._uU(43,\"\\n    \"),n.qZA(),n._uU(44,\"\\n  \"),n.qZA(),n._uU(45,\"\\n  \"),n.TgZ(46,\"button\",19),n._uU(47,\"\\n    \"),n._UZ(48,\"i\",20),n.ALo(49,\"i18n\"),n._uU(50,\"\\n    \"),n.TgZ(51,\"span\"),n._uU(52),n.ALo(53,\"i18n\"),n.qZA(),n._uU(54,\"\\n  \"),n.qZA(),n._uU(55,\"\\n\"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(10),n.Oqu(n.lcZ(11,13,\"name\")),n.xp6(3),n.Q6J(\"ngModel\",t.profile.name),n.xp6(6),n.Oqu(n.lcZ(20,15,\"email\")),n.xp6(3),n.Q6J(\"ngModel\",t.profile.email),n.xp6(8),n.s9C(\"text\",n.lcZ(31,17,t.profile)),n.Q6J(\"id\",t.profile.id)(\"size\",\"large\"),n.xp6(10),n.s9C(\"fingerprintLabel\",n.lcZ(41,19,\"yourAccountsFingerprint\")),n.Q6J(\"fingerprintMaterial\",t.fingerprintMaterial),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(49,21,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(53,23,\"save\"))}}function D(e,t){}class E{constructor(e,t,i,n,o,r){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=n,this.stateService=o,this.modalService=r,this.loading=!0,this.destroy$=new s.x}ngOnInit(){return I(this,void 0,void 0,(function*(){this.profile=yield this.apiService.getProfile(),this.loading=!1,this.fingerprintMaterial=yield this.stateService.getUserId()}))}ngOnDestroy(){return I(this,void 0,void 0,(function*(){this.destroy$.next(),this.destroy$.complete()}))}openChangeAvatar(){return I(this,void 0,void 0,(function*(){const e=yield this.modalService.openViewRef(k,this.avatarModalRef,(t=\u003e{t.profile=this.profile,t.changeColor.pipe((0,o.R)(this.destroy$)).subscribe((()=\u003e{e[0].close()}))}))}))}submit(){return I(this,void 0,void 0,(function*(){try{const e=new a(this.profile.name,this.profile.masterPasswordHint);this.formPromise=this.apiService.putProfile(e),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"accountUpdated\"))}catch(e){this.logService.error(e)}}))}}E.ɵfac=function(e){return new(e||E)(n.Y36(q.s),n.Y36(d.D),n.Y36(p.P),n.Y36(h.$),n.Y36(P.b),n.Y36(r.Z))},E.ɵcmp=n.Xpm({type:E,selectors:[[\"app-profile\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026n.Gf(M,7,n.s_b),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.avatarModalRef=e.first)}},decls:7,vars:2,consts:[[4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"avatarModalTemplate\",\"\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"row\"],[1,\"col-6\"],[1,\"form-group\"],[\"for\",\"name\"],[\"id\",\"name\",\"type\",\"text\",\"name\",\"Name\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"email\"],[\"id\",\"email\",\"type\",\"text\",\"name\",\"Email\",\"readonly\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"mb-3\"],[3,\"text\",\"id\",\"size\"],[\"type\",\"button\",\"appStopClick\",\"\",\"appStopProp\",\"\",1,\"btn\",\"btn-outline-secondary\",\"tw-ml-3.5\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-lg\",\"bwi-pencil-square\"],[3,\"fingerprintMaterial\",\"fingerprintLabel\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,N,9,6,\"div\",0),n._uU(1,\"\\n\"),n.YNc(2,L,56,25,\"form\",1),n._uU(3,\"\\n\"),n.YNc(4,D,0,0,\"ng-template\",null,2,n.W1O),n._uU(6,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.profile\u0026\u0026!t.loading))},encapsulation:2})},64447:(e,t,i)=\u003e{\"use strict\";i.d(t,{B:()=\u003ev});var n=i(24852),s=i(42304),o=i(66459),r=i(19419),a=i(98645),l=i(33245),c=i(24610),u=i(53707),d=i(94516),p=i(82933),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function g(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-user-verification\",15),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.masterPassword=t)})),n._uU(1,\"\\n        \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"ngModel\",e.masterPassword)}}function f(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",16),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw();n.xp6(1),n.Oqu(n.lcZ(2,1,e.apiKeyWarning))}}function m(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",17),n.ALo(1,\"i18n\"),n._uU(2,\"\\n          \"),n.TgZ(3,\"p\",18),n._uU(4,\"\\n            \"),n.TgZ(5,\"strong\"),n._uU(6,\"client_id:\"),n.qZA(),n._UZ(7,\"br\"),n._uU(8,\"\\n            \"),n.TgZ(9,\"code\"),n._uU(10),n.qZA(),n._uU(11,\"\\n          \"),n.qZA(),n._uU(12,\"\\n          \"),n.TgZ(13,\"p\",18),n._uU(14,\"\\n            \"),n.TgZ(15,\"strong\"),n._uU(16,\"client_secret:\"),n.qZA(),n._UZ(17,\"br\"),n._uU(18,\"\\n            \"),n.TgZ(19,\"code\"),n._uU(20),n.qZA(),n._uU(21,\"\\n          \"),n.qZA(),n._uU(22,\"\\n          \"),n.TgZ(23,\"p\",18),n._uU(24,\"\\n            \"),n.TgZ(25,\"strong\"),n._uU(26,\"scope:\"),n.qZA(),n._UZ(27,\"br\"),n._uU(28,\"\\n            \"),n.TgZ(29,\"code\"),n._uU(30),n.qZA(),n._uU(31,\"\\n          \"),n.qZA(),n._uU(32,\"\\n          \"),n.TgZ(33,\"p\",19),n._uU(34,\"\\n            \"),n.TgZ(35,\"strong\"),n._uU(36,\"grant_type:\"),n.qZA(),n._UZ(37,\"br\"),n._uU(38,\"\\n            \"),n.TgZ(39,\"code\"),n._uU(40),n.qZA(),n._uU(41,\"\\n          \"),n.qZA(),n._uU(42,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw();n.s9C(\"title\",n.lcZ(1,5,\"oauth2ClientCredentials\")),n.xp6(10),n.Oqu(e.clientId),n.xp6(10),n.Oqu(e.clientSecret),n.xp6(10),n.Oqu(e.scope),n.xp6(10),n.Oqu(e.grantType)}}function y(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"button\",20),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",21),n.ALo(3,\"i18n\"),n._uU(4,\"\\n          \"),n.TgZ(5,\"span\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw(),t=n.MAs(5);n.Q6J(\"disabled\",t.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(3,3,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,5,e.isRotation?\"rotateApiKey\":\"viewApiKey\"))}}class v{constructor(e,t){this.userVerificationService=e,this.logService=t}submit(){return h(this,void 0,void 0,(function*(){try{this.formPromise=this.userVerificationService.buildRequest(this.masterPassword).then((e=\u003ethis.postKey(this.entityId,e)));const e=yield this.formPromise;this.clientSecret=e.apiKey,this.clientId=`${this.keyType}.${this.entityId}`}catch(e){this.logService.error(e)}}))}}v.ɵfac=function(e){return new(e||v)(n.Y36(s.i),n.Y36(o.$))},v.ɵcmp=n.Xpm({type:v,selectors:[[\"app-api-key\"]],decls:46,vars:17,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"apiKeyTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-dialog-scrollable\"],[\"ngNativeValidate\",\"\",1,\"modal-content\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-header\"],[\"id\",\"apiKeyTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[1,\"modal-body\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\",4,\"ngIf\"],[\"type\",\"warning\",4,\"ngIf\"],[\"type\",\"info\",\"icon\",\"bwi bwi-key\",3,\"title\",4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",\"class\",\"btn btn-primary btn-submit\",3,\"disabled\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\"],[\"type\",\"warning\"],[\"type\",\"info\",\"icon\",\"bwi bwi-key\",3,\"title\"],[1,\"mb-1\"],[1,\"mb-0\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"form\",2,3),n.NdJ(\"ngSubmit\",(function(){return t.submit()})),n._uU(6,\"\\n      \"),n.TgZ(7,\"div\",4),n._uU(8,\"\\n        \"),n.TgZ(9,\"h1\",5),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n        \"),n.TgZ(13,\"button\",6),n.ALo(14,\"i18n\"),n._uU(15,\"\\n          \"),n.TgZ(16,\"span\",7),n._uU(17,\"×\"),n.qZA(),n._uU(18,\"\\n        \"),n.qZA(),n._uU(19,\"\\n      \"),n.qZA(),n._uU(20,\"\\n      \"),n.TgZ(21,\"div\",8),n._uU(22,\"\\n        \"),n.TgZ(23,\"p\"),n._uU(24),n.ALo(25,\"i18n\"),n.qZA(),n._uU(26,\"\\n        \"),n.YNc(27,g,2,1,\"app-user-verification\",9),n._uU(28,\"\\n\\n        \"),n.YNc(29,f,3,3,\"app-callout\",10),n._uU(30,\"\\n        \"),n.YNc(31,m,43,7,\"app-callout\",11),n._uU(32,\"\\n      \"),n.qZA(),n._uU(33,\"\\n      \"),n.TgZ(34,\"div\",12),n._uU(35,\"\\n        \"),n.YNc(36,y,9,7,\"button\",13),n._uU(37,\"\\n        \"),n.TgZ(38,\"button\",14),n._uU(39),n.ALo(40,\"i18n\"),n.qZA(),n._uU(41,\"\\n      \"),n.qZA(),n._uU(42,\"\\n    \"),n.qZA(),n._uU(43,\"\\n  \"),n.qZA(),n._uU(44,\"\\n\"),n.qZA(),n._uU(45,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(4),n.Q6J(\"appApiAction\",t.formPromise),n.xp6(6),n.Oqu(n.lcZ(11,9,t.apiKeyTitle)),n.xp6(3),n.s9C(\"appA11yTitle\",n.lcZ(14,11,\"close\")),n.xp6(11),n.Oqu(n.lcZ(25,13,t.apiKeyDescription)),n.xp6(3),n.Q6J(\"ngIf\",!t.clientSecret),n.xp6(2),n.Q6J(\"ngIf\",t.clientSecret),n.xp6(2),n.Q6J(\"ngIf\",t.clientSecret),n.xp6(5),n.Q6J(\"ngIf\",!t.clientSecret),n.xp6(3),n.hij(\"\\n          \",n.lcZ(40,15,\"close\"),\"\\n        \"))},dependencies:[r.O5,a.Fj,a.JJ,a.JL,a.On,a.F,l.B,c.b,u.O,d.W,p.C],encapsulation:2})},90668:(e,t,i)=\u003e{\"use strict\";i.d(t,{c:()=\u003eg});var n=i(24852),s=i(48103),o=i(91667);class r extends o.Y{}var a=i(55602),l=i(78627),c=i(99721),u=i(66459),d=i(42304),p=i(73369),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i,o,r,a){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=o,this.userVerificationService=r,this.dialogService=a,this.onUpdated=new n.vpe,this.twoFactorProviderType=s.L,this.enabled=!1,this.authed=!1,this.componentName=\"\"}auth(e){this.hashedSecret=e.secret,this.verificationType=e.verificationType,this.authed=!0}enable(e){return h(this,void 0,void 0,(function*(){try{yield e(),this.onUpdated.emit(!0)}catch(t){this.logService.error(t)}}))}disable(e){return h(this,void 0,void 0,(function*(){if(yield this.dialogService.openSimpleDialog({title:{key:\"disable\"},content:{key:\"twoStepDisableDesc\"},type:\"warning\"}))try{const t=yield this.buildRequestModel(r);t.type=this.type,e=null!=this.organizationId?this.apiService.putTwoFactorOrganizationDisable(this.organizationId,t):this.apiService.putTwoFactorDisable(t),yield e,this.enabled=!1,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"twoStepDisabled\")),this.onUpdated.emit(!1)}catch(t){this.logService.error(t)}}))}buildRequestModel(e){return h(this,void 0,void 0,(function*(){return this.userVerificationService.buildRequest({secret:this.hashedSecret,type:this.verificationType},e,!0)}))}}g.ɵfac=function(e){return new(e||g)(n.Y36(a.s),n.Y36(l.D),n.Y36(c.P),n.Y36(u.$),n.Y36(d.i),n.Y36(p.x))},g.ɵdir=n.lG2({type:g,outputs:{onUpdated:\"onUpdated\"}})},41648:(e,t,i)=\u003e{\"use strict\";i.d(t,{C:()=\u003eO});var n=i(48103),s=i(91667);class o extends s.Y{}var r=i(90668),a=i(24852),l=i(55602),c=i(78627),u=i(99721),d=i(66459),p=i(42304),h=i(73369),g=i(19419),f=i(98645),m=i(33245),y=i(24610),v=i(53707),w=i(85356),b=i(19227),U=i(82933),_=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function A(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"app-two-factor-verify\",9),a.NdJ(\"onAuthed\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.auth(t))})),a._uU(1,\"\\n      \"),a.qZA()}if(2\u0026e){const e=a.oxw();a.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function Z(e,t){if(1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n            \"),a.TgZ(2,\"app-callout\",18),a.ALo(3,\"i18n\"),a._uU(4),a.ALo(5,\"i18n\"),a.qZA(),a._uU(6,\"\\n            \"),a._UZ(7,\"img\",19),a._uU(8,\"\\n            \"),a.TgZ(9,\"strong\"),a._uU(10),a.ALo(11,\"i18n\"),a.qZA(),a._uU(12),a._UZ(13,\"br\"),a._uU(14,\"\\n            \"),a.TgZ(15,\"strong\"),a._uU(16),a.ALo(17,\"i18n\"),a.qZA(),a._uU(18),a._UZ(19,\"br\"),a._uU(20,\"\\n            \"),a.TgZ(21,\"strong\"),a._uU(22),a.ALo(23,\"i18n\"),a.qZA(),a._uU(24),a.BQk()),2\u0026e){const e=a.oxw(2);a.xp6(2),a.s9C(\"title\",a.lcZ(3,8,\"enabled\")),a.xp6(2),a.hij(\"\\n              \",a.lcZ(5,10,\"twoStepLoginProviderEnabled\"),\"\\n            \"),a.xp6(6),a.hij(\"\",a.lcZ(11,12,\"twoFactorDuoIntegrationKey\"),\":\"),a.xp6(2),a.hij(\" \",e.ikey,\"\\n            \"),a.xp6(4),a.hij(\"\",a.lcZ(17,14,\"twoFactorDuoSecretKey\"),\":\"),a.xp6(2),a.hij(\" \",e.skey,\"\\n            \"),a.xp6(4),a.hij(\"\",a.lcZ(23,16,\"twoFactorDuoApiHostname\"),\":\"),a.xp6(2),a.hij(\" \",e.host,\"\\n          \")}}function x(e,t){if(1\u0026e){const e=a.EpF();a.ynx(0),a._uU(1,\"\\n            \"),a._UZ(2,\"img\",19),a._uU(3,\"\\n            \"),a.TgZ(4,\"p\"),a._uU(5),a.ALo(6,\"i18n\"),a.qZA(),a._uU(7,\"\\n            \"),a.TgZ(8,\"div\",20),a._uU(9,\"\\n              \"),a.TgZ(10,\"label\",21),a._uU(11),a.ALo(12,\"i18n\"),a.qZA(),a._uU(13,\"\\n              \"),a.TgZ(14,\"input\",22),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.ikey=t)})),a.qZA(),a._uU(15,\"\\n            \"),a.qZA(),a._uU(16,\"\\n            \"),a.TgZ(17,\"div\",20),a._uU(18,\"\\n              \"),a.TgZ(19,\"label\",23),a._uU(20),a.ALo(21,\"i18n\"),a.qZA(),a._uU(22,\"\\n              \"),a.TgZ(23,\"input\",24),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.skey=t)})),a.qZA(),a._uU(24,\"\\n            \"),a.qZA(),a._uU(25,\"\\n            \"),a.TgZ(26,\"div\",20),a._uU(27,\"\\n              \"),a.TgZ(28,\"label\",25),a._uU(29),a.ALo(30,\"i18n\"),a.qZA(),a._uU(31,\"\\n              \"),a.TgZ(32,\"input\",26),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.host=t)})),a.ALo(33,\"i18n\"),a.qZA(),a._uU(34,\"\\n            \"),a.qZA(),a._uU(35,\"\\n          \"),a.BQk()}if(2\u0026e){const e=a.oxw(2);a.xp6(5),a.Oqu(a.lcZ(6,8,\"twoFactorDuoDesc\")),a.xp6(6),a.Oqu(a.lcZ(12,10,\"twoFactorDuoIntegrationKey\")),a.xp6(3),a.Q6J(\"ngModel\",e.ikey),a.xp6(6),a.Oqu(a.lcZ(21,12,\"twoFactorDuoSecretKey\")),a.xp6(3),a.Q6J(\"ngModel\",e.skey),a.xp6(6),a.Oqu(a.lcZ(30,14,\"twoFactorDuoApiHostname\")),a.xp6(3),a.MGl(\"placeholder\",\"\",a.lcZ(33,16,\"ex\"),\" api-xxxxxxxx.duosecurity.com\"),a.Q6J(\"ngModel\",e.host)}}function S(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"span\"),a._uU(1),a.ALo(2,\"i18n\"),a.qZA()),2\u0026e\u0026\u0026(a.xp6(1),a.Oqu(a.lcZ(2,1,\"enable\")))}function T(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"span\"),a._uU(1),a.ALo(2,\"i18n\"),a.qZA()),2\u0026e\u0026\u0026(a.xp6(1),a.Oqu(a.lcZ(2,1,\"disable\")))}function C(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"form\",10,11),a.NdJ(\"ngSubmit\",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.submit())})),a._uU(2,\"\\n        \"),a.TgZ(3,\"div\",12),a._uU(4,\"\\n          \"),a.YNc(5,Z,25,18,\"ng-container\",13),a._uU(6,\"\\n          \"),a.YNc(7,x,36,18,\"ng-container\",13),a._uU(8,\"\\n        \"),a.qZA(),a._uU(9,\"\\n        \"),a.TgZ(10,\"div\",14),a._uU(11,\"\\n          \"),a.TgZ(12,\"button\",15),a._uU(13,\"\\n            \"),a._UZ(14,\"i\",16),a.ALo(15,\"i18n\"),a._uU(16,\"\\n            \"),a.YNc(17,S,3,3,\"span\",13),a._uU(18,\"\\n            \"),a.YNc(19,T,3,3,\"span\",13),a._uU(20,\"\\n          \"),a.qZA(),a._uU(21,\"\\n          \"),a.TgZ(22,\"button\",17),a._uU(23),a.ALo(24,\"i18n\"),a.qZA(),a._uU(25,\"\\n        \"),a.qZA(),a._uU(26,\"\\n      \"),a.qZA()}if(2\u0026e){const e=a.MAs(1),t=a.oxw();a.Q6J(\"appApiAction\",t.formPromise),a.xp6(5),a.Q6J(\"ngIf\",t.enabled),a.xp6(2),a.Q6J(\"ngIf\",!t.enabled),a.xp6(5),a.Q6J(\"disabled\",e.loading),a.xp6(2),a.s9C(\"title\",a.lcZ(15,8,\"loading\")),a.xp6(3),a.Q6J(\"ngIf\",!t.enabled),a.xp6(2),a.Q6J(\"ngIf\",t.enabled),a.xp6(4),a.hij(\"\\n            \",a.lcZ(24,10,\"close\"),\"\\n          \")}}class O extends r.c{constructor(e,t,i,s,o,r){super(e,t,i,s,o,r),this.type=n.L.Duo,this.componentName=\"app-two-factor-duo\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return _(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(o);return t.integrationKey=this.ikey,t.secretKey=this.skey,t.host=this.host,e.enable.call(this,(()=\u003e_(this,void 0,void 0,(function*(){null!=this.organizationId?this.formPromise=this.apiService.putTwoFactorOrganizationDuo(this.organizationId,t):this.formPromise=this.apiService.putTwoFactorDuo(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){this.ikey=e.integrationKey,this.skey=e.secretKey,this.host=e.host,this.enabled=e.enabled}}O.ɵfac=function(e){return new(e||O)(a.Y36(l.s),a.Y36(c.D),a.Y36(u.P),a.Y36(d.$),a.Y36(p.i),a.Y36(h.x))},O.ɵcmp=a.Xpm({type:O,selectors:[[\"app-two-factor-duo\"]],features:[a.qOj],decls:30,vars:8,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faDuoTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faDuoTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[\"alt\",\"Duo logo\",1,\"float-right\",\"ml-3\",\"mfaType2\"],[1,\"form-group\"],[\"for\",\"ikey\"],[\"id\",\"ikey\",\"type\",\"text\",\"name\",\"IntegrationKey\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"skey\"],[\"id\",\"skey\",\"type\",\"password\",\"name\",\"SecretKey\",\"required\",\"\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"host\"],[\"id\",\"host\",\"type\",\"text\",\"name\",\"Host\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"placeholder\",\"ngModelChange\"]],template:function(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"div\",0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",1),a._uU(3,\"\\n    \"),a.TgZ(4,\"div\",2),a._uU(5,\"\\n      \"),a.TgZ(6,\"div\",3),a._uU(7,\"\\n        \"),a.TgZ(8,\"h1\",4),a._uU(9),a.ALo(10,\"i18n\"),a.TgZ(11,\"small\"),a._uU(12,\"Duo\"),a.qZA(),a._uU(13,\"\\n        \"),a.qZA(),a._uU(14,\"\\n        \"),a.TgZ(15,\"button\",5),a.ALo(16,\"i18n\"),a._uU(17,\"\\n          \"),a.TgZ(18,\"span\",6),a._uU(19,\"×\"),a.qZA(),a._uU(20,\"\\n        \"),a.qZA(),a._uU(21,\"\\n      \"),a.qZA(),a._uU(22,\"\\n      \"),a.YNc(23,A,2,2,\"app-two-factor-verify\",7),a._uU(24,\"\\n      \"),a.YNc(25,C,27,12,\"form\",8),a._uU(26,\"\\n    \"),a.qZA(),a._uU(27,\"\\n  \"),a.qZA(),a._uU(28,\"\\n\"),a.qZA(),a._uU(29,\"\\n\")),2\u0026e\u0026\u0026(a.xp6(9),a.hij(\"\\n          \",a.lcZ(10,4,\"twoStepLogin\"),\"\\n          \"),a.xp6(6),a.s9C(\"appA11yTitle\",a.lcZ(16,6,\"close\")),a.xp6(8),a.Q6J(\"ngIf\",!t.authed),a.xp6(2),a.Q6J(\"ngIf\",t.authed))},dependencies:[g.O5,f.Fj,f.JJ,f.JL,f.Q7,f.On,f.F,m.B,y.b,v.O,w.b,b.c,U.C],encapsulation:2})},62941:(e,t,i)=\u003e{\"use strict\";i.d(t,{x:()=\u003eyt});var n=i(24852),s=i(54019),o=i(68362),r=i(77494),a=i(20099),l=i(48103),c=i(66990),u=i(87264),d=i(91667);class p extends d.Y{}var h=i(27646),g=i(90668),f=i(55602),m=i(78627),y=i(42304),v=i(99721),w=i(66459),b=i(58172),U=i(73369),_=i(19419),A=i(98645),Z=i(33245),x=i(24610),S=i(53707),T=i(85356),C=i(19227),O=i(82933),k=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function q(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function P(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n._UZ(2,\"img\",28),n._uU(3,\"\\n            \"),n.TgZ(4,\"p\"),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n            \"),n.TgZ(8,\"p\"),n._uU(9,\"\\n              \"),n.TgZ(10,\"strong\"),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n            \"),n.qZA(),n._uU(14,\"\\n          \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(5),n.Oqu(n.lcZ(6,2,\"twoStepAuthenticatorDesc\")),n.xp6(6),n.hij(\"1. \",n.lcZ(12,4,\"twoStepAuthenticatorDownloadApp\"),\"\"))}function I(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"app-callout\",29),n.ALo(3,\"i18n\"),n._uU(4,\"\\n              \"),n.TgZ(5,\"p\"),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10,\"\\n            \"),n._UZ(11,\"img\",28),n._uU(12,\"\\n            \"),n.TgZ(13,\"p\"),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n          \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,4,\"enabled\")),n.xp6(4),n.Oqu(n.lcZ(7,6,\"twoStepLoginProviderEnabled\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(9,8,\"twoStepAuthenticatorReaddDesc\"),\"\\n            \"),n.xp6(6),n.Oqu(n.lcZ(15,10,\"twoStepAuthenticatorNeedApp\")))}function M(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"p\"),n._uU(1,\"\\n            \"),n.TgZ(2,\"strong\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"2. \",n.lcZ(4,1,\"twoStepAuthenticatorScanCode\"),\"\"))}function N(e,t){1\u0026e\u0026\u0026n._UZ(0,\"hr\")}function L(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"label\",30),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n            \"),n.TgZ(6,\"input\",31),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.token=t)})),n.qZA(),n._uU(7,\"\\n          \"),n.BQk()}if(2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"3. \",n.lcZ(4,2,\"twoStepAuthenticatorEnterCode\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",e.token)}}function D(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"enable\")))}function E(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"disable\")))}const F=function(e){return{\"mb-0\":e}};function R(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,P,15,6,\"ng-container\",13),n._uU(6,\"\\n          \"),n.YNc(7,I,17,12,\"ng-container\",13),n._uU(8,\"\\n          \"),n.TgZ(9,\"ul\",14),n._uU(10,\"\\n            \"),n.TgZ(11,\"li\"),n._uU(12,\"\\n              \"),n._UZ(13,\"i\",15),n._uU(14),n.ALo(15,\"i18n\"),n.TgZ(16,\"a\",16),n._uU(17,\"Authy\"),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n            \"),n.TgZ(20,\"li\"),n._uU(21,\"\\n              \"),n._UZ(22,\"i\",17),n._uU(23),n.ALo(24,\"i18n\"),n.TgZ(25,\"a\",18),n._uU(26,\"Authy\"),n.qZA(),n._uU(27,\"\\n            \"),n.qZA(),n._uU(28,\"\\n            \"),n.TgZ(29,\"li\"),n._uU(30,\"\\n              \"),n._UZ(31,\"i\",19),n._uU(32),n.ALo(33,\"i18n\"),n.TgZ(34,\"a\",20),n._uU(35,\"Microsoft Authenticator\"),n.qZA(),n._uU(36,\"\\n            \"),n.qZA(),n._uU(37,\"\\n          \"),n.qZA(),n._uU(38,\"\\n          \"),n.TgZ(39,\"p\"),n._uU(40),n.ALo(41,\"i18n\"),n.qZA(),n._uU(42,\"\\n          \"),n.YNc(43,M,6,3,\"p\",13),n._uU(44,\"\\n          \"),n.YNc(45,N,1,0,\"hr\",13),n._uU(46,\"\\n          \"),n.TgZ(47,\"p\",21),n._uU(48,\"\\n            \"),n._UZ(49,\"canvas\",22)(50,\"br\"),n._uU(51,\"\\n            \"),n.TgZ(52,\"code\",23),n.ALo(53,\"i18n\"),n._uU(54),n.qZA(),n._uU(55,\"\\n          \"),n.qZA(),n._uU(56,\"\\n          \"),n.YNc(57,L,8,4,\"ng-container\",13),n._uU(58,\"\\n        \"),n.qZA(),n._uU(59,\"\\n        \"),n.TgZ(60,\"div\",24),n._uU(61,\"\\n          \"),n.TgZ(62,\"button\",25),n._uU(63,\"\\n            \"),n._UZ(64,\"i\",26),n.ALo(65,\"i18n\"),n._uU(66,\"\\n            \"),n.YNc(67,D,3,3,\"span\",13),n._uU(68,\"\\n            \"),n.YNc(69,E,3,3,\"span\",13),n._uU(70,\"\\n          \"),n.qZA(),n._uU(71,\"\\n          \"),n.TgZ(72,\"button\",27),n._uU(73),n.ALo(74,\"i18n\"),n.qZA(),n._uU(75,\"\\n        \"),n.qZA(),n._uU(76,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(7),n.hij(\"\",n.lcZ(15,18,\"iosDevices\"),\":\\n              \"),n.xp6(9),n.hij(\"\",n.lcZ(24,20,\"androidDevices\"),\":\\n              \"),n.xp6(9),n.hij(\"\",n.lcZ(33,22,\"windowsDevices\"),\":\\n              \"),n.xp6(8),n.Oqu(n.lcZ(41,24,\"twoStepAuthenticatorAppsRecommended\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(2),n.Q6J(\"ngClass\",n.VKq(32,F,t.enabled)),n.xp6(5),n.s9C(\"appA11yTitle\",n.lcZ(53,26,\"key\")),n.xp6(2),n.Oqu(t.key),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(5),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(65,28,\"loading\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(4),n.hij(\"\\n            \",n.lcZ(74,30,\"close\"),\"\\n          \")}}class J extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,n,s,i,r),this.stateService=o,this.type=l.L.Authenticator,this.componentName=\"app-two-factor-authenticator\",this.qrScript=window.document.createElement(\"script\"),this.qrScript.src=\"scripts/qrious.min.js\",this.qrScript.async=!0}ngOnInit(){window.document.body.appendChild(this.qrScript)}ngOnDestroy(){window.document.body.removeChild(this.qrScript)}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return k(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(p);return t.token=this.token,t.key=this.key,e.enable.call(this,(()=\u003ek(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorAuthenticator(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return k(this,void 0,void 0,(function*(){this.token=null,this.enabled=e.enabled,this.key=e.key;const t=yield this.stateService.getEmail();window.setTimeout((()=\u003e{new window.QRious({element:document.getElementById(\"qr\"),value:\"otpauth://totp/Vaultwarden:\"+h.c.encodeRFC3986URIComponent(t)+\"?secret=\"+encodeURIComponent(this.key)+\"\u0026issuer=Vaultwarden\",size:160})}),100)}))}}J.ɵfac=function(e){return new(e||J)(n.Y36(f.s),n.Y36(m.D),n.Y36(y.i),n.Y36(v.P),n.Y36(w.$),n.Y36(b.b),n.Y36(U.x))},J.ɵcmp=n.Xpm({type:J,selectors:[[\"app-two-factor-authenticator\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faAuthenticatorTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faAuthenticatorTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"bwi-ul\"],[1,\"bwi\",\"bwi-li\",\"bwi-apple\"],[\"href\",\"https://itunes.apple.com/us/app/authy/id494168017?mt=8\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"bwi\",\"bwi-li\",\"bwi-android\"],[\"href\",\"https://play.google.com/store/apps/details?id=com.authy.authy\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"bwi\",\"bwi-li\",\"bwi-windows\"],[\"href\",\"https://www.microsoft.com/p/authenticator/9wzdncrfj3rj\",\"target\",\"_blank\",\"rel\",\"noopener\"],[1,\"text-center\",3,\"ngClass\"],[\"id\",\"qr\"],[3,\"appA11yTitle\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"alt\",\"Authenticator app logo\",1,\"float-right\",\"mfaType0\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[\"for\",\"token\"],[\"id\",\"token\",\"type\",\"text\",\"name\",\"Token\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,q,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,R,77,34,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"authenticatorAppTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.mk,_.O5,A.Fj,A.JJ,A.JL,A.Q7,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});var Y=i(41648),z=i(15800);class K extends d.Y{}var Q=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function B(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function G(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"app-callout\",18),n.ALo(3,\"i18n\"),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n            \"),n.TgZ(7,\"strong\"),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.s9C(\"title\",n.lcZ(3,4,\"enabled\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(5,6,\"twoStepLoginProviderEnabled\"),\"\\n            \"),n.xp6(4),n.hij(\"\",n.lcZ(9,8,\"email\"),\":\"),n.xp6(2),n.hij(\" \",e.email,\"\\n          \")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\",31),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(1),n.hij(\"\\n                \",n.xi3(2,1,\"verificationCodeEmailSent\",e.sentEmail),\"\\n              \")}}function j(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"p\",19),n._uU(3,\"\\n              \"),n.TgZ(4,\"span\",20),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n              \"),n._UZ(8,\"img\",21),n._uU(9,\"\\n            \"),n.qZA(),n._uU(10,\"\\n            \"),n.TgZ(11,\"div\",22),n._uU(12,\"\\n              \"),n.TgZ(13,\"label\",23),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n              \"),n.TgZ(17,\"input\",24),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.email=t)})),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n            \"),n.TgZ(20,\"div\",25),n._uU(21,\"\\n              \"),n.TgZ(22,\"button\",26,27),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.sendEmail())})),n._uU(24,\"\\n                \"),n._UZ(25,\"i\",16),n.ALo(26,\"i18n\"),n._uU(27,\"\\n                \"),n.TgZ(28,\"span\"),n._uU(29),n.ALo(30,\"i18n\"),n.qZA(),n._uU(31,\"\\n              \"),n.qZA(),n._uU(32,\"\\n              \"),n.YNc(33,V,3,4,\"span\",28),n._uU(34,\"\\n            \"),n.qZA(),n._uU(35,\"\\n            \"),n.TgZ(36,\"div\",22),n._uU(37,\"\\n              \"),n.TgZ(38,\"label\",29),n._uU(39),n.ALo(40,\"i18n\"),n.qZA(),n._uU(41,\"\\n              \"),n.TgZ(42,\"input\",30),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw(2);return n.KtG(i.token=t)})),n.qZA(),n._uU(43,\"\\n            \"),n.qZA(),n._uU(44,\"\\n          \"),n.BQk()}if(2\u0026e){const e=n.MAs(23),t=n.oxw(2);n.xp6(5),n.Oqu(n.lcZ(6,10,\"twoFactorEmailDesc\")),n.xp6(9),n.hij(\"1. \",n.lcZ(15,12,\"twoFactorEmailEnterEmail\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",t.email),n.xp6(5),n.Q6J(\"appApiAction\",t.emailPromise)(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(26,14,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(30,16,\"sendEmail\")),n.xp6(4),n.Q6J(\"ngIf\",t.sentEmail),n.xp6(6),n.hij(\"2. \",n.lcZ(40,18,\"twoFactorEmailEnterCode\"),\"\"),n.xp6(3),n.Q6J(\"ngModel\",t.token)}}function H(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"enable\")))}function $(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"disable\")))}function W(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,G,11,10,\"ng-container\",13),n._uU(6,\"\\n          \"),n.YNc(7,j,45,20,\"ng-container\",13),n._uU(8,\"\\n        \"),n.qZA(),n._uU(9,\"\\n        \"),n.TgZ(10,\"div\",14),n._uU(11,\"\\n          \"),n.TgZ(12,\"button\",15),n._uU(13,\"\\n            \"),n._UZ(14,\"i\",16),n.ALo(15,\"i18n\"),n._uU(16,\"\\n            \"),n.YNc(17,H,3,3,\"span\",13),n._uU(18,\"\\n            \"),n.YNc(19,$,3,3,\"span\",13),n._uU(20,\"\\n          \"),n.qZA(),n._uU(21,\"\\n          \"),n.TgZ(22,\"button\",17),n._uU(23),n.ALo(24,\"i18n\"),n.qZA(),n._uU(25,\"\\n        \"),n.qZA(),n._uU(26,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",t.enabled),n.xp6(2),n.Q6J(\"ngIf\",!t.enabled),n.xp6(5),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(15,8,\"loading\")),n.xp6(3),n.Q6J(\"ngIf\",!t.enabled),n.xp6(2),n.Q6J(\"ngIf\",t.enabled),n.xp6(4),n.hij(\"\\n            \",n.lcZ(24,10,\"close\"),\"\\n          \")}}class X extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,i,n,s,r),this.stateService=o,this.type=l.L.Email,this.componentName=\"app-two-factor-email\"}auth(e){return super.auth(e),this.processResponse(e.response)}submit(){return this.enabled?super.disable(this.formPromise):this.enable()}sendEmail(){return Q(this,void 0,void 0,(function*(){try{const e=yield this.buildRequestModel(z.U);e.email=this.email,this.emailPromise=this.apiService.postTwoFactorEmailSetup(e),yield this.emailPromise,this.sentEmail=this.email}catch(e){this.logService.error(e)}}))}enable(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return Q(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(K);return t.email=this.email,t.token=this.token,e.enable.call(this,(()=\u003eQ(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorEmail(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}processResponse(e){return Q(this,void 0,void 0,(function*(){this.token=null,this.email=e.email,this.enabled=e.enabled,this.enabled||null!=this.email\u0026\u0026\"\"!==this.email||(this.email=yield this.stateService.getEmail())}))}}function ee(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"type\",e.type)}}function te(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n            \"),n.TgZ(6,\"code\",14),n._uU(7),n.qZA(),n._uU(8,\"\\n          \"),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"\",n.lcZ(4,2,\"twoFactorRecoveryYourCode\"),\":\"),n.xp6(4),n.Oqu(e.code)}}function ie(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n            \",n.lcZ(2,1,\"twoFactorRecoveryNoCode\"),\"\\n          \"))}function ne(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",15),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.print())})),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n            \",n.lcZ(2,1,\"printCode\"),\"\\n          \"))}function se(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",10),n._uU(3,\"\\n          \"),n.YNc(4,te,9,4,\"ng-container\",8),n._uU(5,\"\\n          \"),n.YNc(6,ie,3,3,\"ng-container\",8),n._uU(7,\"\\n        \"),n.qZA(),n._uU(8,\"\\n        \"),n.TgZ(9,\"div\",11),n._uU(10,\"\\n          \"),n.YNc(11,ne,3,3,\"button\",12),n._uU(12,\"\\n          \"),n.TgZ(13,\"button\",13),n._uU(14),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n        \"),n.qZA(),n._uU(17,\"\\n      \"),n.BQk()),2\u0026e){const e=n.oxw();n.xp6(4),n.Q6J(\"ngIf\",e.code),n.xp6(2),n.Q6J(\"ngIf\",!e.code),n.xp6(5),n.Q6J(\"ngIf\",e.code),n.xp6(3),n.hij(\"\\n            \",n.lcZ(15,4,\"close\"),\"\\n          \")}}X.ɵfac=function(e){return new(e||X)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(w.$),n.Y36(y.i),n.Y36(b.b),n.Y36(U.x))},X.ɵcmp=n.Xpm({type:X,selectors:[[\"app-two-factor-email\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faEmailTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faEmailTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[1,\"d-flex\"],[1,\"mr-3\"],[\"alt\",\"Email logo\",1,\"float-right\",\"ml-auto\",\"mfaType1\"],[1,\"form-group\"],[\"for\",\"email\"],[\"id\",\"email\",\"type\",\"text\",\"name\",\"Email\",\"required\",\"\",\"inputmode\",\"email\",\"appInputVerbatim\",\"false\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"mb-3\",\"d-flex\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-primary\",\"btn-sm\",\"btn-submit\",\"align-self-start\",3,\"appApiAction\",\"disabled\",\"click\"],[\"sendBtn\",\"\"],[\"class\",\"text-success ml-3\",4,\"ngIf\"],[\"for\",\"token\"],[\"id\",\"token\",\"type\",\"text\",\"name\",\"Token\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[1,\"text-success\",\"ml-3\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,B,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,W,27,12,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"emailTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.O5,A.Fj,A.JJ,A.JL,A.Q7,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});class oe{constructor(e){this.i18nService=e,this.type=-1,this.twoFactorProviderType=l.L}auth(e){this.authed=!0,this.processResponse(e.response)}print(){const e=window.open();e.document.write('\u003cdiv style=\"font-size: 18px; text-align: center;\"\u003e\u003cp\u003e'+this.i18nService.t(\"twoFactorRecoveryYourCode\")+\":\u003c/p\u003e\u003ccode style=\\\"font-family: Menlo, Monaco, Consolas, 'Courier New', monospace;\\\"\u003e\"+this.code+'\u003c/code\u003e\u003c/div\u003e\u003cp style=\"text-align: center;\"\u003e'+new Date+\"\u003c/p\u003e\"),e.onafterprint=()=\u003ee.close(),e.print()}formatString(e){return null==e?null:e.replace(/(.{4})/g,\"$1 \").trim().toUpperCase()}processResponse(e){this.code=this.formatString(e.code)}}oe.ɵfac=function(e){return new(e||oe)(n.Y36(m.D))},oe.ɵcmp=n.Xpm({type:oe,selectors:[[\"app-two-factor-recovery\"]],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faRecoveryTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faRecoveryTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"type\",\"onAuthed\",4,\"ngIf\"],[4,\"ngIf\"],[3,\"type\",\"onAuthed\"],[1,\"modal-body\",\"text-center\"],[1,\"modal-footer\"],[\"type\",\"button\",\"class\",\"btn btn-primary\",3,\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[1,\"text-lg\"],[\"type\",\"button\",1,\"btn\",\"btn-primary\",3,\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,ee,2,1,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,se,18,6,\"ng-container\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"recoveryCodeTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.O5,Z.B,C.c,O.C],encapsulation:2});class re extends d.Y{}class ae extends d.Y{}var le=i(2051),ce=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function ue(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function de(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",31),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.s9C(\"title\",n.lcZ(1,2,\"enabled\")),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"twoStepLoginProviderEnabled\"),\"\\n          \"))}function pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"strong\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw().index;n.xp6(1),n.Oqu(n.xi3(2,1,\"webAuthnkeyX\",e+1))}}function he(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"strong\"),n._uU(1),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.Oqu(e.name)}}function ge(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n                  \"),n.TgZ(2,\"span\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n                \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,1,\"webAuthnMigrated\")))}function fe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n                \"),n.YNc(2,ge,6,3,\"ng-container\",25),n._uU(3,\"\\n              \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(2),n.Q6J(\"ngIf\",e.migrated)}}function me(e,t){1\u0026e\u0026\u0026(n._UZ(0,\"i\",37),n.ALo(1,\"i18n\")),2\u0026e\u0026\u0026n.s9C(\"title\",n.lcZ(1,1,\"loading\"))}function ye(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n                \"),n.YNc(2,me,2,3,\"i\",35),n._uU(3,\"\\n                -\\n                \"),n.TgZ(4,\"a\",36),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.remove(t))})),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n              \"),n.BQk()}if(2\u0026e){n.oxw();const e=n.MAs(1);n.xp6(2),n.Q6J(\"ngIf\",e.loading),n.xp6(3),n.Oqu(n.lcZ(6,2,\"remove\"))}}function ve(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"li\",32,33),n._uU(2,\"\\n              \"),n._UZ(3,\"i\",34),n._uU(4,\"\\n              \"),n.YNc(5,pe,3,4,\"strong\",25),n._uU(6,\"\\n              \"),n.YNc(7,he,2,1,\"strong\",25),n._uU(8,\"\\n              \"),n.YNc(9,fe,4,1,\"ng-container\",25),n._uU(10,\"\\n              \"),n.YNc(11,ye,8,4,\"ng-container\",25),n._uU(12,\"\\n            \"),n.qZA()),2\u0026e){const e=t.$implicit,i=n.MAs(1),s=n.oxw(2);n.Q6J(\"appApiAction\",e.removePromise),n.xp6(5),n.Q6J(\"ngIf\",!e.configured||!e.name),n.xp6(2),n.Q6J(\"ngIf\",e.configured\u0026\u0026e.name),n.xp6(2),n.Q6J(\"ngIf\",e.configured\u0026\u0026!i.loading),n.xp6(2),n.Q6J(\"ngIf\",s.keysConfiguredCount\u003e1\u0026\u0026e.configured)}}function we(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n._UZ(2,\"i\",38),n._uU(3,\"\\n          \"),n.BQk())}function be(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",38),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fWaiting\"),\"...\\n            \"))}function Ue(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",39),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fClickSave\"),\"\\n            \"))}function _e(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n._UZ(2,\"i\",40),n._uU(3),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.hij(\"\\n              \",n.lcZ(4,1,\"twoFactorU2fProblemReadingTryAgain\"),\"\\n            \"))}function Ae(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n            \"),n.YNc(2,be,5,3,\"ng-container\",25),n._uU(3,\"\\n            \"),n.YNc(4,Ue,5,3,\"ng-container\",25),n._uU(5,\"\\n            \"),n.YNc(6,_e,5,3,\"ng-container\",25),n._uU(7,\"\\n          \"),n.BQk()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnListening),n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnResponse),n.xp6(2),n.Q6J(\"ngIf\",e.webAuthnError)}}function Ze(e,t){1\u0026e\u0026\u0026(n._UZ(0,\"i\",41),n.ALo(1,\"i18n\")),2\u0026e\u0026\u0026n.s9C(\"title\",n.lcZ(1,1,\"loading\"))}function xe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"save\")))}function Se(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",42,43),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.disable())})),n._uU(2,\"\\n            \"),n._UZ(3,\"i\",41),n.ALo(4,\"i18n\"),n._uU(5,\"\\n            \"),n.TgZ(6,\"span\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.qZA()}if(2\u0026e){const e=n.MAs(1);n.Q6J(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(4,3,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(8,5,\"disableAllKeys\"))}}function Te(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,de,4,6,\"app-callout\",13),n._uU(6,\"\\n          \"),n.TgZ(7,\"app-callout\",14),n._uU(8,\"\\n            \"),n.TgZ(9,\"p\"),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"ul\",15),n._uU(14,\"\\n              \"),n.TgZ(15,\"li\"),n._uU(16),n.ALo(17,\"i18n\"),n.qZA(),n._uU(18,\"\\n            \"),n.qZA(),n._uU(19,\"\\n          \"),n.qZA(),n._uU(20,\"\\n          \"),n._UZ(21,\"img\",16),n._uU(22,\"\\n          \"),n.TgZ(23,\"ul\",17),n._uU(24,\"\\n            \"),n.YNc(25,ve,13,5,\"li\",18),n._uU(26,\"\\n          \"),n.qZA(),n._uU(27,\"\\n          \"),n._UZ(28,\"hr\"),n._uU(29,\"\\n          \"),n.TgZ(30,\"p\"),n._uU(31),n.ALo(32,\"i18n\"),n.qZA(),n._uU(33,\"\\n          \"),n.TgZ(34,\"ol\"),n._uU(35,\"\\n            \"),n.TgZ(36,\"li\"),n._uU(37),n.ALo(38,\"i18n\"),n.qZA(),n._uU(39,\"\\n            \"),n.TgZ(40,\"li\"),n._uU(41),n.ALo(42,\"i18n\"),n.qZA(),n._uU(43,\"\\n            \"),n.TgZ(44,\"li\"),n._uU(45),n.ALo(46,\"i18n\"),n.qZA(),n._uU(47,\"\\n            \"),n.TgZ(48,\"li\"),n._uU(49),n.ALo(50,\"i18n\"),n.qZA(),n._uU(51,\"\\n          \"),n.qZA(),n._uU(52,\"\\n          \"),n.TgZ(53,\"div\",19),n._uU(54,\"\\n            \"),n.TgZ(55,\"div\",20),n._uU(56,\"\\n              \"),n.TgZ(57,\"label\",21),n._uU(58),n.ALo(59,\"i18n\"),n.qZA(),n._uU(60,\"\\n              \"),n.TgZ(61,\"input\",22),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.name=t)})),n.qZA(),n._uU(62,\"\\n            \"),n.qZA(),n._uU(63,\"\\n          \"),n.qZA(),n._uU(64,\"\\n          \"),n.TgZ(65,\"button\",23,24),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.readKey())})),n._uU(67),n.ALo(68,\"i18n\"),n.qZA(),n._uU(69,\"\\n          \"),n.YNc(70,we,4,0,\"ng-container\",25),n._uU(71,\"\\n          \"),n.YNc(72,Ae,8,3,\"ng-container\",25),n._uU(73,\"\\n        \"),n.qZA(),n._uU(74,\"\\n        \"),n.TgZ(75,\"div\",26),n._uU(76,\"\\n          \"),n.TgZ(77,\"button\",27),n._uU(78,\"\\n            \"),n.YNc(79,Ze,2,3,\"i\",28),n._uU(80,\"\\n            \"),n.YNc(81,xe,3,3,\"span\",25),n._uU(82,\"\\n          \"),n.qZA(),n._uU(83,\"\\n          \"),n.YNc(84,Se,10,7,\"button\",29),n._uU(85,\"\\n          \"),n.TgZ(86,\"button\",30),n._uU(87),n.ALo(88,\"i18n\"),n.qZA(),n._uU(89,\"\\n        \"),n.qZA(),n._uU(90,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.MAs(66),i=n.oxw();n.Q6J(\"appApiAction\",i.formPromise),n.xp6(5),n.Q6J(\"ngIf\",i.enabled),n.xp6(5),n.Oqu(n.lcZ(11,23,\"twoFactorWebAuthnWarning\")),n.xp6(6),n.Oqu(n.lcZ(17,25,\"twoFactorWebAuthnSupportWeb\")),n.xp6(9),n.Q6J(\"ngForOf\",i.keys),n.xp6(6),n.hij(\"\",n.lcZ(32,27,\"twoFactorWebAuthnAdd\"),\":\"),n.xp6(6),n.Oqu(n.lcZ(38,29,\"twoFactorU2fGiveName\")),n.xp6(4),n.Oqu(n.lcZ(42,31,\"twoFactorU2fPlugInReadKey\")),n.xp6(4),n.Oqu(n.lcZ(46,33,\"twoFactorU2fTouchButton\")),n.xp6(4),n.Oqu(n.lcZ(50,35,\"twoFactorU2fSaveForm\")),n.xp6(9),n.Oqu(n.lcZ(59,37,\"name\")),n.xp6(3),n.Q6J(\"ngModel\",i.name)(\"disabled\",!i.keyIdAvailable),n.xp6(4),n.Q6J(\"disabled\",t.loading||i.webAuthnListening||!i.keyIdAvailable)(\"appApiAction\",i.challengePromise),n.xp6(2),n.hij(\"\\n            \",n.lcZ(68,39,\"readKey\"),\"\\n          \"),n.xp6(3),n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",!t.loading),n.xp6(5),n.Q6J(\"disabled\",e.loading||!i.webAuthnResponse),n.xp6(2),n.Q6J(\"ngIf\",e.loading),n.xp6(2),n.Q6J(\"ngIf\",!e.loading),n.xp6(3),n.Q6J(\"ngIf\",i.enabled),n.xp6(3),n.hij(\"\\n            \",n.lcZ(88,41,\"close\"),\"\\n          \")}}class Ce extends g.c{constructor(e,t,i,n,s,o,r){super(e,t,i,s,o,r),this.ngZone=n,this.type=l.L.WebAuthn,this.keyIdAvailable=null,this.keysConfiguredCount=0,this.componentName=\"app-two-factor-webauthn\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return ce(this,void 0,void 0,(function*(){if(null==this.webAuthnResponse||null==this.keyIdAvailable)return Promise.reject();const t=yield this.buildRequestModel(ae);return t.deviceResponse=this.webAuthnResponse,t.id=this.keyIdAvailable,t.name=this.name,e.enable.call(this,(()=\u003ece(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorWebAuthn(t);const e=yield this.formPromise;yield this.processResponse(e)}))))}))}disable(){return super.disable(this.formPromise)}remove(e){return ce(this,void 0,void 0,(function*(){if(this.keysConfiguredCount\u003c=1||null!=e.removePromise)return;const t=null!=e.name?e.name:this.i18nService.t(\"webAuthnkeyX\",e.id);if(!(yield this.dialogService.openSimpleDialog({title:t,content:{key:\"removeU2fConfirmation\"},type:\"warning\"})))return;const i=yield this.buildRequestModel(re);i.id=e.id;try{e.removePromise=this.apiService.deleteTwoFactorWebAuthn(i);const t=yield e.removePromise;e.removePromise=null,yield this.processResponse(t)}catch(n){this.logService.error(n)}}))}readKey(){return ce(this,void 0,void 0,(function*(){if(null==this.keyIdAvailable)return;const e=yield this.buildRequestModel(d.Y);try{this.challengePromise=this.apiService.getTwoFactorWebAuthnChallenge(e);const t=yield this.challengePromise;this.readDevice(t)}catch(t){this.logService.error(t)}}))}readDevice(e){console.log(\"listening for key...\"),this.resetWebAuthn(!0),navigator.credentials.create({publicKey:e}).then((e=\u003e{this.ngZone.run((()=\u003e{this.webAuthnListening=!1,this.webAuthnResponse=e}))})).catch((e=\u003e{console.error(e),this.resetWebAuthn(!1),this.webAuthnError=!0}))}resetWebAuthn(e=!1){this.webAuthnResponse=null,this.webAuthnError=!1,this.webAuthnListening=e}processResponse(e){this.resetWebAuthn(),this.keys=[],this.keyIdAvailable=null,this.name=null,this.keysConfiguredCount=0;for(let t=1;t\u003c=5;t++){if(null!=e.keys){const i=e.keys.filter((e=\u003ee.id===t));if(i.length\u003e0){this.keysConfiguredCount++,this.keys.push({id:t,name:i[0].name,configured:!0,migrated:i[0].migrated,removePromise:null});continue}}this.keys.push({id:t,name:null,configured:!1,removePromise:null}),null==this.keyIdAvailable\u0026\u0026(this.keyIdAvailable=t)}this.enabled=e.enabled}}Ce.ɵfac=function(e){return new(e||Ce)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(n.R0b),n.Y36(w.$),n.Y36(y.i),n.Y36(U.x))},Ce.ɵcmp=n.Xpm({type:Ce,selectors:[[\"app-two-factor-webauthn\"]],features:[n.qOj],decls:31,vars:11,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faU2fTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-lg\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faU2fTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\",4,\"ngIf\"],[\"type\",\"warning\"],[1,\"mb-0\"],[\"alt\",\"FIDO2 WebAuthn logo'\",1,\"float-right\",\"ml-5\",\"mfaType7\"],[1,\"bwi-ul\"],[3,\"appApiAction\",4,\"ngFor\",\"ngForOf\"],[1,\"row\"],[1,\"form-group\",\"col-6\"],[\"for\",\"name\"],[\"id\",\"name\",\"type\",\"text\",\"name\",\"Name\",1,\"form-control\",3,\"ngModel\",\"disabled\",\"ngModelChange\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"mr-2\",3,\"disabled\",\"appApiAction\",\"click\"],[\"readKeyBtn\",\"\"],[4,\"ngIf\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",3,\"disabled\"],[\"class\",\"bwi bwi-spinner bwi-spin\",\"aria-hidden\",\"true\",3,\"title\",4,\"ngIf\"],[\"type\",\"button\",\"class\",\"btn btn-outline-secondary btn-submit\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[3,\"appApiAction\"],[\"removeKeyBtn\",\"\"],[1,\"bwi\",\"bwi-li\",\"bwi-key\"],[\"class\",\"bwi bwi-spin bwi-spinner text-muted bwi-fw\",\"aria-hidden\",\"true\",3,\"title\",4,\"ngIf\"],[\"href\",\"#\",\"appStopClick\",\"\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spin\",\"bwi-spinner\",\"text-muted\",\"bwi-fw\",3,\"title\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check-circle\",\"text-success\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-exclamation-triangle\",\"text-danger\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"btn-submit\",3,\"disabled\",\"click\"],[\"disableBtn\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n        \"),n.qZA(),n._uU(15,\"\\n        \"),n.TgZ(16,\"button\",5),n.ALo(17,\"i18n\"),n._uU(18,\"\\n          \"),n.TgZ(19,\"span\",6),n._uU(20,\"×\"),n.qZA(),n._uU(21,\"\\n        \"),n.qZA(),n._uU(22,\"\\n      \"),n.qZA(),n._uU(23,\"\\n      \"),n.YNc(24,ue,2,2,\"app-two-factor-verify\",7),n._uU(25,\"\\n      \"),n.YNc(26,Te,91,43,\"form\",8),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n  \"),n.qZA(),n._uU(29,\"\\n\"),n.qZA(),n._uU(30,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,5,\"twoStepLogin\"),\"\\n          \"),n.xp6(3),n.Oqu(n.lcZ(13,7,\"webAuthnTitle\")),n.xp6(4),n.s9C(\"appA11yTitle\",n.lcZ(17,9,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.sg,_.O5,A.Fj,A.JJ,A.JL,A.On,A.F,Z.B,x.b,S.O,le.O,C.c,O.C],encapsulation:2});class Oe extends d.Y{}var ke=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function qe(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"app-two-factor-verify\",9),n.NdJ(\"onAuthed\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.auth(t))})),n._uU(1,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.oxw();n.Q6J(\"organizationId\",e.organizationId)(\"type\",e.type)}}function Pe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"app-callout\",29),n.ALo(1,\"i18n\"),n._uU(2),n.ALo(3,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.s9C(\"title\",n.lcZ(1,2,\"enabled\")),n.xp6(2),n.hij(\"\\n            \",n.lcZ(3,4,\"twoStepLoginProviderEnabled\"),\"\\n          \"))}function Ie(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"input\",34),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw().$implicit;return n.KtG(i.key=t)})),n.qZA()}if(2\u0026e){const e=n.oxw(),t=e.index,i=e.$implicit;n.MGl(\"id\",\"key\",t+1,\"\")(\"name\",\"Key\",t+1,\"\"),n.Q6J(\"ngModel\",i.key)}}function Me(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\",35),n._uU(1,\"\\n                \"),n.TgZ(2,\"span\",36),n._uU(3),n.qZA(),n._uU(4,\"\\n                \"),n.TgZ(5,\"button\",37),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw().$implicit,i=n.oxw(2);return n.KtG(i.remove(t))})),n.ALo(6,\"i18n\"),n._uU(7,\"\\n                  \"),n._UZ(8,\"i\",38),n._uU(9,\"\\n                \"),n.qZA(),n._uU(10,\"\\n              \"),n.qZA()}if(2\u0026e){const e=n.oxw().$implicit;n.xp6(3),n.Oqu(e.existingKey),n.xp6(2),n.s9C(\"appA11yTitle\",n.lcZ(6,2,\"remove\"))}}function Ne(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",30),n._uU(1,\"\\n              \"),n.TgZ(2,\"label\",31),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n              \"),n.YNc(6,Ie,1,3,\"input\",32),n._uU(7,\"\\n              \"),n.YNc(8,Me,11,4,\"div\",33),n._uU(9,\"\\n            \"),n.qZA()),2\u0026e){const e=t.$implicit,i=t.index;n.xp6(2),n.MGl(\"for\",\"key\",i+1,\"\"),n.xp6(1),n.Oqu(n.xi3(4,4,\"yubikeyX\",i+1)),n.xp6(3),n.Q6J(\"ngIf\",!e.existingKey),n.xp6(2),n.Q6J(\"ngIf\",e.existingKey)}}function Le(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",39,40),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.disable())})),n._uU(2,\"\\n            \"),n._UZ(3,\"i\",26),n.ALo(4,\"i18n\"),n._uU(5,\"\\n            \"),n.TgZ(6,\"span\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw(2);n.Q6J(\"appApiAction\",t.disablePromise)(\"disabled\",e.loading),n.xp6(3),n.s9C(\"title\",n.lcZ(4,4,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(8,6,\"disableAllKeys\"))}}function De(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",10,11),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n        \"),n.TgZ(3,\"div\",12),n._uU(4,\"\\n          \"),n.YNc(5,Pe,4,6,\"app-callout\",13),n._uU(6,\"\\n          \"),n.TgZ(7,\"app-callout\",14),n._uU(8,\"\\n            \"),n.TgZ(9,\"p\"),n._uU(10),n.ALo(11,\"i18n\"),n.qZA(),n._uU(12,\"\\n            \"),n.TgZ(13,\"ul\",15),n._uU(14,\"\\n              \"),n.TgZ(15,\"li\"),n._uU(16),n.ALo(17,\"i18n\"),n.qZA(),n._uU(18,\"\\n              \"),n.TgZ(19,\"li\"),n._uU(20),n.ALo(21,\"i18n\"),n.qZA(),n._uU(22,\"\\n            \"),n.qZA(),n._uU(23,\"\\n          \"),n.qZA(),n._uU(24,\"\\n          \"),n._UZ(25,\"img\",16),n._uU(26,\"\\n          \"),n.TgZ(27,\"p\"),n._uU(28),n.ALo(29,\"i18n\"),n.qZA(),n._uU(30,\"\\n          \"),n.TgZ(31,\"ol\"),n._uU(32,\"\\n            \"),n.TgZ(33,\"li\"),n._uU(34),n.ALo(35,\"i18n\"),n.qZA(),n._uU(36,\"\\n            \"),n.TgZ(37,\"li\"),n._uU(38),n.ALo(39,\"i18n\"),n.qZA(),n._uU(40,\"\\n            \"),n.TgZ(41,\"li\"),n._uU(42),n.ALo(43,\"i18n\"),n.qZA(),n._uU(44,\"\\n            \"),n.TgZ(45,\"li\"),n._uU(46),n.ALo(47,\"i18n\"),n.qZA(),n._uU(48,\"\\n          \"),n.qZA(),n._uU(49,\"\\n          \"),n._UZ(50,\"hr\"),n._uU(51,\"\\n          \"),n.TgZ(52,\"div\",17),n._uU(53,\"\\n            \"),n.YNc(54,Ne,10,7,\"div\",18),n._uU(55,\"\\n          \"),n.qZA(),n._uU(56,\"\\n          \"),n.TgZ(57,\"strong\",19),n._uU(58),n.ALo(59,\"i18n\"),n.qZA(),n._uU(60,\"\\n          \"),n.TgZ(61,\"div\",20),n._uU(62,\"\\n            \"),n.TgZ(63,\"input\",21),n.NdJ(\"ngModelChange\",(function(t){n.CHM(e);const i=n.oxw();return n.KtG(i.nfc=t)})),n.qZA(),n._uU(64,\"\\n            \"),n.TgZ(65,\"label\",22),n._uU(66),n.ALo(67,\"i18n\"),n.qZA(),n._uU(68,\"\\n          \"),n.qZA(),n._uU(69,\"\\n          \"),n.TgZ(70,\"small\",23),n._uU(71),n.ALo(72,\"i18n\"),n.qZA(),n._uU(73,\"\\n        \"),n.qZA(),n._uU(74,\"\\n        \"),n.TgZ(75,\"div\",24),n._uU(76,\"\\n          \"),n.TgZ(77,\"button\",25),n._uU(78,\"\\n            \"),n._UZ(79,\"i\",26),n.ALo(80,\"i18n\"),n._uU(81,\"\\n            \"),n.TgZ(82,\"span\"),n._uU(83),n.ALo(84,\"i18n\"),n.qZA(),n._uU(85,\"\\n          \"),n.qZA(),n._uU(86,\"\\n          \"),n.YNc(87,Le,10,8,\"button\",27),n._uU(88,\"\\n          \"),n.TgZ(89,\"button\",28),n._uU(90),n.ALo(91,\"i18n\"),n.qZA(),n._uU(92,\"\\n        \"),n.qZA(),n._uU(93,\"\\n      \"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngIf\",t.enabled),n.xp6(5),n.Oqu(n.lcZ(11,20,\"twoFactorYubikeyWarning\")),n.xp6(6),n.Oqu(n.lcZ(17,22,\"twoFactorYubikeySupportUsb\")),n.xp6(4),n.Oqu(n.lcZ(21,24,\"twoFactorYubikeySupportMobile\")),n.xp6(8),n.hij(\"\",n.lcZ(29,26,\"twoFactorYubikeyAdd\"),\":\"),n.xp6(6),n.Oqu(n.lcZ(35,28,\"twoFactorYubikeyPlugIn\")),n.xp6(4),n.Oqu(n.lcZ(39,30,\"twoFactorYubikeySelectKey\")),n.xp6(4),n.Oqu(n.lcZ(43,32,\"twoFactorYubikeyTouchButton\")),n.xp6(4),n.Oqu(n.lcZ(47,34,\"twoFactorYubikeySaveForm\")),n.xp6(8),n.Q6J(\"ngForOf\",t.keys),n.xp6(4),n.Oqu(n.lcZ(59,36,\"nfcSupport\")),n.xp6(5),n.Q6J(\"ngModel\",t.nfc),n.xp6(3),n.Oqu(n.lcZ(67,38,\"twoFactorYubikeySupportsNfc\")),n.xp6(5),n.Oqu(n.lcZ(72,40,\"twoFactorYubikeySupportsNfcDesc\")),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(80,42,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(84,44,\"save\")),n.xp6(4),n.Q6J(\"ngIf\",t.enabled),n.xp6(3),n.hij(\"\\n            \",n.lcZ(91,46,\"close\"),\"\\n          \")}}class Ee extends g.c{constructor(e,t,i,n,s,o){super(e,t,i,n,s,o),this.type=l.L.Yubikey,this.nfc=!1,this.componentName=\"app-two-factor-yubikey\"}auth(e){super.auth(e),this.processResponse(e.response)}submit(){const e=Object.create(null,{enable:{get:()=\u003esuper.enable}});return ke(this,void 0,void 0,(function*(){const t=yield this.buildRequestModel(Oe);return t.key1=null!=this.keys\u0026\u0026this.keys.length\u003e0?this.keys[0].key:null,t.key2=null!=this.keys\u0026\u0026this.keys.length\u003e1?this.keys[1].key:null,t.key3=null!=this.keys\u0026\u0026this.keys.length\u003e2?this.keys[2].key:null,t.key4=null!=this.keys\u0026\u0026this.keys.length\u003e3?this.keys[3].key:null,t.key5=null!=this.keys\u0026\u0026this.keys.length\u003e4?this.keys[4].key:null,t.nfc=this.nfc,e.enable.call(this,(()=\u003eke(this,void 0,void 0,(function*(){this.formPromise=this.apiService.putTwoFactorYubiKey(t);const e=yield this.formPromise;yield this.processResponse(e),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"yubikeysUpdated\"))}))))}))}disable(){return super.disable(this.disablePromise)}remove(e){e.existingKey=null,e.key=null}processResponse(e){this.enabled=e.enabled,this.keys=[{key:e.key1,existingKey:this.padRight(e.key1)},{key:e.key2,existingKey:this.padRight(e.key2)},{key:e.key3,existingKey:this.padRight(e.key3)},{key:e.key4,existingKey:this.padRight(e.key4)},{key:e.key5,existingKey:this.padRight(e.key5)}],this.nfc=e.nfc||!e.enabled}padRight(e,t=\"•\",i=44){if(null==e||null==t||e.length\u003e=i)return e;const n=(i-e.length)/t.length;for(let s=0;s\u003cn;s++)e+=t;return e}}Ee.ɵfac=function(e){return new(e||Ee)(n.Y36(f.s),n.Y36(m.D),n.Y36(v.P),n.Y36(w.$),n.Y36(y.i),n.Y36(U.x))},Ee.ɵcmp=n.Xpm({type:Ee,selectors:[[\"app-two-factor-yubikey\"]],features:[n.qOj],decls:30,vars:8,consts:[[\"role\",\"dialog\",\"aria-modal\",\"true\",\"aria-labelledby\",\"2faYubiKeyTitle\",1,\"modal\",\"fade\"],[\"role\",\"document\",1,\"modal-dialog\",\"modal-lg\"],[1,\"modal-content\"],[1,\"modal-header\"],[\"id\",\"2faYubiKeyTitle\",1,\"modal-title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"close\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\"],[3,\"organizationId\",\"type\",\"onAuthed\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[3,\"organizationId\",\"type\",\"onAuthed\"],[\"ngNativeValidate\",\"\",\"autocomplete\",\"off\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\",4,\"ngIf\"],[\"type\",\"warning\"],[1,\"mb-0\"],[\"alt\",\"YubiKey OTP security key logo\",1,\"float-right\",\"mfaType3\"],[1,\"row\"],[\"class\",\"form-group col-6\",4,\"ngFor\",\"ngForOf\"],[1,\"d-block\",\"mb-2\"],[1,\"form-check\"],[\"type\",\"checkbox\",\"id\",\"nfc\",\"name\",\"Nfc\",1,\"form-check-input\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"nfc\",1,\"form-check-label\"],[1,\"form-text\",\"text-muted\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"class\",\"btn btn-outline-secondary btn-submit\",3,\"appApiAction\",\"disabled\",\"click\",4,\"ngIf\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"],[\"type\",\"success\",\"icon\",\"bwi bwi-check-circle\",3,\"title\"],[1,\"form-group\",\"col-6\"],[3,\"for\"],[\"type\",\"password\",\"class\",\"form-control\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",3,\"id\",\"name\",\"ngModel\",\"ngModelChange\",4,\"ngIf\"],[\"class\",\"d-flex\",4,\"ngIf\"],[\"type\",\"password\",\"appInputVerbatim\",\"\",\"autocomplete\",\"new-password\",1,\"form-control\",3,\"id\",\"name\",\"ngModel\",\"ngModelChange\"],[1,\"d-flex\"],[1,\"mr-2\"],[\"type\",\"button\",1,\"btn\",\"btn-link\",\"text-danger\",\"ml-auto\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-minus-circle\",\"bwi-lg\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",\"btn-submit\",3,\"appApiAction\",\"disabled\",\"click\"],[\"disableBtn\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.TgZ(2,\"div\",1),n._uU(3,\"\\n    \"),n.TgZ(4,\"div\",2),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",3),n._uU(7,\"\\n        \"),n.TgZ(8,\"h1\",4),n._uU(9),n.ALo(10,\"i18n\"),n.TgZ(11,\"small\"),n._uU(12,\"YubiKey\"),n.qZA(),n._uU(13,\"\\n        \"),n.qZA(),n._uU(14,\"\\n        \"),n.TgZ(15,\"button\",5),n.ALo(16,\"i18n\"),n._uU(17,\"\\n          \"),n.TgZ(18,\"span\",6),n._uU(19,\"×\"),n.qZA(),n._uU(20,\"\\n        \"),n.qZA(),n._uU(21,\"\\n      \"),n.qZA(),n._uU(22,\"\\n      \"),n.YNc(23,qe,2,2,\"app-two-factor-verify\",7),n._uU(24,\"\\n      \"),n.YNc(25,De,94,48,\"form\",8),n._uU(26,\"\\n    \"),n.qZA(),n._uU(27,\"\\n  \"),n.qZA(),n._uU(28,\"\\n\"),n.qZA(),n._uU(29,\"\\n\")),2\u0026e\u0026\u0026(n.xp6(9),n.hij(\"\\n          \",n.lcZ(10,4,\"twoStepLogin\"),\"\\n          \"),n.xp6(6),n.s9C(\"appA11yTitle\",n.lcZ(16,6,\"close\")),n.xp6(8),n.Q6J(\"ngIf\",!t.authed),n.xp6(2),n.Q6J(\"ngIf\",t.authed))},dependencies:[_.sg,_.O5,A.Fj,A.Wl,A.JJ,A.JL,A.On,A.F,Z.B,x.b,S.O,T.b,C.c,O.C],encapsulation:2});var Fe=i(34961),Re=i(83924),Je=i(75557),Ye=i(81974),ze=i(24083),Ke=i(55039),Qe=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const Be=[\"recoveryTemplate\"],Ge=[\"authenticatorTemplate\"],Ve=[\"yubikeyTemplate\"],je=[\"duoTemplate\"],He=[\"emailTemplate\"],$e=[\"webAuthnTemplate\"];function We(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"h1\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLogin\")))}function Xe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"h1\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLoginEnforcement\")))}function et(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"p\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"twoStepLoginDesc\")))}function tt(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.TgZ(3,\"a\",13),n._uU(4),n.ALo(5,\"i18n\"),n.qZA(),n._uU(6,\"\\n      \"),n._UZ(7,\"br\"),n._uU(8),n.ALo(9,\"i18n\"),n._UZ(10,\"br\"),n._uU(11,\"\\n      \"),n._UZ(12,\"br\"),n._uU(13,\"\\n      \"),n.TgZ(14,\"p\"),n._uU(15),n.ALo(16,\"i18n\"),n.qZA(),n._uU(17,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n      \",n.lcZ(2,4,\"twoStepLoginEnterpriseDescStart\"),\"\\n      \"),n.xp6(3),n.hij(\"\",n.lcZ(5,6,\"twoStepLoginPolicy\"),\".\"),n.xp6(4),n.hij(\"\\n      \",n.lcZ(9,8,\"twoStepLoginOrganizationDuoDesc\"),\"\\n      \"),n.xp6(7),n.Oqu(n.lcZ(16,10,\"twoStepLoginOrganizationSsoDesc\")))}function it(e,t){1\u0026e\u0026\u0026(n._uU(0),n.ALo(1,\"i18n\"),n._UZ(2,\"br\"),n._uU(3),n.ALo(4,\"i18n\")),2\u0026e\u0026\u0026(n.hij(\"\\n      \",n.lcZ(1,2,\"twoStepLoginTeamsDesc\"),\"\\n      \"),n.xp6(3),n.hij(\"\\n      \",n.lcZ(4,4,\"twoStepLoginOrganizationDuoDesc\"),\"\\n    \"))}function nt(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3,\"\\n    \"),n.YNc(4,tt,18,12,\"ng-container\",11),n._uU(5,\"\\n    \"),n.YNc(6,it,5,6,\"ng-template\",null,12,n.W1O),n._uU(8,\"\\n  \"),n.qZA(),n._uU(9,\"\\n\"),n.BQk()),2\u0026e){const e=n.MAs(7),t=n.oxw();n.xp6(4),n.Q6J(\"ngIf\",t.isEnterpriseOrg)(\"ngIfElse\",e)}}function st(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"bit-callout\",14),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.TgZ(6,\"button\",15),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.recoveryCode())})),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,2,\"twoStepLoginRecoveryWarning\")),n.xp6(4),n.hij(\"\\n    \",n.lcZ(8,4,\"viewRecoveryCode\"),\"\\n  \"))}function ot(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n    \"),n._UZ(2,\"i\",16),n.ALo(3,\"i18n\"),n._uU(4,\"\\n    \"),n.TgZ(5,\"span\",17),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function rt(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"bit-callout\",14),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n  \",n.lcZ(2,1,\"twoStepLoginPolicyUserWarning\"),\"\\n\"))}function at(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n          \"),n._UZ(2,\"i\",25),n.ALo(3,\"i18n\"),n._uU(4,\"\\n          \"),n.TgZ(5,\"span\",17),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"enabled\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"enabled\")))}function lt(e,t){1\u0026e\u0026\u0026n._UZ(0,\"app-premium-badge\")}function ct(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"li\",18),n._uU(1,\"\\n    \"),n.TgZ(2,\"div\",19),n._uU(3,\"\\n      \"),n._UZ(4,\"img\",20),n._uU(5,\"\\n    \"),n.qZA(),n._uU(6,\"\\n    \"),n.TgZ(7,\"div\",21),n._uU(8,\"\\n      \"),n.TgZ(9,\"h3\",22),n._uU(10),n.YNc(11,at,9,6,\"ng-container\",1),n._uU(12,\"\\n        \"),n.YNc(13,lt,1,0,\"app-premium-badge\",1),n._uU(14,\"\\n      \"),n.qZA(),n._uU(15),n.qZA(),n._uU(16,\"\\n    \"),n.TgZ(17,\"div\",23),n._uU(18,\"\\n      \"),n.TgZ(19,\"button\",24),n.NdJ(\"click\",(function(){const t=n.CHM(e).$implicit,i=n.oxw();return n.KtG(i.manage(t.type))})),n._uU(20),n.ALo(21,\"i18n\"),n.qZA(),n._uU(22,\"\\n    \"),n.qZA(),n._uU(23,\"\\n  \"),n.qZA()}if(2\u0026e){const e=t.$implicit,i=n.oxw();n.xp6(4),n.Tol(\"mfaType\"+e.type),n.Q6J(\"alt\",e.name+\" logo\"),n.xp6(6),n.hij(\"\\n        \",e.name,\"\\n        \"),n.xp6(1),n.Q6J(\"ngIf\",e.enabled),n.xp6(2),n.Q6J(\"ngIf\",e.premium),n.xp6(2),n.hij(\"\\n      \",e.description,\"\\n    \"),n.xp6(4),n.Q6J(\"disabled\",!i.canAccessPremium\u0026\u0026e.premium),n.xp6(1),n.hij(\"\\n        \",n.lcZ(21,9,\"manage\"),\"\\n      \")}}function ut(e,t){}function dt(e,t){}function pt(e,t){}function ht(e,t){}function gt(e,t){}function ft(e,t){}const mt=function(e){return{\"mt-5\":e}};class yt{constructor(e,t,i,n,o){this.apiService=e,this.modalService=t,this.messagingService=i,this.policyService=n,this.stateService=o,this.providers=[],this.showPolicyWarning=!1,this.loading=!0,this.tabbedHeader=!0,this.destroy$=new s.x}ngOnInit(){return Qe(this,void 0,void 0,(function*(){this.canAccessPremium=yield this.stateService.getCanAccessPremium();for(const e in c.V){if(!c.V.hasOwnProperty(e))continue;const t=c.V[e];this.filterProvider(t.type)||this.providers.push({type:t.type,name:t.name,description:t.description,enabled:!1,premium:t.premium,sort:t.sort})}this.providers.sort(((e,t)=\u003ee.sort-t.sort)),this.policyService.policyAppliesToActiveUser$(a.Mi.TwoFactorAuthentication).pipe((0,o.R)(this.destroy$)).subscribe((e=\u003e{this.twoFactorAuthPolicyAppliesToActiveUser=e})),yield this.load()}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}load(){return Qe(this,void 0,void 0,(function*(){this.loading=!0;(yield this.getTwoFactorProviders()).data.forEach((e=\u003e{this.providers.forEach((t=\u003e{e.type===t.type\u0026\u0026(t.enabled=e.enabled)}))})),this.evaluatePolicies(),this.loading=!1}))}manage(e){return Qe(this,void 0,void 0,(function*(){switch(e){case l.L.Authenticator:(yield this.openModal(this.authenticatorModalRef,J)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Authenticator)}));break;case l.L.Yubikey:(yield this.openModal(this.yubikeyModalRef,Ee)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Yubikey)}));break;case l.L.Duo:(yield this.openModal(this.duoModalRef,Y.C)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Duo)}));break;case l.L.Email:(yield this.openModal(this.emailModalRef,X)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.Email)}));break;case l.L.WebAuthn:(yield this.openModal(this.webAuthnModalRef,Ce)).onUpdated.subscribe((e=\u003e{this.updateStatus(e,l.L.WebAuthn)}));break}}))}recoveryCode(){this.openModal(this.recoveryModalRef,oe)}premiumRequired(){return Qe(this,void 0,void 0,(function*(){this.canAccessPremium||this.messagingService.send(\"premiumRequired\")}))}getTwoFactorProviders(){return this.apiService.getTwoFactorProviders()}filterProvider(e){return e===l.L.OrganizationDuo}openModal(e,t){return Qe(this,void 0,void 0,(function*(){const[i,n]=yield this.modalService.openViewRef(t,e);return this.modal=i,n}))}updateStatus(e,t){e||null==this.modal||this.modal.close(),this.providers.forEach((i=\u003e{i.type===t\u0026\u0026(i.enabled=e)})),this.evaluatePolicies()}evaluatePolicies(){null==this.organizationId\u0026\u00261===this.providers.filter((e=\u003ee.enabled)).length?this.showPolicyWarning=this.twoFactorAuthPolicyAppliesToActiveUser:this.showPolicyWarning=!1}get isEnterpriseOrg(){var e;return(null===(e=this.organization)||void 0===e?void 0:e.planProductType)===u.kv.Enterprise}}yt.ɵfac=function(e){return new(e||yt)(n.Y36(f.s),n.Y36(r.Z),n.Y36(Fe.o),n.Y36(Re.d),n.Y36(b.b))},yt.ɵcmp=n.Xpm({type:yt,selectors:[[\"app-two-factor-setup\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(n.Gf(Be,7,n.s_b),n.Gf(Ge,7,n.s_b),n.Gf(Ve,7,n.s_b),n.Gf(je,7,n.s_b),n.Gf(He,7,n.s_b),n.Gf($e,7,n.s_b)),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.recoveryModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.authenticatorModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.yubikeyModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.duoModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.emailModalRef=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.webAuthnModalRef=e.first)}},decls:44,vars:15,consts:[[3,\"ngClass\"],[4,\"ngIf\"],[\"type\",\"warning\",4,\"ngIf\"],[1,\"list-group\",\"list-group-2fa\"],[\"class\",\"list-group-item d-flex align-items-center\",4,\"ngFor\",\"ngForOf\"],[\"authenticatorTemplate\",\"\"],[\"recoveryTemplate\",\"\"],[\"duoTemplate\",\"\"],[\"emailTemplate\",\"\"],[\"yubikeyTemplate\",\"\"],[\"webAuthnTemplate\",\"\"],[4,\"ngIf\",\"ngIfElse\"],[\"teamsDescription\",\"\"],[\"routerLink\",\"../policies\"],[\"type\",\"warning\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"bwi-fw\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"list-group-item\",\"d-flex\",\"align-items-center\"],[1,\"logo-2fa\",\"d-flex\",\"justify-content-center\"],[3,\"alt\"],[1,\"mx-4\"],[1,\"mb-0\"],[1,\"ml-auto\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check\",\"text-success\",\"bwi-fw\",3,\"title\"]],template:function(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",0),n._uU(1,\"\\n  \"),n.YNc(2,We,3,3,\"h1\",1),n._uU(3,\"\\n  \"),n.YNc(4,Xe,3,3,\"h1\",1),n._uU(5,\"\\n\"),n.qZA(),n._uU(6,\"\\n\"),n.YNc(7,et,3,3,\"p\",1),n._uU(8,\"\\n\"),n.YNc(9,nt,10,2,\"ng-container\",1),n._uU(10,\"\\n\"),n.YNc(11,st,10,6,\"bit-callout\",2),n._uU(12,\"\\n\"),n.TgZ(13,\"h2\",0),n._uU(14),n.ALo(15,\"i18n\"),n.YNc(16,ot,9,6,\"small\",1),n._uU(17,\"\\n\"),n.qZA(),n._uU(18,\"\\n\"),n.YNc(19,rt,3,3,\"bit-callout\",2),n._uU(20,\"\\n\"),n.TgZ(21,\"ul\",3),n._uU(22,\"\\n  \"),n.YNc(23,ct,24,11,\"li\",4),n._uU(24,\"\\n\"),n.qZA(),n._uU(25,\"\\n\\n\"),n.YNc(26,ut,0,0,\"ng-template\",null,5,n.W1O),n._uU(28,\"\\n\"),n.YNc(29,dt,0,0,\"ng-template\",null,6,n.W1O),n._uU(31,\"\\n\"),n.YNc(32,pt,0,0,\"ng-template\",null,7,n.W1O),n._uU(34,\"\\n\"),n.YNc(35,ht,0,0,\"ng-template\",null,8,n.W1O),n._uU(37,\"\\n\"),n.YNc(38,gt,0,0,\"ng-template\",null,9,n.W1O),n._uU(40,\"\\n\"),n.YNc(41,ft,0,0,\"ng-template\",null,10,n.W1O),n._uU(43,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngClass\",t.tabbedHeader?\"tabbed-header\":\"page-header\"),n.xp6(2),n.Q6J(\"ngIf\",!t.organizationId||!t.isEnterpriseOrg),n.xp6(2),n.Q6J(\"ngIf\",t.organizationId\u0026\u0026t.isEnterpriseOrg),n.xp6(3),n.Q6J(\"ngIf\",!t.organizationId),n.xp6(2),n.Q6J(\"ngIf\",t.organizationId),n.xp6(2),n.Q6J(\"ngIf\",!t.organizationId),n.xp6(2),n.Q6J(\"ngClass\",n.VKq(13,mt,!t.organizationId)),n.xp6(1),n.hij(\"\\n  \",n.lcZ(15,11,\"providers\"),\"\\n  \"),n.xp6(2),n.Q6J(\"ngIf\",t.loading),n.xp6(3),n.Q6J(\"ngIf\",t.showPolicyWarning),n.xp6(4),n.Q6J(\"ngForOf\",t.providers))},dependencies:[_.mk,_.sg,_.O5,Je.rH,Ye.r,ze.O,Ke.R,O.C],encapsulation:2})},19227:(e,t,i)=\u003e{\"use strict\";i.d(t,{c:()=\u003eg});var n=i(24852),s=i(48103),o=i(70138),r=i(55602),a=i(66459),l=i(42304),c=i(98645),u=i(24610),d=i(94516),p=i(82933),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{constructor(e,t,i){this.apiService=e,this.logService=t,this.userVerificationService=i,this.onAuthed=new n.vpe}submit(){return h(this,void 0,void 0,(function*(){let e;try{this.formPromise=this.userVerificationService.buildRequest(this.secret).then((t=\u003e(e=this.secret.type===o.R.MasterPassword?t.masterPasswordHash:t.otp,this.apiCall(t))));const t=yield this.formPromise;this.onAuthed.emit({response:t,secret:e,verificationType:this.secret.type})}catch(t){this.logService.error(t)}}))}apiCall(e){switch(this.type){case-1:return this.apiService.getTwoFactorRecover(e);case s.L.Duo:case s.L.OrganizationDuo:return null!=this.organizationId?this.apiService.getTwoFactorOrganizationDuo(this.organizationId,e):this.apiService.getTwoFactorDuo(e);case s.L.Email:return this.apiService.getTwoFactorEmail(e);case s.L.WebAuthn:return this.apiService.getTwoFactorWebAuthn(e);case s.L.Authenticator:return this.apiService.getTwoFactorAuthenticator(e);case s.L.Yubikey:return this.apiService.getTwoFactorYubiKey(e)}}}g.ɵfac=function(e){return new(e||g)(n.Y36(r.s),n.Y36(a.$),n.Y36(l.i))},g.ɵcmp=n.Xpm({type:g,selectors:[[\"app-two-factor-verify\"]],inputs:{type:\"type\",organizationId:\"organizationId\"},outputs:{onAuthed:\"onAuthed\"},decls:27,vars:12,consts:[[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"modal-body\"],[\"ngDefaultControl\",\"\",\"name\",\"secret\",3,\"ngModel\",\"ngModelChange\"],[1,\"modal-footer\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",\"data-dismiss\",\"modal\",1,\"btn\",\"btn-outline-secondary\"]],template:function(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"form\",0,1),n.NdJ(\"ngSubmit\",(function(){return t.submit()})),n._uU(2,\"\\n  \"),n.TgZ(3,\"div\",2),n._uU(4,\"\\n    \"),n.TgZ(5,\"app-user-verification\",3),n.NdJ(\"ngModelChange\",(function(e){return t.secret=e})),n._uU(6,\"\\n    \"),n.qZA(),n._uU(7,\"\\n  \"),n.qZA(),n._uU(8,\"\\n  \"),n.TgZ(9,\"div\",4),n._uU(10,\"\\n    \"),n.TgZ(11,\"button\",5),n._uU(12,\"\\n      \"),n._UZ(13,\"i\",6),n.ALo(14,\"i18n\"),n._uU(15,\"\\n      \"),n.TgZ(16,\"span\"),n._uU(17),n.ALo(18,\"i18n\"),n.qZA(),n._uU(19,\"\\n    \"),n.qZA(),n._uU(20,\"\\n    \"),n.TgZ(21,\"button\",7),n._uU(22),n.ALo(23,\"i18n\"),n.qZA(),n._uU(24,\"\\n  \"),n.qZA(),n._uU(25,\"\\n\"),n.qZA(),n._uU(26,\"\\n\")),2\u0026e){const e=n.MAs(1);n.Q6J(\"appApiAction\",t.formPromise),n.xp6(5),n.Q6J(\"ngModel\",t.secret),n.xp6(6),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(14,6,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(18,8,\"continue\")),n.xp6(5),n.hij(\"\\n      \",n.lcZ(23,10,\"close\"),\"\\n    \")}},dependencies:[c.Fj,c.JJ,c.JL,c.On,c.F,u.b,d.W,p.C],encapsulation:2})},4519:(e,t,i)=\u003e{\"use strict\";i.d(t,{Zn:()=\u003er,CV:()=\u003eZ});var n=i(98645),s=i(98694),o=i(24852);class r{}r.ɵfac=function(e){return new(e||r)},r.ɵmod=o.oAB({type:r}),r.ɵinj=o.cJS({imports:[s.m,n.u5,n.UX]});var a=i(94516),l=i(65017),c=i(77494),u=i(56965),d=i(42304),p=i(99721),h=i(78627),g=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class f{constructor(e,t,i,n,s,o){this.modalRef=e,this.config=t,this.userVerificationService=i,this.formBuilder=n,this.platformUtilsService=s,this.i18nService=o,this.confirmDescription=this.config.data.confirmDescription,this.confirmButtonText=this.config.data.confirmButtonText,this.modalTitle=this.config.data.modalTitle,this.formGroup=this.formBuilder.group({secret:this.formBuilder.control(null)}),this.invalidSecret=!1,this.submit=()=\u003eg(this,void 0,void 0,(function*(){if(this.formGroup.markAllAsTouched(),!this.formGroup.invalid){try{yield this.userVerificationService.verifyUser(this.secret.value),this.invalidSecret=!1}catch(e){return this.invalidSecret=!0,void this.platformUtilsService.showToast(\"error\",this.i18nService.t(\"error\"),e.message)}this.close(!0)}}))}get secret(){return this.formGroup.controls.secret}close(e){this.modalRef.close(e)}}f.ɵfac=function(e){return new(e||f)(o.Y36(u.b),o.Y36(c.u),o.Y36(d.i),o.Y36(n.qu),o.Y36(p.P),o.Y36(h.D))},f.ɵdir=o.lG2({type:f});var m=i(46246),y=i(36338),v=i(81974),w=i(29465),b=i(18362),U=i(28315),_=i(82933);class A extends f{constructor(e,t,i,n,s,o){super(null,{data:e},i,n,s,o),this.dialogRef=t}close(e){this.dialogRef.close(e)}}A.ɵfac=function(e){return new(e||A)(o.Y36(l.Kt),o.Y36(l.zj),o.Y36(d.i),o.Y36(n.qu),o.Y36(p.P),o.Y36(h.D))},A.ɵcmp=o.Xpm({type:A,selectors:[[\"ng-component\"]],features:[o.qOj],decls:30,vars:15,consts:[[3,\"formGroup\",\"bitSubmit\"],[\"bitDialogTitle\",\"\"],[\"bitDialogContent\",\"\"],[\"bitTypography\",\"body1\"],[\"formControlName\",\"secret\",3,\"invalidSecret\",\"invalidSecretChange\"],[\"bitDialogFooter\",\"\"],[\"type\",\"submit\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"primary\"],[\"type\",\"button\",\"bitButton\",\"\",\"bitFormButton\",\"\",\"buttonType\",\"secondary\",\"bitDialogClose\",\"\"]],template:function(e,t){1\u0026e\u0026\u0026(o.TgZ(0,\"form\",0),o._uU(1,\"\\n  \"),o.TgZ(2,\"bit-dialog\"),o._uU(3,\"\\n    \"),o.TgZ(4,\"span\",1),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o.ynx(8,2),o._uU(9,\"\\n      \"),o.TgZ(10,\"p\",3),o._uU(11),o.ALo(12,\"i18n\"),o.qZA(),o._uU(13,\"\\n      \"),o.TgZ(14,\"app-user-verification\",4),o.NdJ(\"invalidSecretChange\",(function(e){return t.invalidSecret=e})),o.qZA(),o._uU(15,\"\\n    \"),o.BQk(),o._uU(16,\"\\n    \"),o.ynx(17,5),o._uU(18,\"\\n      \"),o.TgZ(19,\"button\",6),o._uU(20),o.ALo(21,\"i18n\"),o.qZA(),o._uU(22,\"\\n      \"),o.TgZ(23,\"button\",7),o._uU(24),o.ALo(25,\"i18n\"),o.qZA(),o._uU(26,\"\\n    \"),o.BQk(),o._uU(27,\"\\n  \"),o.qZA(),o._uU(28,\"\\n\"),o.qZA(),o._uU(29,\"\\n\")),2\u0026e\u0026\u0026(o.Q6J(\"formGroup\",t.formGroup)(\"bitSubmit\",t.submit),o.xp6(5),o.Oqu(o.lcZ(6,7,t.modalTitle)),o.xp6(6),o.Oqu(o.lcZ(12,9,t.confirmDescription)),o.xp6(3),o.Q6J(\"invalidSecret\",t.invalidSecret),o.xp6(6),o.hij(\"\\n        \",o.lcZ(21,11,t.confirmButtonText),\"\\n      \"),o.xp6(4),o.hij(\"\\n        \",o.lcZ(25,13,\"cancel\"),\"\\n      \"))},dependencies:[n._Y,n.JJ,n.JL,n.sg,n.u,m.b,y.u,v.r,w.a,b.f,U.t,a.W,_.C],encapsulation:2});const Z=(e,t)=\u003ee.open(A,t)},94516:(e,t,i)=\u003e{\"use strict\";i.d(t,{W:()=\u003eq});var n=i(81815),s=i(98645),o=i(24852),r=i(54019),a=i(68362),l=i(70138),c=i(27646),u=i(76528),d=i(42304),p=i(78627),h=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class g{get invalidSecret(){return this._invalidSecret}set invalidSecret(e){this._invalidSecret=e,this.invalidSecretChange.emit(e),e\u0026\u0026this.secret.markAsTouched(),this.secret.updateValueAndValidity({emitEvent:!1})}constructor(e,t,i){this.cryptoService=e,this.userVerificationService=t,this.i18nService=i,this._invalidSecret=!1,this.invalidSecretChange=new o.vpe,this.hasMasterPassword=!0,this.disableRequestOTP=!1,this.sentCode=!1,this.secret=new s.NI(\"\",[s.kI.required,()=\u003e{if(this.invalidSecret)return{invalidSecret:{message:this.hasMasterPassword?this.i18nService.t(\"incorrectPassword\"):this.i18nService.t(\"incorrectCode\")}}}]),this.destroy$=new r.x,this.requestOTP=()=\u003eh(this,void 0,void 0,(function*(){if(!this.hasMasterPassword){this.disableRequestOTP=!0;try{yield this.userVerificationService.requestOTP(),this.sentCode=!0}finally{this.disableRequestOTP=!1}}}))}ngOnInit(){return h(this,void 0,void 0,(function*(){this.hasMasterPassword=yield this.userVerificationService.hasMasterPasswordAndMasterKeyHash(),this.processChanges(this.secret.value),this.secret.valueChanges.pipe((0,a.R)(this.destroy$)).subscribe((e=\u003ethis.processChanges(e)))}))}writeValue(e){this.secret.setValue(e)}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){this.disableRequestOTP=e,e?this.secret.disable():this.secret.enable()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}processChanges(e){this.invalidSecret=!1,null!=this.onChange\u0026\u0026this.onChange({type:this.hasMasterPassword?l.R.MasterPassword:l.R.OTP,secret:c.c.isNullOrWhitespace(e)?null:e})}}g.ɵfac=function(e){return new(e||g)(o.Y36(u.$),o.Y36(d.i),o.Y36(p.D))},g.ɵdir=o.lG2({type:g,selectors:[[\"app-user-verification\"]],inputs:{invalidSecret:\"invalidSecret\"},outputs:{invalidSecretChange:\"invalidSecretChange\"}});var f=i(19419),m=i(62357),y=i(85356),v=i(98205),w=i(81974),b=i(24637),U=i(11512),_=i(54666),A=i(1e4),Z=i(36179),x=i(44358),S=i(21656),T=i(82933);function C(e,t){if(1\u0026e\u0026\u0026(o.ynx(0),o._uU(1,\"\\n  \"),o.TgZ(2,\"bit-form-field\",1),o._uU(3,\"\\n    \"),o.TgZ(4,\"bit-label\"),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o._UZ(8,\"input\",2),o._uU(9,\"\\n    \"),o._UZ(10,\"button\",3),o._uU(11,\"\\n    \"),o.TgZ(12,\"bit-hint\"),o._uU(13),o.ALo(14,\"i18n\"),o.qZA(),o._uU(15,\"\\n  \"),o.qZA(),o._uU(16,\"\\n\"),o.BQk()),2\u0026e){const e=o.oxw();o.xp6(5),o.Oqu(o.lcZ(6,3,\"masterPass\")),o.xp6(3),o.Q6J(\"formControl\",e.secret),o.xp6(5),o.Oqu(o.lcZ(14,5,\"confirmIdentity\"))}}function O(e,t){1\u0026e\u0026\u0026(o.TgZ(0,\"span\",9),o._uU(1,\"\\n      \"),o._UZ(2,\"i\",10),o._uU(3),o.ALo(4,\"i18n\"),o.qZA()),2\u0026e\u0026\u0026(o.Q6J(\"@sent\",void 0),o.xp6(3),o.hij(\"\\n      \",o.lcZ(4,2,\"codeSent\"),\"\\n    \"))}function k(e,t){if(1\u0026e\u0026\u0026(o.ynx(0),o._uU(1,\"\\n  \"),o.TgZ(2,\"div\",4),o._uU(3,\"\\n    \"),o.TgZ(4,\"label\",5),o._uU(5),o.ALo(6,\"i18n\"),o.qZA(),o._uU(7,\"\\n    \"),o.TgZ(8,\"button\",6),o._uU(9),o.ALo(10,\"i18n\"),o.qZA(),o._uU(11,\"\\n    \"),o.YNc(12,O,5,4,\"span\",7),o._uU(13,\"\\n  \"),o.qZA(),o._uU(14,\"\\n\\n  \"),o.TgZ(15,\"bit-form-field\",1),o._uU(16,\"\\n    \"),o.TgZ(17,\"bit-label\"),o._uU(18),o.ALo(19,\"i18n\"),o.qZA(),o._uU(20,\"\\n    \"),o._UZ(21,\"input\",8),o._uU(22,\"\\n    \"),o.TgZ(23,\"bit-hint\"),o._uU(24),o.ALo(25,\"i18n\"),o.qZA(),o._uU(26,\"\\n  \"),o.qZA(),o._uU(27,\"\\n\"),o.BQk()),2\u0026e){const e=o.oxw();o.xp6(5),o.Oqu(o.lcZ(6,7,\"sendVerificationCode\")),o.xp6(3),o.Q6J(\"bitAction\",e.requestOTP),o.xp6(1),o.hij(\"\\n      \",o.lcZ(10,9,\"sendCode\"),\"\\n    \"),o.xp6(3),o.Q6J(\"ngIf\",e.sentCode),o.xp6(6),o.Oqu(o.lcZ(19,11,\"verificationCode\")),o.xp6(3),o.Q6J(\"formControl\",e.secret),o.xp6(3),o.Oqu(o.lcZ(25,13,\"confirmIdentity\"))}}class q extends g{}q.ɵfac=function(){let e;return function(t){return(e||(e=o.n5z(q)))(t||q)}}(),q.ɵcmp=o.Xpm({type:q,selectors:[[\"app-user-verification\"]],features:[o._Bn([{provide:s.JU,multi:!0,useExisting:q}]),o.qOj],decls:4,vars:2,consts:[[4,\"ngIf\"],[\"disableMargin\",\"\"],[\"bitInput\",\"\",\"id\",\"masterPassword\",\"type\",\"password\",\"name\",\"MasterPasswordHash\",\"appAutofocus\",\"\",\"appInputVerbatim\",\"\",3,\"formControl\"],[\"type\",\"button\",\"bitIconButton\",\"\",\"bitSuffix\",\"\",\"bitPasswordInputToggle\",\"\"],[1,\"tw-mb-6\"],[1,\"tw-block\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",\"appAutofocus\",\"\",3,\"bitAction\"],[\"class\",\"tw-ml-2 tw-text-success\",\"role\",\"alert\",4,\"ngIf\"],[\"bitInput\",\"\",\"type\",\"text\",\"id\",\"verificationCode\",\"name\",\"verificationCode\",\"appInputVerbatim\",\"\",3,\"formControl\"],[\"role\",\"alert\",1,\"tw-ml-2\",\"tw-text-success\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-check-circle\"]],template:function(e,t){1\u0026e\u0026\u0026(o.YNc(0,C,17,7,\"ng-container\",0),o._uU(1,\"\\n\"),o.YNc(2,k,28,15,\"ng-container\",0),o._uU(3,\"\\n\")),2\u0026e\u0026\u0026(o.Q6J(\"ngIf\",t.hasMasterPassword),o.xp6(2),o.Q6J(\"ngIf\",!t.hasMasterPassword))},dependencies:[f.O5,s.Fj,s.JJ,s.oH,m.U,y.b,v.Q,w.r,b.d,U.G,_.w,A.e,Z.u,x.M,S.Q,T.C],encapsulation:2,data:{animation:[(0,n.X$)(\"sent\",[(0,n.eR)(\":enter\",[(0,n.oB)({opacity:0}),(0,n.jt)(\"100ms\",(0,n.oB)({opacity:1}))])])]}})},40868:(e,t,i)=\u003e{\"use strict\";i.d(t,{z:()=\u003eYe});var n=i(24852),s=i(98645),o=i(54019),r=i(68362),a=i(58691),l=i(20099);class c{}var u=i(44882);class d{}class p{constructor(e,t){this.clientOwnerEmail=e,this.organizationCreateRequest=t}}var h=i(69485),g=i(95608),f=i(87264),m=i(93273),y=i(68605),v=i(42759),w=i(34279),b=i(55602),U=i(78627),_=i(99721),A=i(76528),Z=i(75557),x=i(4871),S=i(83924),T=i(66459),C=i(34961),O=i(97360),k=i(19419),q=i(24610),P=i(53707),I=i(81974),M=i(7644),N=i(82933),L=i(99022),D=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function E(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n  \"),n._UZ(2,\"i\",2),n.ALo(3,\"i18n\"),n._uU(4,\"\\n  \"),n.TgZ(5,\"span\",3),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n\"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.s9C(\"title\",n.lcZ(3,2,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(7,4,\"loading\")))}function F(e,t){if(1\u0026e){const e=n.EpF();n.ynx(0),n._uU(1,\"\\n  \"),n.TgZ(2,\"p\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.TgZ(6,\"form\",4,5),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(8,\"\\n    \"),n.TgZ(9,\"div\",6),n._uU(10,\"\\n      \"),n.TgZ(11,\"label\",7),n._uU(12),n.ALo(13,\"i18n\"),n.qZA(),n._uU(14,\"\\n      \"),n._UZ(15,\"input\",8),n._uU(16,\"\\n      \"),n.TgZ(17,\"small\",9),n._uU(18),n.ALo(19,\"i18n\"),n.qZA(),n._uU(20,\"\\n    \"),n.qZA(),n._uU(21,\"\\n    \"),n.TgZ(22,\"button\",10),n._uU(23,\"\\n      \"),n._UZ(24,\"i\",11),n.ALo(25,\"i18n\"),n._uU(26,\"\\n      \"),n.TgZ(27,\"span\"),n._uU(28),n.ALo(29,\"i18n\"),n.qZA(),n._uU(30,\"\\n    \"),n.qZA(),n._uU(31,\"\\n  \"),n.qZA(),n._uU(32,\"\\n\"),n.BQk()}if(2\u0026e){const e=n.MAs(7),t=n.oxw();n.xp6(3),n.Oqu(n.lcZ(4,7,\"uploadLicenseFileOrg\")),n.xp6(3),n.Q6J(\"appApiAction\",t.formPromise),n.xp6(6),n.Oqu(n.lcZ(13,9,\"licenseFile\")),n.xp6(6),n.Oqu(n.xi3(19,11,\"licenseFileDesc\",\"bitwarden_organization_license.json\")),n.xp6(4),n.Q6J(\"disabled\",e.loading),n.xp6(2),n.s9C(\"title\",n.lcZ(25,14,\"loading\")),n.xp6(4),n.Oqu(n.lcZ(29,16,\"submit\"))}}function R(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"onPremHostingOptional\"),\"\"))}function J(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"includeSsoAuthentication\"),\"\"))}function Y(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"includeEnterprisePolicies\"),\"\"))}function z(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.hij(\"•\\n          \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n        \")}}function K(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n        \"),n.TgZ(2,\"small\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n        \"),n.YNc(6,R,3,3,\"small\",0),n._uU(7,\"\\n        \"),n.YNc(8,J,3,3,\"small\",0),n._uU(9,\"\\n        \"),n.YNc(10,Y,3,3,\"small\",0),n._uU(11,\"\\n        \"),n.YNc(12,z,3,4,\"small\",0),n._uU(13,\"\\n      \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(3),n.hij(\"• \",n.lcZ(4,5,\"includeAllTeamsFeatures\"),\"\"),n.xp6(3),n.Q6J(\"ngIf\",e.hasSelfHost),n.xp6(2),n.Q6J(\"ngIf\",e.hasSso),n.xp6(2),n.Q6J(\"ngIf\",e.hasPolicies),n.xp6(2),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function Q(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"\\n            • \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n          \")}}function B(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n          \"),n.TgZ(2,\"small\"),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n          \"),n.TgZ(6,\"small\"),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n          \"),n.TgZ(10,\"small\"),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n          \"),n.YNc(14,Q,3,4,\"small\",0),n._uU(15,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(2);n.xp6(3),n.hij(\"• \",n.lcZ(4,4,\"includeAllTeamsStarterFeatures\"),\"\"),n.xp6(4),n.hij(\"• \",n.lcZ(8,6,\"chooseMonthlyOrAnnualBilling\"),\"\"),n.xp6(4),n.hij(\"• \",n.xi3(12,8,\"abilityToAddMoreThanNMembers\",10),\"\"),n.xp6(3),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function G(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"• \",n.xi3(2,1,\"limitedUsers\",e.PasswordManager.maxSeats),\"\")}}function V(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"addShareLimitedUsers\",e.PasswordManager.maxSeats),\"\")}}function j(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"addShareUnlimitedUsers\"),\"\"))}function H(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"limitedCollections\",e.PasswordManager.maxCollections),\"\")}}function $(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"addShareLimitedUsers\",e.PasswordManager.maxAdditionalSeats),\"\")}}function W(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"createUnlimitedCollections\"),\"\"))}function X(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"gbEncryptedFileStorage\",e.PasswordManager.baseStorageGb+\"GB\"),\"\")}}function ee(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"controlAccessWithGroups\"),\"\"))}function te(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"trackAuditLogs\"),\"\"))}function ie(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"syncUsersFromDirectory\"),\"\"))}function ne(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"onPremHostingOptional\"),\"\"))}function se(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"usersGetPremium\"),\"\"))}function oe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"• \",n.lcZ(2,1,\"priorityCustomerSupport\"),\"\"))}function re(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.hij(\"•\\n            \",n.xi3(2,1,\"xDayFreeTrial\",e.trialPeriodDays),\"\\n          \")}}function ae(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n          \"),n.YNc(1,G,3,4,\"small\",0),n._uU(2,\"\\n          \"),n.YNc(3,V,3,4,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,j,3,3,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,H,3,4,\"small\",0),n._uU(8,\"\\n          \"),n.YNc(9,$,3,4,\"small\",0),n._uU(10,\"\\n          \"),n.YNc(11,W,3,3,\"small\",0),n._uU(12,\"\\n          \"),n.YNc(13,X,3,4,\"small\",0),n._uU(14,\"\\n          \"),n.YNc(15,ee,3,3,\"small\",0),n._uU(16,\"\\n          \"),n.YNc(17,te,3,3,\"small\",0),n._uU(18,\"\\n          \"),n.YNc(19,ie,3,3,\"small\",0),n._uU(20,\"\\n          \"),n.YNc(21,ne,3,3,\"small\",0),n._uU(22,\"\\n          \"),n.YNc(23,se,3,3,\"small\",0),n._uU(24,\"\\n          \"),n.YNc(25,oe,3,3,\"small\",0),n._uU(26,\"\\n          \"),n.YNc(27,re,3,4,\"small\",0),n._uU(28,\"\\n        \")),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(2);n.xp6(1),n.Q6J(\"ngIf\",e.product==t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",e.product!=t.productTypes.Free\u0026\u0026e.product!=t.productTypes.TeamsStarter\u0026\u0026e.PasswordManager.maxSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.maxSeats),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.maxCollections),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.maxAdditionalSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.maxCollections),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseStorageGb),n.xp6(2),n.Q6J(\"ngIf\",e.hasGroups),n.xp6(2),n.Q6J(\"ngIf\",e.hasApi),n.xp6(2),n.Q6J(\"ngIf\",e.hasDirectory),n.xp6(2),n.Q6J(\"ngIf\",e.hasSelfHost),n.xp6(2),n.Q6J(\"ngIf\",e.usersGetPremium),n.xp6(2),n.Q6J(\"ngIf\",e.product!=t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",e.trialPeriodDays\u0026\u0026t.createOrganization)}}function le(e,t){if(1\u0026e\u0026\u0026(n._uU(0,\"\\n        \"),n.YNc(1,B,16,11,\"ng-container\",26),n._uU(2,\"\\n        \"),n.YNc(3,ae,29,14,\"ng-template\",null,28,n.W1O),n._uU(5,\"\\n      \")),2\u0026e){const e=n.MAs(4),t=n.oxw().$implicit,i=n.oxw(2);n.xp6(1),n.Q6J(\"ngIf\",t.product===i.productTypes.Teams)(\"ngIfElse\",e)}}function ce(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.BQk()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(1),n.lnq(\"\\n            \",n.lcZ(2,3,\"additionalUsers\").toLowerCase(),\"\\n            \",n.xi3(3,5,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\"),\"\\n            /\",n.lcZ(4,8,\"month\"),\"\\n          \")}}function ue(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"currency\"),n.ALo(3,\"i18n\"),n.ALo(4,\"i18n\"),n.YNc(5,ce,5,10,\"ng-container\",0),n._uU(6,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.lnq(\"\\n          \",n.xi3(2,4,e.isAnnual?e.PasswordManager.basePrice/12:e.PasswordManager.basePrice,\"$\"),\"\\n          /\",n.lcZ(3,7,\"month\"),\",\\n          \",n.xi3(4,9,\"includesXUsers\",e.PasswordManager.baseSeats),\"\\n          \"),n.xp6(4),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption)}}function de(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1,\"\\n        \"),n.YNc(2,ue,7,12,\"ng-container\",0),n._uU(3,\"\\n      \"),n.qZA()),2\u0026e){const e=n.oxw().$implicit,t=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice\u0026\u0026!t.acceptingSponsorship)}}function pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.AsE(\"\\n        \",n.xi3(2,2,\"costPerUser\",n.xi3(3,5,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\")),\"\\n        /\",n.lcZ(4,8,\"month\"),\"\\n      \")}}function he(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.Oqu(n.lcZ(2,1,\"freeForever\")))}function ge(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\",22),n._uU(1,\"\\n    \"),n.TgZ(2,\"input\",23),n.NdJ(\"change\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedProduct())})),n.qZA(),n._uU(3,\"\\n    \"),n.TgZ(4,\"label\",24),n._uU(5),n.ALo(6,\"i18n\"),n.TgZ(7,\"small\",25),n._uU(8),n.ALo(9,\"i18n\"),n.qZA(),n._uU(10,\"\\n      \"),n.YNc(11,K,14,7,\"ng-container\",26),n._uU(12,\"\\n      \"),n.YNc(13,le,6,2,\"ng-template\",null,27,n.W1O),n._uU(15,\"\\n      \"),n.YNc(16,de,4,1,\"span\",0),n._uU(17,\"\\n      \"),n.YNc(18,pe,5,10,\"span\",0),n._uU(19,\"\\n      \"),n.YNc(20,he,3,3,\"span\",0),n._uU(21,\"\\n    \"),n.qZA(),n._uU(22,\"\\n  \"),n.qZA()}if(2\u0026e){const e=t.$implicit,i=n.MAs(14),s=n.oxw(2);n.xp6(2),n.MGl(\"id\",\"product\",e.product,\"\"),n.Q6J(\"value\",e.product),n.xp6(2),n.MGl(\"for\",\"product\",e.product,\"\"),n.xp6(1),n.hij(\"\\n      \",n.lcZ(6,10,e.nameLocalizationKey),\"\\n      \"),n.xp6(3),n.Oqu(n.xi3(9,12,e.descriptionLocalizationKey,\"1\")),n.xp6(3),n.Q6J(\"ngIf\",e.product===s.productTypes.Enterprise)(\"ngIfElse\",i),n.xp6(5),n.Q6J(\"ngIf\",e.product!=s.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.basePrice\u0026\u0026e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.product==s.productTypes.Free)}}function fe(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n      \"),n.TgZ(2,\"h2\",14),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n      \"),n.TgZ(6,\"div\",30),n._uU(7,\"\\n        \"),n.TgZ(8,\"div\",37),n._uU(9,\"\\n          \"),n.TgZ(10,\"label\",38),n._uU(11),n.ALo(12,\"i18n\"),n.qZA(),n._uU(13,\"\\n          \"),n._UZ(14,\"input\",39),n.ALo(15,\"i18n\"),n._uU(16,\"\\n          \"),n.TgZ(17,\"small\",34),n._uU(18),n.ALo(19,\"i18n\"),n.qZA(),n._uU(20,\"\\n        \"),n.qZA(),n._uU(21,\"\\n      \"),n.qZA(),n._uU(22,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(3),n.Oqu(n.lcZ(4,4,\"users\")),n.xp6(8),n.Oqu(n.lcZ(12,6,\"userSeats\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(15,8,\"userSeatsDesc\")),n.xp6(4),n.Oqu(n.lcZ(19,10,\"userSeatsHowManyDesc\")))}function me(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",30),n._uU(1,\"\\n      \"),n.TgZ(2,\"div\",31),n._uU(3,\"\\n        \"),n.TgZ(4,\"label\",38),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n        \"),n._UZ(8,\"input\",40),n.ALo(9,\"i18n\"),n._uU(10,\"\\n        \"),n.TgZ(11,\"small\",34),n._uU(12),n.ALo(13,\"i18n\"),n.ALo(14,\"currency\"),n.qZA(),n._uU(15,\"\\n      \"),n.qZA(),n._uU(16,\"\\n    \"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(5),n.Oqu(n.lcZ(6,3,\"additionalUserSeats\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(9,5,\"userSeatsDesc\")),n.xp6(4),n.Oqu(n.Dn7(13,7,\"userSeatsAdditionalDesc\",e.selectedPlan.PasswordManager.baseSeats,n.xi3(14,11,e.seatPriceMonthly(e.selectedPlan),\"$\")))}}function ye(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",31),n._uU(1,\"\\n        \"),n.TgZ(2,\"div\",41),n._uU(3,\"\\n          \"),n._UZ(4,\"input\",42),n._uU(5,\"\\n          \"),n.TgZ(6,\"label\",43),n._uU(7),n.ALo(8,\"i18n\"),n.qZA(),n._uU(9,\"\\n        \"),n.qZA(),n._uU(10,\"\\n        \"),n.TgZ(11,\"small\",34),n._uU(12),n.ALo(13,\"i18n\"),n.ALo(14,\"currency\"),n.ALo(15,\"i18n\"),n.qZA(),n._uU(16,\"\\n      \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(7),n.Oqu(n.lcZ(8,2,\"premiumAccess\")),n.xp6(5),n.Oqu(n.Dn7(13,4,\"premiumAccessDesc\",n.xi3(14,8,3.33,\"$\"),n.lcZ(15,11,\"month\"))))}function ve(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n              \"),n.TgZ(2,\"span\",46),n._uU(3),n.ALo(4,\"currency\"),n.qZA(),n._uU(5),n.ALo(6,\"i18n\"),n.BQk()),2\u0026e){const e=n.oxw(3).$implicit;n.xp6(3),n.Oqu(n.xi3(4,2,e.PasswordManager.basePrice,\"$\")),n.xp6(2),n.hij(\"\\n              \",n.lcZ(6,5,\"freeWithSponsorship\"),\"\\n            \")}}function we(e,t){if(1\u0026e\u0026\u0026(n._uU(0),n.ALo(1,\"currency\"),n.ALo(2,\"i18n\")),2\u0026e){const e=n.oxw(3).$implicit;n.AsE(\"\\n              \",n.xi3(1,2,e.PasswordManager.basePrice,\"$\"),\"\\n              /\",n.lcZ(2,5,\"year\"),\"\\n            \")}}function be(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.YNc(5,ve,7,7,\"ng-container\",26),n._uU(6,\"\\n            \"),n.YNc(7,we,3,7,\"ng-template\",null,45,n.W1O),n._uU(9,\"\\n          \"),n.qZA()),2\u0026e){const e=n.MAs(8),t=n.oxw(2).$implicit,i=n.oxw(3);n.xp6(1),n.lnq(\"\\n            \",n.lcZ(2,5,\"basePrice\"),\":\\n            \",n.xi3(3,7,t.isAnnual?t.PasswordManager.basePrice/12:t.PasswordManager.basePrice,\"$\"),\"\\n            × 12\\n            \",n.lcZ(4,10,\"monthAbbr\"),\"\\n            =\\n            \"),n.xp6(4),n.Q6J(\"ngIf\",i.acceptingSponsorship)(\"ngIfElse\",e)}}function Ue(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"additionalUsers\"),\":\"))}function _e(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"users\"),\":\"))}function Ae(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n            \"),n.YNc(2,Ue,3,3,\"span\",0),n._uU(3,\"\\n            \"),n.YNc(4,_e,3,3,\"span\",0),n._uU(5),n.ALo(6,\"currency\"),n.ALo(7,\"i18n\"),n.ALo(8,\"currency\"),n.ALo(9,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.baseSeats),n.xp6(1),n.xDo(\"\\n            \",t.formGroup.controls.additionalSeats.value||0,\" ×\\n            \",n.xi3(6,7,e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice,\"$\"),\"\\n            × 12 \",n.lcZ(7,10,\"monthAbbr\"),\" =\\n            \",n.xi3(8,12,t.passwordManagerSeatTotal(e,t.formGroup.value.additionalSeats),\"$\"),\"\\n            /\",n.lcZ(9,15,\"year\"),\"\\n          \")}}function Ze(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(1),n.gL8(\"\\n            \",n.lcZ(2,6,\"additionalStorageGb\"),\":\\n            \",t.formGroup.controls.additionalStorage.value||0,\" ×\\n            \",n.xi3(3,8,e.isAnnual?e.PasswordManager.additionalStoragePricePerGb/12:e.PasswordManager.additionalStoragePricePerGb,\"$\"),\"\\n            × 12 \",n.lcZ(4,11,\"monthAbbr\"),\" =\\n            \",n.xi3(5,13,t.additionalStorageTotal(e),\"$\"),\" /\",n.lcZ(6,16,\"year\"),\"\\n          \")}}function xe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.YNc(3,be,10,12,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,Ae,10,17,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,Ze,7,18,\"small\",0),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n          \",n.lcZ(2,4,\"annually\"),\"\\n          \"),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalStorageOption)}}function Se(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit;n.xp6(1),n.xDo(\"\\n            \",n.lcZ(2,5,\"basePrice\"),\":\\n            \",n.xi3(3,7,e.PasswordManager.basePrice,\"$\"),\"\\n            \",n.lcZ(4,10,\"monthAbbr\"),\"\\n            =\\n            \",n.xi3(5,12,e.PasswordManager.basePrice,\"$\"),\"\\n            /\",n.lcZ(6,15,\"month\"),\"\\n          \")}}function Te(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"additionalUsers\"),\":\"))}function Ce(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\",n.lcZ(2,1,\"users\"),\":\"))}function Oe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1,\"\\n            \"),n.YNc(2,Te,3,3,\"span\",0),n._uU(3,\"\\n            \"),n.YNc(4,Ce,3,3,\"span\",0),n._uU(5),n.ALo(6,\"currency\"),n.ALo(7,\"i18n\"),n.ALo(8,\"currency\"),n.ALo(9,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.baseSeats),n.xp6(2),n.Q6J(\"ngIf\",!e.PasswordManager.baseSeats),n.xp6(1),n.xDo(\"\\n            \",t.formGroup.controls.additionalSeats.value||0,\" ×\\n            \",n.xi3(6,7,e.PasswordManager.seatPrice,\"$\"),\"\\n            \",n.lcZ(7,10,\"monthAbbr\"),\" =\\n            \",n.xi3(8,12,t.passwordManagerSeatTotal(e,t.formGroup.value.additionalSeats),\"$\"),\"\\n            /\",n.lcZ(9,15,\"month\"),\"\\n          \")}}function ke(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"small\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n.ALo(4,\"i18n\"),n.ALo(5,\"currency\"),n.ALo(6,\"i18n\"),n.qZA()),2\u0026e){const e=n.oxw(2).$implicit,t=n.oxw(3);n.xp6(1),n.gL8(\"\\n            \",n.lcZ(2,6,\"additionalStorageGb\"),\":\\n            \",t.formGroup.controls.additionalStorage.value||0,\" ×\\n            \",n.xi3(3,8,e.PasswordManager.additionalStoragePricePerGb,\"$\"),\"\\n            \",n.lcZ(4,11,\"monthAbbr\"),\" =\\n            \",n.xi3(5,13,t.additionalStorageTotal(e),\"$\"),\" /\",n.lcZ(6,16,\"month\"),\"\\n          \")}}function qe(e,t){if(1\u0026e\u0026\u0026(n.ynx(0),n._uU(1),n.ALo(2,\"i18n\"),n.YNc(3,Se,7,17,\"small\",0),n._uU(4,\"\\n          \"),n.YNc(5,Oe,10,17,\"small\",0),n._uU(6,\"\\n          \"),n.YNc(7,ke,7,18,\"small\",0),n._uU(8,\"\\n        \"),n.BQk()),2\u0026e){const e=n.oxw().$implicit;n.xp6(1),n.hij(\"\\n          \",n.lcZ(2,4,\"monthly\"),\"\\n          \"),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.basePrice),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalSeatsOption),n.xp6(2),n.Q6J(\"ngIf\",e.PasswordManager.hasAdditionalStorageOption)}}function Pe(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\",22),n._uU(1,\"\\n      \"),n._UZ(2,\"input\",44),n._uU(3,\"\\n      \"),n.TgZ(4,\"label\",24),n._uU(5,\"\\n        \"),n.YNc(6,xe,9,6,\"ng-container\",0),n._uU(7,\"\\n        \"),n.YNc(8,qe,9,6,\"ng-container\",0),n._uU(9,\"\\n      \"),n.qZA(),n._uU(10,\"\\n    \"),n.qZA()),2\u0026e){const e=t.$implicit;n.xp6(2),n.MGl(\"id\",\"interval\",e.type,\"\"),n.Q6J(\"value\",e.type),n.xp6(2),n.MGl(\"for\",\"interval\",e.type,\"\"),n.xp6(2),n.Q6J(\"ngIf\",e.isAnnual),n.xp6(2),n.Q6J(\"ngIf\",!e.isAnnual)}}function Ie(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.YNc(2,fe,23,12,\"ng-container\",0),n._uU(3,\"\\n    \"),n.TgZ(4,\"h2\",14),n._uU(5),n.ALo(6,\"i18n\"),n.qZA(),n._uU(7,\"\\n    \"),n.YNc(8,me,17,14,\"div\",29),n._uU(9,\"\\n    \"),n.TgZ(10,\"div\",30),n._uU(11,\"\\n      \"),n.TgZ(12,\"div\",31),n._uU(13,\"\\n        \"),n.TgZ(14,\"label\",32),n._uU(15),n.ALo(16,\"i18n\"),n.qZA(),n._uU(17,\"\\n        \"),n._UZ(18,\"input\",33),n.ALo(19,\"i18n\"),n._uU(20,\"\\n        \"),n.TgZ(21,\"small\",34),n._uU(22),n.ALo(23,\"i18n\"),n.ALo(24,\"currency\"),n.ALo(25,\"i18n\"),n.qZA(),n._uU(26,\"\\n      \"),n.qZA(),n._uU(27,\"\\n    \"),n.qZA(),n._uU(28,\"\\n    \"),n.TgZ(29,\"div\",30),n._uU(30,\"\\n      \"),n.YNc(31,ye,17,13,\"div\",35),n._uU(32,\"\\n    \"),n.qZA(),n._uU(33,\"\\n    \"),n.TgZ(34,\"h2\",36),n._uU(35),n.ALo(36,\"i18n\"),n.qZA(),n._uU(37,\"\\n    \"),n.YNc(38,Pe,11,5,\"div\",15),n._uU(39,\"\\n  \"),n.qZA()),2\u0026e){const e=n.oxw(2);n.xp6(2),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026!e.selectedPlan.PasswordManager.baseSeats),n.xp6(3),n.Oqu(n.lcZ(6,9,\"addons\")),n.xp6(3),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026e.selectedPlan.PasswordManager.baseSeats),n.xp6(7),n.Oqu(n.lcZ(16,11,\"additionalStorageGb\")),n.xp6(3),n.s9C(\"placeholder\",n.lcZ(19,13,\"additionalStorageGbDesc\")),n.xp6(4),n.Oqu(n.gM2(23,15,\"additionalStorageIntervalDesc\",\"1 GB\",n.xi3(24,20,e.additionalStoragePriceMonthly(e.selectedPlan),\"$\"),n.lcZ(25,23,\"month\"))),n.xp6(9),n.Q6J(\"ngIf\",e.selectedPlan.PasswordManager.hasPremiumAccessOption),n.xp6(4),n.Oqu(n.lcZ(36,25,\"summary\")),n.xp6(3),n.Q6J(\"ngForOf\",e.selectablePlans)}}function Me(e,t){if(1\u0026e\u0026\u0026n._UZ(0,\"sm-subscribe\",47),2\u0026e){const e=n.oxw(2);n.Q6J(\"formGroup\",e.formGroup.controls.secretsManager)(\"selectedPlan\",e.selectedSecretsManagerPlan)(\"upgradeOrganization\",!e.createOrganization)}}function Ne(e,t){1\u0026e\u0026\u0026n._UZ(0,\"app-payment\",56),2\u0026e\u0026\u0026n.Q6J(\"hideCredit\",!0)}function Le(e,t){if(1\u0026e\u0026\u0026(n.TgZ(0,\"span\"),n._uU(1),n.ALo(2,\"i18n\"),n.ALo(3,\"currency\"),n._UZ(4,\"br\"),n._uU(5,\"\\n        \"),n.qZA()),2\u0026e){const e=n.oxw(3);n.xp6(1),n.AsE(\"\\n          \",n.lcZ(2,2,\"secretsManagerPlanPrice\"),\": \",n.xi3(3,4,e.secretsManagerSubtotal,\"USD $\"),\"\\n          \")}}function De(e,t){1\u0026e\u0026\u0026(n.ynx(0),n._uU(1,\"\\n      \"),n._UZ(2,\"app-payment\",57),n._uU(3,\"\\n    \"),n.BQk()),2\u0026e\u0026\u0026(n.xp6(2),n.Q6J(\"showMethods\",!1))}function Ee(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"div\"),n._uU(1,\"\\n    \"),n.TgZ(2,\"h2\",48),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n    \"),n.TgZ(6,\"small\",49),n._uU(7),n.qZA(),n._uU(8,\"\\n    \"),n.YNc(9,Ne,1,1,\"app-payment\",50),n._uU(10,\"\\n    \"),n.TgZ(11,\"app-tax-info\",51),n.NdJ(\"onCountryChanged\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.changedCountry())})),n.qZA(),n._uU(12,\"\\n    \"),n.TgZ(13,\"div\",52),n._uU(14,\"\\n      \"),n.TgZ(15,\"div\",53),n._uU(16),n.ALo(17,\"i18n\"),n.ALo(18,\"currency\"),n._UZ(19,\"br\"),n._uU(20,\"\\n        \"),n.YNc(21,Le,6,7,\"span\",0),n._uU(22,\"\\n        \"),n.ynx(23),n._uU(24),n.ALo(25,\"i18n\"),n.ALo(26,\"currency\"),n.BQk(),n._uU(27,\"\\n      \"),n.qZA(),n._uU(28,\"\\n      \"),n._UZ(29,\"hr\",54),n._uU(30,\"\\n      \"),n.TgZ(31,\"p\",55),n._uU(32,\"\\n        \"),n.TgZ(33,\"strong\"),n._uU(34),n.ALo(35,\"i18n\"),n.qZA(),n._uU(36),n.ALo(37,\"currency\"),n.ALo(38,\"i18n\"),n.qZA(),n._uU(39,\"\\n    \"),n.qZA(),n._uU(40,\"\\n    \"),n.YNc(41,De,4,1,\"ng-container\",0),n._uU(42,\"\\n  \"),n.qZA()}if(2\u0026e){const e=n.oxw(2);n.xp6(3),n.hij(\"\\n      \",n.lcZ(4,12,e.createOrganization?\"paymentInformation\":\"billingInformation\"),\"\\n    \"),n.xp6(4),n.hij(\"\\n      \",e.paymentDesc,\"\\n    \"),n.xp6(2),n.Q6J(\"ngIf\",e.createOrganization||e.upgradeRequiresPaymentMethod),n.xp6(7),n.AsE(\"\\n        \",n.lcZ(17,14,\"passwordManagerPlanPrice\"),\": \",n.xi3(18,16,e.passwordManagerSubtotal,\"USD $\"),\"\\n        \"),n.xp6(5),n.Q6J(\"ngIf\",e.planOffersSecretsManager\u0026\u0026e.formGroup.value.secretsManager.enabled),n.xp6(3),n.AsE(\"\\n          \",n.lcZ(25,19,\"estimatedTax\"),\": \",n.xi3(26,21,e.taxCharges,\"USD $\"),\"\\n        \"),n.xp6(10),n.hij(\"\",n.lcZ(35,24,\"total\"),\":\"),n.xp6(2),n.AsE(\" \",n.xi3(37,26,e.total,\"USD $\"),\"/\",n.lcZ(38,29,e.selectedPlanInterval),\"\\n      \"),n.xp6(5),n.Q6J(\"ngIf\",!e.createOrganization)}}function Fe(e,t){1\u0026e\u0026\u0026(n.TgZ(0,\"div\",19),n._uU(1,\"\\n    \"),n.TgZ(2,\"app-callout\",58),n._uU(3),n.ALo(4,\"i18n\"),n.qZA(),n._uU(5,\"\\n  \"),n.qZA()),2\u0026e\u0026\u0026(n.xp6(2),n.Q6J(\"type\",\"error\"),n.xp6(1),n.Oqu(n.lcZ(4,2,\"singleOrgBlockCreateMessage\")))}function Re(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"button\",59),n.NdJ(\"click\",(function(){n.CHM(e);const t=n.oxw(2);return n.KtG(t.cancel())})),n._uU(1),n.ALo(2,\"i18n\"),n.qZA()}2\u0026e\u0026\u0026(n.xp6(1),n.hij(\"\\n      \",n.lcZ(2,1,\"cancel\"),\"\\n    \"))}function Je(e,t){if(1\u0026e){const e=n.EpF();n.TgZ(0,\"form\",12,5),n.NdJ(\"ngSubmit\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.submit())})),n._uU(2,\"\\n  \"),n.TgZ(3,\"app-org-info\",13),n.NdJ(\"changedBusinessOwned\",(function(){n.CHM(e);const t=n.oxw();return n.KtG(t.changedOwnedBusiness())})),n.qZA(),n._uU(4,\"\\n  \"),n.TgZ(5,\"h2\",14),n._uU(6),n.ALo(7,\"i18n\"),n.qZA(),n._uU(8,\"\\n  \"),n.YNc(9,ge,23,15,\"div\",15),n._uU(10,\"\\n  \"),n.YNc(11,Ie,40,27,\"div\",0),n._uU(12,\"\\n\\n  \"),n._uU(13,\"\\n  \"),n.TgZ(14,\"div\",16),n._uU(15,\"\\n    \"),n.YNc(16,Me,1,3,\"sm-subscribe\",17),n._uU(17,\"\\n  \"),n.qZA(),n._uU(18,\"\\n\\n  \"),n._uU(19,\"\\n  \"),n.YNc(20,Ee,43,31,\"div\",0),n._uU(21,\"\\n  \"),n.YNc(22,Fe,6,4,\"div\",18),n._uU(23,\"\\n  \"),n.TgZ(24,\"div\",19),n._uU(25,\"\\n    \"),n.TgZ(26,\"button\",20),n._uU(27),n.ALo(28,\"i18n\"),n.qZA(),n._uU(29,\"\\n    \"),n.YNc(30,Re,3,3,\"button\",21),n._uU(31,\"\\n  \"),n.qZA(),n._uU(32,\"\\n\"),n.qZA()}if(2\u0026e){const e=n.MAs(1),t=n.oxw();n.Q6J(\"formGroup\",t.formGroup)(\"appApiAction\",t.formPromise),n.xp6(3),n.Q6J(\"formGroup\",t.formGroup)(\"createOrganization\",t.createOrganization)(\"isProvider\",!!t.providerId)(\"acceptingSponsorship\",t.acceptingSponsorship),n.xp6(3),n.Oqu(n.lcZ(7,16,\"chooseYourPlan\")),n.xp6(3),n.Q6J(\"ngForOf\",t.selectableProducts),n.xp6(2),n.Q6J(\"ngIf\",t.formGroup.value.product!==t.productTypes.Free),n.xp6(5),n.Q6J(\"ngIf\",t.planOffersSecretsManager\u0026\u0026!t.hasProvider),n.xp6(4),n.Q6J(\"ngIf\",t.formGroup.value.product!==t.productTypes.Free),n.xp6(2),n.Q6J(\"ngIf\",t.singleOrgPolicyBlock),n.xp6(4),n.Q6J(\"loading\",e.loading)(\"disabled\",!t.formGroup.valid),n.xp6(1),n.hij(\"\\n      \",n.lcZ(28,18,\"submit\"),\"\\n    \"),n.xp6(3),n.Q6J(\"ngIf\",t.showCancel)}}h.k9.TeamsMonthly2020,h.k9.TeamsAnnually2020,h.k9.EnterpriseAnnually2020,h.k9.EnterpriseMonthly2020;class Ye{get product(){return this._product}set product(e){var t,i,n;this._product=e,null===(n=null===(i=null===(t=this.formGroup)||void 0===t?void 0:t.controls)||void 0===i?void 0:i.product)||void 0===n||n.setValue(e)}get plan(){return this._plan}set plan(e){var t,i,n;this._plan=e,null===(n=null===(i=null===(t=this.formGroup)||void 0===t?void 0:t.controls)||void 0===i?void 0:i.plan)||void 0===n||n.setValue(e)}constructor(e,t,i,r,a,l,c,u,d,p,g,m){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.cryptoService=r,this.router=a,this.syncService=l,this.policyService=c,this.organizationService=u,this.logService=d,this.messagingService=p,this.formBuilder=g,this.organizationApiService=m,this.showFree=!0,this.showCancel=!1,this.acceptingSponsorship=!1,this._product=f.kv.Free,this._plan=h.k9.Free,this.onSuccess=new n.vpe,this.onCanceled=new n.vpe,this.onTrialBillingSuccess=new n.vpe,this.loading=!0,this.selfHosted=!1,this.productTypes=f.kv,this.singleOrgPolicyAppliesToActiveUser=!1,this.isInTrialFlow=!1,this.discount=0,this.secretsManagerSubscription=(0,y.DT)(this.formBuilder),this.formGroup=this.formBuilder.group({name:[\"\"],billingEmail:[\"\",[s.kI.email]],businessOwned:[!1],premiumAccessAddon:[!1],additionalStorage:[0,[s.kI.min(0),s.kI.max(99)]],additionalSeats:[0,[s.kI.min(0),s.kI.max(1e5)]],clientOwnerEmail:[\"\",[s.kI.email]],businessName:[\"\"],plan:[this.plan],product:[this.product],secretsManager:this.secretsManagerSubscription}),this.destroy$=new o.x,this.selfHosted=i.isSelfHost()}ngOnInit(){return D(this,void 0,void 0,(function*(){this.organizationId\u0026\u0026(this.organization=this.organizationService.get(this.organizationId),this.sub=yield this.organizationApiService.getSubscription(this.organizationId)),this.createOrganization?(this.formGroup.controls.name.addValidators([s.kI.required,s.kI.maxLength(50)]),this.formGroup.controls.billingEmail.addValidators(s.kI.required)):this.upgradeFlowPrefillForm(),this.policyService.policyAppliesToActiveUser$(l.Mi.SingleOrg).pipe((0,r.R)(this.destroy$)).subscribe((e=\u003e{this.singleOrgPolicyAppliesToActiveUser=e})),this.changedProduct(),this.loading=!1}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get singleOrgPolicyBlock(){return this.singleOrgPolicyAppliesToActiveUser\u0026\u0026!this.hasProvider}get createOrganization(){return null==this.organizationId}get upgradeRequiresPaymentMethod(){var e,t;return(null===(e=this.organization)||void 0===e?void 0:e.planProductType)===f.kv.Free\u0026\u0026!this.showFree\u0026\u0026!(null===(t=this.billing)||void 0===t?void 0:t.paymentSource)}get selectedPlan(){return this.passwordManagerPlans.find((e=\u003ee.type===this.formGroup.controls.plan.value))}get selectedSecretsManagerPlan(){return this.secretsManagerPlans.find((e=\u003ee.type===this.formGroup.controls.plan.value))}get selectedPlanInterval(){return this.selectedPlan.isAnnual?\"year\":\"month\"}isProviderQualifiedFor2020Plan(){const e=new Date(\"2023-11-06\");if(!this.provider||!this.provider.creationDate)return!1;return new Date(this.provider.creationDate)\u003ce}get selectableProducts(){return null}get selectablePlans(){return null}get hasProvider(){return null!=this.providerId}additionalStoragePriceMonthly(e){return e.isAnnual?e.PasswordManager.additionalStoragePricePerGb/12:e.PasswordManager.additionalStoragePricePerGb}seatPriceMonthly(e){return e.isAnnual?e.PasswordManager.seatPrice/12:e.PasswordManager.seatPrice}additionalStorageTotal(e){return e.PasswordManager.hasAdditionalStorageOption?e.PasswordManager.additionalStoragePricePerGb*Math.abs(this.formGroup.controls.additionalStorage.value||0):0}passwordManagerSeatTotal(e,t){return e.PasswordManager.hasAdditionalSeatsOption?e.PasswordManager.seatPrice*Math.abs(t||0):0}secretsManagerSeatTotal(e,t){return e.SecretsManager.hasAdditionalSeatsOption?e.SecretsManager.seatPrice*Math.abs(t||0):0}additionalServiceAccountTotal(e){return e.SecretsManager.hasAdditionalServiceAccountOption?e.SecretsManager.additionalPricePerServiceAccount*Math.abs(this.secretsManagerForm.value.additionalServiceAccounts||0):0}get passwordManagerSubtotal(){let e=this.selectedPlan.PasswordManager.basePrice;return this.selectedPlan.PasswordManager.hasAdditionalSeatsOption\u0026\u0026this.formGroup.controls.additionalSeats.value\u0026\u0026(e+=this.passwordManagerSeatTotal(this.selectedPlan,this.formGroup.value.additionalSeats)),this.selectedPlan.PasswordManager.hasAdditionalStorageOption\u0026\u0026this.formGroup.controls.additionalStorage.value\u0026\u0026(e+=this.additionalStorageTotal(this.selectedPlan)),this.selectedPlan.PasswordManager.hasPremiumAccessOption\u0026\u0026this.formGroup.controls.premiumAccessAddon.value\u0026\u0026(e+=this.selectedPlan.PasswordManager.premiumAccessOptionPrice),e-this.discount}get secretsManagerSubtotal(){const e=this.selectedSecretsManagerPlan,t=this.secretsManagerForm.value;return this.planOffersSecretsManager\u0026\u0026t.enabled?e.SecretsManager.basePrice+this.secretsManagerSeatTotal(e,t.userSeats)+this.additionalServiceAccountTotal(e):0}get freeTrial(){return null!=this.selectedPlan.trialPeriodDays}get taxCharges(){return null!=this.taxComponent\u0026\u0026null!=this.taxComponent.taxRate?this.taxComponent.taxRate/100*(this.passwordManagerSubtotal+this.secretsManagerSubtotal):0}get total(){return this.passwordManagerSubtotal+this.secretsManagerSubtotal+this.taxCharges||0}get paymentDesc(){return this.acceptingSponsorship?this.i18nService.t(\"paymentSponsored\"):this.freeTrial\u0026\u0026this.createOrganization?this.i18nService.t(\"paymentChargedWithTrial\"):this.i18nService.t(\"paymentCharged\",this.i18nService.t(this.selectedPlanInterval))}get secretsManagerForm(){return this.formGroup.controls.secretsManager}get planOffersSecretsManager(){return!1}changedProduct(){}setPlanType(e){this.formGroup.controls.plan.setValue(e)}handlePremiumAddonAccess(e){this.formGroup.controls.premiumAccessAddon.setValue(!e)}handleAdditionalStorage(e){var t;e\u0026\u0026this.currentPlan?(null===(t=this.organization)||void 0===t?void 0:t.maxStorageGb)\u0026\u0026this.formGroup.controls.additionalStorage.setValue(this.organization.maxStorageGb-this.currentPlan.PasswordManager.baseStorageGb):this.formGroup.controls.additionalStorage.setValue(0)}handleAdditionalSeats(e){e?!this.currentPlan||this.currentPlan.PasswordManager.hasAdditionalSeatsOption?this.organization?this.formGroup.controls.additionalSeats.setValue(this.organization.seats):this.formGroup.controls.additionalSeats.setValue(1):this.formGroup.controls.additionalSeats.setValue(this.currentPlan.PasswordManager.baseSeats):this.formGroup.controls.additionalSeats.setValue(0)}handleSecretsManagerForm(){var e,t,i,n;this.planOffersSecretsManager\u0026\u0026this.secretsManagerForm.enable(),(null===(e=this.organization)||void 0===e?void 0:e.useSecretsManager)\u0026\u0026this.secretsManagerForm.controls.enabled.setValue(!0),this.secretsManagerForm.controls.enabled.value\u0026\u0026(this.secretsManagerForm.controls.userSeats.setValue((null===(t=this.sub)||void 0===t?void 0:t.smSeats)||1),this.secretsManagerForm.controls.additionalServiceAccounts.setValue((null===(i=this.sub)||void 0===i?void 0:i.smServiceAccounts)-(null===(n=this.currentPlan.SecretsManager)||void 0===n?void 0:n.baseServiceAccount)||0)),this.secretsManagerForm.updateValueAndValidity()}changedOwnedBusiness(){this.formGroup.controls.businessOwned.value\u0026\u0026!this.selectedPlan.canBeUsedByBusiness\u0026\u0026(this.formGroup.controls.product.setValue(f.kv.TeamsStarter),this.formGroup.controls.plan.setValue(h.k9.TeamsStarter),this.changedProduct())}changedCountry(){this.paymentComponent.hideBank=\"US\"!==this.taxComponent.taxInfo.country,this.paymentComponent.hideBank\u0026\u0026this.paymentComponent.method===h.Lt.BankAccount\u0026\u0026(this.paymentComponent.method=h.Lt.Card,this.paymentComponent.changeMethod())}cancel(){this.onCanceled.emit()}submit(){return D(this,void 0,void 0,(function*(){if(!this.singleOrgPolicyBlock)try{const e=()=\u003eD(this,void 0,void 0,(function*(){let e=null;if(this.createOrganization){const t=yield this.cryptoService.makeOrgKey(),i=t[0].encryptedString,n=(yield this.cryptoService.encrypt(this.i18nService.t(\"defaultCollection\"),t[1])).encryptedString,s=yield this.cryptoService.makeKeyPair(t[1]);e=this.selfHosted?yield this.createSelfHosted(i,n,s):yield this.createCloudHosted(i,n,s,t[1]),this.platformUtilsService.showToast(\"success\",this.i18nService.t(\"organizationCreated\"),this.i18nService.t(\"organizationReadyToGo\"))}else e=yield this.updateOrganization(e),this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"organizationUpgraded\"));return yield this.apiService.refreshIdentityToken(),yield this.syncService.fullSync(!0),this.acceptingSponsorship||this.isInTrialFlow||this.router.navigate([\"/organizations/\"+e]),this.isInTrialFlow\u0026\u0026this.onTrialBillingSuccess.emit({orgId:e,subLabelText:this.billingSubLabelText()}),e}));this.formPromise=e();const t=yield this.formPromise;this.onSuccess.emit({organizationId:t}),this.messagingService.send(\"organizationCreated\",t)}catch(e){this.logService.error(e)}}))}updateOrganization(e){return D(this,void 0,void 0,(function*(){const e=new d;if(e.businessName=this.formGroup.controls.businessOwned.value?this.formGroup.controls.businessName.value:null,e.additionalSeats=this.formGroup.controls.additionalSeats.value,e.additionalStorageGb=this.formGroup.controls.additionalStorage.value,e.premiumAccessAddon=this.selectedPlan.PasswordManager.hasPremiumAccessOption\u0026\u0026this.formGroup.controls.premiumAccessAddon.value,e.planType=this.selectedPlan.type,e.billingAddressCountry=this.taxComponent.taxInfo.country,e.billingAddressPostalCode=this.taxComponent.taxInfo.postalCode,this.buildSecretsManagerRequest(e),this.upgradeRequiresPaymentMethod){const e=yield this.paymentComponent.createPaymentToken(),t=new g.t;t.paymentToken=e[0],t.paymentMethodType=e[1],t.country=this.taxComponent.taxInfo.country,t.postalCode=this.taxComponent.taxInfo.postalCode,yield this.organizationApiService.updatePayment(this.organizationId,t)}if(!this.organization.hasPublicAndPrivateKeys){const t=yield this.cryptoService.getOrgKey(this.organizationId),i=yield this.cryptoService.makeKeyPair(t);e.keys=new u.u(i[0],i[1].encryptedString)}const t=yield this.organizationApiService.upgrade(this.organizationId,e);return t.success||null==t.paymentIntentClientSecret||(yield this.paymentComponent.handleStripeCardPayment(t.paymentIntentClientSecret,null)),this.organizationId}))}createCloudHosted(e,t,i,n){return D(this,void 0,void 0,(function*(){const s=new c;if(s.key=e,s.collectionName=t,s.name=this.formGroup.controls.name.value,s.billingEmail=this.formGroup.controls.billingEmail.value,s.keys=new u.u(i[0],i[1].encryptedString),s.planType=h.k9.Free,this.hasProvider){const e=new p(this.formGroup.controls.clientOwnerEmail.value,s),t=yield this.cryptoService.getProviderKey(this.providerId);e.organizationCreateRequest.key=(yield this.cryptoService.encrypt(n.key,t)).encryptedString;return(yield this.apiService.postProviderCreateOrganization(this.providerId,e)).organizationId}return(yield this.organizationApiService.create(s)).id}))}createSelfHosted(e,t,i){return D(this,void 0,void 0,(function*(){const n=document.getElementById(\"file\").files;if(null==n||0===n.length)throw new Error(this.i18nService.t(\"selectFile\"));const s=new FormData;s.append(\"license\",n[0]),s.append(\"key\",e),s.append(\"collectionName\",t);const o=(yield this.organizationApiService.createLicense(s)).id;yield this.apiService.refreshIdentityToken();const r=new u.u(i[0],i[1].encryptedString);return yield this.organizationApiService.updateKeys(o,r),o}))}billingSubLabelText(){const e=this.selectedPlan,t=0===e.PasswordManager.basePrice?e.PasswordManager.seatPrice:e.PasswordManager.basePrice;let i=\"\";return e.isAnnual?i+=`${this.i18nService.t(\"annual\")} ($${t}/${this.i18nService.t(\"yr\")})`:i+=`${this.i18nService.t(\"monthly\")} ($${t}/${this.i18nService.t(\"monthAbbr\")})`,i}buildSecretsManagerRequest(e){const t=this.secretsManagerForm.value;e.useSecretsManager=this.planOffersSecretsManager\u0026\u0026t.enabled,e.useSecretsManager\u0026\u0026(this.selectedSecretsManagerPlan.SecretsManager.hasAdditionalSeatsOption\u0026\u0026(e.additionalSmSeats=t.userSeats),this.selectedSecretsManagerPlan.SecretsManager.hasAdditionalServiceAccountOption\u0026\u0026(e.additionalServiceAccounts=t.additionalServiceAccounts))}upgradeFlowPrefillForm(){if(this.acceptingSponsorship)return this.formGroup.controls.product.setValue(f.kv.Families),void this.changedProduct();if(this.currentPlan\u0026\u0026this.currentPlan.product!==f.kv.Enterprise){const e=this.passwordManagerPlans.find((e=\u003ethis.currentPlan.product===f.kv.Free?e.type===h.k9.FamiliesAnnually:e.upgradeSortOrder==this.currentPlan.upgradeSortOrder+1));this.plan=e.type,this.product=e.product,this.changedProduct()}}planIsEnabled(e){return!e.disabled\u0026\u0026!e.legacyYear}}Ye.ɵfac=function(e){return new(e||Ye)(n.Y36(b.s),n.Y36(U.D),n.Y36(_.P),n.Y36(A.$),n.Y36(Z.F0),n.Y36(x._),n.Y36(S.d),n.Y36(a.Mn),n.Y36(T.$),n.Y36(C.o),n.Y36(s.qu),n.Y36(O.M))},Ye.ɵcmp=n.Xpm({type:Ye,selectors:[[\"app-organization-plans\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(n.Gf(v.p,5),n.Gf(w.F,5)),2\u0026e){let e;n.iGM(e=n.CRH())\u0026\u0026(t.paymentComponent=e.first),n.iGM(e=n.CRH())\u0026\u0026(t.taxComponent=e.first)}},inputs:{organizationId:\"organizationId\",showFree:\"showFree\",showCancel:\"showCancel\",acceptingSponsorship:\"acceptingSponsorship\",currentPlan:\"currentPlan\",product:\"product\",plan:\"plan\",providerId:\"providerId\"},outputs:{onSuccess:\"onSuccess\",onCanceled:\"onCanceled\",onTrialBillingSuccess:\"onTrialBillingSuccess\"},standalone:!0,features:[n.jDz],decls:6,vars:3,consts:[[4,\"ngIf\"],[\"ngNativeValidate\",\"\",\"class\",\"tw-pt-6\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"form-group\"],[\"for\",\"file\"],[\"type\",\"file\",\"id\",\"file\",\"name\",\"file\",\"required\",\"\",1,\"form-control-file\"],[1,\"form-text\",\"text-muted\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"ngNativeValidate\",\"\",1,\"tw-pt-6\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\"],[3,\"formGroup\",\"createOrganization\",\"isProvider\",\"acceptingSponsorship\",\"changedBusinessOwned\"],[1,\"mt-5\"],[\"class\",\"form-check form-check-block\",4,\"ngFor\",\"ngForOf\"],[1,\"tw-my-10\"],[3,\"formGroup\",\"selectedPlan\",\"upgradeOrganization\",4,\"ngIf\"],[\"class\",\"mt-4\",4,\"ngIf\"],[1,\"mt-4\"],[\"type\",\"submit\",\"buttonType\",\"primary\",\"bitButton\",\"\",3,\"loading\",\"disabled\"],[\"type\",\"button\",\"buttonType\",\"secondary\",\"bitButton\",\"\",3,\"click\",4,\"ngIf\"],[1,\"form-check\",\"form-check-block\"],[\"type\",\"radio\",\"name\",\"product\",\"formControlName\",\"product\",1,\"form-check-input\",3,\"id\",\"value\",\"change\"],[1,\"form-check-label\",3,\"for\"],[1,\"mb-1\"],[4,\"ngIf\",\"ngIfElse\"],[\"nonEnterprisePlans\",\"\"],[\"fullFeatureList\",\"\"],[\"class\",\"row\",4,\"ngIf\"],[1,\"row\"],[1,\"form-group\",\"col-6\"],[\"for\",\"additionalStorage\"],[\"id\",\"additionalStorage\",\"type\",\"number\",\"name\",\"additionalStorageGb\",\"formControlName\",\"additionalStorage\",\"step\",\"1\",1,\"form-control\",3,\"placeholder\"],[1,\"text-muted\",\"form-text\"],[\"class\",\"form-group col-6\",4,\"ngIf\"],[1,\"spaced-header\"],[1,\"col-6\"],[\"for\",\"additionalSeats\"],[\"id\",\"additionalSeats\",\"type\",\"number\",\"name\",\"additionalSeats\",\"formControlName\",\"additionalSeats\",\"required\",\"\",1,\"form-control\",3,\"placeholder\"],[\"id\",\"additionalSeats\",\"type\",\"number\",\"name\",\"additionalSeats\",\"formControlName\",\"additionalSeats\",1,\"form-control\",3,\"placeholder\"],[1,\"form-check\"],[\"id\",\"premiumAccess\",\"type\",\"checkbox\",\"name\",\"premiumAccessAddon\",\"formControlName\",\"premiumAccessAddon\",1,\"form-check-input\"],[\"for\",\"premiumAccess\",1,\"form-check-label\",\"bold\"],[\"type\",\"radio\",\"name\",\"plan\",\"formControlName\",\"plan\",1,\"form-check-input\",3,\"id\",\"value\"],[\"notAcceptingSponsorship\",\"\"],[2,\"text-decoration\",\"line-through\"],[3,\"formGroup\",\"selectedPlan\",\"upgradeOrganization\"],[1,\"mb-4\"],[1,\"text-muted\",\"font-italic\",\"mb-3\",\"d-block\"],[3,\"hideCredit\",4,\"ngIf\"],[3,\"onCountryChanged\"],[\"id\",\"price\",1,\"my-4\"],[1,\"text-muted\",\"text-sm\"],[1,\"my-1\",\"col-3\",\"ml-0\"],[1,\"text-lg\"],[3,\"hideCredit\"],[3,\"showMethods\"],[3,\"type\"],[\"type\",\"button\",\"buttonType\",\"secondary\",\"bitButton\",\"\",3,\"click\"]],template:function(e,t){1\u0026e\u0026\u0026(n.YNc(0,E,9,6,\"ng-container\",0),n._uU(1,\"\\n\"),n.YNc(2,F,33,18,\"ng-container\",0),n._uU(3,\"\\n\"),n.YNc(4,Je,33,20,\"form\",1),n._uU(5,\"\\n\")),2\u0026e\u0026\u0026(n.Q6J(\"ngIf\",t.loading),n.xp6(2),n.Q6J(\"ngIf\",t.createOrganization\u0026\u0026t.selfHosted),n.xp6(2),n.Q6J(\"ngIf\",!t.loading))},dependencies:[y.ql,k.sg,k.O5,s.Fj,s.wV,s.Wl,s._,s.JJ,s.JL,s.Q7,s.F,s.sg,s.u,q.b,P.O,I.r,v.p,w.F,M.G,k.H9,N.C,m._,L.K],encapsulation:2})},68605:(e,t,i)=\u003e{\"use strict\";i.d(t,{ql:()=\u003ea,pV:()=\u003es.p,ZN:()=\u003eie,Fi:()=\u003eo.F,DT:()=\u003ene.D});var n=i(71146),s=i(42759),o=i(34279),r=i(24852);class a{}a.ɵfac=function(e){return new(e||a)},a.ɵmod=r.oAB({type:a}),a.ɵinj=r.cJS({imports:[n.m,s.p,o.F,n.m]});var l=i(98645),c=i(69485);class u{}var d=i(55602),p=i(97360),h=i(78627),g=i(99721),f=i(75557),m=i(66459),y=i(73369),v=i(19419),w=i(24610),b=i(53707),U=i(81974),_=i(24637),A=i(11512),Z=i(57139),x=i(36179),S=i(99042),T=i(58691);class C{}var O=i(58172),k=i(23915),q=i(33245),P=i(82933),I=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const M=[\"ppButtonForm\"];function N(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"div\",36),r._uU(1,\"\\n      \"),r.TgZ(2,\"div\",37),r._uU(3,\"\\n        \"),r.TgZ(4,\"input\",38),r.NdJ(\"ngModelChange\",(function(t){r.CHM(e);const i=r.oxw();return r.KtG(i.method=t)})),r.qZA(),r._uU(5,\"\\n        \"),r.TgZ(6,\"label\",39),r._uU(7,\"\\n          \"),r._UZ(8,\"i\",40),r._uU(9,\" PayPal\"),r.qZA(),r._uU(10,\"\\n      \"),r.qZA(),r._uU(11,\"\\n      \"),r.TgZ(12,\"div\",37),r._uU(13,\"\\n        \"),r.TgZ(14,\"input\",41),r.NdJ(\"ngModelChange\",(function(t){r.CHM(e);const i=r.oxw();return r.KtG(i.method=t)})),r.qZA(),r._uU(15,\"\\n        \"),r.TgZ(16,\"label\",42),r._uU(17,\"\\n          \"),r._UZ(18,\"i\",43),r._uU(19,\" Bitcoin\"),r.qZA(),r._uU(20,\"\\n      \"),r.qZA(),r._uU(21,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.oxw();r.xp6(4),r.Q6J(\"value\",e.paymentMethodType.PayPal)(\"ngModel\",e.method),r.xp6(10),r.Q6J(\"value\",e.paymentMethodType.BitPay)(\"ngModel\",e.method)}}class L{constructor(e,t,i,n,s,o){this.stateService=e,this.apiService=t,this.platformUtilsService=i,this.organizationService=n,this.logService=s,this.configService=o,this.showOptions=!0,this.method=c.Lt.PayPal,this.onAdded=new r.vpe,this.onCanceled=new r.vpe,this.paymentMethodType=c.Lt,this.ppLoading=!1;const a=\"AD3LAUZSNVPJY\",l=\"https://www.sandbox.paypal.com/cgi-bin/webscr\";this.ppButtonFormAction=l,this.ppButtonBusinessId=a}ngOnInit(){return I(this,void 0,void 0,(function*(){if(null!=this.organizationId){null==this.creditAmount\u0026\u0026(this.creditAmount=\"20.00\"),this.ppButtonCustomField=\"organization_id:\"+this.organizationId;const e=yield this.organizationService.get(this.organizationId);null!=e\u0026\u0026(this.subject=e.name,this.name=e.name)}else null==this.creditAmount\u0026\u0026(this.creditAmount=\"10.00\"),this.userId=yield this.stateService.getUserId(),this.subject=yield this.stateService.getEmail(),this.email=this.subject,this.ppButtonCustomField=\"user_id:\"+this.userId;this.region=yield(0,S.z)(this.configService.cloudRegion$),this.ppButtonCustomField+=\",account_credit:1\",this.ppButtonCustomField+=`,region:${this.region}`,this.returnUrl=window.location.href}))}submit(){return I(this,void 0,void 0,(function*(){if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount){if(this.method===c.Lt.PayPal)return this.ppButtonFormRef.nativeElement.submit(),void(this.ppLoading=!0);if(this.method!==c.Lt.BitPay)try{this.onAdded.emit()}catch(e){this.logService.error(e)}else try{const e=new C;e.email=this.email,e.name=this.name,e.credit=!0,e.amount=this.creditAmountNumber,e.organizationId=this.organizationId,e.userId=this.userId,e.returnUrl=this.returnUrl,this.formPromise=this.apiService.postBitPayInvoice(e);const t=yield this.formPromise;this.platformUtilsService.launchUri(t)}catch(e){this.logService.error(e)}}}))}cancel(){this.onCanceled.emit()}formatAmount(){try{if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount){const e=Math.abs(parseFloat(this.creditAmount));if(e\u003e0)return void(this.creditAmount=parseFloat((Math.round(100*e)/100).toString()).toFixed(2).toString())}}catch(e){this.logService.error(e)}this.creditAmount=\"\"}get creditAmountNumber(){if(null!=this.creditAmount\u0026\u0026\"\"!==this.creditAmount)try{return parseFloat(this.creditAmount)}catch(e){this.logService.error(e)}return null}}L.ɵfac=function(e){return new(e||L)(r.Y36(O.b),r.Y36(d.s),r.Y36(g.P),r.Y36(T.Mn),r.Y36(m.$),r.Y36(k.i))},L.ɵcmp=r.Xpm({type:L,selectors:[[\"app-add-credit\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026r.Gf(M,7,r.SBq),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.ppButtonFormRef=e.first)}},inputs:{creditAmount:\"creditAmount\",showOptions:\"showOptions\",method:\"method\",organizationId:\"organizationId\"},outputs:{onAdded:\"onAdded\",onCanceled:\"onCanceled\"},decls:94,vars:32,consts:[[\"ngNativeValidate\",\"\",1,\"card\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"card-body\"],[\"type\",\"button\",1,\"close\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\"],[1,\"card-body-header\"],[\"class\",\"mb-4 text-lg\",4,\"ngIf\"],[1,\"form-group\"],[1,\"row\"],[1,\"col-4\"],[\"for\",\"creditAmount\"],[1,\"input-group\"],[1,\"input-group-prepend\"],[1,\"input-group-text\"],[\"id\",\"creditAmount\",\"type\",\"text\",\"name\",\"CreditAmount\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\",\"blur\"],[1,\"form-text\",\"text-muted\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",3,\"click\"],[\"method\",\"post\",\"target\",\"_top\",3,\"action\"],[\"ppButtonForm\",\"\"],[\"type\",\"hidden\",\"name\",\"cmd\",\"value\",\"_xclick\"],[\"type\",\"hidden\",\"name\",\"business\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"button_subtype\",\"value\",\"services\"],[\"type\",\"hidden\",\"name\",\"no_note\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"no_shipping\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"rm\",\"value\",\"1\"],[\"type\",\"hidden\",\"name\",\"return\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"cancel_return\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"currency_code\",\"value\",\"USD\"],[\"type\",\"hidden\",\"name\",\"image_url\",\"value\",\"https://bitwarden.com/images/paypal-banner.png\"],[\"type\",\"hidden\",\"name\",\"bn\",\"value\",\"PP-BuyNowBF:btn_buynow_LG.gif:NonHosted\"],[\"type\",\"hidden\",\"name\",\"amount\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"custom\",3,\"value\"],[\"type\",\"hidden\",\"name\",\"item_name\",\"value\",\"Bitwarden Account Credit\"],[\"type\",\"hidden\",\"name\",\"item_number\",3,\"value\"],[1,\"mb-4\",\"text-lg\"],[1,\"form-check\",\"form-check-inline\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"credit-method-paypal\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\"],[\"for\",\"credit-method-paypal\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-paypal\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"credit-method-bitcoin\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\"],[\"for\",\"credit-method-bitcoin\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-bitcoin\"]],template:function(e,t){if(1\u0026e\u0026\u0026(r.TgZ(0,\"form\",0,1),r.NdJ(\"ngSubmit\",(function(){return t.submit()})),r._uU(2,\"\\n  \"),r.TgZ(3,\"div\",2),r._uU(4,\"\\n    \"),r.TgZ(5,\"button\",3),r.NdJ(\"click\",(function(){return t.cancel()})),r.ALo(6,\"i18n\"),r._uU(7,\"\\n      \"),r.TgZ(8,\"span\",4),r._uU(9,\"×\"),r.qZA(),r._uU(10,\"\\n    \"),r.qZA(),r._uU(11,\"\\n    \"),r.TgZ(12,\"h3\",5),r._uU(13),r.ALo(14,\"i18n\"),r.qZA(),r._uU(15,\"\\n    \"),r.YNc(16,N,22,4,\"div\",6),r._uU(17,\"\\n    \"),r.TgZ(18,\"div\",7),r._uU(19,\"\\n      \"),r.TgZ(20,\"div\",8),r._uU(21,\"\\n        \"),r.TgZ(22,\"div\",9),r._uU(23,\"\\n          \"),r.TgZ(24,\"label\",10),r._uU(25),r.ALo(26,\"i18n\"),r.qZA(),r._uU(27,\"\\n          \"),r.TgZ(28,\"div\",11),r._uU(29,\"\\n            \"),r.TgZ(30,\"div\",12)(31,\"span\",13),r._uU(32,\"$USD\"),r.qZA()(),r._uU(33,\"\\n            \"),r.TgZ(34,\"input\",14),r.NdJ(\"ngModelChange\",(function(e){return t.creditAmount=e}))(\"blur\",(function(){return t.formatAmount()})),r.qZA(),r._uU(35,\"\\n          \"),r.qZA(),r._uU(36,\"\\n        \"),r.qZA(),r._uU(37,\"\\n      \"),r.qZA(),r._uU(38,\"\\n      \"),r.TgZ(39,\"small\",15),r._uU(40),r.ALo(41,\"i18n\"),r.qZA(),r._uU(42,\"\\n    \"),r.qZA(),r._uU(43,\"\\n    \"),r.TgZ(44,\"button\",16),r._uU(45,\"\\n      \"),r._UZ(46,\"i\",17),r.ALo(47,\"i18n\"),r._uU(48,\"\\n      \"),r.TgZ(49,\"span\"),r._uU(50),r.ALo(51,\"i18n\"),r.qZA(),r._uU(52,\"\\n    \"),r.qZA(),r._uU(53,\"\\n    \"),r.TgZ(54,\"button\",18),r.NdJ(\"click\",(function(){return t.cancel()})),r._uU(55),r.ALo(56,\"i18n\"),r.qZA(),r._uU(57,\"\\n  \"),r.qZA(),r._uU(58,\"\\n\"),r.qZA(),r._uU(59,\"\\n\"),r.TgZ(60,\"form\",19,20),r._uU(62,\"\\n  \"),r._UZ(63,\"input\",21),r._uU(64,\"\\n  \"),r._UZ(65,\"input\",22),r._uU(66,\"\\n  \"),r._UZ(67,\"input\",23),r._uU(68,\"\\n  \"),r._UZ(69,\"input\",24),r._uU(70,\"\\n  \"),r._UZ(71,\"input\",25),r._uU(72,\"\\n  \"),r._UZ(73,\"input\",26),r._uU(74,\"\\n  \"),r._UZ(75,\"input\",27),r._uU(76,\"\\n  \"),r._UZ(77,\"input\",28),r._uU(78,\"\\n  \"),r._UZ(79,\"input\",29),r._uU(80,\"\\n  \"),r._UZ(81,\"input\",30),r._uU(82,\"\\n  \"),r._UZ(83,\"input\",31),r._uU(84,\"\\n  \"),r._UZ(85,\"input\",32),r._uU(86,\"\\n  \"),r._UZ(87,\"input\",33),r._uU(88,\"\\n  \"),r._UZ(89,\"input\",34),r._uU(90,\"\\n  \"),r._UZ(91,\"input\",35),r._uU(92,\"\\n\"),r.qZA(),r._uU(93,\"\\n\")),2\u0026e){const e=r.MAs(1);r.Q6J(\"appApiAction\",t.formPromise),r.xp6(5),r.s9C(\"appA11yTitle\",r.lcZ(6,18,\"cancel\")),r.xp6(8),r.Oqu(r.lcZ(14,20,\"addCredit\")),r.xp6(3),r.Q6J(\"ngIf\",t.showOptions),r.xp6(9),r.Oqu(r.lcZ(26,22,\"amount\")),r.xp6(9),r.Q6J(\"ngModel\",t.creditAmount),r.xp6(6),r.Oqu(r.lcZ(41,24,\"creditDelayed\")),r.xp6(4),r.Q6J(\"disabled\",e.loading||t.ppLoading),r.xp6(2),r.s9C(\"title\",r.lcZ(47,26,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(51,28,\"submit\")),r.xp6(5),r.hij(\"\\n      \",r.lcZ(56,30,\"cancel\"),\"\\n    \"),r.xp6(5),r.s9C(\"action\",t.ppButtonFormAction,r.LSH),r.xp6(5),r.s9C(\"value\",t.ppButtonBusinessId),r.xp6(10),r.s9C(\"value\",t.returnUrl),r.xp6(2),r.s9C(\"value\",t.returnUrl),r.xp6(8),r.s9C(\"value\",t.creditAmount),r.xp6(2),r.s9C(\"value\",t.ppButtonCustomField),r.xp6(4),r.s9C(\"value\",t.subject)}},dependencies:[v.O5,l._Y,l.Fj,l._,l.JJ,l.JL,l.Q7,l.On,l.F,q.B,w.b,P.C],encapsulation:2});var D=i(95608),E=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};class F{constructor(e,t,i,n,s){this.apiService=e,this.i18nService=t,this.platformUtilsService=i,this.logService=n,this.organizationApiService=s,this.onAdjusted=new r.vpe,this.onCanceled=new r.vpe,this.paymentMethodType=c.Lt}submit(){return E(this,void 0,void 0,(function*(){try{const e=new D.t;this.formPromise=this.paymentComponent.createPaymentToken().then((t=\u003e(e.paymentToken=t[0],e.paymentMethodType=t[1],e.postalCode=this.taxInfoComponent.taxInfo.postalCode,e.country=this.taxInfoComponent.taxInfo.country,null==this.organizationId?this.apiService.postAccountPayment(e):(e.taxId=this.taxInfoComponent.taxInfo.taxId,e.state=this.taxInfoComponent.taxInfo.state,e.line1=this.taxInfoComponent.taxInfo.line1,e.line2=this.taxInfoComponent.taxInfo.line2,e.city=this.taxInfoComponent.taxInfo.city,e.state=this.taxInfoComponent.taxInfo.state,this.organizationApiService.updatePayment(this.organizationId,e))))),yield this.formPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"updatedPaymentMethod\")),this.onAdjusted.emit()}catch(e){this.logService.error(e)}}))}cancel(){this.onCanceled.emit()}changeCountry(){\"US\"===this.taxInfoComponent.taxInfo.country?this.paymentComponent.hideBank=!this.organizationId:(this.paymentComponent.hideBank=!0,this.paymentComponent.method===c.Lt.BankAccount\u0026\u0026(this.paymentComponent.method=c.Lt.Card,this.paymentComponent.changeMethod()))}}F.ɵfac=function(e){return new(e||F)(r.Y36(d.s),r.Y36(h.D),r.Y36(g.P),r.Y36(m.$),r.Y36(p.M))},F.ɵcmp=r.Xpm({type:F,selectors:[[\"app-adjust-payment\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026(r.Gf(s.p,7),r.Gf(o.F,7)),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.paymentComponent=e.first),r.iGM(e=r.CRH())\u0026\u0026(t.taxInfoComponent=e.first)}},inputs:{currentType:\"currentType\",organizationId:\"organizationId\"},outputs:{onAdjusted:\"onAdjusted\",onCanceled:\"onCanceled\"},decls:36,vars:19,consts:[[\"ngNativeValidate\",\"\",1,\"card\",3,\"appApiAction\",\"ngSubmit\"],[\"form\",\"\"],[1,\"card-body\"],[\"type\",\"button\",1,\"close\",3,\"appA11yTitle\",\"click\"],[\"aria-hidden\",\"true\"],[1,\"card-body-header\"],[3,\"hideBank\",\"hideCredit\"],[3,\"onCountryChanged\"],[\"type\",\"submit\",1,\"btn\",\"btn-primary\",\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[\"type\",\"button\",1,\"btn\",\"btn-outline-secondary\",3,\"click\"]],template:function(e,t){if(1\u0026e\u0026\u0026(r.TgZ(0,\"form\",0,1),r.NdJ(\"ngSubmit\",(function(){return t.submit()})),r._uU(2,\"\\n  \"),r.TgZ(3,\"div\",2),r._uU(4,\"\\n    \"),r.TgZ(5,\"button\",3),r.NdJ(\"click\",(function(){return t.cancel()})),r.ALo(6,\"i18n\"),r._uU(7,\"\\n      \"),r.TgZ(8,\"span\",4),r._uU(9,\"×\"),r.qZA(),r._uU(10,\"\\n    \"),r.qZA(),r._uU(11,\"\\n    \"),r.TgZ(12,\"h3\",5),r._uU(13),r.ALo(14,\"i18n\"),r.qZA(),r._uU(15,\"\\n    \"),r._UZ(16,\"app-payment\",6),r._uU(17,\"\\n    \"),r.TgZ(18,\"app-tax-info\",7),r.NdJ(\"onCountryChanged\",(function(){return t.changeCountry()})),r.qZA(),r._uU(19,\"\\n    \"),r.TgZ(20,\"button\",8),r._uU(21,\"\\n      \"),r._UZ(22,\"i\",9),r.ALo(23,\"i18n\"),r._uU(24,\"\\n      \"),r.TgZ(25,\"span\"),r._uU(26),r.ALo(27,\"i18n\"),r.qZA(),r._uU(28,\"\\n    \"),r.qZA(),r._uU(29,\"\\n    \"),r.TgZ(30,\"button\",10),r.NdJ(\"click\",(function(){return t.cancel()})),r._uU(31),r.ALo(32,\"i18n\"),r.qZA(),r._uU(33,\"\\n  \"),r.qZA(),r._uU(34,\"\\n\"),r.qZA(),r._uU(35,\"\\n\")),2\u0026e){const e=r.MAs(1);r.Q6J(\"appApiAction\",t.formPromise),r.xp6(5),r.s9C(\"appA11yTitle\",r.lcZ(6,9,\"cancel\")),r.xp6(8),r.hij(\"\\n      \",r.lcZ(14,11,null!=t.currentType?\"changePaymentMethod\":\"addPaymentMethod\"),\"\\n    \"),r.xp6(3),r.Q6J(\"hideBank\",!t.organizationId)(\"hideCredit\",!0),r.xp6(4),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(23,13,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(27,15,\"submit\")),r.xp6(5),r.hij(\"\\n      \",r.lcZ(32,17,\"cancel\"),\"\\n    \")}},dependencies:[l.JL,l.F,q.B,w.b,s.p,o.F,P.C],encapsulation:2});var R=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};const J=function(e){return{\"bwi-spin\":e}};function Y(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",3),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw();return r.KtG(t.load())})),r._uU(1,\"\\n    \"),r._UZ(2,\"i\",4),r._uU(3),r.ALo(4,\"i18n\"),r.qZA()}if(2\u0026e){const e=r.oxw();r.Q6J(\"disabled\",e.loading),r.xp6(2),r.Q6J(\"ngClass\",r.VKq(5,J,e.loading)),r.xp6(1),r.hij(\"\\n    \",r.lcZ(4,3,\"refresh\"),\"\\n  \")}}function z(e,t){1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n  \"),r._UZ(2,\"i\",5),r.ALo(3,\"i18n\"),r._uU(4,\"\\n  \"),r.TgZ(5,\"span\",6),r._uU(6),r.ALo(7,\"i18n\"),r.qZA(),r._uU(8,\"\\n\"),r.BQk()),2\u0026e\u0026\u0026(r.xp6(2),r.s9C(\"title\",r.lcZ(3,2,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(7,4,\"loading\")))}function K(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",12),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.addCredit())})),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()}2\u0026e\u0026\u0026(r.xp6(1),r.hij(\"\\n    \",r.lcZ(2,1,\"addCredit\"),\"\\n  \"))}function Q(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-add-credit\",13),r.NdJ(\"onAdded\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closeAddCredit(!0))}))(\"onCanceled\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closeAddCredit(!1))})),r._uU(1,\"\\n  \"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.Q6J(\"organizationId\",e.organizationId)}}function B(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"p\"),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(1),r.Oqu(r.lcZ(2,1,\"noPaymentMethod\")))}function G(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-callout\",16),r.ALo(1,\"i18n\"),r._uU(2,\"\\n      \"),r.TgZ(3,\"p\"),r._uU(4),r.ALo(5,\"i18n\"),r.ALo(6,\"i18n\"),r.qZA(),r._uU(7,\"\\n      \"),r.TgZ(8,\"form\",17,18),r.NdJ(\"ngSubmit\",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.verifyBank())})),r._uU(10,\"\\n        \"),r.TgZ(11,\"bit-form-field\",19),r._uU(12,\"\\n          \"),r.TgZ(13,\"bit-label\"),r._uU(14),r.ALo(15,\"i18n\"),r.qZA(),r._uU(16,\"\\n          \"),r._UZ(17,\"input\",20),r._uU(18,\"\\n          \"),r.TgZ(19,\"span\",21),r._uU(20,\"$0.\"),r.qZA(),r._uU(21,\"\\n        \"),r.qZA(),r._uU(22,\"\\n        \"),r.TgZ(23,\"bit-form-field\",19),r._uU(24,\"\\n          \"),r.TgZ(25,\"bit-label\"),r._uU(26),r.ALo(27,\"i18n\"),r.qZA(),r._uU(28,\"\\n          \"),r._UZ(29,\"input\",22),r._uU(30,\"\\n          \"),r.TgZ(31,\"span\",21),r._uU(32,\"$0.\"),r.qZA(),r._uU(33,\"\\n        \"),r.qZA(),r._uU(34,\"\\n        \"),r.TgZ(35,\"button\",23),r._uU(36,\"\\n          \"),r._UZ(37,\"i\",24),r.ALo(38,\"i18n\"),r._uU(39,\"\\n          \"),r.TgZ(40,\"span\"),r._uU(41),r.ALo(42,\"i18n\"),r.qZA(),r._uU(43,\"\\n        \"),r.qZA(),r._uU(44,\"\\n      \"),r.qZA(),r._uU(45,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.MAs(9),t=r.oxw(3);r.s9C(\"title\",r.lcZ(1,10,\"verifyBankAccount\")),r.xp6(4),r.AsE(\"\",r.lcZ(5,12,\"verifyBankAccountDesc\"),\" \",r.lcZ(6,14,\"verifyBankAccountFailureWarning\"),\"\"),r.xp6(4),r.Q6J(\"formGroup\",t.verifyBankForm)(\"appApiAction\",t.verifyBankPromise),r.xp6(6),r.Oqu(r.xi3(15,16,\"amountX\",\"1\")),r.xp6(12),r.Oqu(r.xi3(27,19,\"amountX\",\"2\")),r.xp6(9),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(38,22,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(42,24,\"verifyBankAccount\"))}}function V(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n    \"),r.YNc(2,G,46,26,\"app-callout\",14),r._uU(3,\"\\n    \"),r.TgZ(4,\"p\"),r._uU(5,\"\\n      \"),r._UZ(6,\"i\",15),r._uU(7),r.qZA(),r._uU(8,\"\\n  \"),r.BQk()),2\u0026e){const e=r.oxw(2);r.xp6(2),r.Q6J(\"ngIf\",e.forOrganization\u0026\u0026e.paymentSource.type===e.paymentMethodType.BankAccount\u0026\u0026e.paymentSource.needsVerification),r.xp6(4),r.Q6J(\"ngClass\",e.paymentSourceClasses),r.xp6(1),r.hij(\"\\n      \",e.paymentSource.description,\"\\n    \")}}function j(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"button\",12),r.NdJ(\"click\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.changePayment())})),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.xp6(1),r.hij(\"\\n    \",r.lcZ(2,1,e.paymentSource?\"changePaymentMethod\":\"addPaymentMethod\"),\"\\n  \")}}function H(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"app-adjust-payment\",25),r.NdJ(\"onAdjusted\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePayment(!0))}))(\"onCanceled\",(function(){r.CHM(e);const t=r.oxw(2);return r.KtG(t.closePayment(!1))})),r._uU(1,\"\\n  \"),r.qZA()}if(2\u0026e){const e=r.oxw(2);r.Q6J(\"organizationId\",e.organizationId)(\"currentType\",null!=e.paymentSource?e.paymentSource.type:null)}}function $(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"p\"),r._uU(1),r.ALo(2,\"i18n\"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(1),r.Oqu(r.lcZ(2,1,\"paymentChargedWithUnpaidSubscription\")))}function W(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"div\"),r._uU(1,\"\\n      \"),r._UZ(2,\"i\",5),r.ALo(3,\"i18n\"),r._uU(4,\"\\n      \"),r.TgZ(5,\"span\",6),r._uU(6),r.ALo(7,\"i18n\"),r.qZA(),r._uU(8,\"\\n    \"),r.qZA()),2\u0026e\u0026\u0026(r.xp6(2),r.s9C(\"title\",r.lcZ(3,2,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(7,4,\"loading\")))}function X(e,t){if(1\u0026e){const e=r.EpF();r.TgZ(0,\"form\",27,28),r.NdJ(\"ngSubmit\",(function(){r.CHM(e);const t=r.oxw(3);return r.KtG(t.submitTaxInfo())})),r._uU(2,\"\\n      \"),r._UZ(3,\"app-tax-info\"),r._uU(4,\"\\n      \"),r.TgZ(5,\"button\",29),r._uU(6,\"\\n        \"),r._UZ(7,\"i\",24),r.ALo(8,\"i18n\"),r._uU(9,\"\\n        \"),r.TgZ(10,\"span\"),r._uU(11),r.ALo(12,\"i18n\"),r.qZA(),r._uU(13,\"\\n      \"),r.qZA(),r._uU(14,\"\\n    \"),r.qZA()}if(2\u0026e){const e=r.MAs(1),t=r.oxw(3);r.Q6J(\"appApiAction\",t.taxFormPromise),r.xp6(5),r.Q6J(\"disabled\",e.loading),r.xp6(2),r.s9C(\"title\",r.lcZ(8,4,\"loading\")),r.xp6(4),r.Oqu(r.lcZ(12,6,\"save\"))}}function ee(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n    \"),r.TgZ(2,\"h2\",10),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n    \"),r.TgZ(6,\"p\"),r._uU(7),r.ALo(8,\"i18n\"),r.qZA(),r._uU(9,\"\\n    \"),r.YNc(10,W,9,6,\"div\",2),r._uU(11,\"\\n    \"),r.YNc(12,X,15,8,\"form\",26),r._uU(13,\"\\n  \"),r.BQk()),2\u0026e){const e=r.oxw(2);r.xp6(3),r.Oqu(r.lcZ(4,4,\"taxInformation\")),r.xp6(4),r.Oqu(r.lcZ(8,6,\"taxInformationDesc\")),r.xp6(3),r.Q6J(\"ngIf\",!e.org||e.loading),r.xp6(2),r.Q6J(\"ngIf\",e.org\u0026\u0026!e.loading)}}function te(e,t){if(1\u0026e\u0026\u0026(r.ynx(0),r._uU(1,\"\\n  \"),r.TgZ(2,\"h2\"),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n  \"),r.TgZ(6,\"p\",7),r._uU(7,\"\\n    \"),r.TgZ(8,\"strong\"),r._uU(9),r.ALo(10,\"currency\"),r.qZA(),r._uU(11,\"\\n  \"),r.qZA(),r._uU(12,\"\\n  \"),r.TgZ(13,\"p\"),r._uU(14),r.ALo(15,\"i18n\"),r.qZA(),r._uU(16,\"\\n  \"),r.YNc(17,K,3,3,\"button\",8),r._uU(18,\"\\n  \"),r.YNc(19,Q,2,1,\"app-add-credit\",9),r._uU(20,\"\\n  \"),r.TgZ(21,\"h2\",10),r._uU(22),r.ALo(23,\"i18n\"),r.qZA(),r._uU(24,\"\\n  \"),r.YNc(25,B,3,3,\"p\",2),r._uU(26,\"\\n  \"),r.YNc(27,V,9,3,\"ng-container\",2),r._uU(28,\"\\n  \"),r.YNc(29,j,3,3,\"button\",8),r._uU(30,\"\\n  \"),r.YNc(31,H,2,2,\"app-adjust-payment\",11),r._uU(32,\"\\n  \"),r.YNc(33,$,3,3,\"p\",2),r._uU(34,\"\\n  \"),r.YNc(35,ee,14,8,\"ng-container\",2),r._uU(36,\"\\n\"),r.BQk()),2\u0026e){const e=r.oxw();r.xp6(3),r.Oqu(r.lcZ(4,12,e.isCreditBalance?\"accountCredit\":\"accountBalance\")),r.xp6(6),r.Oqu(r.xi3(10,14,e.creditOrBalance,\"$\")),r.xp6(5),r.Oqu(r.lcZ(15,17,\"creditAppliedDesc\")),r.xp6(3),r.Q6J(\"ngIf\",!e.showAddCredit),r.xp6(2),r.Q6J(\"ngIf\",e.showAddCredit),r.xp6(3),r.Oqu(r.lcZ(23,19,\"paymentMethod\")),r.xp6(3),r.Q6J(\"ngIf\",!e.paymentSource),r.xp6(2),r.Q6J(\"ngIf\",e.paymentSource),r.xp6(2),r.Q6J(\"ngIf\",!e.showAdjustPayment),r.xp6(2),r.Q6J(\"ngIf\",e.showAdjustPayment),r.xp6(2),r.Q6J(\"ngIf\",e.isUnpaid),r.xp6(2),r.Q6J(\"ngIf\",e.forOrganization)}}class ie{constructor(e,t,i,n,s,o,r,a,u){this.apiService=e,this.organizationApiService=t,this.i18nService=i,this.platformUtilsService=n,this.router=s,this.logService=o,this.route=r,this.formBuilder=a,this.dialogService=u,this.loading=!1,this.firstLoaded=!1,this.showAdjustPayment=!1,this.showAddCredit=!1,this.paymentMethodType=c.Lt,this.isUnpaid=!1,this.verifyBankForm=this.formBuilder.group({amount1:new l.NI(null,[l.kI.required,l.kI.max(99),l.kI.min(0)]),amount2:new l.NI(null,[l.kI.required,l.kI.max(99),l.kI.min(0)])})}ngOnInit(){return R(this,void 0,void 0,(function*(){this.route.params.subscribe((e=\u003eR(this,void 0,void 0,(function*(){if(e.organizationId)this.organizationId=e.organizationId;else if(this.platformUtilsService.isSelfHost())return void this.router.navigate([\"/settings/subscription\"]);yield this.load(),this.firstLoaded=!0}))))}))}load(){var e,t;return R(this,void 0,void 0,(function*(){if(!this.loading){if(this.loading=!0,this.forOrganization){const e=this.organizationApiService.getBilling(this.organizationId),t=this.organizationApiService.getSubscription(this.organizationId);[this.billing,this.org]=yield Promise.all([e,t])}else{const e=this.apiService.getUserBillingPayment(),t=this.apiService.getUserSubscription();[this.billing,this.sub]=yield Promise.all([e,t])}this.isUnpaid=null!==(t=\"unpaid\"===(null===(e=this.subscription)||void 0===e?void 0:e.status))\u0026\u0026void 0!==t\u0026\u0026t,this.loading=!1}}))}addCredit(){this.showAddCredit=!0}closeAddCredit(e){this.showAddCredit=!1,e\u0026\u0026this.load()}changePayment(){this.showAdjustPayment=!0}closePayment(e){this.showAdjustPayment=!1,e\u0026\u0026this.load()}verifyBank(){return R(this,void 0,void 0,(function*(){if(!this.loading\u0026\u0026this.forOrganization)try{const e=new u;e.amount1=this.verifyBankForm.value.amount1,e.amount2=this.verifyBankForm.value.amount2,this.verifyBankPromise=this.organizationApiService.verifyBank(this.organizationId,e),yield this.verifyBankPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"verifiedBankAccount\")),this.load()}catch(e){this.logService.error(e)}}))}submitTaxInfo(){return R(this,void 0,void 0,(function*(){this.taxFormPromise=this.taxInfo.submitTaxInfo(),yield this.taxFormPromise,this.platformUtilsService.showToast(\"success\",null,this.i18nService.t(\"taxInfoUpdated\"))}))}get isCreditBalance(){return null==this.billing||this.billing.balance\u003c=0}get creditOrBalance(){return Math.abs(null!=this.billing?this.billing.balance:0)}get paymentSource(){return null!=this.billing?this.billing.paymentSource:null}get forOrganization(){return null!=this.organizationId}get headerClass(){return this.forOrganization?[\"page-header\"]:[\"tabbed-header\"]}get paymentSourceClasses(){if(null==this.paymentSource)return[];switch(this.paymentSource.type){case c.Lt.Card:return[\"bwi-credit-card\"];case c.Lt.BankAccount:return[\"bwi-bank\"];case c.Lt.Check:return[\"bwi-money\"];case c.Lt.PayPal:return[\"bwi-paypal text-primary\"];default:return[]}}get subscription(){var e,t,i,n;return null!==(n=null!==(t=null===(e=this.sub)||void 0===e?void 0:e.subscription)\u0026\u0026void 0!==t?t:null===(i=this.org)||void 0===i?void 0:i.subscription)\u0026\u0026void 0!==n?n:null}}ie.ɵfac=function(e){return new(e||ie)(r.Y36(d.s),r.Y36(p.M),r.Y36(h.D),r.Y36(g.P),r.Y36(f.F0),r.Y36(m.$),r.Y36(f.gz),r.Y36(l.qu),r.Y36(y.x))},ie.ɵcmp=r.Xpm({type:ie,selectors:[[\"ng-component\"]],viewQuery:function(e,t){if(1\u0026e\u0026\u0026r.Gf(o.F,5),2\u0026e){let e;r.iGM(e=r.CRH())\u0026\u0026(t.taxInfo=e.first)}},decls:13,vars:7,consts:[[1,\"d-flex\",3,\"ngClass\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",\"class\",\"tw-ml-auto\",3,\"disabled\",\"click\",4,\"ngIf\"],[4,\"ngIf\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",1,\"tw-ml-auto\",3,\"disabled\",\"click\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-refresh\",\"bwi-fw\",3,\"ngClass\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",\"text-muted\",3,\"title\"],[1,\"sr-only\"],[1,\"text-lg\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\",4,\"ngIf\"],[3,\"organizationId\",\"onAdded\",\"onCanceled\",4,\"ngIf\"],[1,\"spaced-header\"],[3,\"organizationId\",\"currentType\",\"onAdjusted\",\"onCanceled\",4,\"ngIf\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"secondary\",3,\"click\"],[3,\"organizationId\",\"onAdded\",\"onCanceled\"],[\"type\",\"warning\",3,\"title\",4,\"ngIf\"],[1,\"bwi\",\"bwi-fw\",3,\"ngClass\"],[\"type\",\"warning\",3,\"title\"],[\"ngNativeValidate\",\"\",1,\"form-inline\",3,\"formGroup\",\"appApiAction\",\"ngSubmit\"],[\"verifyForm\",\"\"],[1,\"tw-mr-2\",\"tw-w-40\"],[\"bitInput\",\"\",\"type\",\"number\",\"step\",\"1\",\"placeholder\",\"xx\",\"formControlName\",\"amount1\"],[\"bitPrefix\",\"\"],[\"bitInput\",\"\",\"type\",\"number\",\"step\",\"1\",\"placeholder\",\"xx\",\"formControlName\",\"amount2\"],[\"type\",\"button\",\"bitButton\",\"\",\"buttonType\",\"primary\",\"type\",\"submit\",1,\"btn-submit\",3,\"disabled\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-spinner\",\"bwi-spin\",3,\"title\"],[3,\"organizationId\",\"currentType\",\"onAdjusted\",\"onCanceled\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\",4,\"ngIf\"],[\"ngNativeValidate\",\"\",3,\"appApiAction\",\"ngSubmit\"],[\"formTax\",\"\"],[\"bitButton\",\"\",\"buttonType\",\"primary\",\"type\",\"submit\",1,\"btn-submit\",3,\"disabled\"]],template:function(e,t){1\u0026e\u0026\u0026(r.TgZ(0,\"div\",0),r._uU(1,\"\\n  \"),r.TgZ(2,\"h1\"),r._uU(3),r.ALo(4,\"i18n\"),r.qZA(),r._uU(5,\"\\n  \"),r.YNc(6,Y,5,7,\"button\",1),r._uU(7,\"\\n\"),r.qZA(),r._uU(8,\"\\n\"),r.YNc(9,z,9,6,\"ng-container\",2),r._uU(10,\"\\n\"),r.YNc(11,te,37,21,\"ng-container\",2),r._uU(12,\"\\n\")),2\u0026e\u0026\u0026(r.Q6J(\"ngClass\",t.headerClass),r.xp6(3),r.hij(\"\\n    \",r.lcZ(4,5,\"paymentMethod\"),\"\\n  \"),r.xp6(3),r.Q6J(\"ngIf\",t.firstLoaded),r.xp6(3),r.Q6J(\"ngIf\",!t.firstLoaded\u0026\u0026t.loading),r.xp6(2),r.Q6J(\"ngIf\",t.billing))},dependencies:[v.mk,v.O5,l.Fj,l.wV,l.JJ,l.JL,l.F,l.sg,l.u,w.b,b.O,U.r,_.d,A.G,Z.xO,x.u,o.F,L,F,v.H9,P.C],encapsulation:2});var ne=i(7644)},42759:(e,t,i)=\u003e{\"use strict\";i.d(t,{p:()=\u003eT});var n=i(54019),s=i(68362),o=i(69485),r=i(71146),a=i(24852),l=i(55602),c=i(66459),u=i(81301),d=i(19419),p=i(98645),h=i(33245),g=i(53707),f=i(85356),m=i(82933),y=function(e,t,i,n){return new(i||(i=Promise))((function(s,o){function r(e){try{l(n.next(e))}catch(t){o(t)}}function a(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((n=n.apply(e,t||[])).next())}))};function v(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",3),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",9),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",10),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",11),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.BankAccount)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(8,3,\"bankAccount\"),\"\")}}function w(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",12),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",13),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",14),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",15),a._uU(7,\" PayPal\"),a.qZA(),a._uU(8,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.PayPal)(\"ngModel\",e.method)}}function b(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",12),a._uU(1,\"\\n    \"),a.TgZ(2,\"input\",16),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw(2);return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw(2);return a.KtG(t.changeMethod())})),a.qZA(),a._uU(3,\"\\n    \"),a.TgZ(4,\"label\",17),a._uU(5,\"\\n      \"),a._UZ(6,\"i\",18),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA()}if(2\u0026e){const e=a.oxw(2);a.xp6(2),a.Q6J(\"value\",e.paymentMethodType.Credit)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(8,3,\"accountCredit\"),\"\")}}function U(e,t){if(1\u0026e){const e=a.EpF();a.TgZ(0,\"div\",2),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",3),a._uU(3,\"\\n    \"),a.TgZ(4,\"input\",4),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.method=t)}))(\"change\",(function(){a.CHM(e);const t=a.oxw();return a.KtG(t.changeMethod())})),a.qZA(),a._uU(5,\"\\n    \"),a.TgZ(6,\"label\",5),a._uU(7,\"\\n      \"),a._UZ(8,\"i\",6),a._uU(9),a.ALo(10,\"i18n\"),a.qZA(),a._uU(11,\"\\n  \"),a.qZA(),a._uU(12,\"\\n  \"),a.YNc(13,v,10,5,\"div\",7),a._uU(14,\"\\n  \"),a.YNc(15,w,9,2,\"div\",8),a._uU(16,\"\\n  \"),a.YNc(17,b,10,5,\"div\",8),a._uU(18,\"\\n\"),a.qZA()}if(2\u0026e){const e=a.oxw();a.xp6(4),a.Q6J(\"value\",e.paymentMethodType.Card)(\"ngModel\",e.method),a.xp6(5),a.hij(\" \",a.lcZ(10,6,\"creditCard\"),\"\"),a.xp6(4),a.Q6J(\"ngIf\",!e.hideBank),a.xp6(2),a.Q6J(\"ngIf\",!e.hidePaypal),a.xp6(2),a.Q6J(\"ngIf\",!e.hideCredit)}}function _(e,t){1\u0026e\u0026\u0026(a.TgZ(0,\"div\",32),a._uU(1,\"\\n      \"),a._UZ(2,\"img\",33),a._uU(3,\"\\n    \"),a.qZA())}function A(e,t){if(1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",19),a._uU(3,\"\\n    \"),a.TgZ(4,\"div\",20),a._uU(5,\"\\n      \"),a.TgZ(6,\"label\",21),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n      \"),a._UZ(10,\"div\",22),a._uU(11,\"\\n    \"),a.qZA(),a._uU(12,\"\\n    \"),a.YNc(13,_,4,0,\"div\",23),a._uU(14,\"\\n    \"),a.TgZ(15,\"div\",20),a._uU(16,\"\\n      \"),a.TgZ(17,\"label\",24),a._uU(18),a.ALo(19,\"i18n\"),a.qZA(),a._uU(20,\"\\n      \"),a._UZ(21,\"div\",25),a._uU(22,\"\\n    \"),a.qZA(),a._uU(23,\"\\n    \"),a.TgZ(24,\"div\",26),a._uU(25,\"\\n      \"),a.TgZ(26,\"div\",27),a._uU(27,\"\\n        \"),a.TgZ(28,\"label\",28),a._uU(29),a.ALo(30,\"i18n\"),a.qZA(),a._uU(31,\"\\n        \"),a.TgZ(32,\"a\",29),a.ALo(33,\"i18n\"),a._uU(34,\"\\n          \"),a._UZ(35,\"i\",30),a._uU(36,\"\\n        \"),a.qZA(),a._uU(37,\"\\n      \"),a.qZA(),a._uU(38,\"\\n      \"),a._UZ(39,\"div\",31),a._uU(40,\"\\n    \"),a.qZA(),a._uU(41,\"\\n  \"),a.qZA(),a._uU(42,\"\\n\"),a.BQk()),2\u0026e){const e=a.oxw();a.xp6(4),a.Q6J(\"ngClass\",e.trialFlow?\"col-5\":\"col-4\"),a.xp6(3),a.Oqu(a.lcZ(8,7,\"number\")),a.xp6(6),a.Q6J(\"ngIf\",!e.trialFlow),a.xp6(2),a.Q6J(\"ngClass\",e.trialFlow?\"col-3\":\"col-4\"),a.xp6(3),a.Oqu(a.lcZ(19,9,\"expiration\")),a.xp6(11),a.hij(\"\\n          \",a.lcZ(30,11,\"securityCode\"),\"\\n        \"),a.xp6(3),a.s9C(\"appA11yTitle\",a.lcZ(33,13,\"learnMore\"))}}function Z(e,t){if(1\u0026e){const e=a.EpF();a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"app-callout\",34),a.ALo(3,\"i18n\"),a._uU(4),a.ALo(5,\"i18n\"),a.ALo(6,\"i18n\"),a.qZA(),a._uU(7,\"\\n  \"),a.TgZ(8,\"div\",19),a._uU(9,\"\\n    \"),a.TgZ(10,\"div\",35),a._uU(11,\"\\n      \"),a.TgZ(12,\"label\",36),a._uU(13),a.ALo(14,\"i18n\"),a.qZA(),a._uU(15,\"\\n      \"),a.TgZ(16,\"input\",37),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.routing_number=t)})),a.qZA(),a._uU(17,\"\\n    \"),a.qZA(),a._uU(18,\"\\n    \"),a.TgZ(19,\"div\",35),a._uU(20,\"\\n      \"),a.TgZ(21,\"label\",38),a._uU(22),a.ALo(23,\"i18n\"),a.qZA(),a._uU(24,\"\\n      \"),a.TgZ(25,\"input\",39),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_number=t)})),a.qZA(),a._uU(26,\"\\n    \"),a.qZA(),a._uU(27,\"\\n    \"),a.TgZ(28,\"div\",35),a._uU(29,\"\\n      \"),a.TgZ(30,\"label\",40),a._uU(31),a.ALo(32,\"i18n\"),a.qZA(),a._uU(33,\"\\n      \"),a.TgZ(34,\"input\",41),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_holder_name=t)})),a.qZA(),a._uU(35,\"\\n    \"),a.qZA(),a._uU(36,\"\\n    \"),a.TgZ(37,\"div\",35),a._uU(38,\"\\n      \"),a.TgZ(39,\"label\",42),a._uU(40),a.ALo(41,\"i18n\"),a.qZA(),a._uU(42,\"\\n      \"),a.TgZ(43,\"select\",43),a.NdJ(\"ngModelChange\",(function(t){a.CHM(e);const i=a.oxw();return a.KtG(i.bank.account_holder_type=t)})),a._uU(44,\"\\n        \"),a.TgZ(45,\"option\",44),a._uU(46),a.ALo(47,\"i18n\"),a.qZA(),a._uU(48,\"\\n        \"),a.TgZ(49,\"option\",45),a._uU(50),a.ALo(51,\"i18n\"),a.qZA(),a._uU(52,\"\\n        \"),a.TgZ(53,\"option\",46),a._uU(54),a.ALo(55,\"i18n\"),a.qZA(),a._uU(56,\"\\n      \"),a.qZA(),a._uU(57,\"\\n    \"),a.qZA(),a._uU(58,\"\\n  \"),a.qZA(),a._uU(59,\"\\n\"),a.BQk()}if(2\u0026e){const e=a.oxw();a.xp6(2),a.s9C(\"title\",a.lcZ(3,14,\"verifyBankAccount\")),a.xp6(2),a.AsE(\"\\n    \",a.lcZ(5,16,\"verifyBankAccountInitialDesc\"),\" \",a.lcZ(6,18,\"verifyBankAccountFailureWarning\"),\"\\n  \"),a.xp6(9),a.Oqu(a.lcZ(14,20,\"routingNumber\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.routing_number),a.xp6(6),a.Oqu(a.lcZ(23,22,\"accountNumber\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_number),a.xp6(6),a.Oqu(a.lcZ(32,24,\"accountHolderName\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_holder_name),a.xp6(6),a.Oqu(a.lcZ(41,26,\"bankAccountType\")),a.xp6(3),a.Q6J(\"ngModel\",e.bank.account_holder_type),a.xp6(3),a.hij(\"-- \",a.lcZ(47,28,\"select\"),\" --\"),a.xp6(4),a.Oqu(a.lcZ(51,30,\"bankAccountTypeCompany\")),a.xp6(4),a.Oqu(a.lcZ(55,32,\"bankAccountTypeIndividual\"))}}function x(e,t){1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"div\",47),a._uU(3,\"\\n    \"),a._UZ(4,\"div\",48),a._uU(5,\"\\n    \"),a.TgZ(6,\"small\",49),a._uU(7),a.ALo(8,\"i18n\"),a.qZA(),a._uU(9,\"\\n  \"),a.qZA(),a._uU(10,\"\\n\"),a.BQk()),2\u0026e\u0026\u0026(a.xp6(7),a.Oqu(a.lcZ(8,1,\"paypalClickSubmit\")))}function S(e,t){1\u0026e\u0026\u0026(a.ynx(0),a._uU(1,\"\\n  \"),a.TgZ(2,\"app-callout\",50),a._uU(3),a.ALo(4,\"i18n\"),a.qZA(),a._uU(5,\"\\n\"),a.BQk()),2\u0026e\u0026\u0026(a.xp6(3),a.hij(\"\\n    \",a.lcZ(4,1,\"makeSureEnoughCredit\"),\"\\n  \"))}class T{constructor(e,t,i){this.apiService=e,this.logService=t,this.themingService=i,this.showMethods=!0,this.showOptions=!0,this.method=o.Lt.Card,this.hideBank=!1,this.hidePaypal=!1,this.hideCredit=!1,this.trialFlow=!1,this.destroy$=new n.x,this.bank={routing_number:null,account_number:null,account_holder_name:null,account_holder_type:\"\",currency:\"USD\",country:\"US\"},this.paymentMethodType=o.Lt,this.btInstance=null,this.stripe=null,this.stripeElements=null,this.stripeCardNumberElement=null,this.stripeCardExpiryElement=null,this.stripeCardCvcElement=null,this.stripeScript=window.document.createElement(\"script\"),this.stripeScript.src=\"https://js.stripe.com/v3/?advancedFraudSignals=false\",this.stripeScript.async=!0,this.stripeScript.onload=()=\u003e{this.stripe=window.Stripe(\"********************************\"),this.stripeElements=this.stripe.elements(),this.setStripeElement()},this.btScript=window.document.createElement(\"script\"),this.btScript.src=\"scripts/dropin.js?cache=mw0sn\",this.btScript.async=!0,this.StripeElementStyle={base:{color:null,fontFamily:'\"Open Sans\", \"Helvetica Neue\", Helvetica, Arial, sans-serif, \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\"',fontSize:\"14px\",fontSmoothing:\"antialiased\",\"::placeholder\":{color:null}},invalid:{color:null}},this.StripeElementClasses={focus:\"is-focused\",empty:\"is-empty\",invalid:\"is-invalid\"}}ngOnInit(){return y(this,void 0,void 0,(function*(){this.showOptions||(this.hidePaypal=this.method!==o.Lt.PayPal,this.hideBank=this.method!==o.Lt.BankAccount,this.hideCredit=this.method!==o.Lt.Credit),this.subscribeToTheme(),window.document.head.appendChild(this.stripeScript),this.hidePaypal||window.document.head.appendChild(this.btScript)}))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),window.document.head.removeChild(this.stripeScript),window.setTimeout((()=\u003e{Array.from(window.document.querySelectorAll(\"iframe\")).forEach((e=\u003e{if(null!=e.src\u0026\u0026e.src.indexOf(\"stripe\")\u003e-1)try{window.document.body.removeChild(e)}catch(t){this.logService.error(t)}}))}),500),this.hidePaypal||(window.document.head.removeChild(this.btScript),window.setTimeout((()=\u003e{Array.from(window.document.head.querySelectorAll(\"script\")).forEach((e=\u003e{if(null!=e.src\u0026\u0026e.src.indexOf(\"paypal\")\u003e-1)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}));const e=window.document.head.querySelector(\"#braintree-dropin-stylesheet\");if(null!=e)try{window.document.head.removeChild(e)}catch(t){this.logService.error(t)}}),500))}changeMethod(){this.btInstance=null,this.method===o.Lt.PayPal?window.setTimeout((()=\u003e{window.braintree.dropin.create({authorization:\"sandbox_r72q8jq6_9pnxkwm75f87sdc2\",container:\"#bt-dropin-container\",paymentOptionPriority:[\"paypal\"],paypal:{flow:\"vault\",buttonStyle:{label:\"pay\",size:\"medium\",shape:\"pill\",color:\"blue\",tagline:\"false\"}}},((e,t)=\u003e{null==e?this.btInstance=t:console.error(e)}))}),250):this.setStripeElement()}createPaymentToken(){return new Promise(((e,t)=\u003e{this.method===o.Lt.Credit?e([null,this.method]):this.method===o.Lt.PayPal?this.btInstance.requestPaymentMethod().then((t=\u003e{e([t.nonce,this.method])})).catch((e=\u003e{t(e.message)})):this.method!==o.Lt.Card\u0026\u0026this.method!==o.Lt.BankAccount||(this.method===o.Lt.Card?this.apiService.postSetupPayment().then((e=\u003ethis.stripe.handleCardSetup(e,this.stripeCardNumberElement))).then((i=\u003e{i.error?t(i.error.message):i.setupIntent\u0026\u0026\"succeeded\"===i.setupIntent.status?e([i.setupIntent.payment_method,this.method]):t()})):this.stripe.createToken(\"bank_account\",this.bank).then((i=\u003e{i.error?t(i.error.message):i.token\u0026\u0026null!=i.token.id?e([i.token.id,this.method]):t()})))}))}handleStripeCardPayment(e,t){return new Promise(((i,n)=\u003e{if(this.showMethods\u0026\u0026null==this.stripeCardNumberElement)return void n();return(()=\u003ethis.showMethods?this.stripe.handleCardSetup(e,this.stripeCardNumberElement):this.stripe.handleCardSetup(e))().then((e=\u003ey(this,void 0,void 0,(function*(){e.error?n(e.error.message):e.paymentIntent\u0026\u0026\"succeeded\"===e.paymentIntent.status?(null!=t\u0026\u0026(yield t()),i()):n()}))))}))}setStripeElement(){window.setTimeout((()=\u003e{this.showMethods\u0026\u0026this.method===o.Lt.Card\u0026\u0026(null==this.stripeCardNumberElement\u0026\u0026(this.stripeCardNumberElement=this.stripeElements.create(\"cardNumber\",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:\"\"})),null==this.stripeCardExpiryElement\u0026\u0026(this.stripeCardExpiryElement=this.stripeElements.create(\"cardExpiry\",{style:this.StripeElementStyle,classes:this.StripeElementClasses})),null==this.stripeCardCvcElement\u0026\u0026(this.stripeCardCvcElement=this.stripeElements.create(\"cardCvc\",{style:this.StripeElementStyle,classes:this.StripeElementClasses,placeholder:\"\"})),this.stripeCardNumberElement.mount(\"#stripe-card-number-element\"),this.stripeCardExpiryElement.mount(\"#stripe-card-expiry-element\"),this.stripeCardCvcElement.mount(\"#stripe-card-cvc-element\"))}),50)}subscribeToTheme(){this.themingService.theme$.pipe((0,s.R)(this.destroy$)).subscribe((()=\u003e{const e=getComputedStyle(document.documentElement);this.StripeElementStyle.base.color=`rgb(${e.getPropertyValue(\"--color-text-main\")})`,this.StripeElementStyle.base[\"::placeholder\"].color=`rgb(${e.getPropertyValue(\"--color-text-muted\")})`,this.StripeElementStyle.invalid.color=`rgb(${e.getPropertyValue(\"--color-text-main\")})`,this.StripeElementStyle.invalid.borderColor=`rgb(${e.getPropertyValue(\"--color-danger-500\")})`}))}}T.ɵfac=function(e){return new(e||T)(a.Y36(l.s),a.Y36(c.$),a.Y36(u.v))},T.ɵcmp=a.Xpm({type:T,selectors:[[\"app-payment\"]],inputs:{showMethods:\"showMethods\",showOptions:\"showOptions\",method:\"method\",hideBank:\"hideBank\",hidePaypal:\"hidePaypal\",hideCredit:\"hideCredit\",trialFlow:\"trialFlow\"},standalone:!0,features:[a.jDz],decls:10,vars:5,consts:[[\"class\",\"mb-4 text-lg\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"mb-4\",\"text-lg\"],[1,\"form-check\",\"form-check-inline\",\"mr-4\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-card\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-card\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-credit-card\"],[\"class\",\"form-check form-check-inline mr-4\",4,\"ngIf\"],[\"class\",\"form-check form-check-inline\",4,\"ngIf\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-bank\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-bank\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-bank\"],[1,\"form-check\",\"form-check-inline\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-paypal\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-paypal\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-paypal\"],[\"type\",\"radio\",\"name\",\"Method\",\"id\",\"method-credit\",1,\"form-check-input\",3,\"value\",\"ngModel\",\"ngModelChange\",\"change\"],[\"for\",\"method-credit\",1,\"form-check-label\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-fw\",\"bwi-dollar\"],[1,\"row\"],[1,\"form-group\",3,\"ngClass\"],[\"for\",\"stripe-card-number-element\"],[\"id\",\"stripe-card-number-element\",1,\"form-control\",\"stripe-form-control\"],[\"class\",\"form-group col-8 d-flex align-items-end\",4,\"ngIf\"],[\"for\",\"stripe-card-expiry-element\"],[\"id\",\"stripe-card-expiry-element\",1,\"form-control\",\"stripe-form-control\"],[1,\"form-group\",\"col-4\"],[1,\"d-flex\"],[\"for\",\"stripe-card-cvc-element\"],[\"href\",\"https://www.cvvnumber.com/cvv.html\",\"tabindex\",\"-1\",\"target\",\"_blank\",\"rel\",\"noopener noreferrer\",1,\"ml-auto\",3,\"appA11yTitle\"],[\"aria-hidden\",\"true\",1,\"bwi\",\"bwi-question-circle\"],[\"id\",\"stripe-card-cvc-element\",1,\"form-control\",\"stripe-form-control\"],[1,\"form-group\",\"col-8\",\"d-flex\",\"align-items-end\"],[\"src\",\"../../images/cards.png\",\"alt\",\"Visa, MasterCard, Discover, AmEx, JCB, Diners Club, UnionPay\",\"width\",\"323\",\"height\",\"32\"],[\"type\",\"warning\",3,\"title\"],[1,\"form-group\",\"col-6\"],[\"for\",\"routing_number\"],[\"id\",\"routing_number\",\"type\",\"text\",\"name\",\"routing_number\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_number\"],[\"id\",\"account_number\",\"type\",\"text\",\"name\",\"account_number\",\"required\",\"\",\"appInputVerbatim\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_holder_name\"],[\"id\",\"account_holder_name\",\"type\",\"text\",\"name\",\"account_holder_name\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"for\",\"account_holder_type\"],[\"id\",\"account_holder_type\",\"name\",\"account_holder_type\",\"required\",\"\",1,\"form-control\",3,\"ngModel\",\"ngModelChange\"],[\"value\",\"\"],[\"value\",\"company\"],[\"value\",\"individual\"],[1,\"mb-3\"],[\"id\",\"bt-dropin-container\",1,\"mb-1\"],[1,\"text-muted\"],[\"type\",\"note\"]],template:function(e,t){1\u0026e\u0026\u0026(a.YNc(0,U,19,8,\"div\",0),a._uU(1,\"\\n\"),a.YNc(2,A,43,15,\"ng-container\",1),a._uU(3,\"\\n\"),a.YNc(4,Z,60,34,\"ng-container\",1),a._uU(5,\"\\n\"),a.YNc(6,x,11,3,\"ng-container\",1),a._uU(7,\"\\n\"),a.YNc(8,S,6,3,\"ng-container\",1),a._uU(9,\"\\n\")),2\u0026e\u0026\u0026(a.Q6J(\"ngIf\",t.showOptions\u0026\u0026t.showMethods),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.Card),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.BankAccount),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.PayPal),a.xp6(2),a.Q6J(\"ngIf\",t.showMethods\u0026\u0026t.method===t.paymentMethodType.Credit))},dependencies:[r.m,d.mk,d.O5,p.YN,p.Kr,p.Fj,p.EJ,p._,p.JJ,p.Q7,p.On,h.B,g.O,f.b,m.C],encapsulation:2})},7644:(e,t,i)=\u003e{\"use strict\";i.d(t,{G:()=\u003eL,D:()=\u003eN});var n=i(98645),s=i(54019),o=i(53634),r=i(68362),a=i(87264);const l=i(66997).W4`",
                "FirstCause": true,
                "LastCause": true
              },
              {
                "Number": 2,
                "Content": "  \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 580 104\" fill=\"none\"\u003e\u003cpath fill=\"#fff\" d=\"M102.539 52.27c0 28.315-22.954 51.269-51.27 51.269C22.955 103.539 0 80.585 0 52.269 0 23.955 22.954 1 51.27 1c28.315 0 51.269 22.954 51.269 51.27Z\"/\u003e\u003cpath fill=\"#175DDC\" fill-rule=\"evenodd\" d=\"M75.971 26.765c-.516-.49-1.111-.777-1.786-.777H28.39c-.675 0-1.31.287-1.786.777-.516.49-.754 1.145-.754 1.84v31.47c0 2.371.437 4.66 1.31 6.95.873 2.288 1.984 4.332 3.294 6.13s2.897 3.515 4.682 5.232a62.036 62.036 0 0 0 5 4.25 82.731 82.731 0 0 0 4.802 3.188c1.667.981 2.857 1.676 3.572 2.003.714.368 1.27.613 1.706.817a2.26 2.26 0 0 0 1.032.246 2.26 2.26 0 0 0 1.032-.246c.436-.204.992-.45 1.706-.817.715-.368 1.905-1.022 3.572-2.003a54.848 54.848 0 0 0 4.801-3.188c1.548-1.103 3.215-2.534 5.04-4.25 1.826-1.717 3.373-3.434 4.683-5.232 1.31-1.798 2.42-3.842 3.294-6.13.912-2.29 1.31-4.62 1.31-6.95v-31.47c.04-.695-.239-1.309-.715-1.84Zm-5.913 33.597c0 11.403-18.77 21.172-18.77 21.172V32.732h18.77v27.63Z\" clip-rule=\"evenodd\"/\u003e\u003cpath fill=\"#fff\" d=\"M142.208 70.81c-2.804 0-5.243-.511-7.319-1.533-2.075-1.023-3.678-2.447-4.806-4.272-1.129-1.826-1.694-3.943-1.694-6.353h4.807c0 1.497.346 2.884 1.038 4.162.692 1.241 1.693 2.246 3.004 3.012 1.347.73 3.004 1.096 4.97 1.096 2.585 0 4.588-.621 6.008-1.862 1.42-1.242 2.13-2.794 2.13-4.656 0-1.533-.327-2.756-.983-3.669-.655-.95-1.547-1.716-2.676-2.3-1.092-.585-2.367-1.096-3.823-1.534a126.43 126.43 0 0 1-4.479-1.479c-2.95-1.022-5.134-2.281-6.555-3.778-1.42-1.534-2.13-3.524-2.13-5.97-.036-2.045.437-3.852 1.42-5.422.984-1.607 2.367-2.848 4.151-3.724 1.821-.913 3.969-1.37 6.446-1.37 2.439 0 4.551.457 6.335 1.37 1.821.913 3.223 2.172 4.206 3.779 1.02 1.606 1.548 3.432 1.584 5.476h-4.806c0-1.058-.274-2.099-.82-3.121-.546-1.06-1.383-1.917-2.512-2.574-1.093-.658-2.476-.986-4.151-.986-2.076-.037-3.787.493-5.135 1.588-1.31 1.095-1.966 2.61-1.966 4.546 0 1.643.455 2.903 1.366 3.779.946.876 2.257 1.606 3.932 2.19 1.675.548 3.605 1.187 5.79 1.917 1.821.657 3.459 1.424 4.916 2.3 1.456.877 2.585 2.009 3.386 3.396.838 1.388 1.256 3.158 1.256 5.313 0 1.825-.473 3.56-1.42 5.203-.946 1.606-2.385 2.92-4.315 3.943-1.893 1.022-4.278 1.533-7.155 1.533ZM172.42 70.81c-2.586 0-4.88-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.694-4.619-1.694-7.503 0-2.848.565-5.331 1.694-7.449 1.128-2.154 2.694-3.815 4.697-4.983 2.039-1.205 4.388-1.808 7.046-1.808 2.622 0 4.879.603 6.773 1.807 1.93 1.169 3.404 2.72 4.424 4.656a13.201 13.201 0 0 1 1.529 6.243c0 .402-.018.803-.054 1.205v1.37h-21.575c.109 2.08.582 3.815 1.42 5.202.874 1.351 1.948 2.373 3.222 3.067a8.754 8.754 0 0 0 4.152 1.04c1.893 0 3.477-.437 4.751-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.205 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.845 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.042c-.11-2.446-.947-4.363-2.513-5.75-1.566-1.388-3.495-2.081-5.789-2.081ZM202.697 70.81c-2.585 0-4.916-.584-6.991-1.752-2.039-1.205-3.66-2.867-4.861-4.984-1.166-2.154-1.748-4.655-1.748-7.503s.582-5.331 1.748-7.449c1.201-2.154 2.822-3.815 4.861-4.983 2.075-1.205 4.406-1.808 6.991-1.808 3.204 0 5.899.84 8.084 2.52 2.221 1.679 3.623 3.924 4.206 6.736h-4.698c-.364-1.68-1.256-2.976-2.676-3.889-1.42-.949-3.077-1.424-4.97-1.424-1.53 0-2.968.384-4.315 1.15-1.348.767-2.44 1.917-3.278 3.45-.837 1.534-1.256 3.433-1.256 5.697 0 2.263.419 4.162 1.256 5.696.838 1.533 1.93 2.701 3.278 3.505a8.584 8.584 0 0 0 4.315 1.15c1.893 0 3.55-.457 4.97-1.37 1.42-.949 2.312-2.282 2.676-3.998h4.698c-.547 2.739-1.93 4.966-4.152 6.682-2.221 1.716-4.934 2.574-8.138 2.574ZM220.302 70.153V42.988h4.151l.382 5.203c.838-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.347.548-2.422 1.497-3.223 2.848-.801 1.35-1.201 3.213-1.201 5.586v13.692h-4.588ZM250.218 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.698-4.983 2.039-1.205 4.387-1.808 7.045-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.018.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.421 5.202.874 1.351 1.948 2.373 3.222 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.66 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.946-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM277.841 70.153c-2.476 0-4.424-.603-5.844-1.807-1.42-1.205-2.13-3.378-2.13-6.518V46.877h-4.698v-3.889h4.698l.601-6.517h3.987v6.517h7.974v3.889h-7.974v14.951c0 1.716.346 2.885 1.038 3.505.691.585 1.911.877 3.659.877h2.84v3.943h-4.151ZM297.544 70.81c-3.241 0-5.936-.821-8.084-2.464-2.149-1.643-3.405-3.87-3.769-6.682h4.697c.292 1.424 1.038 2.665 2.24 3.724 1.238 1.022 2.895 1.534 4.97 1.534 1.93 0 3.35-.402 4.26-1.205.911-.84 1.366-1.826 1.366-2.958 0-1.643-.601-2.738-1.803-3.286-1.165-.547-2.822-1.04-4.97-1.478a28.114 28.114 0 0 1-4.369-1.26c-1.457-.548-2.677-1.315-3.66-2.3-.983-1.023-1.475-2.355-1.475-3.998 0-2.373.874-4.309 2.622-5.806 1.784-1.533 4.188-2.3 7.21-2.3 2.876 0 5.225.73 7.046 2.19 1.857 1.425 2.931 3.47 3.222 6.135h-4.533c-.182-1.388-.783-2.465-1.803-3.231-.983-.804-2.312-1.205-3.987-1.205-1.638 0-2.913.346-3.823 1.04-.874.694-1.311 1.607-1.311 2.739 0 1.095.564 1.953 1.693 2.574 1.165.62 2.731 1.15 4.697 1.588 1.675.365 3.259.821 4.752 1.37 1.53.51 2.768 1.295 3.714 2.354.984 1.022 1.475 2.52 1.475 4.491.037 2.446-.892 4.473-2.785 6.08-1.857 1.57-4.388 2.354-7.592 2.354ZM327.019 70.153V31.816h5.353l13.764 26.726 13.655-26.726h5.407v38.337h-4.588V40.031l-12.781 24.645h-3.441l-12.781-24.59v30.067h-4.588ZM380.911 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.604-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.332.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.765 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.695 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.53 1.26 4.424 1.26ZM400.356 70.153V42.988h4.151l.273 4.875a9.86 9.86 0 0 1 3.769-4.053c1.639-.986 3.496-1.479 5.571-1.479 3.205 0 5.754.986 7.647 2.958 1.93 1.935 2.895 4.929 2.895 8.981v15.883h-4.588v-15.39c0-5.659-2.331-8.489-6.991-8.489-2.331 0-4.279.858-5.845 2.575-1.529 1.679-2.294 4.089-2.294 7.229v14.075h-4.588ZM439.533 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.603-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.331.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.764 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.694 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.531 1.26 4.424 1.26ZM469.684 61.61c-1.53 0-2.931-.202-4.206-.603l-2.731 2.574c.401.292.892.548 1.475.767.619.182 1.493.365 2.622.547 1.128.146 2.712.31 4.751.493 3.642.256 6.245 1.096 7.811 2.52 1.566 1.424 2.349 3.286 2.349 5.586 0 1.57-.437 3.067-1.311 4.49-.838 1.425-2.149 2.593-3.933 3.506-1.748.913-4.005 1.369-6.773 1.369-2.439 0-4.606-.329-6.499-.986-1.894-.62-3.369-1.588-4.425-2.903-1.055-1.277-1.583-2.902-1.583-4.874 0-1.022.273-2.136.819-3.34.546-1.169 1.566-2.282 3.059-3.341a13.725 13.725 0 0 1-2.076-1.041 13.173 13.173 0 0 1-1.529-1.314V63.8l4.642-4.6c-2.148-1.826-3.222-4.236-3.222-7.23 0-1.789.418-3.414 1.256-4.874.837-1.46 2.057-2.61 3.66-3.45 1.602-.877 3.55-1.315 5.844-1.315 1.566 0 2.986.22 4.26.657h9.995v3.45l-5.079.22c1.056 1.533 1.584 3.304 1.584 5.312 0 1.79-.437 3.414-1.311 4.874-.838 1.461-2.057 2.63-3.66 3.506-1.565.84-3.495 1.26-5.789 1.26Zm0-3.78c1.93 0 3.459-.493 4.588-1.478 1.165-1.023 1.748-2.483 1.748-4.382 0-1.862-.583-3.286-1.748-4.272-1.129-1.022-2.658-1.533-4.588-1.533-1.967 0-3.532.511-4.698 1.533-1.128.986-1.693 2.41-1.693 4.272 0 1.899.565 3.36 1.693 4.382 1.166.985 2.731 1.478 4.698 1.478Zm-7.975 15.828c0 1.826.765 3.177 2.294 4.053 1.53.913 3.441 1.37 5.735 1.37 2.258 0 4.06-.494 5.408-1.48 1.383-.986 2.075-2.3 2.075-3.943 0-1.168-.473-2.19-1.42-3.067-.947-.84-2.694-1.332-5.243-1.479-2.003-.146-3.733-.328-5.189-.547-1.493.803-2.476 1.661-2.95 2.574-.473.95-.71 1.789-.71 2.52ZM499.136 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.697-4.983 2.04-1.205 4.388-1.808 7.046-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.019.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.42 5.202.874 1.351 1.949 2.373 3.223 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.274-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.947-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM516.96 70.153V42.988h4.151l.383 5.203c.837-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.348.548-2.422 1.497-3.223 2.848-.801 1.35-1.202 3.213-1.202 5.586v13.692h-4.588Z\"/\u003e\u003c/svg\u003e",
                "IsCause": false,
                "Annotation": "",
                "Truncated": false,
                "Highlighted": "  \u003csvg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 580 104\" fill=\"none\"\u003e\u003cpath fill=\"#fff\" d=\"M102.539 52.27c0 28.315-22.954 51.269-51.27 51.269C22.955 103.539 0 80.585 0 52.269 0 23.955 22.954 1 51.27 1c28.315 0 51.269 22.954 51.269 51.27Z\"/\u003e\u003cpath fill=\"#175DDC\" fill-rule=\"evenodd\" d=\"M75.971 26.765c-.516-.49-1.111-.777-1.786-.777H28.39c-.675 0-1.31.287-1.786.777-.516.49-.754 1.145-.754 1.84v31.47c0 2.371.437 4.66 1.31 6.95.873 2.288 1.984 4.332 3.294 6.13s2.897 3.515 4.682 5.232a62.036 62.036 0 0 0 5 4.25 82.731 82.731 0 0 0 4.802 3.188c1.667.981 2.857 1.676 3.572 2.003.714.368 1.27.613 1.706.817a2.26 2.26 0 0 0 1.032.246 2.26 2.26 0 0 0 1.032-.246c.436-.204.992-.45 1.706-.817.715-.368 1.905-1.022 3.572-2.003a54.848 54.848 0 0 0 4.801-3.188c1.548-1.103 3.215-2.534 5.04-4.25 1.826-1.717 3.373-3.434 4.683-5.232 1.31-1.798 2.42-3.842 3.294-6.13.912-2.29 1.31-4.62 1.31-6.95v-31.47c.04-.695-.239-1.309-.715-1.84Zm-5.913 33.597c0 11.403-18.77 21.172-18.77 21.172V32.732h18.77v27.63Z\" clip-rule=\"evenodd\"/\u003e\u003cpath fill=\"#fff\" d=\"M142.208 70.81c-2.804 0-5.243-.511-7.319-1.533-2.075-1.023-3.678-2.447-4.806-4.272-1.129-1.826-1.694-3.943-1.694-6.353h4.807c0 1.497.346 2.884 1.038 4.162.692 1.241 1.693 2.246 3.004 3.012 1.347.73 3.004 1.096 4.97 1.096 2.585 0 4.588-.621 6.008-1.862 1.42-1.242 2.13-2.794 2.13-4.656 0-1.533-.327-2.756-.983-3.669-.655-.95-1.547-1.716-2.676-2.3-1.092-.585-2.367-1.096-3.823-1.534a126.43 126.43 0 0 1-4.479-1.479c-2.95-1.022-5.134-2.281-6.555-3.778-1.42-1.534-2.13-3.524-2.13-5.97-.036-2.045.437-3.852 1.42-5.422.984-1.607 2.367-2.848 4.151-3.724 1.821-.913 3.969-1.37 6.446-1.37 2.439 0 4.551.457 6.335 1.37 1.821.913 3.223 2.172 4.206 3.779 1.02 1.606 1.548 3.432 1.584 5.476h-4.806c0-1.058-.274-2.099-.82-3.121-.546-1.06-1.383-1.917-2.512-2.574-1.093-.658-2.476-.986-4.151-.986-2.076-.037-3.787.493-5.135 1.588-1.31 1.095-1.966 2.61-1.966 4.546 0 1.643.455 2.903 1.366 3.779.946.876 2.257 1.606 3.932 2.19 1.675.548 3.605 1.187 5.79 1.917 1.821.657 3.459 1.424 4.916 2.3 1.456.877 2.585 2.009 3.386 3.396.838 1.388 1.256 3.158 1.256 5.313 0 1.825-.473 3.56-1.42 5.203-.946 1.606-2.385 2.92-4.315 3.943-1.893 1.022-4.278 1.533-7.155 1.533ZM172.42 70.81c-2.586 0-4.88-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.694-4.619-1.694-7.503 0-2.848.565-5.331 1.694-7.449 1.128-2.154 2.694-3.815 4.697-4.983 2.039-1.205 4.388-1.808 7.046-1.808 2.622 0 4.879.603 6.773 1.807 1.93 1.169 3.404 2.72 4.424 4.656a13.201 13.201 0 0 1 1.529 6.243c0 .402-.018.803-.054 1.205v1.37h-21.575c.109 2.08.582 3.815 1.42 5.202.874 1.351 1.948 2.373 3.222 3.067a8.754 8.754 0 0 0 4.152 1.04c1.893 0 3.477-.437 4.751-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.205 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.845 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.042c-.11-2.446-.947-4.363-2.513-5.75-1.566-1.388-3.495-2.081-5.789-2.081ZM202.697 70.81c-2.585 0-4.916-.584-6.991-1.752-2.039-1.205-3.66-2.867-4.861-4.984-1.166-2.154-1.748-4.655-1.748-7.503s.582-5.331 1.748-7.449c1.201-2.154 2.822-3.815 4.861-4.983 2.075-1.205 4.406-1.808 6.991-1.808 3.204 0 5.899.84 8.084 2.52 2.221 1.679 3.623 3.924 4.206 6.736h-4.698c-.364-1.68-1.256-2.976-2.676-3.889-1.42-.949-3.077-1.424-4.97-1.424-1.53 0-2.968.384-4.315 1.15-1.348.767-2.44 1.917-3.278 3.45-.837 1.534-1.256 3.433-1.256 5.697 0 2.263.419 4.162 1.256 5.696.838 1.533 1.93 2.701 3.278 3.505a8.584 8.584 0 0 0 4.315 1.15c1.893 0 3.55-.457 4.97-1.37 1.42-.949 2.312-2.282 2.676-3.998h4.698c-.547 2.739-1.93 4.966-4.152 6.682-2.221 1.716-4.934 2.574-8.138 2.574ZM220.302 70.153V42.988h4.151l.382 5.203c.838-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.347.548-2.422 1.497-3.223 2.848-.801 1.35-1.201 3.213-1.201 5.586v13.692h-4.588ZM250.218 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.698-4.983 2.039-1.205 4.387-1.808 7.045-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.018.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.421 5.202.874 1.351 1.948 2.373 3.222 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.275-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.66 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.946-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM277.841 70.153c-2.476 0-4.424-.603-5.844-1.807-1.42-1.205-2.13-3.378-2.13-6.518V46.877h-4.698v-3.889h4.698l.601-6.517h3.987v6.517h7.974v3.889h-7.974v14.951c0 1.716.346 2.885 1.038 3.505.691.585 1.911.877 3.659.877h2.84v3.943h-4.151ZM297.544 70.81c-3.241 0-5.936-.821-8.084-2.464-2.149-1.643-3.405-3.87-3.769-6.682h4.697c.292 1.424 1.038 2.665 2.24 3.724 1.238 1.022 2.895 1.534 4.97 1.534 1.93 0 3.35-.402 4.26-1.205.911-.84 1.366-1.826 1.366-2.958 0-1.643-.601-2.738-1.803-3.286-1.165-.547-2.822-1.04-4.97-1.478a28.114 28.114 0 0 1-4.369-1.26c-1.457-.548-2.677-1.315-3.66-2.3-.983-1.023-1.475-2.355-1.475-3.998 0-2.373.874-4.309 2.622-5.806 1.784-1.533 4.188-2.3 7.21-2.3 2.876 0 5.225.73 7.046 2.19 1.857 1.425 2.931 3.47 3.222 6.135h-4.533c-.182-1.388-.783-2.465-1.803-3.231-.983-.804-2.312-1.205-3.987-1.205-1.638 0-2.913.346-3.823 1.04-.874.694-1.311 1.607-1.311 2.739 0 1.095.564 1.953 1.693 2.574 1.165.62 2.731 1.15 4.697 1.588 1.675.365 3.259.821 4.752 1.37 1.53.51 2.768 1.295 3.714 2.354.984 1.022 1.475 2.52 1.475 4.491.037 2.446-.892 4.473-2.785 6.08-1.857 1.57-4.388 2.354-7.592 2.354ZM327.019 70.153V31.816h5.353l13.764 26.726 13.655-26.726h5.407v38.337h-4.588V40.031l-12.781 24.645h-3.441l-12.781-24.59v30.067h-4.588ZM380.911 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.604-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.332.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.765 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.695 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.53 1.26 4.424 1.26ZM400.356 70.153V42.988h4.151l.273 4.875a9.86 9.86 0 0 1 3.769-4.053c1.639-.986 3.496-1.479 5.571-1.479 3.205 0 5.754.986 7.647 2.958 1.93 1.935 2.895 4.929 2.895 8.981v15.883h-4.588v-15.39c0-5.659-2.331-8.489-6.991-8.489-2.331 0-4.279.858-5.845 2.575-1.529 1.679-2.294 4.089-2.294 7.229v14.075h-4.588ZM439.533 70.81c-2.258 0-4.133-.383-5.626-1.15-1.493-.767-2.603-1.789-3.332-3.067a8.266 8.266 0 0 1-1.092-4.162c0-2.775 1.056-4.911 3.168-6.408 2.112-1.497 4.988-2.245 8.63-2.245h7.319v-.33c0-2.372-.619-4.161-1.857-5.366-1.238-1.242-2.895-1.862-4.971-1.862-1.784 0-3.331.456-4.642 1.369-1.275.876-2.076 2.172-2.404 3.888h-4.697c.182-1.971.838-3.633 1.966-4.983 1.166-1.352 2.604-2.374 4.315-3.068 1.712-.73 3.532-1.095 5.462-1.095 3.787 0 6.627 1.022 8.521 3.067 1.93 2.008 2.895 4.692 2.895 8.05v16.705h-4.097l-.273-4.874c-.764 1.533-1.893 2.848-3.386 3.943-1.457 1.059-3.423 1.588-5.899 1.588Zm.71-3.888c1.748 0 3.241-.457 4.479-1.37a8.66 8.66 0 0 0 2.895-3.56c.655-1.46.983-2.993.983-4.6v-.055h-6.937c-2.694 0-4.606.475-5.735 1.424-1.092.913-1.639 2.063-1.639 3.45 0 1.425.51 2.575 1.53 3.451 1.056.84 2.531 1.26 4.424 1.26ZM469.684 61.61c-1.53 0-2.931-.202-4.206-.603l-2.731 2.574c.401.292.892.548 1.475.767.619.182 1.493.365 2.622.547 1.128.146 2.712.31 4.751.493 3.642.256 6.245 1.096 7.811 2.52 1.566 1.424 2.349 3.286 2.349 5.586 0 1.57-.437 3.067-1.311 4.49-.838 1.425-2.149 2.593-3.933 3.506-1.748.913-4.005 1.369-6.773 1.369-2.439 0-4.606-.329-6.499-.986-1.894-.62-3.369-1.588-4.425-2.903-1.055-1.277-1.583-2.902-1.583-4.874 0-1.022.273-2.136.819-3.34.546-1.169 1.566-2.282 3.059-3.341a13.725 13.725 0 0 1-2.076-1.041 13.173 13.173 0 0 1-1.529-1.314V63.8l4.642-4.6c-2.148-1.826-3.222-4.236-3.222-7.23 0-1.789.418-3.414 1.256-4.874.837-1.46 2.057-2.61 3.66-3.45 1.602-.877 3.55-1.315 5.844-1.315 1.566 0 2.986.22 4.26.657h9.995v3.45l-5.079.22c1.056 1.533 1.584 3.304 1.584 5.312 0 1.79-.437 3.414-1.311 4.874-.838 1.461-2.057 2.63-3.66 3.506-1.565.84-3.495 1.26-5.789 1.26Zm0-3.78c1.93 0 3.459-.493 4.588-1.478 1.165-1.023 1.748-2.483 1.748-4.382 0-1.862-.583-3.286-1.748-4.272-1.129-1.022-2.658-1.533-4.588-1.533-1.967 0-3.532.511-4.698 1.533-1.128.986-1.693 2.41-1.693 4.272 0 1.899.565 3.36 1.693 4.382 1.166.985 2.731 1.478 4.698 1.478Zm-7.975 15.828c0 1.826.765 3.177 2.294 4.053 1.53.913 3.441 1.37 5.735 1.37 2.258 0 4.06-.494 5.408-1.48 1.383-.986 2.075-2.3 2.075-3.943 0-1.168-.473-2.19-1.42-3.067-.947-.84-2.694-1.332-5.243-1.479-2.003-.146-3.733-.328-5.189-.547-1.493.803-2.476 1.661-2.95 2.574-.473.95-.71 1.789-.71 2.52ZM499.136 70.81c-2.585 0-4.879-.584-6.882-1.752-2.003-1.205-3.587-2.867-4.752-4.984-1.129-2.118-1.693-4.619-1.693-7.503 0-2.848.564-5.331 1.693-7.449 1.129-2.154 2.695-3.815 4.697-4.983 2.04-1.205 4.388-1.808 7.046-1.808 2.622 0 4.88.603 6.773 1.807 1.93 1.169 3.405 2.72 4.424 4.656 1.02 1.935 1.53 4.016 1.53 6.243 0 .402-.019.803-.055 1.205v1.37h-21.575c.11 2.08.583 3.815 1.42 5.202.874 1.351 1.949 2.373 3.223 3.067a8.753 8.753 0 0 0 4.151 1.04c1.894 0 3.478-.437 4.752-1.314 1.274-.876 2.203-2.063 2.786-3.56h4.533c-.728 2.52-2.13 4.62-4.206 6.299-2.039 1.643-4.661 2.464-7.865 2.464Zm0-24.59c-2.185 0-4.133.675-5.844 2.026-1.675 1.314-2.64 3.25-2.895 5.805h17.041c-.109-2.446-.947-4.363-2.512-5.75-1.566-1.388-3.496-2.081-5.79-2.081ZM516.96 70.153V42.988h4.151l.383 5.203c.837-1.789 2.112-3.213 3.823-4.272 1.712-1.058 3.824-1.588 6.336-1.588v4.82h-1.256c-1.602 0-3.077.292-4.424.876-1.348.548-2.422 1.497-3.223 2.848-.801 1.35-1.202 3.213-1.202 5.586v13.692h-4.588Z\"/\u003e\u003c/svg\u003e",
                "FirstCause": false,
                "LastCause": false
              }
            ]
          },
          "Match": "=\u003e{this.stripe=window.Stripe(\"********************************\"),this.stripeElemen",
          "Layer": {
            "Digest": "sha256:127b9165754a3cf11438c53fe0f648c39c27b112242df3600ebd2aebaea405a5",
            "DiffID": "sha256:c9a5dd8fad27a0fb5a331277cf36839a6ed8c45a81d3f101cf89496a241d4aab",
            "CreatedBy": "COPY /web-vault ./web-vault # buildkit"
          }
        }
      ]
    }
  ]
}
